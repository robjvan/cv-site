import{$ as ul,$a as Eo,A as Fn,Aa as ii,Ab as _h,B as yo,Ba as $e,Bb as bh,C as be,Ca as Ao,Cb as yh,D as Zm,Da as Po,Db as wh,E as Oa,Ea as vu,Eb as zv,F as Ti,Fa as kv,Fb as Uv,G as Ci,Ga as mh,Gb as Wv,H as mu,Ha as Ps,Hb as Sh,I as Km,Ia as as,Ib as Hv,J as ph,Ja as os,Jb as Xv,K as kr,Ka as _u,Kb as jv,L as an,La as bu,M as Nn,Ma as gh,N as Xs,Na as Ae,O as Dn,Oa as us,Ob as Tu,P as $m,Pa as Ss,Pb as Cu,Q as Li,Qa as Jm,Qb as Au,R as Nc,Ra as Ir,S as Sv,Sa as Lr,T as Mv,Ta as Dr,U as wo,Ua as gr,V as Tv,Va as Qn,W as So,Wa as yu,X as dl,Xa as wu,Y as _e,Ya as Qm,Z as Mo,Za as tg,_ as To,a as As,aa as Fi,ab as Yn,b as pr,ba as Co,bb as pa,c as pi,ca as gu,cb as Iv,d as ir,da as Cv,db as Lv,e as jm,ea as li,eb as eg,f as _v,fa as Tn,fb as nr,g as dh,ga as Rn,gb as fa,h as Ba,ha as ua,hb as Su,i as pu,ia as ji,ib as ma,j as bv,ja as Av,jb as Dv,k as yv,ka as Jn,kb as Rv,l as wv,la as qe,lb as Fv,m as _o,ma as Wn,mb as On,n as Er,na as Bn,nb as Nv,o as Ym,oa as fh,p as bo,pa as Qi,pb as Bv,q as Gr,qa as pl,r as Gm,ra as fr,s as qm,sa as mr,t as uh,ta as Xt,u as da,ua as Jt,ub as Ov,v as Fc,va as Ue,vb as Vn,w as Gi,wa as Pv,wb as Mu,x as fu,xa as Ev,xb as Vv,y as Hi,ya as xu,yb as xh,z as Mn,za as cn,zb as vh}from"./chunk-TEYPA6ZJ.js";import{a as yn}from"./chunk-FK6H3RFT.js";import{a as ds,d as uw,e as du,f as uu}from"./chunk-4IDNTCH7.js";var w_=uw((x3,Ou)=>{"use strict";(function(){function n(B,Y){B.prototype=t(Y.prototype),B.prototype.constructor=B,B.base=Y.prototype}function t(B){function Y(){}return Y.prototype=B,new Y}function e(B,Y,q){return q==="millisecond"?B.setMilliseconds(B.getMilliseconds()+1*Y):q==="second"?B.setSeconds(B.getSeconds()+1*Y):q==="minute"?B.setMinutes(B.getMinutes()+1*Y):q==="hour"?B.setHours(B.getHours()+1*Y):q==="day"?B.setDate(B.getDate()+1*Y):q==="week"?B.setDate(B.getDate()+7*Y):q==="month"?B.setMonth(B.getMonth()+1*Y):q==="year"&&B.setFullYear(B.getFullYear()+1*Y),B}function i(B,Y){var q=!1;for(0>B&&(q=!0,B*=-1),B=""+B,Y=Y||1;B.length<Y;)B="0"+B;return q?"-"+B:B}function s(B){if(!B)return B;B=B.replace(/^\s\s*/,"");for(var Y=/\s/,q=B.length;Y.test(B.charAt(--q)););return B.slice(0,q+1)}function a(B){B.roundRect=function(Y,q,It,Rt,jt,Ot,re,Ve){re&&(this.fillStyle=re),Ve&&(this.strokeStyle=Ve),typeof jt>"u"&&(jt=5),jt=Math.min(jt,Math.min(It,Rt)/2),this.lineWidth=Ot,this.beginPath(),this.moveTo(Y+jt,q),this.lineTo(Y+It-jt,q),this.quadraticCurveTo(Y+It,q,Y+It,q+jt),this.lineTo(Y+It,q+Rt-jt),this.quadraticCurveTo(Y+It,q+Rt,Y+It-jt,q+Rt),this.lineTo(Y+jt,q+Rt),this.quadraticCurveTo(Y,q+Rt,Y,q+Rt-jt),this.lineTo(Y,q+jt),this.quadraticCurveTo(Y,q,Y+jt,q),this.closePath(),re&&this.fill(),Ve&&0<Ot&&this.stroke()}}function h(B,Y){return B-Y}function u(B){var Y=((B&16711680)>>16).toString(16),q=((B&65280)>>8).toString(16);return B=((B&255)>>0).toString(16),Y=2>Y.length?"0"+Y:Y,q=2>q.length?"0"+q:q,B=2>B.length?"0"+B:B,"#"+Y+q+B}function m(B,Y){var q=this.length>>>0,It=Number(Y)||0,It=0>It?Math.ceil(It):Math.floor(It);for(0>It&&(It+=q);It<q;It++)if(It in this&&this[It]===B)return It;return-1}function p(B){return B===null||typeof B>"u"}function v(B){return B.indexOf||(B.indexOf=m),B}function T(B){Zt.fSDec&&B[Oe("`eeDwdouMhrudods")](Oe("e`u`@ohl`uhnoHuds`uhnoDoe"),function(){Zt._fTWm&&Zt._fTWm(B)})}function C(B,Y,q){q=q||"normal";var It=B+"_"+Y+"_"+q,Rt=Ce[It];if(isNaN(Rt)){try{if(!ge){var jt=document.body;ge=document.createElement("span"),ge.innerHTML="";var Ot=document.createTextNode("Mpgyi");ge.appendChild(Ot),jt.appendChild(ge)}ge.style.display="",pt(ge,{position:"absolute",left:"0px",top:"-20000px",padding:"0px",margin:"0px",border:"none",whiteSpace:"pre",lineHeight:"normal",fontFamily:B,fontSize:Y+"px",fontWeight:q}),Rt=Math.round(ge.offsetHeight),ge.style.display="none"}catch{Rt=Math.ceil(1.1*Y)}Rt=Math.max(Rt,Y),Ce[It]=Rt}return Rt}function y(B,Y){var q=[];if(q={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]}[B||"solid"])for(var It=0;It<q.length;It++)q[It]*=Y;else q=[];return q}function F(B,Y,q,It,Rt){return It=It||[],Rt=p(Rt)?Ee?{passive:!1,capture:!1}:!1:Rt,It.push([B,Y,q,Rt]),B.addEventListener?(B.addEventListener(Y,q,Rt),q):B.attachEvent?(It=function(jt){jt=jt||window.event,jt.preventDefault=jt.preventDefault||function(){jt.returnValue=!1},jt.stopPropagation=jt.stopPropagation||function(){jt.cancelBubble=!0},q.call(B,jt)},B.attachEvent("on"+Y,It),It):!1}function O(B){if(B._menuButton)B.exportEnabled?(pt(B._menuButton,{backgroundColor:B.toolbar.itemBackgroundColor,color:B.toolbar.fontColor}),ot(B._menuButton),at(B,B._menuButton,"menu"),0>=navigator.userAgent.search("MSIE")&&B._menuButton.childNodes[0]&&pt(B._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"})):Q(B._menuButton);else if(B.exportEnabled&&ut){var Y=!1;B._menuButton=document.createElement("button"),at(B,B._menuButton,"menu"),B._toolBar.appendChild(B._menuButton),F(B._menuButton,"touchstart",function(jt){Y=!0},B.allDOMEventHandlers),F(B._menuButton,"click",function(){B._dropdownMenu.style.display!=="none"||B._dropDownCloseTime&&500>=new Date().getTime()-B._dropDownCloseTime.getTime()||(B._dropdownMenu.style.display="block",B._menuButton.blur(),B._dropdownMenu.focus())},B.allDOMEventHandlers,!0),F(B._menuButton,"mousemove",function(){Y||(pt(B._menuButton,{backgroundColor:B.toolbar.itemBackgroundColorOnHover,color:B.toolbar.fontColorOnHover}),0>=navigator.userAgent.search("MSIE")&&pt(B._menuButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},B.allDOMEventHandlers,!0),F(B._menuButton,"mouseout",function(){Y||(pt(B._menuButton,{backgroundColor:B.toolbar.itemBackgroundColor,color:B.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&pt(B._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},B.allDOMEventHandlers,!0)}if(B.exportEnabled&&B._dropdownMenu){var q=B.theme&&B.theme.indexOf("dark")!==-1?"black":"#888888";pt(B._dropdownMenu,{backgroundColor:B.toolbar.itemBackgroundColor,color:B.toolbar.fontColor,boxShadow:"2px 2px 10px "+q});for(var q=B._dropdownMenu.childNodes,It=[B._cultureInfo.printText,B._cultureInfo.saveJPGText,B._cultureInfo.savePNGText],Rt=0;Rt<It.length;Rt++)pt(q[Rt],{backgroundColor:B.toolbar.itemBackgroundColor,color:B.toolbar.fontColor}),q[Rt].innerHTML=It[Rt]}else!B._dropdownMenu&&B.exportEnabled&&ut&&(Y=!1,B._dropdownMenu=document.createElement("div"),B._dropdownMenu.setAttribute("tabindex",-1),q=B.theme&&B.theme.indexOf("dark")!==-1?"black":"#888888",pt(B._dropdownMenu,{position:"absolute",zIndex:1,userSelect:"none",MozUserSeelct:"none",WebkitUserSelect:"none",msUserSelect:"none",cursor:"pointer",right:"0px",top:"25px",minWidth:"120px",outline:0,fontSize:"14px",fontFamily:"Arial, Helvetica, sans-serif",padding:"5px 0px 5px 0px",textAlign:"left",lineHeight:"10px",backgroundColor:B.toolbar.itemBackgroundColor,boxShadow:"2px 2px 10px "+q}),B._dropdownMenu.style.display="none",B._toolBar.appendChild(B._dropdownMenu),F(B._dropdownMenu,"blur",function(){Q(B._dropdownMenu),B._dropDownCloseTime=new Date},B.allDOMEventHandlers,!0),q=document.createElement("div"),pt(q,{padding:"12px 8px 12px 8px"}),q.innerHTML=B._cultureInfo.printText,q.style.backgroundColor=B.toolbar.itemBackgroundColor,q.style.color=B.toolbar.fontColor,B._dropdownMenu.appendChild(q),F(q,"touchstart",function(jt){Y=!0},B.allDOMEventHandlers),F(q,"mousemove",function(){Y||(this.style.backgroundColor=B.toolbar.itemBackgroundColorOnHover,this.style.color=B.toolbar.fontColorOnHover)},B.allDOMEventHandlers,!0),F(q,"mouseout",function(){Y||(this.style.backgroundColor=B.toolbar.itemBackgroundColor,this.style.color=B.toolbar.fontColor)},B.allDOMEventHandlers,!0),F(q,"click",function(){B.print(),Q(B._dropdownMenu)},B.allDOMEventHandlers,!0),q=document.createElement("div"),pt(q,{padding:"12px 8px 12px 8px"}),q.innerHTML=B._cultureInfo.saveJPGText,q.style.backgroundColor=B.toolbar.itemBackgroundColor,q.style.color=B.toolbar.fontColor,B._dropdownMenu.appendChild(q),F(q,"touchstart",function(jt){Y=!0},B.allDOMEventHandlers),F(q,"mousemove",function(){Y||(this.style.backgroundColor=B.toolbar.itemBackgroundColorOnHover,this.style.color=B.toolbar.fontColorOnHover)},B.allDOMEventHandlers,!0),F(q,"mouseout",function(){Y||(this.style.backgroundColor=B.toolbar.itemBackgroundColor,this.style.color=B.toolbar.fontColor)},B.allDOMEventHandlers,!0),F(q,"click",function(){B.exportChart({format:"jpeg",fileName:B.exportFileName}),Q(B._dropdownMenu)},B.allDOMEventHandlers,!0),q=document.createElement("div"),pt(q,{padding:"12px 8px 12px 8px"}),q.innerHTML=B._cultureInfo.savePNGText,q.style.backgroundColor=B.toolbar.itemBackgroundColor,q.style.color=B.toolbar.fontColor,B._dropdownMenu.appendChild(q),F(q,"touchstart",function(jt){Y=!0},B.allDOMEventHandlers),F(q,"mousemove",function(){Y||(this.style.backgroundColor=B.toolbar.itemBackgroundColorOnHover,this.style.color=B.toolbar.fontColorOnHover)},B.allDOMEventHandlers,!0),F(q,"mouseout",function(){Y||(this.style.backgroundColor=B.toolbar.itemBackgroundColor,this.style.color=B.toolbar.fontColor)},B.allDOMEventHandlers,!0),F(q,"click",function(){B.exportChart({format:"png",fileName:B.exportFileName}),Q(B._dropdownMenu)},B.allDOMEventHandlers,!0))}function R(B,Y,q){for(B*=ie,Y*=ie,B=q.getImageData(B,Y,2,2).data,Y=!0,q=0;4>q;q++)if(B[q]!==B[q+4]|B[q]!==B[q+8]|B[q]!==B[q+12]){Y=!1;break}return Y?B[0]<<16|B[1]<<8|B[2]:0}function A(B,Y,q){return B in Y?Y[B]:q[B]}function Z(B,Y,q,It){ut&&Ne?(It=!p(It)&&It?B.getContext("2d",{willReadFrequently:!0}):B.getContext("2d"),Je=It.webkitBackingStorePixelRatio||It.mozBackingStorePixelRatio||It.msBackingStorePixelRatio||It.oBackingStorePixelRatio||It.backingStorePixelRatio||1,ie=ke/Je,B.width=Y*ie,B.height=q*ie,ke!==Je&&(B.style.width=Y+"px",B.style.height=q+"px",It.scale(ie,ie))):(B.width=Y,B.height=q)}function J(B){if(!fi){var Y=!1,q=!1;typeof K.Chart.creditHref>"u"?(B.creditHref=Oe("iuuqr;..b`ow`rkr/bnl."),B.creditText=Oe("B`ow`rKR/bnl")):(Y=B.updateOption("creditText"),q=B.updateOption("creditHref")),B.creditHref&&B.creditText&&(B._creditLink||(B._creditLink=document.createElement("a"),B._creditLink.setAttribute("class","canvasjs-chart-credit"),B._creditLink.setAttribute("title","JavaScript Charts"),pt(B._creditLink,{outline:"none",margin:"0px",position:"absolute",right:"2px",top:B.height-14+"px",color:"dimgrey",textDecoration:"none",fontSize:"11px",fontFamily:"Calibri, Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"}),B._creditLink.setAttribute("tabIndex",-1),B._creditLink.setAttribute("target","_blank")),(B.renderCount===0||Y||q)&&(B._creditLink.setAttribute("href",B.creditHref),B._creditLink.innerHTML=B.creditText),B._creditLink&&B.creditHref&&B.creditText?(B._creditLink.parentElement||B._canvasJSContainer.appendChild(B._creditLink),B._creditLink.style.top=B.height-14+"px"):B._creditLink.parentElement&&B._canvasJSContainer.removeChild(B._creditLink))}}function nt(B,Y,q){Yt&&(this.canvasCount|=0,window.console.log(++this.canvasCount));var It=document.createElement("canvas");return It.setAttribute("class","canvasjs-chart-canvas"),Z(It,B,Y,q),ut||typeof G_vmlCanvasManager>"u"||G_vmlCanvasManager.initElement(It),It}function pt(B,Y){for(var q in Y)B.style[q]=Y[q]}function St(B){return B.currentStyle?B.currentStyle:window&&window.getComputedStyle?window.getComputedStyle(B,null):B.style}function at(B,Y,q){Y.getAttribute("state")||(Y.style.backgroundColor=B.toolbar.itemBackgroundColor,Y.style.color=B.toolbar.fontColor,Y.style.border="none",pt(Y,{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"})),Y.getAttribute("state")!==q&&(Y.setAttribute("state",q),Y.setAttribute("type","button"),pt(Y,{padding:"5px 12px",cursor:"pointer",float:"left",width:"40px",height:"25px",outline:"0px",verticalAlign:"baseline",lineHeight:"0"}),Y.innerHTML="<img src='"+Ye[q].image+"' alt='"+B._cultureInfo[q+"Text"]+"' />",pt(Y.childNodes[0],{height:"95%",pointerEvents:"none"})),Y.setAttribute("title",B._cultureInfo[q+"Text"])}function ot(){for(var B=null,Y=0;Y<arguments.length;Y++)B=arguments[Y],B.style&&(B.style.display="inline")}function Q(){for(var B=null,Y=0;Y<arguments.length;Y++)(B=arguments[Y])&&B.style&&(B.style.display="none")}function tt(B,Y,q,It,Rt){return B===null||typeof B>"u"?typeof q>"u"?Y:q:(B=parseFloat(B.toString())*(0<=B.toString().indexOf("%")?Y/100:1),typeof It<"u"&&(B=Math.min(It,B),typeof Rt<"u"&&(B=Math.max(Rt,B))),!isNaN(B)&&B<=Y&&0<=B?B:typeof q>"u"?Y:q)}function H(B,Y,q,It,Rt){this._defaultsKey=B,this._themeOptionsKey=Y,this._index=It,this.parent=Rt,this._eventListeners=[],B={},this.theme&&p(this.parent)&&p(Y)&&p(It)?B=p(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[Y]&&(It===null?B=this.parent.themeOptions[Y]:0<this.parent.themeOptions[Y].length&&(It=Math.min(this.parent.themeOptions[Y].length-1,It),B=this.parent.themeOptions[Y][It])),this.themeOptions=B,this.options=q||{_isPlaceholder:!0},this.setOptions(this.options,B)}function $(B,Y,q,It,Rt){typeof Rt>"u"&&(Rt=0),this._padding=Rt,this._x1=B,this._y1=Y,this._x2=q,this._y2=It,this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding}function ct(B,Y){ct.base.constructor.call(this,"TextBlock",null,Y,null,null),this.ctx=B,this._isDirty=!0,this._wrappedText=null,this._initialize()}function yt(B,Y){yt.base.constructor.call(this,"Toolbar","toolbar",Y,null,B),this.chart=B,this.canvas=B.canvas,this.ctx=this.chart.ctx,this.optionsName="toolbar"}function Bt(B,Y){if(Bt.base.constructor.call(this,"Title","title",Y,null,B),this.chart=B,this.canvas=B.canvas,this.ctx=this.chart.ctx,this.optionsName="title",p(this.options.margin)&&B.options.subtitles){for(var q=B.options.subtitles,It=0;It<q.length;It++)if((p(q[It].horizontalAlign)&&this.horizontalAlign==="center"||q[It].horizontalAlign===this.horizontalAlign)&&(p(q[It].verticalAlign)&&this.verticalAlign==="top"||q[It].verticalAlign===this.verticalAlign)&&!q[It].dockInsidePlotArea==!this.dockInsidePlotArea){this.margin=0;break}}typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function kt(B,Y,q){kt.base.constructor.call(this,"Subtitle","subtitles",Y,q,B),this.chart=B,this.canvas=B.canvas,this.ctx=this.chart.ctx,this.optionsName="subtitles",this.isOptionsInArray=!0,typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function zt(){this.pool=[]}function Mt(B){var Y;B&&X[B]&&(Y=X[B]),Mt.base.constructor.call(this,"CultureInfo",null,Y,null,null)}var Yt=!1,Zt={},ut=!!document.createElement("canvas").getContext,K={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"light1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditText:"CanvasJS",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null,publicProperties:{title:"readWrite",subtitles:"readWrite",toolbar:"readWrite",toolTip:"readWrite",legend:"readWrite",axisX:"readWrite",axisY:"readWrite",axisX2:"readWrite",axisY2:"readWrite",data:"readWrite",options:"readWrite",bounds:"readOnly",container:"readOnly",selectedColorSet:"readOnly"}},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:ut?"transparent":null,margin:5,wrap:!0,maxWidth:null,textAlign:"center",dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,textAlign:"center",dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white",publicProperties:{options:"readWrite",chart:"readOnly"}},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,backgroundColor:ut?"transparent":null,borderColor:ut?"transparent":null,borderThickness:0,cornerRadius:0,maxWidth:null,maxHeight:null,markerMargin:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextAlign:"left",itemTextFormatter:null,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:ut?"rgba(255,255,255,.9)":"rgb(255,255,255)",borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:"black",fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic",updated:null,hidden:null,publicProperties:{options:"readWrite",chart:"readOnly"}},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,reversed:!1,logarithmic:!1,logarithmBase:10,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",titleWrap:!0,titleMaxWidth:null,titleBackgroundColor:ut?"transparent":null,titleBorderColor:ut?"transparent":null,titleBorderThickness:0,titleCornerRadius:0,titleTextAlign:"left",titlePadding:0,labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!0,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,labelBackgroundColor:ut?"transparent":null,labelBorderColor:ut?"transparent":null,labelBorderThickness:0,labelPadding:0,labelCornerRadius:0,labelPlacement:"outside",labelTextAlign:"left",prefix:"",suffix:"",includeZero:!1,tickLength:5,tickColor:"black",tickThickness:1,tickPlacement:"outside",lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"#A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:ut?"transparent":null,valueFormatString:null,margin:2,publicProperties:{options:"readWrite",stripLines:"readWrite",scaleBreaks:"readWrite",crosshair:"readWrite",bounds:"readOnly",chart:"readOnly"}},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelPlacement:"inside",labelAlign:"far",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:null,labelBorderColor:ut?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,labelTextAlign:"left",labelPadding:0,showOnTop:!1,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},ScaleBreaks:{autoCalculate:!1,collapsibleThreshold:"25%",maxNumberOfAutoBreaks:2,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",customBreaks:"readWrite",axis:"readOnly",autoBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Break:{startValue:null,endValue:null,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",scaleBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Crosshair:{enabled:!1,snapToDataPoint:!1,color:"grey",opacity:null,thickness:2,lineDashType:"solid",label:"",labelWrap:!0,labelMaxWidth:null,labelTextAlign:"left",labelBackgroundColor:ut?"grey":null,labelBorderColor:ut?"grey":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:ut?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:12,labelPadding:{top:2,right:3,bottom:2,left:4},labelFontColor:"#fff",labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,valueFormatString:null,updated:null,hidden:null,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:"default",indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelTextAlign:"left",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelPadding:0,indexLabelBackgroundColor:null,indexLabelBorderColor:null,indexLabelBorderThickness:0,indexLabelLineColor:"gray",indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",connectNullData:!1,nullDataLineDashType:"dash",color:null,lineColor:null,risingColor:"white",fallingColor:"red",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,explodeOnClick:!0,neckHeight:null,neckWidth:null,reversed:!1,valueRepresents:null,linkedDataSeriesIndex:null,whiskerThickness:2,whiskerDashType:"solid",whiskerColor:null,whiskerLength:null,stemThickness:2,stemColor:null,stemDashType:"solid",upperBoxColor:"white",lowerBoxColor:"white",type:"column",xValueType:"number",axisXType:"primary",axisYType:"primary",axisXIndex:0,axisYIndex:0,xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:!1,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:ut?"transparent":null,legendMarkerBorderThickness:0,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:ut?"transparent":null,markerBorderThickness:0,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0,publicProperties:{options:"readWrite",axisX:"readWrite",axisY:"readWrite",chart:"readOnly"}},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",textAlign:"left",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",printText:"Print",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}},X={en:{}},z=ut?"Trebuchet MS, Helvetica, sans-serif":"Arial",it=ut?"Impact, Charcoal, sans-serif":"Arial",mt={colorSet1:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #7F6084 #77A033 #33558B #E59566".split(" "),colorSet2:"#6D78AD #51CDA0 #DF7970 #4C9CA0 #AE7D99 #C9D45C #5592AD #DF874D #52BCA8 #8E7AA3 #E3CB64 #C77B85 #C39762 #8DD17E #B57952 #FCC26C".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},dt,Tt,Dt,oe,ue;Tt="#333333",Dt="#000000",dt="#666666",ue=oe="#000000";var At=20,Ut=14,pe={colorSet:"colorSet1",backgroundColor:"#FFFFFF",title:{fontFamily:it,fontSize:32,fontColor:Tt,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:it,fontSize:Ut,fontColor:Tt,fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:z,indexLabelFontSize:Ut,indexLabelFontColor:Tt,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Tt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:0,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Tt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:0,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Tt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:1,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Tt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:1,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:z,fontSize:14,fontColor:Tt,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:z,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1},toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white"}};Dt=Tt="#F5F5F5",dt="#FFFFFF",oe="#40BAF1",ue="#F5F5F5";var At=20,Ut=14,we={colorSet:"colorSet2",title:{fontFamily:z,fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},subtitles:[{fontFamily:z,fontSize:Ut,fontColor:"#3A3A3A",fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:z,indexLabelFontSize:Ut,indexLabelFontColor:"#666666",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:z,titleFontSize:At,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickThickness:1,tickColor:"#BBBBBB",gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:z,titleFontSize:At,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:z,titleFontSize:At,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:z,titleFontSize:At,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:z,fontSize:14,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:z,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1},toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white"}};Dt=Tt="#F5F5F5",dt="#FFFFFF",oe="#40BAF1",ue="#F5F5F5",At=20,Ut=14,it={colorSet:"colorSet1",backgroundColor:"#2A2A2A",title:{fontFamily:it,fontSize:32,fontColor:Tt,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:it,fontSize:Ut,fontColor:Tt,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{itemBackgroundColor:"#666666",itemBackgroundColorOnHover:"#FF7372",buttonBorderColor:"#FF7372",buttonBorderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:z,indexLabelFontSize:Ut,indexLabelFontColor:Dt,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Dt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:0,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Dt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:0,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Dt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:1,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Dt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:1,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:z,fontSize:14,fontColor:Tt,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:z,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:Dt,backgroundColor:"rgba(0, 0, 0, .7)"}},dt="#FFFFFF",Dt=Tt="#FAFAFA",oe="#40BAF1",ue="#F5F5F5";var At=20,Ut=14,Ct={light1:pe,light2:we,dark1:it,dark2:{colorSet:"colorSet2",backgroundColor:"#32373A",title:{fontFamily:z,fontSize:32,fontColor:Tt,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:z,fontSize:Ut,fontColor:Tt,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{itemBackgroundColor:"#666666",itemBackgroundColorOnHover:"#FF7372",buttonBorderColor:"#FF7372",buttonBorderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:z,indexLabelFontSize:Ut,indexLabelFontColor:Dt,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Dt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:0,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Dt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:1,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:0,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Dt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:0,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:1,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:z,titleFontSize:At,titleFontColor:Dt,titleFontWeight:"normal",labelFontFamily:z,labelFontSize:Ut,labelFontColor:Dt,labelFontWeight:"normal",lineThickness:0,lineColor:dt,tickThickness:1,tickColor:dt,gridThickness:1,gridColor:dt,stripLines:[{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:z,labelFontSize:Ut,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:ue,color:oe,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:z,fontSize:14,fontColor:Tt,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:z,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:Dt,backgroundColor:"rgba(0, 0, 0, .7)"}},theme1:pe,theme2:we,theme3:pe},Pe={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")};(function(){Zt.fSDec=function(B){for(var Y="",q=0;q<B.length;q++)Y+=String.fromCharCode(Math.ceil(B.length/57/5)^B.charCodeAt(q));return Y},delete K[Zt.fSDec("Bi`su")][Zt.fSDec("bsdehuIsdg")],Zt.pro={sCH:K[Zt.fSDec("Bi`su")][Zt.fSDec("bsdehuIsdg")]}})();var Ee=function(){var B=!1;try{var Y=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){return B=!0,!1}});window.addEventListener&&(window.addEventListener("test",null,Y),window.removeEventListener("test",null,Y))}catch{B=!1}return B}(),Ce={},ge=null,xt=function(){this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},et=function(B){B.width=1,B.height=1,B.getContext("2d")&&B.getContext("2d").clearRect(0,0,1,1)},qt=function(B,Y,q){return Y=Math.min(this.width,this.height),Math.max(this.theme==="theme4"?0:300<=Y?12:11,Math.round(Y*(B/400)))},ce=function(){var B=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,Y="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),q="Sun Mon Tue Wed Thu Fri Sat".split(" "),It="January February March April May June July August September October November December".split(" "),Rt="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),jt=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,Ot=/[^-+\dA-Z]/g;return function(re,Ve,ui){var yi=ui?ui.days:Y,oi=ui?ui.months:It,Oi=ui?ui.shortDays:q,ze=ui?ui.shortMonths:Rt;ui="";var un=!1;if(re=re&&re.getTime?re:re?new Date(re):new Date,isNaN(re))throw SyntaxError("invalid date");Ve.slice(0,4)==="UTC:"&&(Ve=Ve.slice(4),un=!0),ui=un?"getUTC":"get";var on=re[ui+"Date"](),Xe=re[ui+"Day"](),xi=re[ui+"Month"](),r=re[ui+"FullYear"](),f=re[ui+"Hours"](),l=re[ui+"Minutes"](),o=re[ui+"Seconds"](),d=re[ui+"Milliseconds"](),x=un?0:re.getTimezoneOffset();return ui=Ve.replace(B,function(_){switch(_){case"D":return on;case"DD":return i(on,2);case"DDD":return Oi[Xe];case"DDDD":return yi[Xe];case"M":return xi+1;case"MM":return i(xi+1,2);case"MMM":return ze[xi];case"MMMM":return oi[xi];case"Y":return parseInt(String(r).slice(-2));case"YY":return i(String(r).slice(-2),2);case"YYY":return i(String(r).slice(-3),3);case"YYYY":return i(r,4);case"h":return f%12||12;case"hh":return i(f%12||12,2);case"H":return f;case"HH":return i(f,2);case"m":return l;case"mm":return i(l,2);case"s":return o;case"ss":return i(o,2);case"f":return i(String(d),3).slice(0,1);case"ff":return i(String(d),3).slice(0,2);case"fff":return i(String(d),3).slice(0,3);case"t":return 12>f?"a":"p";case"tt":return 12>f?"am":"pm";case"T":return 12>f?"A":"P";case"TT":return 12>f?"AM":"PM";case"K":return un?"UTC":(String(re).match(jt)||[""]).pop().replace(Ot,"");case"z":return(0<x?"-":"+")+Math.floor(Math.abs(x)/60);case"zz":return(0<x?"-":"+")+i(Math.floor(Math.abs(x)/60),2);case"zzz":return(0<x?"-":"+")+i(Math.floor(Math.abs(x)/60),2)+i(Math.abs(x)%60,2);default:return _.slice(1,_.length-1)}})}}(),xe=function(B){var Y=0>B;if(1>Math.abs(B)){var q=parseInt(B.toString().split("e-")[1]);q&&(B=(Y?-1*B:B)*Math.pow(10,q-1),B="0."+Array(q).join("0")+B.toString().substring(2),B=Y?"-"+B:B)}else q=parseInt(B.toString().split("+")[1]),20<q&&(q-=20,B/=Math.pow(10,q),B=B.toString()+Array(q+1).join("0"));return String(B)},ne=function(B,Y,q){if(B===null)return"";if(!isFinite(B))return B;B=Number(B);var It=0>B;It&&(B*=-1);var Rt=q?q.decimalSeparator:".",jt=q?q.digitGroupSeparator:",",Ot="";Y=String(Y);var Ot=1,on=q="",re=-1,Ve=[],ui=[],yi=0,oi=0,Oi=0,ze=!1,un=0,on=Y.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);Y=null;for(var Xe=0;on&&Xe<on.length;Xe++)if(Y=on[Xe],Y==="."&&0>re)re=Xe;else{if(Y==="%")Ot*=100;else if(Y==="\u2030"){Ot*=1e3;continue}else if(Y[0]===","&&Y[Y.length-1]==="."){Ot/=Math.pow(1e3,Y.length-1),re=Xe+Y.length-1;continue}else Y[0]!=="E"&&Y[0]!=="e"||Y[Y.length-1]!=="0"||(ze=!0);0>re?(Ve.push(Y),Y==="#"||Y==="0"?yi++:Y===","&&Oi++):(ui.push(Y),Y!=="#"&&Y!=="0"||oi++)}for(ze&&(Y=Math.floor(B),on=-Math.floor(Math.log(B)/Math.LN10+1),un=B===0?0:Y===0?-(yi+on):xe(Y).length-yi,Ot/=Math.pow(10,un)),0>re&&(re=Xe),Ot=(B*Ot).toFixed(oi),Y=Ot.split("."),Ot=(Y[0]+"").split(""),B=(Y[1]+"").split(""),Ot&&Ot[0]==="0"&&Ot.shift(),ze=on=Xe=oi=re=0;0<Ve.length;)if(Y=Ve.pop(),Y==="#"||Y==="0")if(re++,re===yi){var xi=Ot,Ot=[];if(Y==="0")for(Y=yi-oi-(xi?xi.length:0);0<Y;)xi.unshift("0"),Y--;for(;0<xi.length;)q=xi.pop()+q,ze++,ze%on===0&&Xe===Oi&&0<xi.length&&(q=jt+q)}else 0<Ot.length?(q=Ot.pop()+q,oi++,ze++):Y==="0"&&(q="0"+q,oi++,ze++),ze%on===0&&Xe===Oi&&0<Ot.length&&(q=jt+q);else Y[0]!=="E"&&Y[0]!=="e"||Y[Y.length-1]!=="0"||!/[eE][+-]*[0]+/.test(Y)?Y===","?(Xe++,on=ze,ze=0,0<Ot.length&&(q=jt+q)):q=1<Y.length&&(Y[0]==='"'&&Y[Y.length-1]==='"'||Y[0]==="'"&&Y[Y.length-1]==="'")?Y.slice(1,Y.length-1)+q:Y+q:(Y=0>un?Y.replace("+","").replace("-",""):Y.replace("-",""),q+=Y.replace(/[0]+/,function(r){return i(un,r.length)}));for(jt="",Ve=!1;0<ui.length;)Y=ui.shift(),Y==="#"||Y==="0"?0<B.length&&Number(B.join(""))!==0?(jt+=B.shift(),Ve=!0):Y==="0"&&(jt+="0",Ve=!0):1<Y.length&&(Y[0]==='"'&&Y[Y.length-1]==='"'||Y[0]==="'"&&Y[Y.length-1]==="'")?jt+=Y.slice(1,Y.length-1):Y[0]!=="E"&&Y[0]!=="e"||Y[Y.length-1]!=="0"||!/[eE][+-]*[0]+/.test(Y)?jt+=Y:(Y=0>un?Y.replace("+","").replace("-",""):Y.replace("-",""),jt+=Y.replace(/[0]+/,function(r){return i(un,r.length)}));return q+=(Ve?Rt:"")+jt,It?"-"+q:q},We=function(B){var Y=0,q=0;return B=B||window.event,B.offsetX||B.offsetX===0?(Y=B.offsetX,q=B.offsetY):B.layerX||B.layerX==0?(Y=B.layerX,q=B.layerY):(Y=B.pageX-B.target.offsetLeft,q=B.pageY-B.target.offsetTop),{x:Y,y:q}},Ne=!0,ke=window.devicePixelRatio||1,Je=1,ie=Ne?ke/Je:1,Re=function(B,Y,q,It,Rt,jt,Ot,re,Ve,ui,yi,oi,Oi){typeof Oi>"u"&&(Oi=1),Ot=Ot||0,re=re||"black";var ze=15<It-Y&&15<Rt-q?8:.35*Math.min(It-Y,Rt-q);B.beginPath(),B.moveTo(Y,q),B.save(),B.fillStyle=jt,B.globalAlpha=Oi,B.fillRect(Y,q,It-Y,Rt-q),B.globalAlpha=1,0<Ot&&(Oi=Ot%2===0?0:.5,B.beginPath(),B.lineWidth=Ot,B.strokeStyle=re,B.moveTo(Y,q),B.rect(Y-Oi,q-Oi,It-Y+2*Oi,Rt-q+2*Oi),B.stroke()),B.restore(),Ve===!0&&(B.save(),B.beginPath(),B.moveTo(Y,q),B.lineTo(Y+ze,q+ze),B.lineTo(It-ze,q+ze),B.lineTo(It,q),B.closePath(),Ot=B.createLinearGradient((It+Y)/2,q+ze,(It+Y)/2,q),Ot.addColorStop(0,jt),Ot.addColorStop(1,"rgba(255, 255, 255, .4)"),B.fillStyle=Ot,B.fill(),B.restore()),ui===!0&&(B.save(),B.beginPath(),B.moveTo(Y,Rt),B.lineTo(Y+ze,Rt-ze),B.lineTo(It-ze,Rt-ze),B.lineTo(It,Rt),B.closePath(),Ot=B.createLinearGradient((It+Y)/2,Rt-ze,(It+Y)/2,Rt),Ot.addColorStop(0,jt),Ot.addColorStop(1,"rgba(255, 255, 255, .4)"),B.fillStyle=Ot,B.fill(),B.restore()),yi===!0&&(B.save(),B.beginPath(),B.moveTo(Y,q),B.lineTo(Y+ze,q+ze),B.lineTo(Y+ze,Rt-ze),B.lineTo(Y,Rt),B.closePath(),Ot=B.createLinearGradient(Y+ze,(Rt+q)/2,Y,(Rt+q)/2),Ot.addColorStop(0,jt),Ot.addColorStop(1,"rgba(255, 255, 255, 0.1)"),B.fillStyle=Ot,B.fill(),B.restore()),oi===!0&&(B.save(),B.beginPath(),B.moveTo(It,q),B.lineTo(It-ze,q+ze),B.lineTo(It-ze,Rt-ze),B.lineTo(It,Rt),Ot=B.createLinearGradient(It-ze,(Rt+q)/2,It,(Rt+q)/2),Ot.addColorStop(0,jt),Ot.addColorStop(1,"rgba(255, 255, 255, 0.1)"),B.fillStyle=Ot,Ot.addColorStop(0,jt),Ot.addColorStop(1,"rgba(255, 255, 255, 0.1)"),B.fillStyle=Ot,B.fill(),B.closePath(),B.restore())},Oe=function(B){for(var Y="",q=0;q<B.length;q++)Y+=String.fromCharCode(Math.ceil(B.length/57/5)^B.charCodeAt(q));return Y},fi=window&&window[Oe("mnb`uhno")]&&window[Oe("mnb`uhno")].href&&window[Oe("mnb`uhno")].href.indexOf&&(window[Oe("mnb`uhno")].href.indexOf(Oe("b`ow`rkr/bnl"))!==-1||window[Oe("mnb`uhno")].href.indexOf(Oe("gdonqhy/bnl"))!==-1||window[Oe("mnb`uhno")].href.indexOf(Oe("gheemd"))!==-1)&&window[Oe("mnb`uhno")].href.indexOf(Oe("gheemd"))===-1,Ye={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg=="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC"},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALWSURBVEhLvZZLaBNRFIabyftBIgEfqCCBoCC6MYqiXYiIj4U76U4X7sUHbhQhUBfixhZEUBDB16YuFERaUaQLK7ooCOJj4UKtYEFU0EptShO/A9Ph3js3k8lo/eHnP7n3nP/M3LlzMz1hkUwmNziOcyKRSFyFt+LxeD/c2Wq1Ym7Kv0M2m11Os1OxWGycn1OwZXCGuXfwIhezkd9/jRgNT2L4ldhs1pbkX5OLJe4euVxuGQaPCa3mnUjtJx7BDuKusJTCV6jVVGHTMuYRjxma7yIOhTgFY6jNaAKew2xPKpVay9ganmkvj+M448/MfJdT5K5Gg4HJacRngPFgqVRaRNwW1B4i7yehWfsEDdz1K+A01AoxPIqGAiuwGfkOTY8+1A6u7AyiFTB2Hu0KPIrdiOnzHLWDybeImvy+Wq2mZa5bUHsD0Zpz+KxHdWQymV6kAb1ElqeORgJLvgnRdj1+R1AfzkIvSUjxVjQSarVakrueIPT8+H1F5jSUy+WXiJrUYBVWyVxU4PEU8TzhfaijUqnMIWrjaY492eWRwdKOIqrnIxnXwLLeRLwk2GQzrEMjg0avEbXxkIxr4OoOImpj2QwyFgms1koa/SZUG8s+0iGnEhNfCNXEhzIXBVz0McTzEvJ+70P9oNFtxEzei3aFYrFYxmuSUPWSv9Yi9IMm2xE1We56Mp1OV4nDwqFmBDV9gk9AEh4gZtFHNt8W4kAUCoXF5MorY9Z/kDni9nDv7hc0i2fhgLvTtX8a99PoMPPagTFPxofRzmDJ9yM+AyEmTfgGysYbQcfhDzPPJDmX0c7gDg4gs9BqFIWhm/Nct5H8gtBq1I7UfIbtvmIuoaGQcp+fdpbbSM43eEH5wrwLbXmhm/fU63VHXjcuok7hEByFY/AeHGC8L5/PL3HT5xGH1uYwfPOICGo+CBcU0vwO1BqzUqILDl/z/9VYIMfpddiAc47jDP8BsUpb13wOLRwAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADoSURBVFhH7dc9CsJAFATgRxIIBCwCqZKATX5sbawsY2MvWOtF9AB6AU8gguAJbD2AnZ2VXQT/Ko2TYGCL2OYtYQc+BuYA+1hCtnCVwMm27SGaXpDJIAiCvCkVR05hGOZNN3HkFMdx3nQRR06+76/R1IcFLJlNQEWlmWlBTwJtKLKHynehZqnjOGM0PYWRVXk61C37p7xlZ3Hk5HneCk1dmMH811xGoKLSzDiQwIBZB4ocoPJdqNkDt2yKlueWRVGUtzy3rPwo3sWRU3nLjuLI6OO67oZM00wMw3hrmpZx0XU9syxrR0T0BeMpb9dneSR2AAAAAElFTkSuQmCC"}};H.prototype.setOptions=function(B,Y){if(K[this._defaultsKey]){var q=K[this._defaultsKey],It;for(It in q)It!=="publicProperties"&&q.hasOwnProperty(It)&&(this[It]=B&&It in B?B[It]:Y&&It in Y?Y[It]:q[It])}else Yt&&window.console&&console.log("defaults not set")},H.prototype.get=function(B){var Y=K[this._defaultsKey];if(B==="options")return this.options&&this.options._isPlaceholder?null:this.options;if(Y.hasOwnProperty(B)||Y.publicProperties&&Y.publicProperties.hasOwnProperty(B))return this[B];window.console&&window.console.log('Property "'+B+`" doesn't exist. Please check for typo.`)},H.prototype.set=function(B,Y,q){q=typeof q>"u"?!0:q;var It=K[this._defaultsKey];if(B==="options")this.createUserOptions(Y);else if(It.hasOwnProperty(B)||It.publicProperties&&It.publicProperties.hasOwnProperty(B)&&It.publicProperties[B]==="readWrite")this.options._isPlaceholder&&this.createUserOptions(),this.options[B]=Y;else{window.console&&(It.publicProperties&&It.publicProperties.hasOwnProperty(B)&&It.publicProperties[B]==="readOnly"?window.console.log('Property "'+B+'" is read-only.'):window.console.log('Property "'+B+`" doesn't exist. Please check for typo.`));return}q&&(this.stockChart||this.chart||this).render()},H.prototype.addTo=function(B,Y,q,It){It=typeof It>"u"?!0:It;var Rt=K[this._defaultsKey];Rt.hasOwnProperty(B)||Rt.publicProperties&&Rt.publicProperties.hasOwnProperty(B)&&Rt.publicProperties[B]==="readWrite"?(this.options._isPlaceholder&&this.createUserOptions(),typeof this.options[B]>"u"&&(this.options[B]=[]),B=this.options[B],q=typeof q>"u"||q===null?B.length:q,B.splice(q,0,Y),It&&(this.stockChart||this.chart||this).render()):window.console&&(Rt.publicProperties&&Rt.publicProperties.hasOwnProperty(B)&&Rt.publicProperties[B]==="readOnly"?window.console.log('Property "'+B+'" is read-only.'):window.console.log('Property "'+B+`" doesn't exist. Please check for typo.`))},H.prototype.createUserOptions=function(B){if(typeof B<"u"||this.options._isPlaceholder)if(this.parent&&this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.isOptionsInArray){this.parent.options[this.optionsName]||(this.parent.options[this.optionsName]=[]);var Y=this.parent.options[this.optionsName],q=Y.length;this.options._isPlaceholder||(v(Y),q=Y.indexOf(this.options)),this.options=typeof B>"u"?{}:B,Y[q]=this.options}else this.options=typeof B>"u"?{}:B,this.parent&&(B=this.parent.options,this.optionsName?Y=this.optionsName:(Y=this._defaultsKey)&&Y.length!==0?(q=Y.charAt(0).toLowerCase(),1<Y.length&&(q=q.concat(Y.slice(1))),Y=q):Y=void 0,B[Y]=this.options)},H.prototype.remove=function(B){if(B=typeof B>"u"?!0:B,this.isOptionsInArray){var Y=this.parent.options[this.optionsName];v(Y);var q=Y.indexOf(this.options);0<=q&&Y.splice(q,1)}else delete this.parent.options[this.optionsName];B&&(this.stockChart||this.chart||this).render()},H.prototype.updateOption=function(B){!K[this._defaultsKey]&&Yt&&window.console&&console.log("defaults not set");var Y=K[this._defaultsKey],q={},It=this[B],Rt=this._themeOptionsKey,jt=this._index;return this.theme&&p(this.parent)&&p(Rt)&&p(jt)?q=p(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme]:this.parent&&this.parent.themeOptions&&(this.options.theme?this._defaultsKey==="Chart"&&Ct[this.options.theme]?q=Ct[this.options.theme]:stockThemes[this.options.theme]&&(q=stockThemes[this.options.theme][Rt]):this.parent.themeOptions[Rt]&&(jt===null?q=this.parent.themeOptions[Rt]:0<this.parent.themeOptions[Rt].length&&(q=Math.min(this.parent.themeOptions[Rt].length-1,jt),q=this.parent.themeOptions[Rt][q]))),this.themeOptions=q,B in Y&&(It=B in this.options?this.options[B]:q&&B in q?q[B]:Y[B]),It===this[B]?!1:(this[B]=It,!0)},H.prototype.trackChanges=function(B){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[B]=this.options[B]},H.prototype.isBeingTracked=function(B){return this.options._oldOptions||(this.options._oldOptions={}),!!this.options._oldOptions[B]},H.prototype.hasOptionChanged=function(B){if(!this.sessionVariables)throw"Session Variable Store not set";return this.sessionVariables[B]!==this.options[B]},H.prototype.addEventListener=function(B,Y,q){B&&Y&&(this._eventListeners[B]=this._eventListeners[B]||[],this._eventListeners[B].push({context:q||this,eventHandler:Y}))},H.prototype.removeEventListener=function(B,Y){if(B&&Y&&this._eventListeners[B]){for(var q=this._eventListeners[B],It=0;It<q.length;It++)if(q[It].eventHandler===Y){q[It].splice(It,1);break}}},H.prototype.removeAllEventListeners=function(){this._eventListeners=[]},H.prototype.dispatchEvent=function(B,Y,q){if(B&&this._eventListeners[B]){Y=Y||{};for(var It=this._eventListeners[B],Rt=0;Rt<It.length;Rt++)It[Rt].eventHandler.call(It[Rt].context,Y)}typeof this[B]=="function"&&this[B].call(q||this.chart,Y)},$.prototype.registerSpace=function(B,Y){B==="top"?this._topOccupied+=Y.height:B==="bottom"?this._bottomOccupied+=Y.height:B==="left"?this._leftOccupied+=Y.width:B==="right"&&(this._rightOccupied+=Y.width)},$.prototype.unRegisterSpace=function(B,Y){B==="top"?this._topOccupied-=Y.height:B==="bottom"?this._bottomOccupied-=Y.height:B==="left"?this._leftOccupied-=Y.width:B==="right"&&(this._rightOccupied-=Y.width)},$.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}},$.prototype.reset=function(){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding},n(ct,H),ct.prototype._initialize=function(){p(this.padding)||typeof this.padding!="object"?this.topPadding=this.rightPadding=this.bottomPadding=this.leftPadding=Number(this.padding)|0:(this.topPadding=p(this.padding.top)?0:Number(this.padding.top)|0,this.rightPadding=p(this.padding.right)?0:Number(this.padding.right)|0,this.bottomPadding=p(this.padding.bottom)?0:Number(this.padding.bottom)|0,this.leftPadding=p(this.padding.left)?0:Number(this.padding.left)|0)},ct.prototype.render=function(B){if(this.fontSize!==0){B&&this.ctx.save();var Y=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var q=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+q),this.textBaseline==="middle"&&(q=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var It=0,Rt=this.topPadding,jt=null;for(this.ctx.roundRect||a(this.ctx),(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,q,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,q=0;q<this._wrappedText.lines.length;q++)jt=this._wrappedText.lines[q],this.textAlign==="right"?It=this.width-jt.width-this.rightPadding:this.textAlign==="left"?It=this.leftPadding:this.textAlign==="center"&&(It=(this.width-(this.leftPadding+this.rightPadding))/2-jt.width/2+this.leftPadding),this.ctx.fillText(jt.text,It,Rt),Rt+=jt.height;this.ctx.font=Y,B&&this.ctx.restore()}},ct.prototype.setText=function(B){this.text=B,this._isDirty=!0,this._wrappedText=null},ct.prototype.measureText=function(){if(this._lineHeight=C(this.fontFamily,this.fontSize,this.fontWeight),this.maxWidth===null)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},ct.prototype._getLineWithWidth=function(B,Y,q){if(B=String(B),!B)return{text:"",width:0};var It=q=0,Rt=B.length-1,jt=1/0;for(this.ctx.font=this._getFontString();It<=Rt;){var jt=Math.floor((It+Rt)/2),Ot=B.substr(0,jt+1);if(q=this.ctx.measureText(Ot).width,q<Y)It=jt+1;else if(q>Y)Rt=jt-1;else break}return q>Y&&1<Ot.length&&(Ot=Ot.substr(0,Ot.length-1),q=this.ctx.measureText(Ot).width),Y=!0,(Ot.length===B.length||B[Ot.length]===" ")&&(Y=!1),Y&&(B=Ot.split(" "),1<B.length&&B.pop(),Ot=B.join(" "),q=this.ctx.measureText(Ot).width),{text:Ot,width:q}},ct.prototype._wrapText=function(){var B=new String(s(String(this.text))),Y=[],q=this.ctx.font,It=0,Rt=0;if(this.ctx.font=this._getFontString(),this.frontSize===0)Rt=It=0;else for(;0<B.length;){var jt=this.maxHeight-(this.topPadding+this.bottomPadding),Ot=this._getLineWithWidth(B,this.maxWidth-(this.leftPadding+this.rightPadding),!1);Ot.height=this._lineHeight,Y.push(Ot);var re=Rt,Rt=Math.max(Rt,Ot.width),It=It+Ot.height,B=s(B.slice(Ot.text.length,B.length));jt&&It>jt&&(Ot=Y.pop(),It-=Ot.height,Rt=re)}this._wrappedText={lines:Y,width:Rt,height:It},this.width=Rt+(this.leftPadding+this.rightPadding),this.height=It+(this.topPadding+this.bottomPadding),this.ctx.font=q},ct.prototype._getFontString=function(){var B;B=this.fontStyle?this.fontStyle+" ":"",B+=this.fontWeight?this.fontWeight+" ":"",B+=this.fontSize?this.fontSize+"px ":"";var Y=this.fontFamily?this.fontFamily+"":"";return!ut&&Y&&(Y=Y.split(",")[0],Y[0]!=="'"&&Y[0]!=='"'&&(Y="'"+Y+"'")),B+=Y},n(yt,H),n(Bt,H),Bt.prototype.setLayout=function(){if(this.text){var B=this.dockInsidePlotArea?this.chart.plotArea:this.chart,Y=B.layoutManager.getFreeSpace(),Rt=Y.x1,It=Y.y1,q=0,It=0,Rt=this.chart._menuButton&&this.chart.exportEnabled&&this.verticalAlign==="top"?40:0,jt;this.textAlign=p(this.options.textAlign)?this.horizontalAlign:this.textAlign,this.verticalAlign==="center"?this.horizontalAlign==="left"||this.horizontalAlign==="right"?(this.maxWidth===null&&(this.maxWidth=Y.height-4),It=.5*Y.width-this.margin-2):(this.maxWidth===null&&(this.maxWidth=Y.width-4),It=.5*Y.height-4):(this.maxWidth===null&&(this.maxWidth=Y.width-4-Rt*(this.horizontalAlign==="center"?2:1)),It=.5*Y.height-this.margin-2,q=0),p(this.padding)||typeof this.padding!="number"?p(this.padding)||typeof this.padding!="object"||(jt=this.padding.top?this.padding.top:this.padding.bottom?this.padding.bottom:0,jt+=this.padding.bottom?this.padding.bottom:this.padding.top?this.padding.top:0):jt=2*this.padding,this.wrap||(It=Math.min(It,1.5*this.fontSize+jt));var Ot=new ct(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,textAlign:this.textAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight:It,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"middle"}),re=Ot.measureText();this.verticalAlign==="center"?(this.horizontalAlign==="left"?(Rt=Y.x1+2+Ot._lineHeight/2,It=Y.y2-2-(this.maxWidth/2-re.width/2),q=-90,jt="left",this.width=re.height,this.height=re.width):this.horizontalAlign==="right"?(Rt=Y.x2-2-Ot._lineHeight/2,It=Y.y1+2+(this.maxWidth/2-re.width/2),q=90,jt="right",this.width=re.height,this.height=re.width):(It=Y.y1+2+(Y.height/2-re.height/2)+Ot._lineHeight/2,Rt=Y.x1+2+(Y.width/2-re.width/2),jt="center",this.width=re.width,this.height=re.height),Y="center"):(this.verticalAlign==="bottom"?(It=Y.y2-2-re.height+Ot._lineHeight/2,jt="bottom"):(It=Y.y1+2+Ot._lineHeight/2,jt="top"),Rt=this.horizontalAlign==="left"?Y.x1+2:this.horizontalAlign==="right"?Y.x2-2-re.width-Rt:Y.x1+Y.width/2-re.width/2,Y=this.horizontalAlign,this.width=re.width,this.height=re.height),Ot.x=Rt,Ot.y=It,Ot.angle=q,Ot.horizontalAlign=Y,this._textBlock=Ot,B.layoutManager.registerSpace(jt,{width:this.width+(jt==="left"||jt==="right"?this.margin+2:0),height:this.height+(jt==="top"||jt==="bottom"?this.margin+2:0)}),this.bounds={x1:Rt,y1:It-Ot._lineHeight/2,x2:Rt+this.width,y2:It+this.height-Ot._lineHeight/2},this.verticalAlign==="center"&&(this.horizontalAlign==="left"&&(this.bounds={x1:Rt-Ot._lineHeight/2,y1:It-this.height,x2:Rt+this.width-Ot._lineHeight/2,y2:It}),this.horizontalAlign==="right"&&(this.bounds={x1:Rt-Ot._lineHeight/2,y1:It,x2:Rt+this.width-Ot._lineHeight/2,y2:It+this.height})),this.ctx.textBaseline="top"}},Bt.prototype.render=function(){this._textBlock&&this._textBlock.render(!0)},n(kt,H),kt.prototype.setLayout=Bt.prototype.setLayout,kt.prototype.render=Bt.prototype.render,zt.prototype.get=function(B,Y){var q=null;return 0<this.pool.length?(q=this.pool.pop(),Z(q,B,Y)):q=nt(B,Y),q},zt.prototype.release=function(B){this.pool.push(B)},n(Mt,H);var ci={addTheme:function(B,Y){Ct[B]=Y},addColorSet:function(B,Y){mt[B]=Y},addCultureInfo:function(B,Y){X[B]=Y},formatNumber:function(B,Y,q){if(q=q||"en",X[q])return ne(B,Y||"#,##0.##",new Mt(q));throw"Unknown Culture Name"},formatDate:function(B,Y,q){if(q=q||"en",X[q])return ce(B,Y||"DD MMM YYYY",new Mt(q));throw"Unknown Culture Name"}};typeof Ou<"u"&&typeof Ou.exports<"u"?Ou.exports=ci:typeof define=="function"&&define.amd?define([],function(){return ci}):(window.CanvasJS&&window.console&&window.console.log("CanvasJS namespace already exists. If you are loading both chart and stockchart scripts, just load stockchart alone as it includes all chart features."),window.CanvasJS=window.CanvasJS?window.CanvasJS:ci),z=ci.Chart=function(){function B(r,f){return r.x-f.x}function Y(r,f,l){f=f||{},p(l)?(this.predefinedThemes=Ct,this.optionsName=this.parent=this.index=null):(this.parent=l.parent,this.index=l.index,this.predefinedThemes=l.predefinedThemes,this.optionsName=l.optionsName,this.stockChart=l.stockChart,this.panel=r,this.isOptionsInArray=l.isOptionsInArray),this.theme=p(f.theme)||p(this.predefinedThemes[f.theme])?"light1":f.theme,Y.base.constructor.call(this,"Chart",this.optionsName,f,this.index,this.parent);var o=this;this._containerId=r,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.disableToolTip=this.animatedRender=!1,this.canvasPool=new zt,this.allDOMEventHandlers=[],this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],(this.container=typeof this._containerId=="string"?document.getElementById(this._containerId):this._containerId)?(this.container.innerHTML="",f=r=0,f=St(this.container),r=this.options.width?this.width:0<this.container.clientWidth-parseFloat(f.paddingLeft)-parseFloat(f.paddingRight)?this.container.clientWidth-parseFloat(f.paddingLeft)-parseFloat(f.paddingRight):this.width,f=l&&l.height?l.height:this.options.height?this.height:0<this.container.clientHeight-parseFloat(f.paddingTop)-parseFloat(f.paddingBottom)?this.container.clientHeight-parseFloat(f.paddingTop)-parseFloat(f.paddingBottom):this.height,this.width=r,this.height=f,this.x1=this.y1=0,this.x2=this.width,this.y2=this.height,this.selectedColorSet=typeof mt[this.colorSet]<"u"?mt[this.colorSet]:mt.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",this._canvasJSContainer.style.direction="ltr",ut||(this._canvasJSContainer.style.height="0px"),this.container.appendChild(this._canvasJSContainer),this.canvas=nt(r,f),this._preRenderCanvas=nt(r,f),this.canvas.style.position="absolute",this.canvas.style.WebkitUserSelect="none",this.canvas.style.MozUserSelect="none",this.canvas.style.msUserSelect="none",this.canvas.style.userSelect="none",this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",a(this.ctx),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this._preRenderCtx.textBaseline="top",a(this._preRenderCtx),ut?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=nt(r,f),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=nt(r,f),this.overlaidCanvas.style.position="absolute",this.overlaidCanvas.style.webkitTapHighlightColor="transparent",this.overlaidCanvas.style.WebkitUserSelect="none",this.overlaidCanvas.style.MozUserSelect="none",this.overlaidCanvas.style.msUserSelect="none",this.overlaidCanvas.style.userSelect="none",this.overlaidCanvas.getContext&&(this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",a(this.overlaidCanvasCtx)),this._eventManager=new Oi(this),this.windowResizeHandler=F(window,"resize",function(){o._updateSize()&&(o.render(),o.isNavigator&&o.stockChart&&o.stockChart.navigator&&o.stockChart.navigator.enabled&&o.stockChart.navigator._updateSlider(o.stockChart._axisXMin,o.stockChart._axisXMax))},this.allDOMEventHandlers),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),pt(this._toolBar,{position:"absolute",right:"1px",top:"1px"}),this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},F(this.overlaidCanvas,"click",function(d){o._mouseEventHandler(d)},this.allDOMEventHandlers),F(this.overlaidCanvas,"mousemove",function(d){o._mouseEventHandler(d)},this.allDOMEventHandlers),F(this.overlaidCanvas,"mouseup",function(d){o._mouseEventHandler(d)},this.allDOMEventHandlers),F(this.overlaidCanvas,"mousedown",function(d){o._mouseEventHandler(d),Q(o._dropdownMenu)},this.allDOMEventHandlers),F(this.overlaidCanvas,"mouseout",function(d){o._mouseEventHandler(d)},this.allDOMEventHandlers),F(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(d){o._touchEventHandler(d)},this.allDOMEventHandlers),F(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(d){o._touchEventHandler(d)},this.allDOMEventHandlers),F(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(d){o._touchEventHandler(d)},this.allDOMEventHandlers),F(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(d){o._touchEventHandler(d)},this.allDOMEventHandlers),this.toolTip=new oi(this,this.options.toolTip),this.data=null,this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this.sessionVariables={axisX:[],axisX2:[],axisY:[],axisY2:[]})):window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function q(r,f){for(var l=[],o,d=0;d<r.length;d++)if(d==0)l.push(r[0]);else{var x,_,I;I=d-1,x=I===0?0:I-1,_=I===r.length-1?I:I+1,o=Math.abs((r[_].x-r[x].x)/(r[_].x-r[I].x===0?.01:r[_].x-r[I].x))*(f-1)/2+1;var N=(r[_].x-r[x].x)/o;o=(r[_].y-r[x].y)/o,l[l.length]=r[I].x>r[x].x&&0<N||r[I].x<r[x].x&&0>N?{x:r[I].x+N/3,y:r[I].y+o/3}:{x:r[I].x,y:r[I].y+(l.length===1?0:o/9)},I=d,x=I===0?0:I-1,_=I===r.length-1?I:I+1,o=Math.abs((r[_].x-r[x].x)/(r[I].x-r[x].x===0?.01:r[I].x-r[x].x))*(f-1)/2+1,N=(r[_].x-r[x].x)/o,o=(r[_].y-r[x].y)/o,l[l.length]=r[I].x>r[x].x&&0<N||r[I].x<r[x].x&&0>N?{x:r[I].x-N/3,y:r[I].y-o/3}:{x:r[I].x,y:r[I].y-o/9},l[l.length]=r[d]}return l}function It(r,f,l,o,d,x,_,I,N,M){var w=0;M?(_.color=x,I.color=x):M=1,w=Math.abs(N?d-l:o-f),w=0<_.trimLength?Math.abs(w*_.trimLength/100):Math.abs(w-_.length),N?(l+=w/2,d-=w/2):(f+=w/2,o-=w/2);var w=Math.round(_.thickness)%2===1?.5:0,b=Math.round(I.thickness)%2===1?.5:0;r.save(),r.globalAlpha=M,r.strokeStyle=I.color||x,r.lineWidth=I.thickness||2,r.setLineDash&&r.setLineDash(y(I.dashType,I.thickness)),r.beginPath(),N&&0<I.thickness?(r.moveTo(o-_.thickness/2,Math.round((l+d)/2)-b),r.lineTo(f+_.thickness/2,Math.round((l+d)/2)-b)):0<I.thickness&&(r.moveTo(Math.round((f+o)/2)-b,l+_.thickness/2),r.lineTo(Math.round((f+o)/2)-b,d-_.thickness/2)),r.stroke(),r.strokeStyle=_.color||x,r.lineWidth=_.thickness||2,r.setLineDash&&r.setLineDash(y(_.dashType,_.thickness)),r.beginPath(),N&&0<_.thickness?(r.moveTo(o-w,l),r.lineTo(o-w,d),r.moveTo(f+w,l),r.lineTo(f+w,d)):0<_.thickness&&(r.moveTo(f,l+w),r.lineTo(o,l+w),r.moveTo(f,d-w),r.lineTo(o,d-w)),r.stroke(),r.restore()}function Rt(r,f){Rt.base.constructor.call(this,"Legend","legend",f,null,r),this.chart=r,this.canvas=r.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.optionsName="legend",this.height=this.width=0,this.orientation=null,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},typeof this.options.fontSize>"u"&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=C(this.fontFamily,this.fontSize,this.fontWeight),this.horizontalSpacing=this.fontSize}function jt(r,f,l,o){for(jt.base.constructor.call(this,"DataSeries","data",f,l,r),this.chart=r,this.canvas=r.canvas,this._ctx=r.canvas.ctx,this.index=l,this.noDataPointsInPlotArea=0,this.id=o,this.chart._eventManager.objectMap[o]={id:o,objectType:"dataSeries",dataSeriesIndex:l},r=f.dataPoints?f.dataPoints.length:0,this.dataPointEOs=[],f=0;f<r;f++)this.dataPointEOs[f]={};this.dataPointIds=[],this.plotUnit=[],this.axisY=this.axisX=null,this.optionsName="data",this.isOptionsInArray=!0,this.fillOpacity===null&&(this.type.match(/area/i)?this.fillOpacity=.7:this.fillOpacity=1),this.axisPlacement=this.getDefaultAxisPlacement(),typeof this.options.indexLabelFontSize>"u"&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function Ot(r,f,l,o,d,x){if(Ot.base.constructor.call(this,"Axis",f,l,o,r),this.chart=r,this.canvas=r.canvas,this.ctx=r.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this.dataSeries=[],this._stripLineLabels=this._ticks=this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},this.isOptionsInArray=!0,d==="axisX"?(x==="left"||x==="bottom"?(this.optionsName="axisX",p(this.chart.sessionVariables.axisX[o])&&(this.chart.sessionVariables.axisX[o]={}),this.sessionVariables=this.chart.sessionVariables.axisX[o]):(this.optionsName="axisX2",p(this.chart.sessionVariables.axisX2[o])&&(this.chart.sessionVariables.axisX2[o]={}),this.sessionVariables=this.chart.sessionVariables.axisX2[o]),this.options.interval||(this.intervalType=null)):x==="left"||x==="bottom"?(this.optionsName="axisY",p(this.chart.sessionVariables.axisY[o])&&(this.chart.sessionVariables.axisY[o]={}),this.sessionVariables=this.chart.sessionVariables.axisY[o]):(this.optionsName="axisY2",p(this.chart.sessionVariables.axisY2[o])&&(this.chart.sessionVariables.axisY2[o]={}),this.sessionVariables=this.chart.sessionVariables.axisY2[o]),typeof this.options.titleFontSize>"u"&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),typeof this.options.labelFontSize>"u"&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=d,d!=="axisX"||l&&typeof l.gridThickness<"u"||(this.gridThickness=0),this._position=x,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this.options.scaleBreaks&&(this.scaleBreaks=new re(this.chart,this.options.scaleBreaks,++this.chart._eventManager.lastObjectId,this)),this.stripLines=[],this.options.stripLines&&0<this.options.stripLines.length)for(r=0;r<this.options.stripLines.length;r++)this.stripLines.push(new ui(this.chart,this.options.stripLines[r],r,++this.chart._eventManager.lastObjectId,this));this.options.crosshair&&(this.crosshair=new yi(this.chart,this.options.crosshair,this),this.crosshair._updatedValue=p(this.sessionVariables.crosshairValue)?null:this.sessionVariables.crosshairValue),this._titleTextBlock=null,this.hasOptionChanged("viewportMinimum")&&this.viewportMinimum===null&&(this.options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null),this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||this.sessionVariables.newViewportMinimum===null?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum,this.hasOptionChanged("viewportMaximum")&&this.viewportMaximum===null&&(this.options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null),this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||this.sessionVariables.newViewportMaximum===null?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum,this.minimum!==null&&this.viewportMinimum!==null&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),this.maximum!==null&&this.viewportMaximum!==null&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.trackChanges("viewportMinimum"),this.trackChanges("viewportMaximum")}function re(r,f,l,o){if(re.base.constructor.call(this,"ScaleBreaks","scaleBreaks",f,null,o),this.id=l,this.chart=r,this.ctx=this.chart.ctx,this.axis=o,this.optionsName="scaleBreaks",this.isOptionsInArray=!1,this._appliedBreaks=[],this.customBreaks=[],this.autoBreaks=[],typeof this.spacing=="string"?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?8:(10<this.spacing?10:this.spacing)+"%"):typeof this.spacing!="number"&&(this.spacing=8),this.autoCalculate&&(this.maxNumberOfAutoBreaks=Math.min(this.maxNumberOfAutoBreaks,5)),this.options.customBreaks&&0<this.options.customBreaks.length){for(r=0;r<this.options.customBreaks.length;r++)this.customBreaks.push(new Ve(this.chart,"customBreaks",this.options.customBreaks[r],r,++this.chart._eventManager.lastObjectId,this)),typeof this.customBreaks[r].startValue=="number"&&typeof this.customBreaks[r].endValue=="number"&&this.customBreaks[r].endValue!==this.customBreaks[r].startValue&&this._appliedBreaks.push(this.customBreaks[r]);for(this._appliedBreaks.sort(function(d,x){return d.startValue-x.startValue}),r=0;r<this._appliedBreaks.length-1;r++)this._appliedBreaks[r].endValue>=this._appliedBreaks[r+1].startValue&&(this._appliedBreaks[r].endValue=Math.max(this._appliedBreaks[r].endValue,this._appliedBreaks[r+1].endValue),window.console&&window.console.log("CanvasJS Error: Breaks "+r+" and "+(r+1)+" are overlapping."),this._appliedBreaks.splice(r,2),r--)}}function Ve(r,f,l,o,d,x){Ve.base.constructor.call(this,"Break",f,l,o,x),this.id=d,this.chart=r,this.ctx=this.chart.ctx,this.scaleBreaks=x,this.optionsName=f,this.isOptionsInArray=!0,this.type=l.type?this.type:x.type,this.fillOpacity=p(l.fillOpacity)?x.fillOpacity:this.fillOpacity,this.lineThickness=p(l.lineThickness)?x.lineThickness:this.lineThickness,this.color=l.color?this.color:x.color,this.lineColor=l.lineColor?this.lineColor:x.lineColor,this.lineDashType=l.lineDashType?this.lineDashType:x.lineDashType,!p(this.startValue)&&this.startValue.getTime&&(this.startValue=this.startValue.getTime()),!p(this.endValue)&&this.endValue.getTime&&(this.endValue=this.endValue.getTime()),typeof this.startValue=="number"&&typeof this.endValue=="number"&&this.endValue<this.startValue&&(r=this.startValue,this.startValue=this.endValue,this.endValue=r),this.spacing=typeof l.spacing>"u"?x.spacing:l.spacing,typeof this.options.spacing=="string"?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?0:(10<this.spacing?10:this.spacing)+"%"):typeof this.options.spacing!="number"&&(this.spacing=x.spacing),this.size=x.parent.logarithmic?1:0}function ui(r,f,l,o,d){ui.base.constructor.call(this,"StripLine","stripLines",f,l,d),this.id=o,this.chart=r,this.ctx=this.chart.ctx,this.label=this.label,this.axis=d,this.optionsName="stripLines",this.isOptionsInArray=!0,this._thicknessType="pixel",this.startValue!==null&&this.endValue!==null&&(this.value=d.logarithmic?Math.sqrt((this.startValue.getTime?this.startValue.getTime():this.startValue)*(this.endValue.getTime?this.endValue.getTime():this.endValue)):((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this._thicknessType=null)}function yi(r,f,l){yi.base.constructor.call(this,"Crosshair","crosshair",f,null,l),this.chart=r,this.ctx=this.chart.ctx,this.axis=l,this.optionsName="crosshair",this._thicknessType="pixel"}function oi(r,f){oi.base.constructor.call(this,"ToolTip","toolTip",f,null,r),this.chart=r,this.canvas=r.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.containerTransitionDuration=.1,this.mozContainerTransition=this.getContainerTransition(this.containerTransitionDuration),this.optionsName="toolTip",this._initialize()}function Oi(r){this.chart=r,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=nt(this.chart.width,this.chart.height,!0),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function ze(r){this.chart=r,this.ctx=this.chart.plotArea.ctx,this.animations=[],this.animationRequestId=null}n(Y,H),Y.prototype.destroy=function(){var r=this.allDOMEventHandlers;this._animator&&this._animator.cancelAllAnimations(),this._panTimerId&&clearTimeout(this._panTimerId);for(var f=0;f<r.length;f++){var l=r[f][0],o=r[f][1],d=r[f][2],x=r[f][3],x=x||!1;l.removeEventListener?l.removeEventListener(o,d,x):l.detachEvent&&l.detachEvent("on"+o,d)}for(this.allDOMEventHandlers=[],this.removeAllEventListeners();this._canvasJSContainer&&this._canvasJSContainer.hasChildNodes();)this._canvasJSContainer.removeChild(this._canvasJSContainer.lastChild);for(;this.container&&this.container.hasChildNodes();)this.container.removeChild(this.container.lastChild);for(;this._dropdownMenu&&this._dropdownMenu.hasChildNodes();)this._dropdownMenu.removeChild(this._dropdownMenu.lastChild);this.container=this._canvasJSContainer=null,this.toolTip.container=null,this.canvas&&et(this.canvas),this.overlaidCanvas&&et(this.overlaidCanvas),this._preRenderCanvas&&et(this._preRenderCanvas),this._breaksCanvas&&et(this._breaksCanvas),this._eventManager&&this._eventManager.ghostCanvas&&et(this._eventManager.ghostCanvas),this._toolBar=this._dropdownMenu=this._menuButton=this._resetButton=this._zoomButton=null},Y.prototype._updateOptions=function(){var r=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("dataPointWidth"),this.updateOption("dataPointMinWidth"),this.updateOption("dataPointMaxWidth"),this.updateOption("interactivityEnabled"),this.updateOption("theme"),this.stockChart&&this.stockChart.options&&typeof this.stockChart.options.theme<"u"&&p(this.options.theme)?this.theme=this.stockChart.theme:p(this.stockChart)&&p(this.theme)&&(this.theme="light1"),this.updateOption("colorSet")&&(this.selectedColorSet=typeof mt[this.colorSet]<"u"?mt[this.colorSet]:mt.colorSet1),this.updateOption("backgroundColor"),this.stockChart&&this.stockChart.options&&typeof this.stockChart.options.backgroundColor<"u"&&p(this.options.backgroundColor)&&(this.backgroundColor=this.stockChart.backgroundColor),this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)"),this.updateOption("culture"),this.stockChart&&p(this.options.culture)&&(this.culture=this.stockChart.culture),this._cultureInfo=new Mt(this.culture),this.updateOption("animationEnabled"),this.animationEnabled=this.animationEnabled&&ut,this.updateOption("animationDuration"),this.updateOption("rangeChanging"),this.updateOption("rangeChanged"),this.updateOption("exportEnabled"),this.updateOption("exportFileName"),this.updateOption("zoomType"),this.toolbar=new yt(this,this.options.toolbar),this.stockChart&&this.stockChart.options&&this.stockChart.options.toolbar&&!this.options.toolbar)for(var f in this.stockChart.options.toolbar)this.toolbar[f]=this.stockChart.options.toolbar[f];if(this.options.zoomEnabled||this.panEnabled){if(this._zoomButton)pt(this._zoomButton,{borderRight:this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&this._zoomButton.childNodes[0]&&pt(this._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"});else{var l=!1;Q(this._zoomButton=document.createElement("button")),at(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),this._zoomButton.style.borderRight=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,F(this._zoomButton,"touchstart",function(o){l=!0},this.allDOMEventHandlers),F(this._zoomButton,"click",function(){r.zoomEnabled?(r.zoomEnabled=!1,r.panEnabled=!0,at(r,r._zoomButton,"zoom")):(r.zoomEnabled=!0,r.panEnabled=!1,at(r,r._zoomButton,"pan")),r.render()},this.allDOMEventHandlers),F(this._zoomButton,"mousemove",function(){l?l=!1:(pt(r._zoomButton,{backgroundColor:r.toolbar.itemBackgroundColorOnHover,color:r.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&pt(r._zoomButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),F(this._zoomButton,"mouseout",function(){l||(pt(r._zoomButton,{backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&pt(r._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers)}this._resetButton?(pt(this._resetButton,{borderRight:this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&this._resetButton.childNodes[0]&&pt(this._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}),this._resetButton.title=this._cultureInfo.resetText):(l=!1,Q(this._resetButton=document.createElement("button")),at(this,this._resetButton,"reset"),this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.buttonBorderThickness:0)+"px solid "+this.toolbar.buttonBorderColor,this._toolBar.appendChild(this._resetButton),F(this._resetButton,"touchstart",function(o){l=!0},this.allDOMEventHandlers),F(this._resetButton,"click",function(){if(r.toolTip.hide(),r.toolTip&&r.toolTip.enabled&&r.toolTip.dispatchEvent("hidden",{chart:r,toolTip:r.toolTip},r.toolTip),r.zoomEnabled||r.panEnabled?(r.zoomEnabled=!0,r.panEnabled=!1,at(r,r._zoomButton,"pan"),r._defaultCursor="default",r.overlaidCanvas.style.cursor=r._defaultCursor):(r.zoomEnabled=!1,r.panEnabled=!1),r.sessionVariables.axisX)for(var o=0;o<r.sessionVariables.axisX.length;o++)r.sessionVariables.axisX[o].newViewportMinimum=null,r.sessionVariables.axisX[o].newViewportMaximum=null;if(r.sessionVariables.axisX2)for(o=0;o<r.sessionVariables.axisX2.length;o++)r.sessionVariables.axisX2[o].newViewportMinimum=null,r.sessionVariables.axisX2[o].newViewportMaximum=null;if(r.sessionVariables.axisY)for(o=0;o<r.sessionVariables.axisY.length;o++)r.sessionVariables.axisY[o].newViewportMinimum=null,r.sessionVariables.axisY[o].newViewportMaximum=null;if(r.sessionVariables.axisY2)for(o=0;o<r.sessionVariables.axisY2.length;o++)r.sessionVariables.axisY2[o].newViewportMinimum=null,r.sessionVariables.axisY2[o].newViewportMaximum=null;r.resetOverlayedCanvas(),0>=navigator.userAgent.search("MSIE")&&pt(r._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}),Q(r._zoomButton,r._resetButton),r.stockChart&&(r.stockChart._rangeEventParameter={stockChart:r.stockChart,source:"chart",index:r.stockChart.charts.indexOf(r),minimum:null,maximum:null}),r._dispatchRangeEvent("rangeChanging","reset"),r.stockChart&&(r.stockChart._rangeEventParameter.type="rangeChanging",r.stockChart.dispatchEvent("rangeChanging",r.stockChart._rangeEventParameter,r.stockChart)),r.render(),r.syncCharts&&r.stockChart&&(r.stockChart.rangeUpdatedBy=!r.stockChart.navigator.slider||p(r.stockChart.navigator.slider.options.minimum)&&p(r.stockChart.navigator.slider.options.maximum)?!r.stockChart.rangeSelector.enabled||!r.stockChart.rangeSelector.inputFields.enabled||p(r.stockChart.rangeSelector.inputFields.options.startValue)&&p(r.stockChart.rangeSelector.inputFields.options.endValue)?null:"inputFields":"navigator",p(r.stockChart._selectedRangeButtonIndex)||(r.stockChart.rangeUpdatedBy="rangeButton"),r.syncCharts(null,null),r.stockChart.rangeSelector&&r.stockChart.rangeSelector.enabled&&r.stockChart.rangeSelector.render(),r.stockChart.rangeUpdatedBy==="rangeButton"&&r.stockChart.rangeSelector.selectedRangeButtonIndex<r.stockChart.rangeSelector.buttons.length&&(o=r.stockChart.rangeSelector.buttons[r.stockChart._selectedRangeButtonIndex],o.enabled&&(o.state="on",o.textBlock.fontWeight="bold",o.textBlock.fontColor=r.stockChart.rangeSelector.buttonStyle.labelFontColorOnHover,o.textBlock.backgroundColor=r.stockChart.rangeSelector.buttonStyle.backgroundColorOnSelect,r.stockChart.rangeSelector.sessionVariables._clickedRangeButtonIndex=null,o.render()))),r._dispatchRangeEvent("rangeChanged","reset"),r.stockChart&&(r.stockChart._rangeEventParameter.type="rangeChanged",r.stockChart.dispatchEvent("rangeChanged",r.stockChart._rangeEventParameter,r.stockChart))},this.allDOMEventHandlers),F(this._resetButton,"mousemove",function(){l||(pt(r._resetButton,{backgroundColor:r.toolbar.itemBackgroundColorOnHover,color:r.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&pt(r._resetButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))},this.allDOMEventHandlers),F(this._resetButton,"mouseout",function(){l||(pt(r._resetButton,{backgroundColor:r.toolbar.itemBackgroundColor,color:r.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&pt(r._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))},this.allDOMEventHandlers),this.overlaidCanvas.style.cursor=r._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(r._zoomButton.getAttribute("state")===r._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),ot(r._zoomButton,r._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))}else this.panEnabled=this.zoomEnabled=!1;O(this),this._toolBar.style.display!=="none"&&this._zoomButton&&(this.panEnabled?at(r,r._zoomButton,"zoom"):at(r,r._zoomButton,"pan"),r._resetButton.getAttribute("state")!==r._cultureInfo.resetText&&at(r,r._resetButton,"reset")),this.options.toolTip&&this.toolTip.options!==this.options.toolTip&&(this.toolTip.options=this.options.toolTip);for(f in this.toolTip.options)this.toolTip.options.hasOwnProperty(f)&&this.toolTip.updateOption(f)},Y.prototype._updateSize=function(){var r;r=[this.canvas,this.overlaidCanvas,this._eventManager.ghostCanvas];var f=0,l=0,o=St(this.container);if(this.options.width?f=this.width:this.width=f=0<this.container.clientWidth-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)?this.container.clientWidth-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight):this.width,p(this.stockChart)||p(this.index)?this.options.height?l=this.height:this.height=l=0<this.container.clientHeight-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)?this.container.clientHeight-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom):this.height:l=this.height=this.stockChart._chartsHeight[this.index],this.canvas.width!==f*ie||this.canvas.height!==l*ie){for(o=0;o<r.length;o++)Z(r[o],f,l);this.bounds={x1:0,y1:0,x2:this.width,y2:this.height,width:this.width,height:this.height},r=!0}else r=!1;return r},Y.prototype._initialize=function(){this.isNavigator=!(p(this.parent)||p(this.parent._defaultsKey)||this.parent._defaultsKey!=="Navigator"),this._animator?this._animator.cancelAllAnimations():this._animator=new ze(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.funnelPyramidClickHandler=this.pieDoughnutClickHandler=null,this._updateOptions(),this.animatedRender=ut&&this.animationEnabled&&this.renderCount===0,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,plotTypes:[]},this.layoutManager=new $(0,0,this.width,this.height,this.isNavigator?0:2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[],this.title=null,this.subtitles=[];var r=0,f=null;if(this.options.data){for(var l=0;l<this.options.data.length;l++)if(r++,!this.options.data[l].type||0<=Y._supportedChartTypes.indexOf(this.options.data[l].type)){var o=new jt(this,this.options.data[l],r-1,++this._eventManager.lastObjectId);if(!p(o)&&o.dataPoints){for(var d=0;d<o.dataPoints.length;d++)if(o.dataPoints[d].x&&o.dataPoints[d].x.getTime){o.xValueType="dateTime";break}}o.type==="error"&&(o.linkedDataSeriesIndex=p(this.options.data[l].linkedDataSeriesIndex)?l-1:this.options.data[l].linkedDataSeriesIndex,0>o.linkedDataSeriesIndex||o.linkedDataSeriesIndex>=this.options.data.length||typeof o.linkedDataSeriesIndex!="number"||this.options.data[o.linkedDataSeriesIndex].type==="error")&&(o.linkedDataSeriesIndex=null),o.name===null&&(o.name="DataSeries "+r),o.color===null?1<this.options.data.length?(o._colorSet=[this.selectedColorSet[o.index%this.selectedColorSet.length]],o.color=this.selectedColorSet[o.index%this.selectedColorSet.length]):o._colorSet=o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="stackedArea"||o.type==="stackedArea100"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="candlestick"||o.type==="ohlc"||o.type==="waterfall"||o.type==="boxAndWhisker"?[this.selectedColorSet[0]]:this.selectedColorSet:o._colorSet=[o.color],o.markerSize===null&&((o.type==="line"||o.type==="stepLine"||o.type==="spline"||0<=o.type.toLowerCase().indexOf("area"))&&o.dataPoints&&o.dataPoints.length<this.width/16||o.type==="scatter")&&(o.markerSize=8),o.type!=="bubble"&&o.type!=="scatter"||!o.dataPoints||(o.dataPoints.some?o.dataPoints.some(function(I){return I.x})&&o.dataPoints.sort(B):o.dataPoints.sort(B)),this.data.push(o);var d=o.axisPlacement,f=f||d,x;if(d==="normal"?this.plotInfo.axisPlacement==="xySwapped"?x='You cannot combine "'+o.type+'" with bar chart':this.plotInfo.axisPlacement==="none"?x='You cannot combine "'+o.type+'" with pie chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="normal"):d==="xySwapped"?this.plotInfo.axisPlacement==="normal"?x='You cannot combine "'+o.type+'" with line, area, column or pie chart':this.plotInfo.axisPlacement==="none"?x='You cannot combine "'+o.type+'" with pie chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="xySwapped"):d==="none"?this.plotInfo.axisPlacement==="normal"?x='You cannot combine "'+o.type+'" with line, area, column or bar chart':this.plotInfo.axisPlacement==="xySwapped"?x='You cannot combine "'+o.type+'" with bar chart':this.plotInfo.axisPlacement===null&&(this.plotInfo.axisPlacement="none"):d===null&&this.plotInfo.axisPlacement==="none"&&(x='You cannot combine "'+o.type+'" with pie chart'),x&&window.console){window.console.log(x);return}}for(l=0;l<this.data.length;l++){if(f=="none"&&this.data[l].type==="error"&&window.console){window.console.log('You cannot combine "'+o.type+'" with error chart');return}this.data[l].type==="error"&&(this.data[l].axisPlacement=this.plotInfo.axisPlacement=f||"normal",this.data[l]._linkedSeries=this.data[l].linkedDataSeriesIndex===null?null:this.data[this.data[l].linkedDataSeriesIndex])}}this._objectsInitialized=!0,this._plotAreaElements=[]},Y._supportedChartTypes=v("line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 candlestick ohlc boxAndWhisker rangeColumn error rangeBar rangeArea rangeSplineArea pie doughnut funnel pyramid waterfall".split(" ")),Y.prototype.setLayout=function(){for(var r=this._plotAreaElements,f=0;f<this.data.length;f++)if(this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped"){if(!this.data[f].axisYType||this.data[f].axisYType==="primary")if(this.options.axisY&&0<this.options.axisY.length){if(!this.axisY.length)for(var l=0;l<this.options.axisY.length;l++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY[l]=new Ot(this,"axisY",this.options.axisY[l],l,"axisY","left")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY[l]=new Ot(this,"axisY",this.options.axisY[l],l,"axisY","bottom"));this.data[f].axisY=this.axisY[0<=this.data[f].axisYIndex&&this.data[f].axisYIndex<this.axisY.length?this.data[f].axisYIndex:0],this.axisY[0<=this.data[f].axisYIndex&&this.data[f].axisYIndex<this.axisY.length?this.data[f].axisYIndex:0].dataSeries.push(this.data[f])}else this.axisY.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY[0]=new Ot(this,"axisY",this.options.axisY,0,"axisY","left")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY[0]=new Ot(this,"axisY",this.options.axisY,0,"axisY","bottom"))),this.data[f].axisY=this.axisY[0],this.axisY[0].dataSeries.push(this.data[f]);if(this.data[f].axisYType==="secondary")if(this.options.axisY2&&0<this.options.axisY2.length){if(!this.axisY2.length)for(l=0;l<this.options.axisY2.length;l++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY2[l]=new Ot(this,"axisY2",this.options.axisY2[l],l,"axisY","right")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY2[l]=new Ot(this,"axisY2",this.options.axisY2[l],l,"axisY","top"));this.data[f].axisY=this.axisY2[0<=this.data[f].axisYIndex&&this.data[f].axisYIndex<this.axisY2.length?this.data[f].axisYIndex:0],this.axisY2[0<=this.data[f].axisYIndex&&this.data[f].axisYIndex<this.axisY2.length?this.data[f].axisYIndex:0].dataSeries.push(this.data[f])}else this.axisY2.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisY2[0]=new Ot(this,"axisY2",this.options.axisY2,0,"axisY","right")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisY2[0]=new Ot(this,"axisY2",this.options.axisY2,0,"axisY","top"))),this.data[f].axisY=this.axisY2[0],this.axisY2[0].dataSeries.push(this.data[f]);if(!this.data[f].axisXType||this.data[f].axisXType==="primary")if(this.options.axisX&&0<this.options.axisX.length){if(!this.axisX.length)for(l=0;l<this.options.axisX.length;l++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX[l]=new Ot(this,"axisX",this.options.axisX[l],l,"axisX","bottom")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX[l]=new Ot(this,"axisX",this.options.axisX[l],l,"axisX","left"));this.data[f].axisX=this.axisX[0<=this.data[f].axisXIndex&&this.data[f].axisXIndex<this.axisX.length?this.data[f].axisXIndex:0],this.axisX[0<=this.data[f].axisXIndex&&this.data[f].axisXIndex<this.axisX.length?this.data[f].axisXIndex:0].dataSeries.push(this.data[f])}else this.axisX.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX[0]=new Ot(this,"axisX",this.options.axisX,0,"axisX","bottom")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX[0]=new Ot(this,"axisX",this.options.axisX,0,"axisX","left"))),this.data[f].axisX=this.axisX[0],this.axisX[0].dataSeries.push(this.data[f]);if(this.data[f].axisXType==="secondary")if(this.options.axisX2&&0<this.options.axisX2.length){if(!this.axisX2.length)for(l=0;l<this.options.axisX2.length;l++)this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX2[l]=new Ot(this,"axisX2",this.options.axisX2[l],l,"axisX","top")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX2[l]=new Ot(this,"axisX2",this.options.axisX2[l],l,"axisX","right"));this.data[f].axisX=this.axisX2[0<=this.data[f].axisXIndex&&this.data[f].axisXIndex<this.axisX2.length?this.data[f].axisXIndex:0],this.axisX2[0<=this.data[f].axisXIndex&&this.data[f].axisXIndex<this.axisX2.length?this.data[f].axisXIndex:0].dataSeries.push(this.data[f])}else this.axisX2.length||(this.plotInfo.axisPlacement==="normal"?this._axes.push(this.axisX2[0]=new Ot(this,"axisX2",this.options.axisX2,0,"axisX","top")):this.plotInfo.axisPlacement==="xySwapped"&&this._axes.push(this.axisX2[0]=new Ot(this,"axisX2",this.options.axisX2,0,"axisX","right"))),this.data[f].axisX=this.axisX2[0],this.axisX2[0].dataSeries.push(this.data[f])}if(this.axisY){for(l=1;l<this.axisY.length;l++)typeof this.axisY[l].options.gridThickness>"u"&&(this.axisY[l].gridThickness=0);for(l=0;l<this.axisY.length-1;l++)typeof this.axisY[l].options.margin>"u"&&(this.axisY[l].margin=10)}if(this.axisY2){for(l=1;l<this.axisY2.length;l++)typeof this.axisY2[l].options.gridThickness>"u"&&(this.axisY2[l].gridThickness=0);for(l=0;l<this.axisY2.length-1;l++)typeof this.axisY2[l].options.margin>"u"&&(this.axisY2[l].margin=10)}if(this.axisY&&0<this.axisY.length&&this.axisY2&&0<this.axisY2.length&&(0<this.axisY[0].gridThickness&&typeof this.axisY2[0].options.gridThickness>"u"?this.axisY2[0].gridThickness=0:0<this.axisY2[0].gridThickness&&typeof this.axisY[0].options.gridThickness>"u"&&(this.axisY[0].gridThickness=0)),this.axisX)for(l=0;l<this.axisX.length;l++)typeof this.axisX[l].options.gridThickness>"u"&&(this.axisX[l].gridThickness=0);if(this.axisX2)for(l=0;l<this.axisX2.length;l++)typeof this.axisX2[l].options.gridThickness>"u"&&(this.axisX2[l].gridThickness=0);if(this.axisX&&0<this.axisX.length&&this.axisX2&&0<this.axisX2.length&&(0<this.axisX[0].gridThickness&&typeof this.axisX2[0].options.gridThickness>"u"?this.axisX2[0].gridThickness=0:0<this.axisX2[0].gridThickness&&typeof this.axisX[0].options.gridThickness>"u"&&(this.axisX[0].gridThickness=0)),l=!1,0<this._axes.length&&this.options.zoomEnabled&&(this.zoomEnabled||this.panEnabled)){for(f=0;f<this._axes.length;f++)if(!p(this._axes[f].viewportMinimum)||!p(this._axes[f].viewportMaximum)){l=!0;break}}if(l?(ot(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,this._zoomButton.style.borderRight=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.buttonBorderThickness:0)+"px solid "+this.toolbar.buttonBorderColor):(Q(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.buttonBorderThickness+"px solid transparent",this.options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),T(this),this._processData(),this.options.title&&(this.title=new Bt(this,this.options.title),this.title.dockInsidePlotArea?r.push(this.title):this.title.setLayout()),this.options.subtitles)for(f=0;f<this.options.subtitles.length;f++)l=new kt(this,this.options.subtitles[f],f),this.subtitles.push(l),l.dockInsidePlotArea?r.push(l):l.setLayout();for(this.legend=new Rt(this,this.options.legend),f=0;f<this.data.length;f++)(this.data[f].showInLegend||this.data[f].type==="pie"||this.data[f].type==="doughnut"||this.data[f].type==="funnel"||this.data[f].type==="pyramid")&&this.legend.dataSeries.push(this.data[f]);for(this.legend.dockInsidePlotArea?r.push(this.legend):this.legend.setLayout(),f=0;f<this._axes.length;f++)if(this._axes[f].scaleBreaks&&this._axes[f].scaleBreaks._appliedBreaks.length){ut?(this._breaksCanvas=nt(this.width,this.height,!0),this._breaksCanvasCtx=this._breaksCanvas.getContext("2d")):(this._breaksCanvas=this.canvas,this._breaksCanvasCtx=this.ctx);break}this._preRenderCanvas=nt(this.width,this.height),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this.plotInfo.axisPlacement!=="normal"&&this.plotInfo.axisPlacement!=="xySwapped"||Ot.setLayout(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace())},Y.prototype.renderElements=function(){if(this.height&&this.width){var o=this._plotAreaElements;this.title&&!this.title.dockInsidePlotArea&&this.title.render();for(var r=0;r<this.subtitles.length;r++)this.subtitles[r].dockInsidePlotArea||this.subtitles[r].render();if(this.legend.dockInsidePlotArea||this.legend.render(),this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped")Ot.render(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement);else if(this.plotInfo.axisPlacement==="none")this.preparePlotArea();else return;for(r=0;r<o.length;r++)o[r].setLayout(),o[r].render();var f=[];if(this.animatedRender){var l=nt(this.width,this.height);l.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)}J(this);var o=this.ctx.miterLimit,d;for(this.ctx.miterLimit=3,ut&&this._breaksCanvas&&(this._preRenderCtx.drawImage(this.canvas,0,0,this.width,this.height),this._preRenderCtx.drawImage(this._breaksCanvas,0,0,this.width,this.height),this._breaksCanvasCtx.globalCompositeOperation="source-atop",this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),this._preRenderCtx.clearRect(0,0,this.width,this.height)),r=0;r<this.plotInfo.plotTypes.length;r++)for(var x=this.plotInfo.plotTypes[r],_=0;_<x.plotUnits.length;_++){var I=x.plotUnits[_],N=null;I.targetCanvas&&et(I.targetCanvas),I.targetCanvas=null,this.animatedRender&&(I.targetCanvas=nt(this.width,this.height),I.targetCanvasCtx=I.targetCanvas.getContext("2d"),d=I.targetCanvasCtx.miterLimit,I.targetCanvasCtx.miterLimit=3),I.type==="line"?N=this.renderLine(I):I.type==="stepLine"?N=this.renderStepLine(I):I.type==="spline"?N=this.renderSpline(I):I.type==="column"?N=this.renderColumn(I):I.type==="bar"?N=this.renderBar(I):I.type==="area"?N=this.renderArea(I):I.type==="stepArea"?N=this.renderStepArea(I):I.type==="splineArea"?N=this.renderSplineArea(I):I.type==="stackedColumn"?N=this.renderStackedColumn(I):I.type==="stackedColumn100"?N=this.renderStackedColumn100(I):I.type==="stackedBar"?N=this.renderStackedBar(I):I.type==="stackedBar100"?N=this.renderStackedBar100(I):I.type==="stackedArea"?N=this.renderStackedArea(I):I.type==="stackedArea100"?N=this.renderStackedArea100(I):I.type==="bubble"?N=N=this.renderBubble(I):I.type==="scatter"?N=this.renderScatter(I):I.type==="pie"?this.renderPie(I):I.type==="doughnut"?this.renderPie(I):I.type==="funnel"?N=this.renderFunnel(I):I.type==="pyramid"?N=this.renderFunnel(I):I.type==="candlestick"?N=this.renderCandlestick(I):I.type==="ohlc"?N=this.renderCandlestick(I):I.type==="rangeColumn"?N=this.renderRangeColumn(I):I.type==="error"?N=this.renderError(I):I.type==="rangeBar"?N=this.renderRangeBar(I):I.type==="rangeArea"?N=this.renderRangeArea(I):I.type==="rangeSplineArea"?N=this.renderRangeSplineArea(I):I.type==="waterfall"?N=this.renderWaterfall(I):I.type==="boxAndWhisker"&&(N=this.renderBoxAndWhisker(I));for(var M=0;M<I.dataSeriesIndexes.length;M++)this._dataInRenderedOrder.push(this.data[I.dataSeriesIndexes[M]]);this.animatedRender&&(I.targetCanvasCtx.miterLimit=d,N&&f.push(N))}this.ctx.miterLimit=o,this.animatedRender&&this._breaksCanvasCtx&&f.push({source:this._breaksCanvasCtx,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0,startTimePercent:.7}),this.animatedRender&&0<this._indexLabels.length&&(d=nt(this.width,this.height).getContext("2d"),a(d),f.push(this.renderIndexLabels(d)));var w=this;if(0<f.length)w.disableToolTip=!0,w._animator.animate(200,w.animationDuration,function(b){w.ctx.clearRect(0,0,w.width,w.height),w.ctx.drawImage(l,0,0,Math.floor(w.width*ie),Math.floor(w.height*ie),0,0,w.width,w.height);for(var P=0;P<f.length;P++)N=f[P],1>b&&typeof N.startTimePercent<"u"?b>=N.startTimePercent&&N.animationCallback(N.easingFunction(b-N.startTimePercent,0,1,1-N.startTimePercent),N):N.animationCallback(N.easingFunction(b,0,1,1),N);w.dispatchEvent("dataAnimationIterationEnd",{chart:w})},function(){f=[];for(var b=0;b<w.plotInfo.plotTypes.length;b++)for(var P=w.plotInfo.plotTypes[b],c=0;c<P.plotUnits.length;c++){var L=P.plotUnits[c];L.targetCanvas&&et(L.targetCanvas),L.targetCanvas=null}l=null,w.disableToolTip=!1,w.dispatchEvent("dataAnimationEnd",{chart:w})});else{if(w._breaksCanvas)if(ut)w.plotArea.ctx.drawImage(w._breaksCanvas,0,0,this.width,this.height);else for(M=0;M<w._axes.length;M++)w._axes[M].createMask();0<w._indexLabels.length&&w.renderIndexLabels(),w.dispatchEvent("dataAnimationIterationEnd",{chart:w}),w.dispatchEvent("dataAnimationEnd",{chart:w})}for(this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||this._zoomButton.style.display==="none"||Q(this._zoomButton,this._resetButton),p(this.toolTip._xValue)||p(this.toolTip._dataSeriesIndex)||this.toolTip.showAtX(this.toolTip._xValue,this.toolTip._dataSeriesIndex),this.toolTip._updateToolTip(),this.toolTip.enabled&&this.toolTip._updatedEventParameters&&!isNaN(this.toolTip._prevX)&&!isNaN(this.toolTip._prevY)&&this.toolTip.container&&this.toolTip.container.style&&this.toolTip.dispatchEvent(this.toolTip.container.style.display==="none"?"hidden":"updated",this.toolTip._updatedEventParameters,this.toolTip),this.renderCount++,Yt&&(w=this,setTimeout(function(){var b=document.getElementById("ghostCanvasCopy");b&&(Z(b,w.width,w.height),b.getContext("2d").drawImage(w._eventManager.ghostCanvas,0,0))},2e3)),this._breaksCanvas&&(delete this._breaksCanvas,delete this._breaksCanvasCtx),M=0;M<this._axes.length;M++)this._axes[M].maskCanvas&&(delete this._axes[M].maskCanvas,delete this._axes[M].maskCtx)}},Y.prototype.render=function(r){r&&(this.options=r),this._initialize(),this.setLayout(),this.renderElements(),this._preRenderCanvas&&et(this._preRenderCanvas)},Y.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},Y.prototype.categoriseDataSeries=function(){for(var r="",f=0;f<this.data.length;f++)if(r=this.data[f],r.dataPoints&&r.dataPoints.length!==0&&r.visible&&0<=Y._supportedChartTypes.indexOf(r.type)){for(var l=null,o=!1,d=null,x=!1,_=0;_<this.plotInfo.plotTypes.length;_++)if(this.plotInfo.plotTypes[_].type===r.type){o=!0,l=this.plotInfo.plotTypes[_];break}for(o||(l={type:r.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(l)),_=0;_<l.plotUnits.length;_++)if(l.plotUnits[_].axisYType===r.axisYType&&l.plotUnits[_].axisXType===r.axisXType&&l.plotUnits[_].axisYIndex===r.axisYIndex&&l.plotUnits[_].axisXIndex===r.axisXIndex){x=!0,d=l.plotUnits[_];break}x||(d={type:r.type,previousDataSeriesCount:0,index:l.plotUnits.length,plotType:l,axisXType:r.axisXType,axisYType:r.axisYType,axisYIndex:r.axisYIndex,axisXIndex:r.axisXIndex,axisY:r.axisYType==="primary"?this.axisY[0<=r.axisYIndex&&r.axisYIndex<this.axisY.length?r.axisYIndex:0]:this.axisY2[0<=r.axisYIndex&&r.axisYIndex<this.axisY2.length?r.axisYIndex:0],axisX:r.axisXType==="primary"?this.axisX[0<=r.axisXIndex&&r.axisXIndex<this.axisX.length?r.axisXIndex:0]:this.axisX2[0<=r.axisXIndex&&r.axisXIndex<this.axisX2.length?r.axisXIndex:0],dataSeriesIndexes:[],yTotals:[],yAbsTotals:[]},l.plotUnits.push(d)),l.totalDataSeries++,d.dataSeriesIndexes.push(f),r.plotUnit=d}for(f=0;f<this.plotInfo.plotTypes.length;f++)for(l=this.plotInfo.plotTypes[f],_=r=0;_<l.plotUnits.length;_++)l.plotUnits[_].previousDataSeriesCount=r,r+=l.plotUnits[_].dataSeriesIndexes.length},Y.prototype.assignIdToDataPoints=function(){for(var r=0;r<this.data.length;r++){var f=this.data[r];if(f.dataPoints)for(var l=f.dataPoints.length,o=0;o<l;o++)f.dataPointIds[o]=++this._eventManager.lastObjectId}},Y.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var r=0;r<this.plotInfo.plotTypes.length;r++)for(var f=this.plotInfo.plotTypes[r],l=0;l<f.plotUnits.length;l++){var o=f.plotUnits[l];o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="column"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="bar"||o.type==="bubble"||o.type==="scatter"?this._processMultiseriesPlotUnit(o):o.type==="stackedColumn"||o.type==="stackedBar"||o.type==="stackedArea"?this._processStackedPlotUnit(o):o.type==="stackedColumn100"||o.type==="stackedBar100"||o.type==="stackedArea100"?this._processStacked100PlotUnit(o):o.type==="candlestick"||o.type==="ohlc"||o.type==="rangeColumn"||o.type==="rangeBar"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="error"||o.type==="boxAndWhisker"?this._processMultiYPlotUnit(o):o.type==="waterfall"&&this._processSpecificPlotUnit(o)}this.calculateAutoBreaks()},Y.prototype._processMultiseriesPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var f=r.axisY.dataInfo,l=r.axisX.dataInfo,o,d,x=!1,_=0;_<r.dataSeriesIndexes.length;_++){var I=this.data[r.dataSeriesIndexes[_]],N=0,M=!1,w=!1,b;if(I.axisPlacement==="normal"||I.axisPlacement==="xySwapped")var P=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,c=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((I.dataPoints[N].x&&I.dataPoints[N].x.getTime||I.xValueType==="dateTime")&&(x=!0),N=0;N<I.dataPoints.length;N++){if(typeof I.dataPoints[N].x>"u"&&(I.dataPoints[N].x=N+(r.axisX.logarithmic?1:0)),I.dataPoints[N].x.getTime?(x=!0,o=I.dataPoints[N].x.getTime()):o=I.dataPoints[N].x,d=I.dataPoints[N].y,o<l.min&&(l.min=o),o>l.max&&(l.max=o),d<f.min&&typeof d=="number"&&(f.min=d),d>f.max&&typeof d=="number"&&(f.max=d),0<N){if(r.axisX.logarithmic){var L=o/I.dataPoints[N-1].x;1>L&&(L=1/L),l.minDiff>L&&L!==1&&(l.minDiff=L)}else L=o-I.dataPoints[N-1].x,0>L&&(L*=-1),l.minDiff>L&&L!==0&&(l.minDiff=L);d!==null&&I.dataPoints[N-1].y!==null&&(r.axisY.logarithmic?(L=d/I.dataPoints[N-1].y,1>L&&(L=1/L),f.minDiff>L&&L!==1&&(f.minDiff=L)):(L=d-I.dataPoints[N-1].y,0>L&&(L*=-1),f.minDiff>L&&L!==0&&(f.minDiff=L)))}if(o<P&&!M)d!==null&&(b=o);else{if(!M&&(M=!0,0<N)){N-=2;continue}if(o>c&&!w)w=!0;else if(o>c&&w)continue;I.dataPoints[N].label&&(r.axisX.labels[o]=I.dataPoints[N].label),o<l.viewPortMin&&(l.viewPortMin=o),o>l.viewPortMax&&(l.viewPortMax=o),d===null?l.viewPortMin===o&&b<o&&(l.viewPortMin=b):(d<f.viewPortMin&&typeof d=="number"&&(f.viewPortMin=d),d>f.viewPortMax&&typeof d=="number"&&(f.viewPortMax=d))}}I.axisX.valueType=I.xValueType=x?"dateTime":"number"}},Y.prototype._processStackedPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length)){for(var f=r.axisY.dataInfo,l=r.axisX.dataInfo,o,d,x=!1,_=[],I=[],N=1/0,M=-1/0,w={},b=0;b<r.dataSeriesIndexes.length;b++){var P=this.data[r.dataSeriesIndexes[b]],c=0,L=!1,V=!1,U;if(P.axisPlacement==="normal"||P.axisPlacement==="xySwapped")var E=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:-1/0,G=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((P.dataPoints[c].x&&P.dataPoints[c].x.getTime||P.xValueType==="dateTime")&&(x=!0),c=0;c<P.dataPoints.length;c++){if(typeof P.dataPoints[c].x>"u"&&(P.dataPoints[c].x=c+(r.axisX.logarithmic?1:0)),P.dataPoints[c].x.getTime?(x=!0,o=P.dataPoints[c].x.getTime()):o=P.dataPoints[c].x,d=p(P.dataPoints[c].y)?0:P.dataPoints[c].y,o<l.min&&(l.min=o),o>l.max&&(l.max=o),0<c){if(r.axisX.logarithmic){var j=o/P.dataPoints[c-1].x;1>j&&(j=1/j),l.minDiff>j&&j!==1&&(l.minDiff=j)}else j=o-P.dataPoints[c-1].x,0>j&&(j*=-1),l.minDiff>j&&j!==0&&(l.minDiff=j);d!==null&&P.dataPoints[c-1].y!==null&&(r.axisY.logarithmic?0<d&&(j=d/P.dataPoints[c-1].y,1>j&&(j=1/j),f.minDiff>j&&j!==1&&(f.minDiff=j)):(j=d-P.dataPoints[c-1].y,0>j&&(j*=-1),f.minDiff>j&&j!==0&&(f.minDiff=j)))}if(o<E&&!L)P.dataPoints[c].y!==null&&(U=o);else{if(!L&&(L=!0,0<c)){c-=2;continue}if(o>G&&!V)V=!0;else if(o>G&&V)continue;P.dataPoints[c].label&&(r.axisX.labels[o]=P.dataPoints[c].label),o<l.viewPortMin&&(l.viewPortMin=o),o>l.viewPortMax&&(l.viewPortMax=o),P.dataPoints[c].y===null?l.viewPortMin===o&&U<o&&(l.viewPortMin=U):(w[o]=(w[o]||0)+P.dataPoints[c].y,P.dataPointEOs[c].cumulativeY=w[o],r.yTotals[o]=(r.yTotals[o]?r.yTotals[o]:0)+d,r.yAbsTotals[o]=(r.yAbsTotals[o]?r.yAbsTotals[o]:0)+Math.abs(d),0<=d?_[o]?_[o]+=d:(_[o]=d,N=Math.min(d,N)):I[o]?I[o]+=d:(I[o]=d,M=Math.max(d,M)))}}r.axisY.scaleBreaks&&r.axisY.scaleBreaks.autoCalculate&&1<=r.axisY.scaleBreaks.maxNumberOfAutoBreaks&&(f.dataPointYPositiveSums?(f.dataPointYPositiveSums.push.apply(f.dataPointYPositiveSums,_),f.dataPointYNegativeSums.push.apply(f.dataPointYPositiveSums,I)):(f.dataPointYPositiveSums=_,f.dataPointYNegativeSums=I)),P.axisX.valueType=P.xValueType=x?"dateTime":"number"}for(c in _)_.hasOwnProperty(c)&&!isNaN(c)&&(r=_[c],r<f.min&&(f.min=Math.min(r,N)),r>f.max&&(f.max=r),c<l.viewPortMin||c>l.viewPortMax||(r<f.viewPortMin&&(f.viewPortMin=Math.min(r,N)),r>f.viewPortMax&&(f.viewPortMax=r)));for(c in I)I.hasOwnProperty(c)&&!isNaN(c)&&(r=I[c],r<f.min&&(f.min=r),r>f.max&&(f.max=Math.max(r,M)),c<l.viewPortMin||c>l.viewPortMax||(r<f.viewPortMin&&(f.viewPortMin=r),r>f.viewPortMax&&(f.viewPortMax=Math.max(r,M))))}},Y.prototype._processStacked100PlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length)){for(var f=r.axisY.dataInfo,l=r.axisX.dataInfo,o,d,x=!1,_=!1,I=!1,N={},M=[],w=0;w<r.dataSeriesIndexes.length;w++){var b=this.data[r.dataSeriesIndexes[w]],P=0,c=!1,L=!1,V;if(b.axisPlacement==="normal"||b.axisPlacement==="xySwapped")var U=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:-1/0,E=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((b.dataPoints[P].x&&b.dataPoints[P].x.getTime||b.xValueType==="dateTime")&&(x=!0),P=0;P<b.dataPoints.length;P++){if(typeof b.dataPoints[P].x>"u"&&(b.dataPoints[P].x=P+(r.axisX.logarithmic?1:0)),b.dataPoints[P].x.getTime?(x=!0,o=b.dataPoints[P].x.getTime()):o=b.dataPoints[P].x,d=p(b.dataPoints[P].y)?null:b.dataPoints[P].y,o<l.min&&(l.min=o),o>l.max&&(l.max=o),0<P){if(r.axisX.logarithmic){var G=o/b.dataPoints[P-1].x;1>G&&(G=1/G),l.minDiff>G&&G!==1&&(l.minDiff=G)}else G=o-b.dataPoints[P-1].x,0>G&&(G*=-1),l.minDiff>G&&G!==0&&(l.minDiff=G);p(d)||b.dataPoints[P-1].y===null||(r.axisY.logarithmic?0<d&&(G=d/b.dataPoints[P-1].y,1>G&&(G=1/G),f.minDiff>G&&G!==1&&(f.minDiff=G)):(G=d-b.dataPoints[P-1].y,0>G&&(G*=-1),f.minDiff>G&&G!==0&&(f.minDiff=G)))}if(o<U&&!c)d!==null&&(V=o);else{if(!c&&(c=!0,0<P)){P-=2;continue}if(o>E&&!L)L=!0;else if(o>E&&L)continue;b.dataPoints[P].label&&(r.axisX.labels[o]=b.dataPoints[P].label),o<l.viewPortMin&&(l.viewPortMin=o),o>l.viewPortMax&&(l.viewPortMax=o),d===null?l.viewPortMin===o&&V<o&&(l.viewPortMin=V):(N[o]=(N[o]||0)+b.dataPoints[P].y,b.dataPointEOs[P].cumulativeY=N[o],r.yTotals[o]=(r.yTotals[o]?r.yTotals[o]:0)+d,r.yAbsTotals[o]=(r.yAbsTotals[o]?r.yAbsTotals[o]:0)+Math.abs(d),0<=d?_=!0:0>d&&(I=!0),M[o]=M[o]?M[o]+Math.abs(d):Math.abs(d))}}b.axisX.valueType=b.xValueType=x?"dateTime":"number"}r.axisY.logarithmic?(f.max=p(f.viewPortMax)?99*Math.pow(r.axisY.logarithmBase,-.05):Math.max(f.viewPortMax,99*Math.pow(r.axisY.logarithmBase,-.05)),f.min=p(f.viewPortMin)?1:Math.min(f.viewPortMin,1)):_&&!I?(f.max=p(f.viewPortMax)?99:Math.max(f.viewPortMax,99),f.min=p(f.viewPortMin)?1:Math.min(f.viewPortMin,1)):_&&I?(f.max=p(f.viewPortMax)?99:Math.max(f.viewPortMax,99),f.min=p(f.viewPortMin)?-99:Math.min(f.viewPortMin,-99)):!_&&I&&(f.max=p(f.viewPortMax)?-1:Math.max(f.viewPortMax,-1),f.min=p(f.viewPortMin)?-99:Math.min(f.viewPortMin,-99)),f.viewPortMin=f.min,f.viewPortMax=f.max,r.dataPointYSums=M}},Y.prototype._processMultiYPlotUnit=function(r){if(r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var f=r.axisY.dataInfo,l=r.axisX.dataInfo,o,d,x,_,I=!1,N=0;N<r.dataSeriesIndexes.length;N++){var M=this.data[r.dataSeriesIndexes[N]],w=0,b=!1,P=!1,c,L,V;if(M.axisPlacement==="normal"||M.axisPlacement==="xySwapped")var U=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,E=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((M.dataPoints[w].x&&M.dataPoints[w].x.getTime||M.xValueType==="dateTime")&&(I=!0),w=0;w<M.dataPoints.length;w++){if(typeof M.dataPoints[w].x>"u"&&(M.dataPoints[w].x=w+(r.axisX.logarithmic?1:0)),M.dataPoints[w].x.getTime?(I=!0,o=M.dataPoints[w].x.getTime()):o=M.dataPoints[w].x,(d=M.dataPoints[w].y)&&d.length){x=Math.min.apply(null,d),_=Math.max.apply(null,d),L=!0;for(var G=0;G<d.length;G++)d.k===null&&(L=!1);L&&(b||(V=c),c=o)}if(o<l.min&&(l.min=o),o>l.max&&(l.max=o),x<f.min&&(f.min=x),_>f.max&&(f.max=_),0<w&&(r.axisX.logarithmic?(L=o/M.dataPoints[w-1].x,1>L&&(L=1/L),l.minDiff>L&&L!==1&&(l.minDiff=L)):(L=o-M.dataPoints[w-1].x,0>L&&(L*=-1),l.minDiff>L&&L!==0&&(l.minDiff=L)),d&&d[0]!==null&&M.dataPoints[w-1].y&&M.dataPoints[w-1].y[0]!==null&&(r.axisY.logarithmic?(L=d[0]/M.dataPoints[w-1].y[0],1>L&&(L=1/L),f.minDiff>L&&L!==1&&(f.minDiff=L)):(L=d[0]-M.dataPoints[w-1].y[0],0>L&&(L*=-1),f.minDiff>L&&L!==0&&(f.minDiff=L)))),!(o<U)||b){if(!b&&(b=!0,0<w)){w-=2,c=V;continue}if(o>E&&!P)P=!0;else if(o>E&&P)continue;if(M.dataPoints[w].label&&(r.axisX.labels[o]=M.dataPoints[w].label),o<l.viewPortMin&&(l.viewPortMin=o),o>l.viewPortMax&&(l.viewPortMax=o),l.viewPortMin===o&&d){for(G=0;G<d.length;G++)if(d[G]===null&&c<o){l.viewPortMin=c;break}}d===null?l.viewPortMin===o&&c<o&&(l.viewPortMin=c):(x<f.viewPortMin&&(f.viewPortMin=x),_>f.viewPortMax&&(f.viewPortMax=_))}}M.axisX.valueType=M.xValueType=I?"dateTime":"number"}},Y.prototype._processSpecificPlotUnit=function(r){if(r.type==="waterfall"&&r.dataSeriesIndexes&&!(1>r.dataSeriesIndexes.length))for(var f=r.axisY.dataInfo,l=r.axisX.dataInfo,o,d,x=!1,_=0;_<r.dataSeriesIndexes.length;_++){var I=this.data[r.dataSeriesIndexes[_]],N=0,M=!1,w=!1,b=o=0;if(I.axisPlacement==="normal"||I.axisPlacement==="xySwapped")var P=r.axisX.sessionVariables.newViewportMinimum?r.axisX.sessionVariables.newViewportMinimum:r.axisX.options&&r.axisX.options.viewportMinimum?r.axisX.options.viewportMinimum:r.axisX.options&&r.axisX.options.minimum?r.axisX.options.minimum:r.axisX.logarithmic?0:-1/0,c=r.axisX.sessionVariables.newViewportMaximum?r.axisX.sessionVariables.newViewportMaximum:r.axisX.options&&r.axisX.options.viewportMaximum?r.axisX.options.viewportMaximum:r.axisX.options&&r.axisX.options.maximum?r.axisX.options.maximum:1/0;for((I.dataPoints[N].x&&I.dataPoints[N].x.getTime||I.xValueType==="dateTime")&&(x=!0),N=0;N<I.dataPoints.length;N++)typeof I.dataPoints[N].isCumulativeSum<"u"&&I.dataPoints[N].isCumulativeSum===!0?(I.dataPointEOs[N].cumulativeSumYStartValue=0,I.dataPointEOs[N].cumulativeSum=N===0?0:I.dataPointEOs[N-1].cumulativeSum,I.dataPoints[N].y=N===0?0:I.dataPointEOs[N-1].cumulativeSum):typeof I.dataPoints[N].isIntermediateSum<"u"&&I.dataPoints[N].isIntermediateSum===!0?(I.dataPointEOs[N].cumulativeSumYStartValue=b,I.dataPointEOs[N].cumulativeSum=N===0?0:I.dataPointEOs[N-1].cumulativeSum,I.dataPoints[N].y=N===0?0:o,b=N===0?0:I.dataPointEOs[N-1].cumulativeSum,o=0):(d=typeof I.dataPoints[N].y!="number"?0:I.dataPoints[N].y,I.dataPointEOs[N].cumulativeSumYStartValue=N===0?0:I.dataPointEOs[N-1].cumulativeSum,I.dataPointEOs[N].cumulativeSum=N===0?d:I.dataPointEOs[N-1].cumulativeSum+d,o+=d);for(N=0;N<I.dataPoints.length;N++)if(typeof I.dataPoints[N].x>"u"&&(I.dataPoints[N].x=N+(r.axisX.logarithmic?1:0)),I.dataPoints[N].x.getTime?(x=!0,o=I.dataPoints[N].x.getTime()):o=I.dataPoints[N].x,d=I.dataPoints[N].y,o<l.min&&(l.min=o),o>l.max&&(l.max=o),I.dataPointEOs[N].cumulativeSum<f.min&&(f.min=I.dataPointEOs[N].cumulativeSum),I.dataPointEOs[N].cumulativeSum>f.max&&(f.max=I.dataPointEOs[N].cumulativeSum),0<N&&(r.axisX.logarithmic?(b=o/I.dataPoints[N-1].x,1>b&&(b=1/b),l.minDiff>b&&b!==1&&(l.minDiff=b)):(b=o-I.dataPoints[N-1].x,0>b&&(b*=-1),l.minDiff>b&&b!==0&&(l.minDiff=b)),d!==null&&I.dataPoints[N-1].y!==null&&(r.axisY.logarithmic?(d=I.dataPointEOs[N].cumulativeSum/I.dataPointEOs[N-1].cumulativeSum,1>d&&(d=1/d),f.minDiff>d&&d!==1&&(f.minDiff=d)):(d=I.dataPointEOs[N].cumulativeSum-I.dataPointEOs[N-1].cumulativeSum,0>d&&(d*=-1),f.minDiff>d&&d!==0&&(f.minDiff=d)))),!(o<P)||M){if(!M&&(M=!0,0<N)){N-=2;continue}if(o>c&&!w)w=!0;else if(o>c&&w)continue;I.dataPoints[N].label&&(r.axisX.labels[o]=I.dataPoints[N].label),o<l.viewPortMin&&(l.viewPortMin=o),o>l.viewPortMax&&(l.viewPortMax=o),0<N&&(I.dataPointEOs[N-1].cumulativeSum<f.viewPortMin&&(f.viewPortMin=I.dataPointEOs[N-1].cumulativeSum),I.dataPointEOs[N-1].cumulativeSum>f.viewPortMax&&(f.viewPortMax=I.dataPointEOs[N-1].cumulativeSum)),I.dataPointEOs[N].cumulativeSum<f.viewPortMin&&(f.viewPortMin=I.dataPointEOs[N].cumulativeSum),I.dataPointEOs[N].cumulativeSum>f.viewPortMax&&(f.viewPortMax=I.dataPointEOs[N].cumulativeSum)}I.axisX.valueType=I.xValueType=x?"dateTime":"number"}},Y.prototype.calculateAutoBreaks=function(){function r(L,V,U,E){return E?(U=Math.pow(Math.min(U*L/V,V/L),.2),1>=U&&(U=Math.pow(1>L?1/L:Math.min(V/L,L),.25)),{startValue:L*U,endValue:V/U}):(U=.2*Math.min(U-V+L,V-L),0>=U&&(U=.25*(0<L?Math.min(V-L,Math.abs(L)):V-L)),{startValue:L+U,endValue:V-U})}function f(L){if(L.dataSeriesIndexes&&!(1>L.dataSeriesIndexes.length)){var V=L.axisX.scaleBreaks&&L.axisX.scaleBreaks.autoCalculate&&1<=L.axisX.scaleBreaks.maxNumberOfAutoBreaks,U=L.axisY.scaleBreaks&&L.axisY.scaleBreaks.autoCalculate&&1<=L.axisY.scaleBreaks.maxNumberOfAutoBreaks;if(V||U)for(var Qt=L.axisY.dataInfo,_t=L.axisX.dataInfo,E,G=_t.min,j=_t.max,wt=Qt.min,gt=Qt.max,_t=_t._dataRanges,Qt=Qt._dataRanges,se,Vt=0,Wt=0;Wt<L.dataSeriesIndexes.length;Wt++){var Nt=d.data[L.dataSeriesIndexes[Wt]];if(!(4>Nt.dataPoints.length)){for(Vt=0;Vt<Nt.dataPoints.length;Vt++)if(V&&(se=(j+1-G)*Math.max(parseFloat(L.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,E=Nt.dataPoints[Vt].x.getTime?Nt.dataPoints[Vt].x.getTime():Nt.dataPoints[Vt].x,se=Math.floor((E-G)/se),E<_t[se].min&&(_t[se].min=E),E>_t[se].max&&(_t[se].max=E)),U){var Ft=(gt+1-wt)*Math.max(parseFloat(L.axisY.scaleBreaks.collapsibleThreshold)||10,10)/100;if((E=L.type==="waterfall"?Nt.dataPointEOs[Vt].cumulativeSum:Nt.dataPoints[Vt].y)&&E.length)for(var vt=0;vt<E.length;vt++)se=Math.floor((E[vt]-wt)/Ft),E[vt]<Qt[se].min&&(Qt[se].min=E[vt]),E[vt]>Qt[se].max&&(Qt[se].max=E[vt]);else p(E)||(se=Math.floor((E-wt)/Ft),E<Qt[se].min&&(Qt[se].min=E),E>Qt[se].max&&(Qt[se].max=E))}}}}}function l(L){if(L.dataSeriesIndexes&&!(1>L.dataSeriesIndexes.length)&&L.axisX.scaleBreaks&&L.axisX.scaleBreaks.autoCalculate&&1<=L.axisX.scaleBreaks.maxNumberOfAutoBreaks)for(var V=L.axisX.dataInfo,U=V.min,E=V.max,G=V._dataRanges,j,wt=0,gt=0;gt<L.dataSeriesIndexes.length;gt++){var _t=d.data[L.dataSeriesIndexes[gt]];if(!(4>_t.dataPoints.length))for(wt=0;wt<_t.dataPoints.length;wt++)j=(E+1-U)*Math.max(parseFloat(L.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,V=_t.dataPoints[wt].x.getTime?_t.dataPoints[wt].x.getTime():_t.dataPoints[wt].x,j=Math.floor((V-U)/j),V<G[j].min&&(G[j].min=V),V>G[j].max&&(G[j].max=V)}}for(var o,d=this,x=!1,_=0;_<this._axes.length;_++)if(this._axes[_].scaleBreaks&&this._axes[_].scaleBreaks.autoCalculate&&1<=this._axes[_].scaleBreaks.maxNumberOfAutoBreaks){x=!0,this._axes[_].dataInfo._dataRanges=[];for(var I=0;I<100/Math.max(parseFloat(this._axes[_].scaleBreaks.collapsibleThreshold)||10,10);I++)this._axes[_].dataInfo._dataRanges.push({min:1/0,max:-1/0})}if(x){for(_=0;_<this.plotInfo.plotTypes.length;_++)for(x=this.plotInfo.plotTypes[_],I=0;I<x.plotUnits.length;I++)o=x.plotUnits[I],o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="column"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="bar"||o.type==="bubble"||o.type==="scatter"||o.type==="candlestick"||o.type==="ohlc"||o.type==="rangeColumn"||o.type==="rangeBar"||o.type==="rangeArea"||o.type==="rangeSplineArea"||o.type==="waterfall"||o.type==="error"||o.type==="boxAndWhisker"?f(o):0<=o.type.indexOf("stacked")&&l(o);for(_=0;_<this._axes.length;_++)if(this._axes[_].dataInfo._dataRanges){var N=this._axes[_].dataInfo.min;o=(this._axes[_].dataInfo.max+1-N)*Math.max(parseFloat(this._axes[_].scaleBreaks.collapsibleThreshold)||10,10)/100;var M=this._axes[_].dataInfo._dataRanges,w,b,x=[];if(this._axes[_].dataInfo.dataPointYPositiveSums){var P=this._axes[_].dataInfo.dataPointYPositiveSums;w=M;for(I in P)if(P.hasOwnProperty(I)&&!isNaN(I)&&(b=P[I],!p(b))){var c=Math.floor((b-N)/o);b<w[c].min&&(w[c].min=b),b>w[c].max&&(w[c].max=b)}delete this._axes[_].dataInfo.dataPointYPositiveSums}if(this._axes[_].dataInfo.dataPointYNegativeSums){P=this._axes[_].dataInfo.dataPointYNegativeSums,w=M;for(I in P)P.hasOwnProperty(I)&&!isNaN(I)&&(b=-1*P[I],p(b)||(c=Math.floor((b-N)/o),b<w[c].min&&(w[c].min=b),b>w[c].max&&(w[c].max=b)));delete this._axes[_].dataInfo.dataPointYNegativeSums}for(I=0;I<M.length-1;I++)if(w=M[I].max,isFinite(w))for(;I<M.length-1;)if(N=M[I+1].min,isFinite(N)){b=N-w,b>o&&x.push({diff:b,start:w,end:N});break}else I++;if(this._axes[_].scaleBreaks.customBreaks)for(I=0;I<this._axes[_].scaleBreaks.customBreaks.length;I++)for(o=0;o<x.length;o++)(this._axes[_].scaleBreaks.customBreaks[I].startValue<=x[o].start&&x[o].start<=this._axes[_].scaleBreaks.customBreaks[I].endValue||this._axes[_].scaleBreaks.customBreaks[I].startValue<=x[o].start&&x[o].start<=this._axes[_].scaleBreaks.customBreaks[I].endValue||x[o].start<=this._axes[_].scaleBreaks.customBreaks[I].startValue&&this._axes[_].scaleBreaks.customBreaks[I].startValue<=x[o].end||x[o].start<=this._axes[_].scaleBreaks.customBreaks[I].endValue&&this._axes[_].scaleBreaks.customBreaks[I].endValue<=x[o].end)&&(x.splice(o,1),o--);for(x.sort(function(V,U){return U.diff-V.diff}),I=0;I<Math.min(x.length,this._axes[_].scaleBreaks.maxNumberOfAutoBreaks);I++)o=r(x[I].start,x[I].end,this._axes[_].logarithmic?this._axes[_].dataInfo.max/this._axes[_].dataInfo.min:this._axes[_].dataInfo.max-this._axes[_].dataInfo.min,this._axes[_].logarithmic),this._axes[_].scaleBreaks.autoBreaks.push(new Ve(this,"autoBreaks",o,I,++this._eventManager.lastObjectId,this._axes[_].scaleBreaks)),this._axes[_].scaleBreaks._appliedBreaks.push(this._axes[_].scaleBreaks.autoBreaks[this._axes[_].scaleBreaks.autoBreaks.length-1]);this._axes[_].scaleBreaks._appliedBreaks.sort(function(V,U){return V.startValue-U.startValue})}}},Y.prototype.renderCrosshairs=function(r,f){for(var l=0;l<this.axisX.length;l++)if(this.axisX[l]!=r&&this.axisX[l].crosshair&&this.axisX[l].crosshair.enabled&&!this.axisX[l].crosshair._hidden)if(f&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2){this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisX[l].crosshair.render(null,this.sessionVariables.mouseY,this.axisX[l].convertPixelToValue(this.sessionVariables.mouseY)):this.axisX[l].crosshair.render(this.sessionVariables.mouseX,null,this.axisX[l].convertPixelToValue(this.sessionVariables.mouseX));var o={chart:this,crosshair:this.axisX[l].crosshair.options,axis:this.axisX[l],value:this.axisX[l].crosshair.value};this.axisX[l].crosshair.dispatchEvent("updated",o,this.axisX[l])}else f||this.axisX[l].showCrosshair(this.axisX[l].crosshair._updatedValue);for(l=0;l<this.axisX2.length;l++)this.axisX2[l]!=r&&this.axisX2[l].crosshair&&this.axisX2[l].crosshair.enabled&&!this.axisX2[l].crosshair._hidden&&(f&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?(this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisX2[l].crosshair.render(null,this.sessionVariables.mouseY,this.axisX2[l].convertPixelToValue(this.sessionVariables.mouseY)):this.axisX2[l].crosshair.render(this.sessionVariables.mouseX,null,this.axisX2[l].convertPixelToValue(this.sessionVariables.mouseX)),o={chart:this,crosshair:this.axisX2[l].crosshair.options,axis:this.axisX2[l],value:this.axisX2[l].crosshair.value},this.axisX2[l].crosshair.dispatchEvent("updated",o,this.axisX2[l])):f||this.axisX2[l].showCrosshair(this.axisX2[l].crosshair._updatedValue));for(l=0;l<this.axisY.length;l++)this.axisY[l]!=r&&this.axisY[l].crosshair&&this.axisY[l].crosshair.enabled&&!this.axisY[l].crosshair._hidden&&(f&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?(this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisY[l].crosshair.render(this.sessionVariables.mouseX,null,this.axisY[l].convertPixelToValue(this.sessionVariables.mouseX)):this.axisY[l].crosshair.render(null,this.sessionVariables.mouseY,this.axisY[l].convertPixelToValue(this.sessionVariables.mouseY)),o={chart:this,crosshair:this.axisY[l].crosshair.options,axis:this.axisY[l],value:this.axisY[l].crosshair.value},this.axisY[l].crosshair.dispatchEvent("updated",o,this.axisY[l])):f||this.axisY[l].showCrosshair(this.axisY[l].crosshair._updatedValue));for(l=0;l<this.axisY2.length;l++)this.axisY2[l]!=r&&this.axisY2[l].crosshair&&this.axisY2[l].crosshair.enabled&&!this.axisY2[l].crosshair._hidden&&(f&&this.sessionVariables.mouseX>this.plotArea.x1&&this.sessionVariables.mouseX<this.plotArea.x2&&this.sessionVariables.mouseY>this.plotArea.y1&&this.sessionVariables.mouseY<this.plotArea.y2?(this.plotInfo&&this.plotInfo.axisPlacement==="xySwapped"?this.axisY2[l].crosshair.render(this.sessionVariables.mouseX,null,this.axisY2[l].convertPixelToValue(this.sessionVariables.mouseX)):this.axisY2[l].crosshair.render(null,this.sessionVariables.mouseY,this.axisY2[l].convertPixelToValue(this.sessionVariables.mouseY)),o={chart:this,crosshair:this.axisY2[l].crosshair.options,axis:this.axisY2[l],value:this.axisY2[l].crosshair.value},this.axisY2[l].crosshair.dispatchEvent("updated",o,this.axisY2[l])):f||this.axisY2[l].showCrosshair(this.axisY2[l].crosshair._updatedValue))},Y.prototype.getDataPointAtXY=function(r,f,l){l=l||!1;for(var o=[],d=this._dataInRenderedOrder.length-1;0<=d;d--){var x=null;(x=this._dataInRenderedOrder[d].getDataPointAtXY(r,f,l))&&o.push(x)}for(r=null,f=!1,l=0;l<o.length;l++)if((o[l].dataSeries.type==="line"||o[l].dataSeries.type==="stepLine"||o[l].dataSeries.type==="area"||o[l].dataSeries.type==="stepArea")&&(d=A("markerSize",o[l].dataPoint,o[l].dataSeries)||8,o[l].distance<=d/2)){f=!0;break}for(l=0;l<o.length;l++)f&&o[l].dataSeries.type!=="line"&&o[l].dataSeries.type!=="stepLine"&&o[l].dataSeries.type!=="area"&&o[l].dataSeries.type!=="stepArea"||(r?o[l].distance<=r.distance&&(r=o[l]):r=o[l]);return r},Y.prototype.getObjectAtXY=function(r,f,l){var o=null;if(l=this.getDataPointAtXY(r,f,l||!1))o=l.dataSeries.dataPointIds[l.dataPointIndex];else if(ut)o=R(r,f,this._eventManager.ghostCtx);else for(l=0;l<this.legend.items.length;l++){var d=this.legend.items[l];r>=d.x1&&r<=d.x2&&f>=d.y1&&f<=d.y2&&(o=d.id)}return o},Y.prototype.getAutoFontSize=qt,Y.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},Y.prototype.clearCanvas=xt,Y.prototype.attachEvent=function(r){this._events.push(r)},Y.prototype._touchEventHandler=function(r){if(r.changedTouches&&this.interactivityEnabled){var f=[],l=r.changedTouches,o=l?l[0]:r,d=null;switch(r.type){case"touchstart":case"MSPointerDown":f=["mousemove","mousedown"],this._lastTouchData=We(o),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":f=["mousemove"];break;case"touchend":case"MSPointerUp":var x=this._lastTouchData&&this._lastTouchData.time?new Date-this._lastTouchData.time:0,f=this._lastTouchEventType==="touchstart"||this._lastTouchEventType==="MSPointerDown"||300>x?["mouseup","click"]:["mouseup"];break;default:return}if(!(l&&1<l.length)){d=We(o),d.time=new Date;try{var _=d.y-this._lastTouchData.y,x=d.time-this._lastTouchData.time;(1<Math.abs(_)&&this._lastTouchData.scroll||5<Math.abs(_)&&250>x)&&(this._lastTouchData.scroll=!0,this.stockChart&&(this.stockChart._chartScroll=!0))}catch{}if(this._lastTouchEventType=r.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(l=0;l<f.length;l++)d=f[l],_=document.createEvent("MouseEvent"),_.initMouseEvent(d,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(_),(!p(this._lastTouchData.scroll)&&!this._lastTouchData.scroll||!this._lastTouchData.scroll&&250<x||d==="click")&&(r.preventManipulation&&r.preventManipulation(),r.preventDefault&&r.cancelable&&r.preventDefault(),this.stockChart&&(this.stockChart._chartScroll=null))}}},Y.prototype._dispatchRangeEvent=function(r,f){var l={chart:this};l.type=r,l.trigger=f;var o=[];this.axisX&&0<this.axisX.length&&o.push("axisX"),this.axisX2&&0<this.axisX2.length&&o.push("axisX2"),this.axisY&&0<this.axisY.length&&o.push("axisY"),this.axisY2&&0<this.axisY2.length&&o.push("axisY2");for(var d=0;d<o.length;d++)if(p(l[o[d]])&&(l[o[d]]=[]),o[d]==="axisY")for(var x=0;x<this.axisY.length;x++)l[o[d]].push({viewportMinimum:this[o[d]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[d]][x].sessionVariables.newViewportMaximum});else if(o[d]==="axisY2")for(x=0;x<this.axisY2.length;x++)l[o[d]].push({viewportMinimum:this[o[d]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[d]][x].sessionVariables.newViewportMaximum});else if(o[d]==="axisX")for(x=0;x<this.axisX.length;x++)l[o[d]].push({viewportMinimum:this[o[d]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[d]][x].sessionVariables.newViewportMaximum});else if(o[d]==="axisX2")for(x=0;x<this.axisX2.length;x++)l[o[d]].push({viewportMinimum:this[o[d]][x].sessionVariables.newViewportMinimum,viewportMaximum:this[o[d]][x].sessionVariables.newViewportMaximum});this.dispatchEvent(r,l,this)},Y.prototype._mouseEventHandler=function(r){function f(){Y.capturedEventParam&&(d=Y.capturedEventParam,_=d.bounds,o==="mouseup"&&(Y.capturedEventParam=null,d.chart.overlaidCanvas.releaseCapture?d.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",d.chart._mouseEventHandler,!1)),d.hasOwnProperty(o)&&(o!=="mouseup"||d.chart.overlaidCanvas.releaseCapture?r.target!==d.chart.overlaidCanvas&&ut||d[o].call(d.context,l.x,l.y):r.target!==d.chart.overlaidCanvas&&(d.chart.isDrag=!1)))}typeof r.target>"u"&&r.srcElement&&(r.target=r.srcElement);var l=We(r),o=r.type,d,x;if(r.which?x=r.which==3:r.button&&(x=r.button==2),this._ignoreNextEvent)f(),this._ignoreNextEvent=!1;else if(f(),this.interactivityEnabled){r.preventManipulation&&r.preventManipulation(),r.preventDefault&&r.preventDefault();var _;if(Yt&&window.console&&(window.console.log(o+" --> x: "+l.x+"; y:"+l.y),x&&window.console.log(r.which),o==="mouseup"&&window.console.log("mouseup")),!x){if(!Y.capturedEventParam&&this._events){for(x=0;x<this._events.length;x++)if(this._events[x].hasOwnProperty(o))if(d=this._events[x],_=d.bounds,l.x>=_.x1&&l.x<=_.x2&&l.y>=_.y1&&l.y<=_.y2){d[o].call(d.context,l.x,l.y),o==="mousedown"&&d.capture===!0?(Y.capturedEventParam=d,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.documentElement.addEventListener("mouseup",this._mouseEventHandler,!1)):o==="mouseup"&&(d.chart.overlaidCanvas.releaseCapture?d.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",this._mouseEventHandler,!1));break}else d=null;r.target.style.cursor=d&&d.cursor?d.cursor:this._defaultCursor}if(x=this.plotArea,l.x<x.x1||l.x>x.x2||l.y<x.y1||l.y>x.y2){for(this.toolTip&&this.toolTip.enabled?(this.toolTip.hide(),this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip)):this.resetOverlayedCanvas(),x=0;x<this.axisX.length;x++)this.axisX[x].crosshair&&this.axisX[x].crosshair.enabled&&(this.axisX[x].crosshair.hide(),this.axisX[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[x].options},this.axisX[x].crosshair));for(x=0;x<this.axisX2.length;x++)this.axisX2[x].crosshair&&this.axisX2[x].crosshair.enabled&&(this.axisX2[x].crosshair.hide(),this.axisX2[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[x].options},this.axisX2[x].crosshair));for(x=0;x<this.axisY.length;x++)this.axisY[x].crosshair&&this.axisY[x].crosshair.enabled&&(this.axisY[x].crosshair.hide(),this.axisY[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[x].options},this.axisY[x].crosshair));for(x=0;x<this.axisY2.length;x++)this.axisY2[x].crosshair&&this.axisY2[x].crosshair.enabled&&(this.axisY2[x].crosshair.hide(),this.axisY2[x].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[x].options},this.axisY2[x].crosshair))}this.sessionVariables.mouseX=l.x,this.sessionVariables.mouseY=l.y,this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(r)}}},Y.prototype._plotAreaMouseDown=function(r,f){this.isDrag=!0,this.dragStartPoint={x:r,y:f}},Y.prototype._plotAreaMouseUp=function(r,f){if((this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped")&&this.isDrag){var l=f-this.dragStartPoint.y,o=r-this.dragStartPoint.x,I=0<=this.zoomType.indexOf("x"),_=0<=this.zoomType.indexOf("y"),d=!1;if(this.resetOverlayedCanvas(),this.plotInfo.axisPlacement==="xySwapped")var x=_,_=I,I=x;if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(I=_=0;I<this._axes.length;I++)l=this._axes[I],l.logarithmic?l.viewportMinimum<l.minimum?(_=l.minimum/l.viewportMinimum,l.sessionVariables.newViewportMinimum=l.viewportMinimum*_,l.sessionVariables.newViewportMaximum=l.viewportMaximum*_,d=!0):l.viewportMaximum>l.maximum&&(_=l.viewportMaximum/l.maximum,l.sessionVariables.newViewportMinimum=l.viewportMinimum/_,l.sessionVariables.newViewportMaximum=l.viewportMaximum/_,d=!0):l.viewportMinimum<l.minimum?(_=l.minimum-l.viewportMinimum,l.sessionVariables.newViewportMinimum=l.viewportMinimum+_,l.sessionVariables.newViewportMaximum=l.viewportMaximum+_,d=!0):l.viewportMaximum>l.maximum&&(_=l.viewportMaximum-l.maximum,l.sessionVariables.newViewportMinimum=l.viewportMinimum-_,l.sessionVariables.newViewportMaximum=l.viewportMaximum-_,d=!0);else if((!I||2<Math.abs(o))&&(!_||2<Math.abs(l))&&this.zoomEnabled){if(!this.dragStartPoint)return;l=I?this.dragStartPoint.x:this.plotArea.x1,o=_?this.dragStartPoint.y:this.plotArea.y1,I=I?r:this.plotArea.x2,_=_?f:this.plotArea.y2,2<Math.abs(l-I)&&2<Math.abs(o-_)&&this._zoomPanToSelectedRegion(l,o,I,_)&&(d=!0)}d&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.stockChart&&(this.stockChart._rangeEventParameter||(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:this.stockChart.sessionVariables._axisXMin,maximum:this.stockChart.sessionVariables._axisXMax}),this.stockChart._rangeEventParameter.type="rangeChanging",this.stockChart.dispatchEvent("rangeChanging",this.stockChart._rangeEventParameter,this.stockChart)),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),this.stockChart&&(this.stockChart.rangeUpdatedBy="chart",this.stockChart._rangeEventParameter.type="rangeChanged",this.stockChart.dispatchEvent("rangeChanged",this.stockChart._rangeEventParameter,this.stockChart)),d&&this.zoomEnabled&&this._zoomButton.style.display==="none"&&(ot(this._zoomButton,this._resetButton),at(this,this._zoomButton,"pan"),at(this,this._resetButton,"reset")))}}if(this.isDrag=!1,this.plotInfo.axisPlacement!=="none"){if(this.resetOverlayedCanvas(),this.axisX&&0<this.axisX.length)for(d=0;d<this.axisX.length;d++)this.axisX[d].crosshair&&this.axisX[d].crosshair.enabled&&this.axisX[d].renderCrosshair(r,f);if(this.axisX2&&0<this.axisX2.length)for(d=0;d<this.axisX2.length;d++)this.axisX2[d].crosshair&&this.axisX2[d].crosshair.enabled&&this.axisX2[d].renderCrosshair(r,f);if(this.axisY&&0<this.axisY.length)for(d=0;d<this.axisY.length;d++)this.axisY[d].crosshair&&this.axisY[d].crosshair.enabled&&this.axisY[d].renderCrosshair(r,f);if(this.axisY2&&0<this.axisY2.length)for(d=0;d<this.axisY2.length;d++)this.axisY2[d].crosshair&&this.axisY2[d].crosshair.enabled&&this.axisY2[d].renderCrosshair(r,f);if(this.axisX&&0<this.axisX.length)for(d=0;d<this.axisX.length;d++)this.axisX[d].crosshair&&this.axisX[d].crosshair.enabled&&this.axisX[d].crosshair.renderLabel();if(this.axisX2&&0<this.axisX2.length)for(d=0;d<this.axisX2.length;d++)this.axisX2[d].crosshair&&this.axisX2[d].crosshair.enabled&&this.axisX2[d].crosshair.renderLabel();if(this.axisY&&0<this.axisY.length)for(d=0;d<this.axisY.length;d++)this.axisY[d].crosshair&&this.axisY[d].crosshair.enabled&&this.axisY[d].crosshair.renderLabel();if(this.axisY2&&0<this.axisY2.length)for(d=0;d<this.axisY2.length;d++)this.axisY2[d].crosshair&&this.axisY2[d].crosshair.enabled&&this.axisY2[d].crosshair.renderLabel()}},Y.prototype._plotAreaMouseMove=function(r,f){if(this.isDrag&&this.plotInfo.axisPlacement!=="none"){var l=0,o=0,d=l=null,d=0<=this.zoomType.indexOf("x"),x=0<=this.zoomType.indexOf("y"),_=this;if(this.plotInfo.axisPlacement==="xySwapped"&&(l=x,x=d,d=l),l=this.dragStartPoint.x-r,o=this.dragStartPoint.y-f,2<Math.abs(l)&&8>Math.abs(l)&&(this.panEnabled||this.zoomEnabled)){this.toolTip.hide(),this.toolTip&&this.toolTip.enabled&&this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip);for(var I=0;I<this.axisX.length;I++)this.axisX[I].crosshair&&this.axisX[I].crosshair.enabled&&(this.axisX[I].crosshair.hide(),this.axisX[I].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[I].options},this.axisX[I].crosshair));for(I=0;I<this.axisX2.length;I++)this.axisX2[I].crosshair&&this.axisX2[I].crosshair.enabled&&(this.axisX2[I].crosshair.hide(),this.axisX2[I].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[I].options},this.axisX2[I].crosshair));for(I=0;I<this.axisY.length;I++)this.axisY[I].crosshair&&this.axisY[I].crosshair.enabled&&(this.axisY[I].crosshair.hide(),this.axisY[I].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[I].options},this.axisY[I].crosshair));for(I=0;I<this.axisY2.length;I++)this.axisY2[I].crosshair&&this.axisY2[I].crosshair.enabled&&(this.axisY2[I].crosshair.hide(),this.axisY2[I].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[I].options},this.axisY2[I].crosshair))}else this.panEnabled||this.zoomEnabled||this.toolTip.mouseMoveHandler(r,f);if((!d||2<Math.abs(l)||!x||2<Math.abs(o))&&(this.panEnabled||this.zoomEnabled)){if(this.panEnabled)d={x1:d?this.plotArea.x1+l:this.plotArea.x1,y1:x?this.plotArea.y1+o:this.plotArea.y1,x2:d?this.plotArea.x2+l:this.plotArea.x2,y2:x?this.plotArea.y2+o:this.plotArea.y2},clearTimeout(_._panTimerId),_._panTimerId=setTimeout(function(w,b,P,c){return function(){_._zoomPanToSelectedRegion(w,b,P,c,!0)&&(_._dispatchRangeEvent("rangeChanging","pan"),_.stockChart&&(_.stockChart._rangeEventParameter.type="rangeChanging",_.stockChart.dispatchEvent("rangeChanging",_.stockChart._rangeEventParameter,_.stockChart)),_.render(),_._dispatchRangeEvent("rangeChanged","pan"),_.stockChart&&(_.stockChart._rangeEventParameter.type="rangeChanged",_.stockChart.dispatchEvent("rangeChanged",_.stockChart._rangeEventParameter,_.stockChart)),_.dragStartPoint.x=r,_.dragStartPoint.y=f)}}(d.x1,d.y1,d.x2,d.y2),0);else if(this.zoomEnabled){this.resetOverlayedCanvas(),l=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.fillStyle="#A89896";var o=d?this.dragStartPoint.x:this.plotArea.x1,I=x?this.dragStartPoint.y:this.plotArea.y1,N=d?r-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,M=x?f-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1;this.validateRegion(o,I,d?r:this.plotArea.x2-this.plotArea.x1,x?f:this.plotArea.y2-this.plotArea.y1,this.zoomType!=="xy").isValid&&(this.resetOverlayedCanvas(),this.overlaidCanvasCtx.fillStyle="#99B2B5"),this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillRect(o,I,N,M),this.overlaidCanvasCtx.globalAlpha=l}}}else if(this.toolTip.mouseMoveHandler(r,f),this.plotInfo.axisPlacement!=="none"){if(this.sessionVariables.crosshairShownByPixel=!0,this.axisX&&0<this.axisX.length)for(d=0;d<this.axisX.length;d++)this.axisX[d].crosshair&&this.axisX[d].crosshair.enabled&&this.axisX[d].renderCrosshair(r,f);if(this.axisX2&&0<this.axisX2.length)for(d=0;d<this.axisX2.length;d++)this.axisX2[d].crosshair&&this.axisX2[d].crosshair.enabled&&this.axisX2[d].renderCrosshair(r,f);if(this.axisY&&0<this.axisY.length)for(d=0;d<this.axisY.length;d++)this.axisY[d].crosshair&&this.axisY[d].crosshair.enabled&&this.axisY[d].renderCrosshair(r,f);if(this.axisY2&&0<this.axisY2.length)for(d=0;d<this.axisY2.length;d++)this.axisY2[d].crosshair&&this.axisY2[d].crosshair.enabled&&this.axisY2[d].renderCrosshair(r,f);if(this.axisX&&0<this.axisX.length)for(d=0;d<this.axisX.length;d++)this.axisX[d].crosshair&&this.axisX[d].crosshair.enabled&&this.axisX[d].crosshair.renderLabel();if(this.axisX2&&0<this.axisX2.length)for(d=0;d<this.axisX2.length;d++)this.axisX2[d].crosshair&&this.axisX2[d].crosshair.enabled&&this.axisX2[d].crosshair.renderLabel();if(this.axisY&&0<this.axisY.length)for(d=0;d<this.axisY.length;d++)this.axisY[d].crosshair&&this.axisY[d].crosshair.enabled&&this.axisY[d].crosshair.renderLabel();if(this.axisY2&&0<this.axisY2.length)for(d=0;d<this.axisY2.length;d++)this.axisY2[d].crosshair&&this.axisY2[d].crosshair.enabled&&this.axisY2[d].crosshair.renderLabel()}},Y.prototype._zoomPanToSelectedRegion=function(r,f,l,o,d){if(r=this.validateRegion(r,f,l,o,d),f=r.axesWithValidRange,l=r.axesRanges,r.isValid)for(o=0;o<f.length;o++){d=f[o];var x=l[o];d.setViewPortRange(x.val1,x.val2),this.syncCharts&&d.type==="axisX"&&this.zoomType!="y"&&this.syncCharts(x.val1,x.val2),this.stockChart&&(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:x.val1,maximum:x.val2})}return r.isValid},Y.prototype.validateRegion=function(r,f,l,o,d){d=d||!1;for(var x=0<=this.zoomType.indexOf("x"),_=0<=this.zoomType.indexOf("y"),I=!1,N=[],M=[],w=[],b=0;b<this._axes.length;b++)(this._axes[b].type==="axisX"&&x||this._axes[b].type==="axisY"&&_)&&M.push(this._axes[b]);for(_=0;_<M.length;_++){var b=M[_],x=!1,L=b.convertPixelToValue({x:r,y:f}),c=b.convertPixelToValue({x:l,y:o});if(L>c)var P=c,c=L,L=P;if(b.scaleBreaks)for(P=0;!x&&P<b.scaleBreaks._appliedBreaks.length;P++)x=b.scaleBreaks._appliedBreaks[P].startValue<=L&&b.scaleBreaks._appliedBreaks[P].endValue>=c;if(isFinite(b.dataInfo.minDiff)){if(P=b.getApparentDifference(L,c,null,!0),!(x||!(this.panEnabled&&b.scaleBreaks&&b.scaleBreaks._appliedBreaks.length)&&(b.logarithmic&&P<Math.pow(b.dataInfo.minDiff,3)||!b.logarithmic&&P<3*Math.abs(b.dataInfo.minDiff))||L<b.minimum||c>b.maximum))N.push(b),w.push({val1:L,val2:c}),I=!0;else if(!d){I=!1;break}}}return{isValid:I,axesWithValidRange:N,axesRanges:w}},Y.prototype.preparePlotArea=function(){var r=this.plotArea;if(!ut&&(0<r.x1||0<r.y1)&&r.ctx.translate(r.x1,r.y1),(this.axisX[0]||this.axisX2[0])&&(this.axisY[0]||this.axisY2[0])){var f=this.axisX[0]?this.axisX[0].lineCoordinates:this.axisX2[0].lineCoordinates;if(this.axisY&&0<this.axisY.length&&this.axisY[0]){var l=this.axisY[0];r.x1=f.x1<f.x2?f.x1:l.lineCoordinates.x1,r.y1=f.y1<l.lineCoordinates.y1?f.y1:l.lineCoordinates.y1,r.x2=f.x2>l.lineCoordinates.x2?f.x2:l.lineCoordinates.x2,r.y2=f.y1>l.lineCoordinates.y2?f.y1:l.lineCoordinates.y2,r.width=r.x2-r.x1,r.height=r.y2-r.y1}this.axisY2&&0<this.axisY2.length&&this.axisY2[0]&&(l=this.axisY2[0],r.x1=f.x1<f.x2?f.x1:l.lineCoordinates.x1,r.y1=f.y1<l.lineCoordinates.y1?f.y1:l.lineCoordinates.y1,r.x2=f.x2>l.lineCoordinates.x2?f.x2:l.lineCoordinates.x2,r.y2=f.y2>l.lineCoordinates.y2?f.y2:l.lineCoordinates.y2,r.width=r.x2-r.x1,r.height=r.y2-r.y1)}else f=this.layoutManager.getFreeSpace(),r.x1=f.x1,r.x2=f.x2,r.y1=f.y1,r.y2=f.y2,r.width=f.width,r.height=f.height;ut||(r.canvas.width=r.width,r.canvas.height=r.height,r.canvas.style.left=r.x1+"px",r.canvas.style.top=r.y1+"px",(0<r.x1||0<r.y1)&&r.ctx.translate(-r.x1,-r.y1)),r.layoutManager=new $(r.x1,r.y1,r.x2,r.y2,2)},Y.prototype.renderIndexLabels=function(r){var f=r||this.plotArea.ctx,l=this.plotArea,o=0,d=0,x=0,_=d=x=0,I=0,N=o=0,M=0;for(r=0;r<this._indexLabels.length;r++){var w=this._indexLabels[r],b=w.chartType.toLowerCase(),P,c,I=A("indexLabelFontColor",w.dataPoint,w.dataSeries),L=A("indexLabelFontSize",w.dataPoint,w.dataSeries),N=A("indexLabelFontFamily",w.dataPoint,w.dataSeries),M=A("indexLabelFontStyle",w.dataPoint,w.dataSeries);P=A("indexLabelFontWeight",w.dataPoint,w.dataSeries);var V=A("indexLabelBackgroundColor",w.dataPoint,w.dataSeries);c=A("indexLabelBorderColor",w.dataPoint,w.dataSeries);var x=A("indexLabelBorderThickness",w.dataPoint,w.dataSeries),d=A("indexLabelMaxWidth",w.dataPoint,w.dataSeries),_=A("indexLabelWrap",w.dataPoint,w.dataSeries),U=A("indexLabelLineDashType",w.dataPoint,w.dataSeries),E=A("indexLabelLineColor",w.dataPoint,w.dataSeries),G=p(w.dataPoint.indexLabelLineThickness)?p(w.dataSeries.options.indexLabelLineThickness)?0:w.dataSeries.options.indexLabelLineThickness:w.dataPoint.indexLabelLineThickness,o=0<G?Math.min(10,(this.plotInfo.axisPlacement==="normal"?this.plotArea.height:this.plotArea.width)<<0):0,j=A("indexLabelPadding",w.dataPoint,w.dataSeries),wt={percent:null,total:null},gt=null;(0<=w.dataSeries.type.indexOf("stacked")||w.dataSeries.type==="pie"||w.dataSeries.type==="doughnut")&&(wt=this.getPercentAndTotal(w.dataSeries,w.dataPoint)),(w.dataSeries.indexLabelFormatter||w.dataPoint.indexLabelFormatter)&&(gt={chart:this,dataSeries:w.dataSeries,dataPoint:w.dataPoint,index:w.indexKeyword,total:wt.total,percent:wt.percent});var _t=w.dataPoint.indexLabelFormatter?w.dataPoint.indexLabelFormatter(gt):w.dataPoint.indexLabel?this.replaceKeywordsWithValue(w.dataPoint.indexLabel,w.dataPoint,w.dataSeries,null,w.indexKeyword):w.dataSeries.indexLabelFormatter?w.dataSeries.indexLabelFormatter(gt):w.dataSeries.indexLabel?this.replaceKeywordsWithValue(w.dataSeries.indexLabel,w.dataPoint,w.dataSeries,null,w.indexKeyword):null;if(_t!==null&&_t!==""){var wt=A("indexLabelPlacement",w.dataPoint,w.dataSeries),gt=A("indexLabelOrientation",w.dataPoint,w.dataSeries),Qt=A("indexLabelTextAlign",w.dataPoint,w.dataSeries),se=w.direction,Vt=w.dataSeries.axisX,Wt=w.dataSeries.axisY,Nt=!1,V=new ct(f,{x:0,y:0,maxWidth:d||.5*this.width,maxHeight:_?5*L:1.5*L,angle:gt==="horizontal"?0:-90,text:_t,padding:j,backgroundColor:V,borderColor:c,borderThickness:x,textAlign:Qt,fontSize:L,fontFamily:N,fontWeight:P,fontColor:I,fontStyle:M,textBaseline:"middle"});if(V.measureText(),w.dataSeries.indexLabelMaxWidth=V.maxWidth,b==="stackedarea100"){if(w.point.x<l.x1||w.point.x>l.x2||w.point.y<l.y1-1||w.point.y>l.y2+1)continue}else if(b==="rangearea"||b==="rangesplinearea"){if(w.dataPoint.x<Vt.viewportMinimum||w.dataPoint.x>Vt.viewportMaximum||Math.max.apply(null,w.dataPoint.y)<Wt.viewportMinimum||Math.min.apply(null,w.dataPoint.y)>Wt.viewportMaximum)continue}else if(0<=b.indexOf("line")||0<=b.indexOf("area")||0<=b.indexOf("bubble")||0<=b.indexOf("scatter")){if(w.dataPoint.x<Vt.viewportMinimum||w.dataPoint.x>Vt.viewportMaximum||w.dataPoint.y<Wt.viewportMinimum||w.dataPoint.y>Wt.viewportMaximum)continue}else if(0<=b.indexOf("column")){if(w.dataPoint.x<Vt.viewportMinimum||w.dataPoint.x>Vt.viewportMaximum||(0<w.dataPoint.y.length?Math.max.apply(null,w.dataPoint.y):w.cumulativeY?w.cumulativeY:w.dataPoint.y)<Wt.viewportMinimum||(0<w.dataPoint.y.length?Math.min.apply(null,w.dataPoint.y):w.cumulativeY?w.cumulativeY:w.dataPoint.y)>Wt.viewportMaximum)continue}else if(b==="waterfall"||b==="error"&&!w.axisSwapped){if(w.dataPoint.x<Vt.viewportMinimum||w.dataPoint.x>Vt.viewportMaximum||w.bounds.y1>l.y2||w.bounds.y2<l.y1)continue}else if(0<=b.indexOf("bar")||b==="error"){if(w.dataPoint.x<Vt.viewportMinimum||w.dataPoint.x>Vt.viewportMaximum||w.bounds.x1>l.x2||w.bounds.x2<l.x1)continue}else if(b==="candlestick"||b==="ohlc"){if(w.dataPoint.x<Vt.viewportMinimum||w.dataPoint.x>Vt.viewportMaximum||Math.max.apply(null,w.dataPoint.y)<Wt.viewportMinimum||Math.min.apply(null,w.dataPoint.y)>Wt.viewportMaximum)continue}else if(w.dataPoint.x<Vt.viewportMinimum||w.dataPoint.x>Vt.viewportMaximum)continue;_=I=2,gt==="horizontal"?(N=V.width,M=V.height):(M=V.width,N=V.height),this.plotInfo.axisPlacement==="normal"?(0<=b.indexOf("line")||0<=b.indexOf("area")?(wt="auto",I=4):0<=b.indexOf("stacked")?wt==="auto"&&(wt="inside"):(b==="bubble"||b==="scatter")&&(wt="inside"),P=w.point.x-N/2+(gt==="horizontal"?0:V._lineHeight/2),wt!=="inside"?(d=l.y1,x=l.y2,0<se?(c=w.point.y+V._lineHeight/2-M-I-o,c<d&&(c=wt==="auto"?Math.max(w.point.y,d)+V._lineHeight/2+I+o:d+V._lineHeight/2+I+o,Nt=c+(gt==="horizontal"?M-V._lineHeight/2:0)>w.point.y,!Nt||0<=b.indexOf("line")||0<=b.indexOf("area")||(c-=o))):(c=w.point.y+V._lineHeight/2+I+o,c>x-M+V._lineHeight/2-I&&(c=wt==="auto"?Math.min(w.point.y,x)+V._lineHeight/2-M-I-o:x+V._lineHeight/2-M-I-o,Nt=c-(gt==="horizontal"?V._lineHeight/2:M)<w.point.y,!Nt||0<=b.indexOf("line")||0<=b.indexOf("area")||(c+=o)))):(Math.max(w.bounds.y1,l.y1),x=Math.min(w.bounds.y2,l.y2)-M+V._lineHeight/2,o=0<=b.indexOf("range")||b==="error"?0<se?Math.max(w.bounds.y1,l.y1)+V._lineHeight/2+I:Math.min(w.bounds.y2,l.y2)+V._lineHeight/2-M-I:(Math.max(w.bounds.y1,l.y1)+Math.min(w.bounds.y2,l.y2))/2-M/2+V._lineHeight/2,0<se?(c=o,(b==="bubble"||b==="scatter")&&(c=w.point.y-M/2+V._lineHeight/2,M>w.bounds.y2-w.bounds.y1&&(c-=M/2+I),0>c-V._lineHeight/2&&(c+=Math.abs(c-V._lineHeight/2)<=(w.bounds.y2-w.bounds.y1)/2+I?Math.abs(c-V._lineHeight/2):(w.bounds.y2-w.bounds.y1)/2+I))):(c=Math.min(w.point.y,o),c>x-M-I&&(b==="bubble"||b==="scatter")&&(c=Math.min(w.point.y+I,l.y2-M-I))),c=Math.min(c,x))):(0<=b.indexOf("line")||0<=b.indexOf("area")||0<=b.indexOf("scatter")?(wt="auto",_=4):0<=b.indexOf("stacked")?wt==="auto"&&(wt="inside"):b==="bubble"&&(wt="inside"),c=w.point.y+V._lineHeight/2-M/2,wt!=="inside"?(x=l.x1,d=l.x2,0>se?(P=w.point.x-N+(gt==="horizontal"?0:V._lineHeight/2)-_-o,(gt==="horizontal"?P:P-V._lineHeight/2)<x&&(P=wt==="auto"?Math.max(w.point.x,x)+(gt==="horizontal"?0:V._lineHeight/2)+I+o:x+(gt==="horizontal"?0:V._lineHeight/2)+_,(Nt=P+N-(gt==="horizontal"?0:V._lineHeight/2)>w.point.x)&&(P-=o))):(P=w.point.x+(gt==="horizontal"?0:V._lineHeight/2)+_+o,(gt==="horizontal"?P:P-V._lineHeight/2)>d-N-_-o&&(P=wt==="auto"?Math.min(w.point.x,d)-(gt==="horizontal"?N:N-V._lineHeight/2)-_-o:d-N-_+(gt==="horizontal"?0:V._lineHeight/2),(Nt=P-(gt==="horizontal"?0:V._lineHeight/2)<w.point.x)&&(P+=o)))):(x=Math.max(w.bounds.x1,l.x1),Math.min(w.bounds.x2,l.x2),o=0<=b.indexOf("range")||b==="error"?0>se?Math.max(w.bounds.x1,l.x1):Math.min(w.bounds.x2,l.x2)-N-_+(gt==="horizontal"?0:V._lineHeight/2):(Math.max(w.bounds.x1,l.x1)+Math.min(w.bounds.x2,l.x2))/2-N/2+(gt==="horizontal"?0:V._lineHeight/2),P=0>se?o:Math.min(w.point.x,o),P=Math.max(P,x+(gt==="horizontal"?0:V._lineHeight/2+I)))),gt==="vertical"&&(c+=M-V._lineHeight/2,0<="ohlc candlestick boxandwhisker column rangecolumn stackedcolumn stackedcolumn100 error".split(" ").indexOf(b)&&(Nt=0<se?c+(gt==="horizontal"?M-V._lineHeight/2:0)>w.point.y:c-(gt==="horizontal"?V._lineHeight/2:M)<w.point.y),b==="bubble"||b==="scatter")&&(P+=V._lineHeight/2-L/2),V.x=P,V.y=c,V.render(!0),G&&wt!=="inside"&&(0>b.indexOf("bar")&&(b!=="error"||!w.axisSwapped)&&w.point.x>l.x1&&w.point.x<l.x2||!Nt)&&("ohlc candlestick boxandwhisker column rangecolumn stackedcolumn stackedcolumn100 error".split(" ").indexOf(b)===-1&&(b!=="error"||w.axisSwapped)&&w.point.y>l.y1&&w.point.y<l.y2||!Nt)&&(f.lineWidth=G,f.strokeStyle=E||"gray",f.setLineDash&&f.setLineDash(y(U,G)),f.beginPath(),f.moveTo(w.point.x,w.point.y),0<=b.indexOf("bar")||b==="error"&&w.axisSwapped?f.lineTo(P+(0<w.direction?0:N)+(gt==="vertical"?-V._lineHeight/2:0),c+(gt==="vertical"?-M/2:M/2-V._lineHeight/2)):0<=b.indexOf("column")||b==="error"&&!w.axisSwapped?f.lineTo(P+N/2-(gt==="horizontal"?0:V._lineHeight/2),c+(gt==="vertical"?c-M<w.point.y?0:-M:(c-V._lineHeight/2<w.point.y?M:0)-V._lineHeight/2)):0<=b.indexOf("waterfall")?f.lineTo(P+N/2-(gt==="horizontal"?0:V._lineHeight/2),gt==="vertical"?0<se&&c<w.point.y?c:0>se&&c-M>w.point.y?c-M:w.point.y:0<se&&c+M-V._lineHeight/2<w.point.y?c+M-V._lineHeight/2:0>se&&c-V._lineHeight/2>w.point.y?c-V._lineHeight/2:w.point.y):f.lineTo(P+N/2-(gt==="horizontal"?0:V._lineHeight/2),c+(gt==="vertical"?c-M<w.point.y?0:-M:(c+M-V._lineHeight/2<w.point.y?M:0)-V._lineHeight/2)),f.stroke())}}for(f={source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0,startTimePercent:.7},r=0;r<this._indexLabels.length;r++)w=this._indexLabels[r],V=A("indexLabelBackgroundColor",w.dataPoint,w.dataSeries),w.dataSeries.indexLabelBackgroundColor=p(V)?ut?"transparent":null:V;return f},Y.prototype.renderLine=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx;l.save();var d=this.plotArea;l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip();for(var x=[],_,I=0;I<r.dataSeriesIndexes.length;I++){var N=r.dataSeriesIndexes[I],M=this.data[N];l.lineWidth=M.lineThickness;var w=M.dataPoints,b="solid";if(l.setLineDash){var P=y(M.nullDataLineDashType,M.lineThickness),b=M.lineDashType,c=y(b,M.lineThickness);l.setLineDash(c)}var L=M.id;this._eventManager.objectMap[L]={objectType:"dataSeries",dataSeriesIndex:N},L=u(L),o.strokeStyle=L,o.lineWidth=0<M.lineThickness?Math.max(M.lineThickness,4):0;var L=M._colorSet,V=L=M.lineColor=M.options.lineColor?M.options.lineColor:L[0];l.strokeStyle=L;var U=!0,E=0,G,j;if(l.beginPath(),0<w.length){for(var wt=!1,E=0;E<w.length;E++)if(G=w[E].x.getTime?w[E].x.getTime():w[E].x,!(G<r.axisX.dataInfo.viewPortMin||G>r.axisX.dataInfo.viewPortMax&&(!M.connectNullData||!wt)))if(typeof w[E].y!="number")0<E&&!(M.connectNullData||wt||U)&&(l.stroke(),ut&&o.stroke()),wt=!0;else{G=r.axisX.convertValueToPixel(G),j=r.axisY.convertValueToPixel(w[E].y);var gt=M.dataPointIds[E];if(this._eventManager.objectMap[gt]={id:gt,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:E,x1:G,y1:j},U||wt?(!U&&M.connectNullData?(l.setLineDash&&(M.options.nullDataLineDashType||b===M.lineDashType&&M.lineDashType!==M.nullDataLineDashType)&&(l.stroke(),l.beginPath(),l.moveTo(_.x,_.y),b=M.nullDataLineDashType,l.setLineDash(P)),l.lineTo(G,j),ut&&o.lineTo(G,j)):(l.beginPath(),l.moveTo(G,j),ut&&(o.beginPath(),o.moveTo(G,j))),wt=U=!1):(l.lineTo(G,j),ut&&o.lineTo(G,j),E%500==0&&(l.stroke(),l.beginPath(),l.moveTo(G,j),ut&&(o.stroke(),o.beginPath(),o.moveTo(G,j)))),_={x:G,y:j},E<w.length-1&&(V!==(w[E].lineColor||L)||b!==(w[E].lineDashType||M.lineDashType))&&(l.stroke(),l.beginPath(),l.moveTo(G,j),V=w[E].lineColor||L,l.strokeStyle=V,l.setLineDash&&(w[E].lineDashType?(b=w[E].lineDashType,l.setLineDash(y(b,M.lineThickness))):(b=M.lineDashType,l.setLineDash(c)))),w[E].markerSize!==0&&(0<w[E].markerSize||0<M.markerSize)){var _t=M.getMarkerProperties(E,G,j,l);x.push(_t),gt=u(gt),ut&&x.push({x:G,y:j,ctx:o,type:_t.type,size:_t.size,color:gt,borderColor:gt,borderThickness:_t.borderThickness})}(w[E].indexLabel||M.indexLabel||w[E].indexLabelFormatter||M.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:w[E],dataSeries:M,point:{x:G,y:j},direction:0>w[E].y===r.axisY.reversed?1:-1,color:L})}l.stroke(),ut&&o.stroke()}}return xi.drawMarkers(x),ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),o.beginPath()),l.restore(),l.beginPath(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderStepLine=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx;l.save();var d=this.plotArea;l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip();for(var x=[],_,I=0;I<r.dataSeriesIndexes.length;I++){var N=r.dataSeriesIndexes[I],M=this.data[N];l.lineWidth=M.lineThickness;var w=M.dataPoints,b="solid";if(l.setLineDash){var P=y(M.nullDataLineDashType,M.lineThickness),b=M.lineDashType,c=y(b,M.lineThickness);l.setLineDash(c)}var L=M.id;this._eventManager.objectMap[L]={objectType:"dataSeries",dataSeriesIndex:N},L=u(L),o.strokeStyle=L,o.lineWidth=0<M.lineThickness?Math.max(M.lineThickness,4):0;var L=M._colorSet,V=L=M.lineColor=M.options.lineColor?M.options.lineColor:L[0];l.strokeStyle=L;var U=!0,E=0,G,j;if(l.beginPath(),0<w.length){for(var wt=!1,E=0;E<w.length;E++)if(G=w[E].getTime?w[E].x.getTime():w[E].x,!(G<r.axisX.dataInfo.viewPortMin||G>r.axisX.dataInfo.viewPortMax&&(!M.connectNullData||!wt)))if(typeof w[E].y!="number")0<E&&!(M.connectNullData||wt||U)&&(l.stroke(),ut&&o.stroke()),wt=!0;else{var gt=j;G=r.axisX.convertValueToPixel(G),j=r.axisY.convertValueToPixel(w[E].y);var _t=M.dataPointIds[E];this._eventManager.objectMap[_t]={id:_t,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:E,x1:G,y1:j},U||wt?(!U&&M.connectNullData?(l.setLineDash&&(M.options.nullDataLineDashType||b===M.lineDashType&&M.lineDashType!==M.nullDataLineDashType)&&(l.stroke(),l.beginPath(),l.moveTo(_.x,_.y),b=M.nullDataLineDashType,l.setLineDash(P)),l.lineTo(G,gt),l.lineTo(G,j),ut&&(o.lineTo(G,gt),o.lineTo(G,j))):(l.beginPath(),l.moveTo(G,j),ut&&(o.beginPath(),o.moveTo(G,j))),wt=U=!1):(l.lineTo(G,gt),ut&&o.lineTo(G,gt),l.lineTo(G,j),ut&&o.lineTo(G,j),E%500==0&&(l.stroke(),l.beginPath(),l.moveTo(G,j),ut&&(o.stroke(),o.beginPath(),o.moveTo(G,j)))),_={x:G,y:j},E<w.length-1&&(V!==(w[E].lineColor||L)||b!==(w[E].lineDashType||M.lineDashType))&&(l.stroke(),l.beginPath(),l.moveTo(G,j),V=w[E].lineColor||L,l.strokeStyle=V,l.setLineDash&&(w[E].lineDashType?(b=w[E].lineDashType,l.setLineDash(y(b,M.lineThickness))):(b=M.lineDashType,l.setLineDash(c)))),w[E].markerSize!==0&&(0<w[E].markerSize||0<M.markerSize)&&(gt=M.getMarkerProperties(E,G,j,l),x.push(gt),_t=u(_t),ut&&x.push({x:G,y:j,ctx:o,type:gt.type,size:gt.size,color:_t,borderColor:_t,borderThickness:gt.borderThickness})),(w[E].indexLabel||M.indexLabel||w[E].indexLabelFormatter||M.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:w[E],dataSeries:M,point:{x:G,y:j},direction:0>w[E].y===r.axisY.reversed?1:-1,color:L})}l.stroke(),ut&&o.stroke()}}return xi.drawMarkers(x),ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),o.beginPath()),l.restore(),l.beginPath(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderSpline=function(r){function f(_t){if(_t=q(_t,2),0<_t.length){o.beginPath(),ut&&d.beginPath(),o.moveTo(_t[0].x,_t[0].y),_t[0].newStrokeStyle&&(o.strokeStyle=_t[0].newStrokeStyle),_t[0].newLineDashArray&&o.setLineDash(_t[0].newLineDashArray),ut&&d.moveTo(_t[0].x,_t[0].y);for(var Qt=0;Qt<_t.length-3;Qt+=3)o.bezierCurveTo(_t[Qt+1].x,_t[Qt+1].y,_t[Qt+2].x,_t[Qt+2].y,_t[Qt+3].x,_t[Qt+3].y),ut&&d.bezierCurveTo(_t[Qt+1].x,_t[Qt+1].y,_t[Qt+2].x,_t[Qt+2].y,_t[Qt+3].x,_t[Qt+3].y),(0<Qt&&Qt%3e3===0||_t[Qt+3].newStrokeStyle||_t[Qt+3].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(_t[Qt+3].x,_t[Qt+3].y),_t[Qt+3].newStrokeStyle&&(o.strokeStyle=_t[Qt+3].newStrokeStyle),_t[Qt+3].newLineDashArray&&o.setLineDash(_t[Qt+3].newLineDashArray),ut&&(d.stroke(),d.beginPath(),d.moveTo(_t[Qt+3].x,_t[Qt+3].y)));o.stroke(),ut&&d.stroke()}}var l=r.targetCanvasCtx||this.plotArea.ctx,o=ut?this._preRenderCtx:l;if(!(0>=r.dataSeriesIndexes.length)){var d=this._eventManager.ghostCtx;o.save();var x=this.plotArea;o.beginPath(),o.rect(x.x1,x.y1,x.width,x.height),o.clip();for(var _=[],I=0;I<r.dataSeriesIndexes.length;I++){var N=r.dataSeriesIndexes[I],M=this.data[N];o.lineWidth=M.lineThickness;var w=M.dataPoints,b="solid";if(o.setLineDash){var P=y(M.nullDataLineDashType,M.lineThickness),b=M.lineDashType,c=y(b,M.lineThickness);o.setLineDash(c)}var L=M.id;this._eventManager.objectMap[L]={objectType:"dataSeries",dataSeriesIndex:N},L=u(L),d.strokeStyle=L,d.lineWidth=0<M.lineThickness?Math.max(M.lineThickness,4):0;var L=M._colorSet,V=L=M.lineColor=M.options.lineColor?M.options.lineColor:L[0];o.strokeStyle=L;var U=0,E,G,j=[];if(o.beginPath(),0<w.length){for(G=!1,U=0;U<w.length;U++)if(E=w[U].getTime?w[U].x.getTime():w[U].x,!(E<r.axisX.dataInfo.viewPortMin||E>r.axisX.dataInfo.viewPortMax&&(!M.connectNullData||!G)))if(typeof w[U].y!="number")0<U&&!G&&(M.connectNullData?o.setLineDash&&0<j.length&&(M.options.nullDataLineDashType||!w[U-1].lineDashType)&&(j[j.length-1].newLineDashArray=P,b=M.nullDataLineDashType):(f(j),j=[])),G=!0;else{E=r.axisX.convertValueToPixel(E),G=r.axisY.convertValueToPixel(w[U].y);var wt=M.dataPointIds[U];if(this._eventManager.objectMap[wt]={id:wt,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:U,x1:E,y1:G},j[j.length]={x:E,y:G},U<w.length-1&&(V!==(w[U].lineColor||L)||b!==(w[U].lineDashType||M.lineDashType))&&(V=w[U].lineColor||L,j[j.length-1].newStrokeStyle=V,o.setLineDash&&(w[U].lineDashType?(b=w[U].lineDashType,j[j.length-1].newLineDashArray=y(b,M.lineThickness)):(b=M.lineDashType,j[j.length-1].newLineDashArray=c))),w[U].markerSize!==0&&(0<w[U].markerSize||0<M.markerSize)){var gt=M.getMarkerProperties(U,E,G,o);_.push(gt),wt=u(wt),ut&&_.push({x:E,y:G,ctx:d,type:gt.type,size:gt.size,color:wt,borderColor:wt,borderThickness:gt.borderThickness})}(w[U].indexLabel||M.indexLabel||w[U].indexLabelFormatter||M.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:w[U],dataSeries:M,point:{x:E,y:G},direction:0>w[U].y===r.axisY.reversed?1:-1,color:L}),G=!1}}f(j)}return xi.drawMarkers(_),ut&&(l.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(x.x1,x.y1,x.width,x.height),d.beginPath()),o.restore(),o.beginPath(),{source:l,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderColumn=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=null,d=this.plotArea,M=0,x,_,I,N=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),M=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,w=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/r.plotType.totalDataSeries))<<0,b=r.axisX.dataInfo.minDiff;for(isFinite(b)||(b=.3*Math.abs(r.axisX.range)),b=this.dataPointWidth=this.options.dataPointWidth?this.dataPointWidth:.9*(d.width*(r.axisX.logarithmic?Math.log(b)/Math.log(r.axisX.range):Math.abs(b)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&M>w&&(M=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,w)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&w<M&&(w=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,M)),b<M&&(b=M),b>w&&(b=w),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),w=0;w<r.dataSeriesIndexes.length;w++){var P=r.dataSeriesIndexes[w],c=this.data[P],L=c.dataPoints;if(0<L.length){for(var V=!!(5<b&&c.bevelEnabled),M=0;M<L.length;M++)if(L[M].getTime?I=L[M].x.getTime():I=L[M].x,!(I<r.axisX.dataInfo.viewPortMin||I>r.axisX.dataInfo.viewPortMax)&&typeof L[M].y=="number"){x=r.axisX.convertValueToPixel(I),_=r.axisY.convertValueToPixel(L[M].y),x=r.axisX.reversed?x+r.plotType.totalDataSeries*b/2-(r.previousDataSeriesCount+w)*b<<0:x-r.plotType.totalDataSeries*b/2+(r.previousDataSeriesCount+w)*b<<0;var U=r.axisX.reversed?x-b<<0:x+b<<0,E;0<=L[M].y?E=N:(E=_,_=N),_>E&&(o=_,_=E,E=o),o=L[M].color?L[M].color:c._colorSet[M%c._colorSet.length],Re(l,r.axisX.reversed?U:x,_,r.axisX.reversed?x:U,E,o,0,null,V&&(r.axisY.reversed?0>L[M].y:0<=L[M].y),(r.axisY.reversed?0<=L[M].y:0>L[M].y)&&V,!1,!1,c.fillOpacity),o=c.dataPointIds[M],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:P,dataPointIndex:M,x1:x,y1:_,x2:U,y2:E},o=u(o),ut&&Re(this._eventManager.ghostCtx,r.axisX.reversed?U:x,_,r.axisX.reversed?x:U,E,o,0,null,!1,!1,!1,!1),(L[M].indexLabel||c.indexLabel||L[M].indexLabelFormatter||c.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:L[M],dataSeries:c,point:{x:x+(U-x)/2,y:0>L[M].y===r.axisY.reversed?_:E},direction:0>L[M].y===r.axisY.reversed?1:-1,bounds:{x1:x,y1:Math.min(_,E),x2:U,y2:Math.max(_,E)},color:o})}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.yScaleAnimation,easingFunction:Xe.easing.easeOutQuart,animationBase:N<r.axisY.bounds.y1?r.axisY.bounds.y1:N>r.axisY.bounds.y2?r.axisY.bounds.y2:N}}},Y.prototype.renderStackedColumn=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=null,d=this.plotArea,x=[],_=[],I=[],N=[],P=0,M,w,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),P=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,c=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0,L=r.axisX.dataInfo.minDiff;for(isFinite(L)||(L=.3*Math.abs(r.axisX.range)),L=this.options.dataPointWidth?this.dataPointWidth:.9*(d.width*(r.axisX.logarithmic?Math.log(L)/Math.log(r.axisX.range):Math.abs(L)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&P>c&&(P=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,c)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c<P&&(c=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,P)),L<P&&(L=P),L>c&&(L=c),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),c=0;c<r.dataSeriesIndexes.length;c++){var V=r.dataSeriesIndexes[c],U=this.data[V],E=U.dataPoints;if(0<E.length){var G=!!(5<L&&U.bevelEnabled);for(l.strokeStyle="#4572A7 ",P=0;P<E.length;P++)if(o=E[P].x.getTime?E[P].x.getTime():E[P].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof E[P].y=="number"){M=r.axisX.convertValueToPixel(o),M=M-r.plotType.plotUnits.length*L/2+r.index*L<<0;var j=M+L<<0,wt;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<E[P].y)I[o]=E[P].y+(I[o]?I[o]:0),0<I[o]&&(w=r.axisY.convertValueToPixel(I[o]),wt=typeof x[o]<"u"?x[o]:b,x[o]=w);else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=E[P].y)N[o]=E[P].y+(N[o]?N[o]:0),wt=r.axisY.convertValueToPixel(N[o]),w=typeof _[o]<"u"?_[o]:b,_[o]=wt;else if(w=r.axisY.convertValueToPixel(E[P].y),0<=E[P].y){var gt=typeof x[o]<"u"?x[o]:0;w-=gt,wt=b-gt,x[o]=gt+(wt-w)}else gt=_[o]?_[o]:0,wt=w+gt,w=b+gt,_[o]=gt+(wt-w);o=E[P].color?E[P].color:U._colorSet[P%U._colorSet.length],Re(l,M,r.axisY.reversed?wt:w,j,r.axisY.reversed?w:wt,o,0,null,G&&(r.axisY.reversed?0>E[P].y:0<=E[P].y),(r.axisY.reversed?0<=E[P].y:0>E[P].y)&&G,!1,!1,U.fillOpacity),o=U.dataPointIds[P],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:P,x1:M,y1:w,x2:j,y2:wt},o=u(o),ut&&Re(this._eventManager.ghostCtx,M,w,j,wt,o,0,null,!1,!1,!1,!1),(E[P].indexLabel||U.indexLabel||E[P].indexLabelFormatter||U.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:E[P],dataSeries:U,point:{x:M+(j-M)/2,y:0<=E[P].y?w:wt},direction:0>E[P].y===r.axisY.reversed?1:-1,bounds:{x1:M,y1:Math.min(w,wt),x2:j,y2:Math.max(w,wt)},color:o,cumulativeY:U.dataPointEOs[P].cumulativeY})}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.yScaleAnimation,easingFunction:Xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.y1?r.axisY.bounds.y1:b>r.axisY.bounds.y2?r.axisY.bounds.y2:b}}},Y.prototype.renderStackedColumn100=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=null,d=this.plotArea,x=[],_=[],I=[],N=[],c=0,M,w,b,P=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),c=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;b=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0;var L=r.axisX.dataInfo.minDiff;isFinite(L)||(L=.3*Math.abs(r.axisX.range)),L=this.options.dataPointWidth?this.dataPointWidth:.9*(d.width*(r.axisX.logarithmic?Math.log(L)/Math.log(r.axisX.range):Math.abs(L)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&c>b&&(c=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,b)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&b<c&&(b=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,c)),L<c&&(L=c),L>b&&(L=b),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip());for(var V=0;V<r.dataSeriesIndexes.length;V++){var U=r.dataSeriesIndexes[V],E=this.data[U],G=E.dataPoints;if(0<G.length){for(var j=!!(5<L&&E.bevelEnabled),c=0;c<G.length;c++)if(b=G[c].x.getTime?G[c].x.getTime():G[c].x,!(b<r.axisX.dataInfo.viewPortMin||b>r.axisX.dataInfo.viewPortMax)&&typeof G[c].y=="number"){M=r.axisX.convertValueToPixel(b),w=r.dataPointYSums[b]!==0?100*(G[c].y/r.dataPointYSums[b]):0,M=M-r.plotType.plotUnits.length*L/2+r.index*L<<0;var wt=M+L<<0,gt;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<G[c].y){if(I[b]=w+(typeof I[b]<"u"?I[b]:0),0>=I[b])continue;w=r.axisY.convertValueToPixel(I[b]),gt=x[b]?x[b]:P,x[b]=w}else r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=G[c].y?(N[b]=w+(typeof N[b]<"u"?N[b]:0),gt=r.axisY.convertValueToPixel(N[b]),w=_[b]?_[b]:P,_[b]=gt):(w=r.axisY.convertValueToPixel(w),0<=G[c].y?(o=typeof x[b]<"u"?x[b]:0,w-=o,gt=P-o,r.dataSeriesIndexes.length-1===V&&1>=Math.abs(d.y1-w)&&(w=d.y1),x[b]=o+(gt-w)):(o=typeof _[b]<"u"?_[b]:0,gt=w+o,w=P+o,r.dataSeriesIndexes.length-1===V&&1>=Math.abs(d.y2-gt)&&(gt=d.y2),_[b]=o+(gt-w)));o=G[c].color?G[c].color:E._colorSet[c%E._colorSet.length],Re(l,M,r.axisY.reversed?gt:w,wt,r.axisY.reversed?w:gt,o,0,null,j&&(r.axisY.reversed?0>G[c].y:0<=G[c].y),(r.axisY.reversed?0<=G[c].y:0>G[c].y)&&j,!1,!1,E.fillOpacity),o=E.dataPointIds[c],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:U,dataPointIndex:c,x1:M,y1:w,x2:wt,y2:gt},o=u(o),ut&&Re(this._eventManager.ghostCtx,M,w,wt,gt,o,0,null,!1,!1,!1,!1),(G[c].indexLabel||E.indexLabel||G[c].indexLabelFormatter||E.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:G[c],dataSeries:E,point:{x:M+(wt-M)/2,y:0<=G[c].y?w:gt},direction:0>G[c].y===r.axisY.reversed?1:-1,bounds:{x1:M,y1:Math.min(w,gt),x2:wt,y2:Math.max(w,gt)},color:o,yCumulative:100*(E.dataPointEOs[c].cumulativeY/r.dataPointYSums[b])})}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.yScaleAnimation,easingFunction:Xe.easing.easeOutQuart,animationBase:P<r.axisY.bounds.y1?r.axisY.bounds.y1:P>r.axisY.bounds.y2?r.axisY.bounds.y2:P}}},Y.prototype.renderBar=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=null,d=this.plotArea,M=0,x,_,I,N=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),M=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,w=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/r.plotType.totalDataSeries))<<0,b=r.axisX.dataInfo.minDiff;for(isFinite(b)||(b=.3*Math.abs(r.axisX.range)),b=this.options.dataPointWidth?this.dataPointWidth:.9*(d.height*(r.axisX.logarithmic?Math.log(b)/Math.log(r.axisX.range):Math.abs(b)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&M>w&&(M=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,w)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&w<M&&(w=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,M)),b<M&&(b=M),b>w&&(b=w),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),w=0;w<r.dataSeriesIndexes.length;w++){var P=r.dataSeriesIndexes[w],c=this.data[P],L=c.dataPoints;if(0<L.length){var V=!!(5<b&&c.bevelEnabled);for(l.strokeStyle="#4572A7 ",M=0;M<L.length;M++)if(L[M].getTime?I=L[M].x.getTime():I=L[M].x,!(I<r.axisX.dataInfo.viewPortMin||I>r.axisX.dataInfo.viewPortMax)&&typeof L[M].y=="number"){_=r.axisX.convertValueToPixel(I),x=r.axisY.convertValueToPixel(L[M].y),_=r.axisX.reversed?_+r.plotType.totalDataSeries*b/2-(r.previousDataSeriesCount+w)*b<<0:_-r.plotType.totalDataSeries*b/2+(r.previousDataSeriesCount+w)*b<<0;var U=r.axisX.reversed?_-b<<0:_+b<<0,E;0<=L[M].y?E=N:(E=x,x=N),o=L[M].color?L[M].color:c._colorSet[M%c._colorSet.length],Re(l,r.axisY.reversed?x:E,r.axisX.reversed?U:_,r.axisY.reversed?E:x,r.axisX.reversed?_:U,o,0,null,V,!1,!1,!1,c.fillOpacity),o=c.dataPointIds[M],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:P,dataPointIndex:M,x1:E,y1:_,x2:x,y2:U},o=u(o),ut&&Re(this._eventManager.ghostCtx,E,r.axisX.reversed?U:_,x,r.axisX.reversed?_:U,o,0,null,!1,!1,!1,!1),(L[M].indexLabel||c.indexLabel||L[M].indexLabelFormatter||c.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:L[M],dataSeries:c,point:{x:0<=L[M].y?x:E,y:_+(U-_)/2},direction:0>L[M].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(E,x),y1:_,x2:Math.max(E,x),y2:U},color:o})}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.xScaleAnimation,easingFunction:Xe.easing.easeOutQuart,animationBase:N<r.axisY.bounds.x1?r.axisY.bounds.x1:N>r.axisY.bounds.x2?r.axisY.bounds.x2:N}}},Y.prototype.renderStackedBar=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=null,d=this.plotArea,x=[],_=[],I=[],N=[],P=0,M,w,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),P=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,c=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0,L=r.axisX.dataInfo.minDiff;for(isFinite(L)||(L=.3*Math.abs(r.axisX.range)),L=this.options.dataPointWidth?this.dataPointWidth:.9*(d.height*(r.axisX.logarithmic?Math.log(L)/Math.log(r.axisX.range):Math.abs(L)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&P>c&&(P=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,c)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c<P&&(c=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,P)),L<P&&(L=P),L>c&&(L=c),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),c=0;c<r.dataSeriesIndexes.length;c++){var V=r.dataSeriesIndexes[c],U=this.data[V],E=U.dataPoints;if(0<E.length){var G=!!(5<L&&U.bevelEnabled);for(l.strokeStyle="#4572A7 ",P=0;P<E.length;P++)if(o=E[P].x.getTime?E[P].x.getTime():E[P].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof E[P].y=="number"){w=r.axisX.convertValueToPixel(o),w=w-r.plotType.plotUnits.length*L/2+r.index*L<<0;var j=w+L<<0,wt;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<E[P].y)I[o]=E[P].y+(I[o]?I[o]:0),0<I[o]&&(wt=x[o]?x[o]:b,x[o]=M=r.axisY.convertValueToPixel(I[o]));else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=E[P].y)N[o]=E[P].y+(N[o]?N[o]:0),M=_[o]?_[o]:b,_[o]=wt=r.axisY.convertValueToPixel(N[o]);else if(M=r.axisY.convertValueToPixel(E[P].y),0<=E[P].y){var gt=x[o]?x[o]:0;wt=b+gt,M+=gt,x[o]=gt+(M-wt)}else gt=_[o]?_[o]:0,wt=M-gt,M=b-gt,_[o]=gt+(M-wt);o=E[P].color?E[P].color:U._colorSet[P%U._colorSet.length],Re(l,r.axisY.reversed?M:wt,w,r.axisY.reversed?wt:M,j,o,0,null,G,!1,!1,!1,U.fillOpacity),o=U.dataPointIds[P],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:P,x1:wt,y1:w,x2:M,y2:j},o=u(o),ut&&Re(this._eventManager.ghostCtx,wt,w,M,j,o,0,null,!1,!1,!1,!1),(E[P].indexLabel||U.indexLabel||E[P].indexLabelFormatter||U.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:E[P],dataSeries:U,point:{x:0<=E[P].y?M:wt,y:w+(j-w)/2},direction:0>E[P].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(wt,M),y1:w,x2:Math.max(wt,M),y2:j},color:o})}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.xScaleAnimation,easingFunction:Xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.x1?r.axisY.bounds.x1:b>r.axisY.bounds.x2?r.axisY.bounds.x2:b}}},Y.prototype.renderStackedBar100=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=null,d=this.plotArea,x=[],_=[],I=[],N=[],P=0,M,w,b=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),P=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,c=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0,L=r.axisX.dataInfo.minDiff;for(isFinite(L)||(L=.3*Math.abs(r.axisX.range)),L=this.options.dataPointWidth?this.dataPointWidth:.9*(d.height*(r.axisX.logarithmic?Math.log(L)/Math.log(r.axisX.range):Math.abs(L)/Math.abs(r.axisX.range))/r.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&P>c&&(P=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,c)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c<P&&(c=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,P)),L<P&&(L=P),L>c&&(L=c),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip()),c=0;c<r.dataSeriesIndexes.length;c++){var V=r.dataSeriesIndexes[c],U=this.data[V],E=U.dataPoints;if(0<E.length){var G=!!(5<L&&U.bevelEnabled);for(l.strokeStyle="#4572A7 ",P=0;P<E.length;P++)if(o=E[P].x.getTime?E[P].x.getTime():E[P].x,!(o<r.axisX.dataInfo.viewPortMin||o>r.axisX.dataInfo.viewPortMax)&&typeof E[P].y=="number"){w=r.axisX.convertValueToPixel(o);var j;j=r.dataPointYSums[o]!==0?100*(E[P].y/r.dataPointYSums[o]):0,w=w-r.plotType.plotUnits.length*L/2+r.index*L<<0;var wt=w+L<<0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0<E[P].y){if(I[o]=j+(I[o]?I[o]:0),0>=I[o])continue;j=x[o]?x[o]:b,x[o]=M=r.axisY.convertValueToPixel(I[o])}else if(r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length&&0>=E[P].y)N[o]=j+(N[o]?N[o]:0),M=_[o]?_[o]:b,_[o]=j=r.axisY.convertValueToPixel(N[o]);else if(M=r.axisY.convertValueToPixel(j),0<=E[P].y){var gt=x[o]?x[o]:0;j=b+gt,M+=gt,r.dataSeriesIndexes.length-1===c&&1>=Math.abs(d.x2-M)&&(M=d.x2),x[o]=gt+(M-j)}else gt=_[o]?_[o]:0,j=M-gt,M=b-gt,r.dataSeriesIndexes.length-1===c&&1>=Math.abs(d.x1-j)&&(j=d.x1),_[o]=gt+(M-j);o=E[P].color?E[P].color:U._colorSet[P%U._colorSet.length],Re(l,r.axisY.reversed?M:j,w,r.axisY.reversed?j:M,wt,o,0,null,G,!1,!1,!1,U.fillOpacity),o=U.dataPointIds[P],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:V,dataPointIndex:P,x1:j,y1:w,x2:M,y2:wt},o=u(o),ut&&Re(this._eventManager.ghostCtx,j,w,M,wt,o,0,null,!1,!1,!1,!1),(E[P].indexLabel||U.indexLabel||E[P].indexLabelFormatter||U.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:E[P],dataSeries:U,point:{x:0<=E[P].y?M:j,y:w+(wt-w)/2},direction:0>E[P].y===r.axisY.reversed?1:-1,bounds:{x1:Math.min(j,M),y1:w,x2:Math.max(j,M),y2:wt},color:o})}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.xScaleAnimation,easingFunction:Xe.easing.easeOutQuart,animationBase:b<r.axisY.bounds.x1?r.axisY.bounds.x1:b>r.axisY.bounds.x2?r.axisY.bounds.x2:b}}},Y.prototype.renderArea=function(r){var f,l;function o(){gt&&(0<c.lineThickness&&x.stroke(),r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?wt=j:0>r.axisY.viewportMaximum?wt=I.y1:0<r.axisY.viewportMinimum&&(wt=j),x.lineTo(U,wt),x.lineTo(gt.x,wt),x.closePath(),x.globalAlpha=c.fillOpacity,x.fill(),x.globalAlpha=1,ut&&(_.lineTo(U,wt),_.lineTo(gt.x,wt),_.closePath(),_.fill()),x.beginPath(),x.moveTo(U,E),_.beginPath(),_.moveTo(U,E),gt={x:U,y:E})}var d=r.targetCanvasCtx||this.plotArea.ctx,x=ut?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var _=this._eventManager.ghostCtx,I=r.axisY.lineCoordinates,N=[],M=this.plotArea,w;x.save(),ut&&_.save(),x.beginPath(),x.rect(M.x1,M.y1,M.width,M.height),x.clip(),ut&&(_.beginPath(),_.rect(M.x1,M.y1,M.width,M.height),_.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var P=r.dataSeriesIndexes[b],c=this.data[P],L=c.dataPoints,N=c.id;this._eventManager.objectMap[N]={objectType:"dataSeries",dataSeriesIndex:P},N=u(N),_.fillStyle=N,N=[],f=!0;var V=0,U,E,G,j=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),wt,gt=null;if(0<L.length){var _t=c._colorSet[V%c._colorSet.length],Qt=c.lineColor=c.options.lineColor||_t,se=Qt;if(x.fillStyle=_t,x.strokeStyle=Qt,x.lineWidth=c.lineThickness,l="solid",x.setLineDash){var Vt=y(c.nullDataLineDashType,c.lineThickness);l=c.lineDashType;var Wt=y(l,c.lineThickness);x.setLineDash(Wt)}for(var Nt=!0;V<L.length;V++)if(G=L[V].x.getTime?L[V].x.getTime():L[V].x,!(G<r.axisX.dataInfo.viewPortMin||G>r.axisX.dataInfo.viewPortMax&&(!c.connectNullData||!Nt)))if(typeof L[V].y!="number")c.connectNullData||Nt||f||o(),Nt=!0;else{U=r.axisX.convertValueToPixel(G),E=r.axisY.convertValueToPixel(L[V].y),f||Nt?(!f&&c.connectNullData?(x.setLineDash&&(c.options.nullDataLineDashType||l===c.lineDashType&&c.lineDashType!==c.nullDataLineDashType)&&(f=U,l=E,U=w.x,E=w.y,o(),x.moveTo(w.x,w.y),U=f,E=l,gt=w,l=c.nullDataLineDashType,x.setLineDash(Vt)),x.lineTo(U,E),ut&&_.lineTo(U,E)):(x.beginPath(),x.moveTo(U,E),ut&&(_.beginPath(),_.moveTo(U,E)),gt={x:U,y:E}),Nt=f=!1):(x.lineTo(U,E),ut&&_.lineTo(U,E),V%250==0&&o()),w={x:U,y:E},V<L.length-1&&(se!==(L[V].lineColor||Qt)||l!==(L[V].lineDashType||c.lineDashType))&&(o(),se=L[V].lineColor||Qt,x.strokeStyle=se,x.setLineDash&&(L[V].lineDashType?(l=L[V].lineDashType,x.setLineDash(y(l,c.lineThickness))):(l=c.lineDashType,x.setLineDash(Wt))));var Ft=c.dataPointIds[V];this._eventManager.objectMap[Ft]={id:Ft,objectType:"dataPoint",dataSeriesIndex:P,dataPointIndex:V,x1:U,y1:E},L[V].markerSize!==0&&(0<L[V].markerSize||0<c.markerSize)&&(G=c.getMarkerProperties(V,U,E,x),N.push(G),Ft=u(Ft),ut&&N.push({x:U,y:E,ctx:_,type:G.type,size:G.size,color:Ft,borderColor:Ft,borderThickness:G.borderThickness})),(L[V].indexLabel||c.indexLabel||L[V].indexLabelFormatter||c.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:L[V],dataSeries:c,point:{x:U,y:E},direction:0>L[V].y===r.axisY.reversed?1:-1,color:_t})}o(),xi.drawMarkers(N)}}return ut&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&x.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&x.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.clearRect(M.x1,M.y1,M.width,M.height),this._eventManager.ghostCtx.restore()),x.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderSplineArea=function(r){function f(){var Nt=q(G,2);if(0<Nt.length){if(0<w.lineThickness){o.beginPath(),o.moveTo(Nt[0].x,Nt[0].y),Nt[0].newStrokeStyle&&(o.strokeStyle=Nt[0].newStrokeStyle),Nt[0].newLineDashArray&&o.setLineDash(Nt[0].newLineDashArray);for(var Ft=0;Ft<Nt.length-3;Ft+=3)o.bezierCurveTo(Nt[Ft+1].x,Nt[Ft+1].y,Nt[Ft+2].x,Nt[Ft+2].y,Nt[Ft+3].x,Nt[Ft+3].y),ut&&d.bezierCurveTo(Nt[Ft+1].x,Nt[Ft+1].y,Nt[Ft+2].x,Nt[Ft+2].y,Nt[Ft+3].x,Nt[Ft+3].y),(Nt[Ft+3].newStrokeStyle||Nt[Ft+3].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(Nt[Ft+3].x,Nt[Ft+3].y),Nt[Ft+3].newStrokeStyle&&(o.strokeStyle=Nt[Ft+3].newStrokeStyle),Nt[Ft+3].newLineDashArray&&o.setLineDash(Nt[Ft+3].newLineDashArray));o.stroke()}for(o.beginPath(),o.moveTo(Nt[0].x,Nt[0].y),ut&&(d.beginPath(),d.moveTo(Nt[0].x,Nt[0].y)),Ft=0;Ft<Nt.length-3;Ft+=3)o.bezierCurveTo(Nt[Ft+1].x,Nt[Ft+1].y,Nt[Ft+2].x,Nt[Ft+2].y,Nt[Ft+3].x,Nt[Ft+3].y),ut&&d.bezierCurveTo(Nt[Ft+1].x,Nt[Ft+1].y,Nt[Ft+2].x,Nt[Ft+2].y,Nt[Ft+3].x,Nt[Ft+3].y);r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?U=V:0>r.axisY.viewportMaximum?U=x.y1:0<r.axisY.viewportMinimum&&(U=V),E={x:Nt[0].x,y:Nt[0].y},o.lineTo(Nt[Nt.length-1].x,U),o.lineTo(E.x,U),o.closePath(),o.globalAlpha=w.fillOpacity,o.fill(),o.globalAlpha=1,ut&&(d.lineTo(Nt[Nt.length-1].x,U),d.lineTo(E.x,U),d.closePath(),d.fill())}}var l=r.targetCanvasCtx||this.plotArea.ctx,o=ut?this._preRenderCtx:l;if(!(0>=r.dataSeriesIndexes.length)){var d=this._eventManager.ghostCtx,x=r.axisY.lineCoordinates,_=[],I=this.plotArea;o.save(),ut&&d.save(),o.beginPath(),o.rect(I.x1,I.y1,I.width,I.height),o.clip(),ut&&(d.beginPath(),d.rect(I.x1,I.y1,I.width,I.height),d.clip());for(var N=0;N<r.dataSeriesIndexes.length;N++){var M=r.dataSeriesIndexes[N],w=this.data[M],b=w.dataPoints,_=w.id;this._eventManager.objectMap[_]={objectType:"dataSeries",dataSeriesIndex:M},_=u(_),d.fillStyle=_;var _=[],P=0,c,L,V=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),U,E=null,G=[];if(0<b.length){var j=w._colorSet[P%w._colorSet.length],wt=w.lineColor=w.options.lineColor||j,gt=wt;o.fillStyle=j,o.strokeStyle=wt,o.lineWidth=w.lineThickness;var _t="solid";if(o.setLineDash){var Qt=y(w.nullDataLineDashType,w.lineThickness),_t=w.lineDashType,se=y(_t,w.lineThickness);o.setLineDash(se)}for(L=!1;P<b.length;P++)if(c=b[P].x.getTime?b[P].x.getTime():b[P].x,!(c<r.axisX.dataInfo.viewPortMin||c>r.axisX.dataInfo.viewPortMax&&(!w.connectNullData||!L)))if(typeof b[P].y!="number")0<P&&!L&&(w.connectNullData?o.setLineDash&&0<G.length&&(w.options.nullDataLineDashType||!b[P-1].lineDashType)&&(G[G.length-1].newLineDashArray=Qt,_t=w.nullDataLineDashType):(f(),G=[])),L=!0;else{c=r.axisX.convertValueToPixel(c),L=r.axisY.convertValueToPixel(b[P].y);var Vt=w.dataPointIds[P];if(this._eventManager.objectMap[Vt]={id:Vt,objectType:"dataPoint",dataSeriesIndex:M,dataPointIndex:P,x1:c,y1:L},G[G.length]={x:c,y:L},P<b.length-1&&(gt!==(b[P].lineColor||wt)||_t!==(b[P].lineDashType||w.lineDashType))&&(gt=b[P].lineColor||wt,G[G.length-1].newStrokeStyle=gt,o.setLineDash&&(b[P].lineDashType?(_t=b[P].lineDashType,G[G.length-1].newLineDashArray=y(_t,w.lineThickness)):(_t=w.lineDashType,G[G.length-1].newLineDashArray=se))),b[P].markerSize!==0&&(0<b[P].markerSize||0<w.markerSize)){var Wt=w.getMarkerProperties(P,c,L,o);_.push(Wt),Vt=u(Vt),ut&&_.push({x:c,y:L,ctx:d,type:Wt.type,size:Wt.size,color:Vt,borderColor:Vt,borderThickness:Wt.borderThickness})}(b[P].indexLabel||w.indexLabel||b[P].indexLabelFormatter||w.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:b[P],dataSeries:w,point:{x:c,y:L},direction:0>b[P].y===r.axisY.reversed?1:-1,color:j}),L=!1}f(),xi.drawMarkers(_)}}return ut&&(l.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(I.x1,I.y1,I.width,I.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:l,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderStepArea=function(r){var f,l;function o(){gt&&(0<c.lineThickness&&x.stroke(),r.axisY.logarithmic||0>=r.axisY.viewportMinimum&&0<=r.axisY.viewportMaximum?wt=j:0>r.axisY.viewportMaximum?wt=I.y1:0<r.axisY.viewportMinimum&&(wt=j),x.lineTo(U,wt),x.lineTo(gt.x,wt),x.closePath(),x.globalAlpha=c.fillOpacity,x.fill(),x.globalAlpha=1,ut&&(_.lineTo(U,wt),_.lineTo(gt.x,wt),_.closePath(),_.fill()),x.beginPath(),x.moveTo(U,E),_.beginPath(),_.moveTo(U,E),gt={x:U,y:E})}var d=r.targetCanvasCtx||this.plotArea.ctx,x=ut?this._preRenderCtx:d;if(!(0>=r.dataSeriesIndexes.length)){var _=this._eventManager.ghostCtx,I=r.axisY.lineCoordinates,N=[],M=this.plotArea,w;x.save(),ut&&_.save(),x.beginPath(),x.rect(M.x1,M.y1,M.width,M.height),x.clip(),ut&&(_.beginPath(),_.rect(M.x1,M.y1,M.width,M.height),_.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var P=r.dataSeriesIndexes[b],c=this.data[P],L=c.dataPoints,N=c.id;this._eventManager.objectMap[N]={objectType:"dataSeries",dataSeriesIndex:P},N=u(N),_.fillStyle=N,N=[],f=!0;var V=0,U,E,G,j=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),wt,gt=null;if(l=!1,0<L.length){var _t=c._colorSet[V%c._colorSet.length],Qt=c.lineColor=c.options.lineColor||_t,se=Qt;x.fillStyle=_t,x.strokeStyle=Qt,x.lineWidth=c.lineThickness;var Vt="solid";if(x.setLineDash){var Wt=y(c.nullDataLineDashType,c.lineThickness),Vt=c.lineDashType,Nt=y(Vt,c.lineThickness);x.setLineDash(Nt)}for(;V<L.length;V++)if(G=L[V].x.getTime?L[V].x.getTime():L[V].x,!(G<r.axisX.dataInfo.viewPortMin||G>r.axisX.dataInfo.viewPortMax&&(!c.connectNullData||!l))){var Ft=E;typeof L[V].y!="number"?(c.connectNullData||l||f||o(),l=!0):(U=r.axisX.convertValueToPixel(G),E=r.axisY.convertValueToPixel(L[V].y),f||l?(!f&&c.connectNullData?(x.setLineDash&&(c.options.nullDataLineDashType||Vt===c.lineDashType&&c.lineDashType!==c.nullDataLineDashType)&&(f=U,l=E,U=w.x,E=w.y,o(),x.moveTo(w.x,w.y),U=f,E=l,gt=w,Vt=c.nullDataLineDashType,x.setLineDash(Wt)),x.lineTo(U,Ft),x.lineTo(U,E),ut&&(_.lineTo(U,Ft),_.lineTo(U,E))):(x.beginPath(),x.moveTo(U,E),ut&&(_.beginPath(),_.moveTo(U,E)),gt={x:U,y:E}),l=f=!1):(x.lineTo(U,Ft),ut&&_.lineTo(U,Ft),x.lineTo(U,E),ut&&_.lineTo(U,E),V%250==0&&o()),w={x:U,y:E},V<L.length-1&&(se!==(L[V].lineColor||Qt)||Vt!==(L[V].lineDashType||c.lineDashType))&&(o(),se=L[V].lineColor||Qt,x.strokeStyle=se,x.setLineDash&&(L[V].lineDashType?(Vt=L[V].lineDashType,x.setLineDash(y(Vt,c.lineThickness))):(Vt=c.lineDashType,x.setLineDash(Nt)))),G=c.dataPointIds[V],this._eventManager.objectMap[G]={id:G,objectType:"dataPoint",dataSeriesIndex:P,dataPointIndex:V,x1:U,y1:E},L[V].markerSize!==0&&(0<L[V].markerSize||0<c.markerSize)&&(Ft=c.getMarkerProperties(V,U,E,x),N.push(Ft),G=u(G),ut&&N.push({x:U,y:E,ctx:_,type:Ft.type,size:Ft.size,color:G,borderColor:G,borderThickness:Ft.borderThickness})),(L[V].indexLabel||c.indexLabel||L[V].indexLabelFormatter||c.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:L[V],dataSeries:c,point:{x:U,y:E},direction:0>L[V].y===r.axisY.reversed?1:-1,color:_t}))}o(),xi.drawMarkers(N)}}return ut&&(d.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&x.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&x.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),x.clearRect(M.x1,M.y1,M.width,M.height),this._eventManager.ghostCtx.restore()),x.restore(),{source:d,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderStackedArea=function(r){function f(){if(!(1>M.length)){for(0<_t.lineThickness&&o.stroke();0<M.length;){var Pt=M.pop();o.lineTo(Pt.x,Pt.y),ut&&U.lineTo(Pt.x,Pt.y)}o.closePath(),o.globalAlpha=_t.fillOpacity,o.fill(),o.globalAlpha=1,o.beginPath(),ut&&(U.closePath(),U.fill(),U.beginPath()),M=[]}}var l=r.targetCanvasCtx||this.plotArea.ctx,o=ut?this._preRenderCtx:l;if(!(0>=r.dataSeriesIndexes.length)){var d=null,x=null,_=[],I=this.plotArea,N=[],M=[],w=[],b=[],P=0,c,L,V=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),U=this._eventManager.ghostCtx,E,G,j;ut&&U.beginPath(),o.save(),ut&&U.save(),o.beginPath(),o.rect(I.x1,I.y1,I.width,I.height),o.clip(),ut&&(U.beginPath(),U.rect(I.x1,I.y1,I.width,I.height),U.clip());for(var d=[],wt=0;wt<r.dataSeriesIndexes.length;wt++){var gt=r.dataSeriesIndexes[wt],_t=this.data[gt],Qt=_t.dataPoints;for(_t.dataPointIndexes=[],P=0;P<Qt.length;P++)gt=Qt[P].x.getTime?Qt[P].x.getTime():Qt[P].x,_t.dataPointIndexes[gt]=P,d[gt]||(w.push(gt),d[gt]=!0);w.sort(h)}for(wt=0;wt<r.dataSeriesIndexes.length;wt++){if(gt=r.dataSeriesIndexes[wt],_t=this.data[gt],Qt=_t.dataPoints,G=!0,M=[],P=_t.id,this._eventManager.objectMap[P]={objectType:"dataSeries",dataSeriesIndex:gt},P=u(P),U.fillStyle=P,0<w.length){var d=_t._colorSet[0],se=_t.lineColor=_t.options.lineColor||d,Vt=se;if(o.fillStyle=d,o.strokeStyle=se,o.lineWidth=_t.lineThickness,j="solid",o.setLineDash){var Wt=y(_t.nullDataLineDashType,_t.lineThickness);j=_t.lineDashType;var Nt=y(j,_t.lineThickness);o.setLineDash(Nt)}for(var Ft=!0,P=0;P<w.length;P++){var x=w[P],vt=null,vt=0<=_t.dataPointIndexes[x]?Qt[_t.dataPointIndexes[x]]:{x,y:null};if(!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax&&(!_t.connectNullData||!Ft)))if(typeof vt.y!="number")_t.connectNullData||Ft||G||f(),Ft=!0;else{c=r.axisX.convertValueToPixel(x);var Ht=N[x]?N[x]:0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length){if(b[x]=vt.y+(b[x]?b[x]:0),0>=b[x]&&r.axisY.logarithmic)continue;L=r.axisY.convertValueToPixel(b[x])}else L=r.axisY.convertValueToPixel(vt.y),L-=Ht;if(M.push({x:c,y:V-Ht}),N[x]=V-L,G||Ft?(!G&&_t.connectNullData?(o.setLineDash&&(_t.options.nullDataLineDashType||j===_t.lineDashType&&_t.lineDashType!==_t.nullDataLineDashType)&&(G=M.pop(),j=M[M.length-1],f(),o.moveTo(E.x,E.y),M.push(j),M.push(G),j=_t.nullDataLineDashType,o.setLineDash(Wt)),o.lineTo(c,L),ut&&U.lineTo(c,L)):(o.beginPath(),o.moveTo(c,L),ut&&(U.beginPath(),U.moveTo(c,L))),Ft=G=!1):(o.lineTo(c,L),ut&&U.lineTo(c,L),P%250==0&&(f(),o.moveTo(c,L),ut&&U.moveTo(c,L),M.push({x:c,y:V-Ht}))),E={x:c,y:L},P<Qt.length-1&&(Vt!==(Qt[P].lineColor||se)||j!==(Qt[P].lineDashType||_t.lineDashType))&&(f(),o.beginPath(),o.moveTo(c,L),M.push({x:c,y:V-Ht}),Vt=Qt[P].lineColor||se,o.strokeStyle=Vt,o.setLineDash&&(Qt[P].lineDashType?(j=Qt[P].lineDashType,o.setLineDash(y(j,_t.lineThickness))):(j=_t.lineDashType,o.setLineDash(Nt)))),0<=_t.dataPointIndexes[x]){var me=_t.dataPointIds[_t.dataPointIndexes[x]];this._eventManager.objectMap[me]={id:me,objectType:"dataPoint",dataSeriesIndex:gt,dataPointIndex:_t.dataPointIndexes[x],x1:c,y1:L}}0<=_t.dataPointIndexes[x]&&vt.markerSize!==0&&(0<vt.markerSize||0<_t.markerSize)&&(Ht=_t.getMarkerProperties(_t.dataPointIndexes[x],c,L,o),_.push(Ht),x=u(me),ut&&_.push({x:c,y:L,ctx:U,type:Ht.type,size:Ht.size,color:x,borderColor:x,borderThickness:Ht.borderThickness})),(vt.indexLabel||_t.indexLabel||vt.indexLabelFormatter||_t.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:vt,dataSeries:_t,point:{x:c,y:L},direction:0>vt.y===r.axisY.reversed?1:-1,color:d})}}f(),o.moveTo(c,L),ut&&U.moveTo(c,L)}delete _t.dataPointIndexes}return xi.drawMarkers(_),ut&&(l.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(I.x1,I.y1,I.width,I.height),U.restore()),o.restore(),{source:l,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderStackedArea100=function(r){function f(){for(0<_t.lineThickness&&o.stroke();0<M.length;){var Qe=M.pop();o.lineTo(Qe.x,Qe.y),ut&&j.lineTo(Qe.x,Qe.y)}o.closePath(),o.globalAlpha=_t.fillOpacity,o.fill(),o.globalAlpha=1,o.beginPath(),ut&&(j.closePath(),j.fill(),j.beginPath()),M=[]}var l=r.targetCanvasCtx||this.plotArea.ctx,o=ut?this._preRenderCtx:l;if(!(0>=r.dataSeriesIndexes.length)){var d=null,x=null,_=this.plotArea,I=[],N=[],M=[],w=[],b=[],P=0,c,L,V,U,E,G=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),j=this._eventManager.ghostCtx;o.save(),ut&&j.save(),o.beginPath(),o.rect(_.x1,_.y1,_.width,_.height),o.clip(),ut&&(j.beginPath(),j.rect(_.x1,_.y1,_.width,_.height),j.clip());for(var d=[],wt=0;wt<r.dataSeriesIndexes.length;wt++){var gt=r.dataSeriesIndexes[wt],_t=this.data[gt],Qt=_t.dataPoints;for(_t.dataPointIndexes=[],P=0;P<Qt.length;P++)gt=Qt[P].x.getTime?Qt[P].x.getTime():Qt[P].x,_t.dataPointIndexes[gt]=P,d[gt]||(w.push(gt),d[gt]=!0);w.sort(h)}for(wt=0;wt<r.dataSeriesIndexes.length;wt++){if(gt=r.dataSeriesIndexes[wt],_t=this.data[gt],Qt=_t.dataPoints,U=!0,d=_t.id,this._eventManager.objectMap[d]={objectType:"dataSeries",dataSeriesIndex:gt},d=u(d),j.fillStyle=d,M=[],0<w.length){var d=_t._colorSet[P%_t._colorSet.length],se=_t.lineColor=_t.options.lineColor||d,Vt=se;if(o.fillStyle=d,o.strokeStyle=se,o.lineWidth=_t.lineThickness,E="solid",o.setLineDash){var Wt=y(_t.nullDataLineDashType,_t.lineThickness);E=_t.lineDashType;var Nt=y(E,_t.lineThickness);o.setLineDash(Nt)}for(var Ft=!0,P=0;P<w.length;P++){var x=w[P],vt=null,vt=0<=_t.dataPointIndexes[x]?Qt[_t.dataPointIndexes[x]]:{x,y:null};if(!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax&&(!_t.connectNullData||!Ft)))if(typeof vt.y!="number")_t.connectNullData||Ft||U||f(),Ft=!0;else{var Ht;Ht=r.dataPointYSums[x]!==0?100*(vt.y/r.dataPointYSums[x]):0,c=r.axisX.convertValueToPixel(x);var me=N[x]?N[x]:0;if(r.axisY.logarithmic||r.axisY.scaleBreaks&&0<r.axisY.scaleBreaks._appliedBreaks.length){if(b[x]=Ht+(b[x]?b[x]:0),0>=b[x]&&r.axisY.logarithmic)continue;L=r.axisY.convertValueToPixel(b[x])}else L=r.axisY.convertValueToPixel(Ht),L-=me;if(M.push({x:c,y:G-me}),N[x]=G-L,U||Ft?(!U&&_t.connectNullData?(o.setLineDash&&(_t.options.nullDataLineDashType||E===_t.lineDashType&&_t.lineDashType!==_t.nullDataLineDashType)&&(U=M.pop(),E=M[M.length-1],f(),o.moveTo(V.x,V.y),M.push(E),M.push(U),E=_t.nullDataLineDashType,o.setLineDash(Wt)),o.lineTo(c,L),ut&&j.lineTo(c,L)):(o.beginPath(),o.moveTo(c,L),ut&&(j.beginPath(),j.moveTo(c,L))),Ft=U=!1):(o.lineTo(c,L),ut&&j.lineTo(c,L),P%250==0&&(f(),o.moveTo(c,L),ut&&j.moveTo(c,L),M.push({x:c,y:G-me}))),V={x:c,y:L},P<Qt.length-1&&(Vt!==(Qt[P].lineColor||se)||E!==(Qt[P].lineDashType||_t.lineDashType))&&(f(),o.beginPath(),o.moveTo(c,L),M.push({x:c,y:G-me}),Vt=Qt[P].lineColor||se,o.strokeStyle=Vt,o.setLineDash&&(Qt[P].lineDashType?(E=Qt[P].lineDashType,o.setLineDash(y(E,_t.lineThickness))):(E=_t.lineDashType,o.setLineDash(Nt)))),0<=_t.dataPointIndexes[x]){var Pt=_t.dataPointIds[_t.dataPointIndexes[x]];this._eventManager.objectMap[Pt]={id:Pt,objectType:"dataPoint",dataSeriesIndex:gt,dataPointIndex:_t.dataPointIndexes[x],x1:c,y1:L}}0<=_t.dataPointIndexes[x]&&vt.markerSize!==0&&(0<vt.markerSize||0<_t.markerSize)&&(me=_t.getMarkerProperties(_t.dataPointIndexes[x],c,L,o),I.push(me),x=u(Pt),ut&&I.push({x:c,y:L,ctx:j,type:me.type,size:me.size,color:x,borderColor:x,borderThickness:me.borderThickness})),(vt.indexLabel||_t.indexLabel||vt.indexLabelFormatter||_t.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:vt,dataSeries:_t,point:{x:c,y:L},direction:0>vt.y===r.axisY.reversed?1:-1,color:d})}}f(),o.moveTo(c,L),ut&&j.moveTo(c,L)}delete _t.dataPointIndexes}return xi.drawMarkers(I),ut&&(l.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(_.x1,_.y1,_.width,_.height),j.restore()),o.restore(),{source:l,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderBubble=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=this.plotArea,d=0,x,_;l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(o.x1,o.y1,o.width,o.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip());for(var I=-1/0,N=1/0,M=0;M<r.dataSeriesIndexes.length;M++)for(var w=r.dataSeriesIndexes[M],b=this.data[w],P=b.dataPoints,c=0,d=0;d<P.length;d++)x=P[d].getTime?x=P[d].x.getTime():x=P[d].x,x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax||typeof P[d].z>"u"||(c=P[d].z,c>I&&(I=c),c<N&&(N=c));for(var L=25*Math.PI,V=Math.max(Math.pow(.25*Math.min(o.height,o.width)/2,2)*Math.PI,L),M=0;M<r.dataSeriesIndexes.length;M++)if(w=r.dataSeriesIndexes[M],b=this.data[w],P=b.dataPoints,0<P.length){for(l.strokeStyle="#4572A7 ",d=0;d<P.length;d++)if(x=P[d].getTime?x=P[d].x.getTime():x=P[d].x,!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax)&&typeof P[d].y=="number"){x=r.axisX.convertValueToPixel(x),_=r.axisY.convertValueToPixel(P[d].y);var c=P[d].z,U=2*Math.max(Math.sqrt((I===N?V/2:L+(V-L)/(I-N)*(c-N))/Math.PI)<<0,1),c=b.getMarkerProperties(d,l);c.size=U,l.globalAlpha=b.fillOpacity,xi.drawMarker(x,_,l,c.type,c.size,c.color,c.borderColor,c.borderThickness),l.globalAlpha=1;var E=b.dataPointIds[d];this._eventManager.objectMap[E]={id:E,objectType:"dataPoint",dataSeriesIndex:w,dataPointIndex:d,x1:x,y1:_,size:U},U=u(E),ut&&xi.drawMarker(x,_,this._eventManager.ghostCtx,c.type,c.size,U,U,c.borderThickness),(P[d].indexLabel||b.indexLabel||P[d].indexLabelFormatter||b.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:P[d],dataSeries:b,point:{x,y:_},direction:1,bounds:{x1:x-c.size/2,y1:_-c.size/2,x2:x+c.size/2,y2:_+c.size/2},color:null})}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0}}},Y.prototype.renderScatter=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=this.plotArea,d=0,x,_;l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(o.x1,o.y1,o.width,o.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip());for(var I=0;I<r.dataSeriesIndexes.length;I++){var N=r.dataSeriesIndexes[I],M=this.data[N],w=M.dataPoints;if(0<w.length){l.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(o.height,o.width)/2,2);for(var b=0,P=0,d=0;d<w.length;d++)if(x=w[d].getTime?x=w[d].x.getTime():x=w[d].x,!(x<r.axisX.dataInfo.viewPortMin||x>r.axisX.dataInfo.viewPortMax)&&typeof w[d].y=="number"){x=r.axisX.convertValueToPixel(x),_=r.axisY.convertValueToPixel(w[d].y);var c=M.getMarkerProperties(d,x,_,l);l.globalAlpha=M.fillOpacity,xi.drawMarker(c.x,c.y,c.ctx,c.type,c.size,c.color,c.borderColor,c.borderThickness),l.globalAlpha=1,Math.sqrt((b-x)*(b-x)+(P-_)*(P-_))<Math.min(c.size,5)&&w.length>Math.min(this.plotArea.width,this.plotArea.height)||(b=M.dataPointIds[d],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:d,x1:x,y1:_},b=u(b),ut&&xi.drawMarker(c.x,c.y,this._eventManager.ghostCtx,c.type,c.size,b,b,c.borderThickness),(w[d].indexLabel||M.indexLabel||w[d].indexLabelFormatter||M.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:w[d],dataSeries:M,point:{x,y:_},direction:1,bounds:{x1:x-c.size/2,y1:_-c.size/2,x2:x+c.size/2,y2:_+c.size/2},color:null}),b=x,P=_)}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0}}},Y.prototype.renderCandlestick=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f,o=this._eventManager.ghostCtx;if(!(0>=r.dataSeriesIndexes.length)){var P=null,c=null,d=this.plotArea,x=0,_,I,N,M,w,b,P=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,c=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,L=r.axisX.dataInfo.minDiff;isFinite(L)||(L=.3*Math.abs(r.axisX.range)),L=this.options.dataPointWidth?this.dataPointWidth:.7*d.width*(r.axisX.logarithmic?Math.log(L)/Math.log(r.axisX.range):Math.abs(L)/Math.abs(r.axisX.range))<<0,this.dataPointMaxWidth&&P>c&&(P=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,c)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c<P&&(c=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,P)),L<P&&(L=P),L>c&&(L=c),l.save(),ut&&o.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(o.beginPath(),o.rect(d.x1,d.y1,d.width,d.height),o.clip());for(var V=0;V<r.dataSeriesIndexes.length;V++){var U=r.dataSeriesIndexes[V],E=this.data[U],G=E.dataPoints;if(0<G.length){for(var j=!!(5<L&&E.bevelEnabled),x=0;x<G.length;x++)if(G[x].getTime?b=G[x].x.getTime():b=G[x].x,!(b<r.axisX.dataInfo.viewPortMin||b>r.axisX.dataInfo.viewPortMax)&&!p(G[x].y)&&G[x].y.length&&typeof G[x].y[0]=="number"&&typeof G[x].y[1]=="number"&&typeof G[x].y[2]=="number"&&typeof G[x].y[3]=="number"){_=r.axisX.convertValueToPixel(b),I=r.axisY.convertValueToPixel(G[x].y[0]),N=r.axisY.convertValueToPixel(G[x].y[1]),M=r.axisY.convertValueToPixel(G[x].y[2]),w=r.axisY.convertValueToPixel(G[x].y[3]);var wt=_-L/2<<0,gt=wt+L<<0,c=E.options.fallingColor?E.fallingColor:E._colorSet[0],P=G[x].color?G[x].color:E._colorSet[0],_t=Math.round(Math.max(1,.15*L)),Qt=_t%2===0?0:.5,se=E.dataPointIds[x];this._eventManager.objectMap[se]={id:se,objectType:"dataPoint",dataSeriesIndex:U,dataPointIndex:x,x1:wt,y1:I,x2:gt,y2:N,x3:_,y3:M,x4:_,y4:w,borderThickness:_t,color:P},l.strokeStyle=P,l.beginPath(),l.lineWidth=_t,o.lineWidth=Math.max(_t,4),E.type==="candlestick"?(l.moveTo(_-Qt,N),l.lineTo(_-Qt,Math.min(I,w)),l.stroke(),l.moveTo(_-Qt,Math.max(I,w)),l.lineTo(_-Qt,M),l.stroke(),Re(l,wt,Math.min(I,w),gt,Math.max(I,w),G[x].y[0]<=G[x].y[3]?E.risingColor:c,_t,P,j,j,!1,!1,E.fillOpacity),ut&&(P=u(se),o.strokeStyle=P,o.moveTo(_-Qt,N),o.lineTo(_-Qt,Math.min(I,w)),o.stroke(),o.moveTo(_-Qt,Math.max(I,w)),o.lineTo(_-Qt,M),o.stroke(),Re(o,wt,Math.min(I,w),gt,Math.max(I,w),P,0,null,!1,!1,!1,!1))):E.type==="ohlc"&&(l.moveTo(_-Qt,N),l.lineTo(_-Qt,M),l.stroke(),l.beginPath(),l.moveTo(_,I),l.lineTo(wt,I),l.stroke(),l.beginPath(),l.moveTo(_,w),l.lineTo(gt,w),l.stroke(),ut&&(P=u(se),o.strokeStyle=P,o.moveTo(_-Qt,N),o.lineTo(_-Qt,M),o.stroke(),o.beginPath(),o.moveTo(_,I),o.lineTo(wt,I),o.stroke(),o.beginPath(),o.moveTo(_,w),o.lineTo(gt,w),o.stroke())),(G[x].indexLabel||E.indexLabel||G[x].indexLabelFormatter||E.indexLabelFormatter)&&this._indexLabels.push({chartType:E.type,dataPoint:G[x],dataSeries:E,point:{x:wt+(gt-wt)/2,y:r.axisY.reversed?M:N},direction:1,bounds:{x1:wt,y1:Math.min(N,M),x2:gt,y2:Math.max(N,M)},color:P})}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),o.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0}}},Y.prototype.renderBoxAndWhisker=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f,o=this._eventManager.ghostCtx;if(!(0>=r.dataSeriesIndexes.length)){var P=null,d=this.plotArea,c=0,x,_,I,N,M,w,b,P=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,c=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,L=r.axisX.dataInfo.minDiff;isFinite(L)||(L=.3*Math.abs(r.axisX.range)),L=this.options.dataPointWidth?this.dataPointWidth:.7*d.width*(r.axisX.logarithmic?Math.log(L)/Math.log(r.axisX.range):Math.abs(L)/Math.abs(r.axisX.range))<<0,this.dataPointMaxWidth&&P>c&&(P=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,c)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c<P&&(c=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,P)),L<P&&(L=P),L>c&&(L=c),l.save(),ut&&o.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(o.beginPath(),o.rect(d.x1,d.y1,d.width,d.height),o.clip());for(var V=!1,V=!!r.axisY.reversed,U=0;U<r.dataSeriesIndexes.length;U++){var E=r.dataSeriesIndexes[U],G=this.data[E],j=G.dataPoints;if(0<j.length){for(var wt=!!(5<L&&G.bevelEnabled),c=0;c<j.length;c++)if(j[c].getTime?b=j[c].x.getTime():b=j[c].x,!(b<r.axisX.dataInfo.viewPortMin||b>r.axisX.dataInfo.viewPortMax)&&!p(j[c].y)&&j[c].y.length&&typeof j[c].y[0]=="number"&&typeof j[c].y[1]=="number"&&typeof j[c].y[2]=="number"&&typeof j[c].y[3]=="number"&&typeof j[c].y[4]=="number"&&j[c].y.length===5){x=r.axisX.convertValueToPixel(b),_=r.axisY.convertValueToPixel(j[c].y[0]),I=r.axisY.convertValueToPixel(j[c].y[1]),N=r.axisY.convertValueToPixel(j[c].y[2]),M=r.axisY.convertValueToPixel(j[c].y[3]),w=r.axisY.convertValueToPixel(j[c].y[4]);var gt=x-L/2<<0,_t=x+L/2<<0,P=j[c].color?j[c].color:G._colorSet[0],Qt=Math.round(Math.max(1,.15*L)),se=Qt%2===0?0:.5,Vt=j[c].whiskerColor?j[c].whiskerColor:j[c].color?G.whiskerColor?G.whiskerColor:j[c].color:G.whiskerColor?G.whiskerColor:P,Wt=typeof j[c].whiskerThickness=="number"?j[c].whiskerThickness:typeof G.options.whiskerThickness=="number"?G.whiskerThickness:Qt,Nt=j[c].whiskerDashType?j[c].whiskerDashType:G.whiskerDashType,Ft=p(j[c].whiskerLength)?p(G.options.whiskerLength)?L:G.whiskerLength:j[c].whiskerLength,Ft=typeof Ft=="number"?0>=Ft?0:Ft>=L?L:Ft:typeof Ft=="string"?parseInt(Ft)*L/100>L?L:parseInt(Ft)*L/100:L,vt=Math.round(Wt)%2===1?.5:0,Ht=j[c].stemColor?j[c].stemColor:j[c].color?G.stemColor?G.stemColor:j[c].color:G.stemColor?G.stemColor:P,me=typeof j[c].stemThickness=="number"?j[c].stemThickness:typeof G.options.stemThickness=="number"?G.stemThickness:Qt,Pt=Math.round(me)%2===1?.5:0,Qe=j[c].stemDashType?j[c].stemDashType:G.stemDashType,Ai=j[c].lineColor?j[c].lineColor:j[c].color?G.lineColor?G.lineColor:j[c].color:G.lineColor?G.lineColor:P,hi=typeof j[c].lineThickness=="number"?j[c].lineThickness:typeof G.options.lineThickness=="number"?G.lineThickness:Qt,Pi=j[c].lineDashType?j[c].lineDashType:G.lineDashType,ti=Math.round(hi)%2===1?.5:0,wi=G.upperBoxColor,mi=G.lowerBoxColor,bi=p(G.options.fillOpacity)?1:G.fillOpacity,de=G.dataPointIds[c];this._eventManager.objectMap[de]={id:de,objectType:"dataPoint",dataSeriesIndex:E,dataPointIndex:c,x1:gt,y1:_,x2:_t,y2:I,x3:x,y3:N,x4:x,y4:M,y5:w,borderThickness:Qt,color:P,stemThickness:me,stemColor:Ht,whiskerThickness:Wt,whiskerLength:Ft,whiskerColor:Vt,lineThickness:hi,lineColor:Ai},l.save(),0<me&&(l.beginPath(),l.strokeStyle=Ht,l.lineWidth=me,l.setLineDash&&l.setLineDash(y(Qe,me)),l.moveTo(x-Pt,I),l.lineTo(x-Pt,_),l.stroke(),l.moveTo(x-Pt,M),l.lineTo(x-Pt,N),l.stroke()),l.restore(),o.lineWidth=Math.max(Qt,4),l.beginPath(),Re(l,gt,Math.min(w,I),_t,Math.max(I,w),mi,0,P,V?wt:!1,V?!1:wt,!1,!1,bi),l.beginPath(),Re(l,gt,Math.min(N,w),_t,Math.max(w,N),wi,0,P,V?!1:wt,V?wt:!1,!1,!1,bi),l.beginPath(),l.lineWidth=Qt,l.strokeStyle=P,l.rect(gt-se,Math.min(I,N)-se,_t-gt+2*se,Math.max(I,N)-Math.min(I,N)+2*se),l.stroke(),l.save(),0<hi&&(l.beginPath(),l.globalAlpha=1,l.setLineDash&&l.setLineDash(y(Pi,hi)),l.strokeStyle=Ai,l.lineWidth=hi,l.moveTo(gt,w-ti),l.lineTo(_t,w-ti),l.stroke()),l.restore(),l.save(),0<Wt&&(l.beginPath(),l.setLineDash&&l.setLineDash(y(Nt,Wt)),l.strokeStyle=Vt,l.lineWidth=Wt,l.moveTo(x-Ft/2<<0,M-vt),l.lineTo(x+Ft/2<<0,M-vt),l.stroke(),l.moveTo(x-Ft/2<<0,_+vt),l.lineTo(x+Ft/2<<0,_+vt),l.stroke()),l.restore(),ut&&(P=u(de),o.strokeStyle=P,o.lineWidth=me,0<me&&(o.moveTo(x-se-Pt,I),o.lineTo(x-se-Pt,Math.max(_,M)),o.stroke(),o.moveTo(x-se-Pt,Math.min(_,M)),o.lineTo(x-se-Pt,N),o.stroke()),Re(o,gt,Math.max(I,N),_t,Math.min(I,N),P,0,null,!1,!1,!1,!1),0<Wt&&(o.beginPath(),o.lineWidth=Wt,o.moveTo(x+Ft/2,M-vt),o.lineTo(x-Ft/2,M-vt),o.stroke(),o.moveTo(x+Ft/2,_+vt),o.lineTo(x-Ft/2,_+vt),o.stroke())),(j[c].indexLabel||G.indexLabel||j[c].indexLabelFormatter||G.indexLabelFormatter)&&this._indexLabels.push({chartType:G.type,dataPoint:j[c],dataSeries:G,point:{x:gt+(_t-gt)/2,y:r.axisY.reversed?_:M},direction:1,bounds:{x1:gt,y1:Math.min(_,M),x2:_t,y2:Math.max(_,M)},color:P})}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),o.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0}}},Y.prototype.renderRangeColumn=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=null,d=this.plotArea,N=0,x,_,I,N=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;x=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.03*this.width;var M=r.axisX.dataInfo.minDiff;isFinite(M)||(M=.3*Math.abs(r.axisX.range)),M=this.options.dataPointWidth?this.dataPointWidth:.9*(d.width*(r.axisX.logarithmic?Math.log(M)/Math.log(r.axisX.range):Math.abs(M)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&N>x&&(N=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<N&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,N)),M<N&&(M=N),M>x&&(M=x),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip());for(var w=0;w<r.dataSeriesIndexes.length;w++){var b=r.dataSeriesIndexes[w],P=this.data[b],c=P.dataPoints;if(0<c.length){for(var L=!!(5<M&&P.bevelEnabled),N=0;N<c.length;N++)if(c[N].getTime?I=c[N].x.getTime():I=c[N].x,!(I<r.axisX.dataInfo.viewPortMin||I>r.axisX.dataInfo.viewPortMax)&&!p(c[N].y)&&c[N].y.length&&typeof c[N].y[0]=="number"&&typeof c[N].y[1]=="number"){o=r.axisX.convertValueToPixel(I),x=r.axisY.convertValueToPixel(c[N].y[0]),_=r.axisY.convertValueToPixel(c[N].y[1]);var V=r.axisX.reversed?o+r.plotType.totalDataSeries*M/2-(r.previousDataSeriesCount+w)*M<<0:o-r.plotType.totalDataSeries*M/2+(r.previousDataSeriesCount+w)*M<<0,U=r.axisX.reversed?V-M<<0:V+M<<0,o=c[N].color?c[N].color:P._colorSet[N%P._colorSet.length];if(x>_){var E=x;x=_,_=E}E=P.dataPointIds[N],this._eventManager.objectMap[E]={id:E,objectType:"dataPoint",dataSeriesIndex:b,dataPointIndex:N,x1:V,y1:x,x2:U,y2:_},Re(l,r.axisX.reversed?U:V,x,r.axisX.reversed?V:U,_,o,0,o,L,L,!1,!1,P.fillOpacity),o=u(E),ut&&Re(this._eventManager.ghostCtx,r.axisX.reversed?U:V,x,r.axisX.reversed?V:U,_,o,0,null,!1,!1,!1,!1),(c[N].indexLabel||P.indexLabel||c[N].indexLabelFormatter||P.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:c[N],dataSeries:P,indexKeyword:0,point:{x:V+(U-V)/2,y:c[N].y[1]>=c[N].y[0]?_:x},direction:c[N].y[1]>=c[N].y[0]?-1:1,bounds:{x1:V,y1:Math.min(x,_),x2:U,y2:Math.max(x,_)},color:o}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:c[N],dataSeries:P,indexKeyword:1,point:{x:V+(U-V)/2,y:c[N].y[1]>=c[N].y[0]?x:_},direction:c[N].y[1]>=c[N].y[0]?1:-1,bounds:{x1:V,y1:Math.min(x,_),x2:U,y2:Math.max(x,_)},color:o}))}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0}}},Y.prototype.renderError=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f,o=r.axisY._position?!(r.axisY._position==="left"||r.axisY._position==="right"):!1;if(!(0>=r.dataSeriesIndexes.length)){var d=null,x=!1,_=this.plotArea,I=0,N,M,w,b,P,c,L,V=r.axisX.dataInfo.minDiff;isFinite(V)||(V=.3*Math.abs(r.axisX.range)),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(_.x1,_.y1,_.width,_.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(_.x1,_.y1,_.width,_.height),this._eventManager.ghostCtx.clip());for(var U=0,E=0;E<this.data.length;E++)!this.data[E].type.match(/(bar|column)/ig)||!this.data[E].visible||this.data[E].type.match(/(stacked)/ig)&&U||U++;for(var G=0;G<r.dataSeriesIndexes.length;G++){var j=r.dataSeriesIndexes[G],wt=this.data[j],gt=wt.dataPoints,_t=p(wt._linkedSeries)?!1:!!(wt._linkedSeries.type.match(/(bar|column)/ig)&&wt._linkedSeries.visible),Qt=0;if(_t)for(d=wt._linkedSeries.id,E=0;E<d;E++)!this.data[E].type.match(/(bar|column)/ig)||!this.data[E].visible||this.data[E].type.match(/(stacked)/ig)&&Qt||(this.data[E].type.match(/(range)/ig)&&(x=!0),Qt++);if(d=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,I=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:o?Math.min(.15*this.height,.9*(this.plotArea.height/(_t?U:1)))<<0:.3*this.width,x&&(I=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:o?Math.min(.15*this.height,.9*(this.plotArea.height/(_t?U:1)))<<0:.03*this.width),E=this.options.dataPointWidth?this.dataPointWidth:.9*((o?_.height:_.width)*(r.axisX.logarithmic?Math.log(V)/Math.log(r.axisX.range):Math.abs(V)/Math.abs(r.axisX.range))/(_t?U:1))<<0,this.dataPointMaxWidth&&d>I&&(d=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,I)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&I<d&&(I=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,d)),E<d&&(E=d),E>I&&(E=I),0<gt.length)for(var se=wt._colorSet,I=0;I<gt.length;I++){var d=wt.lineColor=wt.options.color?wt.options.color:se[0],Vt={color:gt[I].whiskerColor?gt[I].whiskerColor:gt[I].color?wt.whiskerColor?wt.whiskerColor:gt[I].color:wt.whiskerColor?wt.whiskerColor:d,thickness:p(gt[I].whiskerThickness)?wt.whiskerThickness:gt[I].whiskerThickness,dashType:gt[I].whiskerDashType?gt[I].whiskerDashType:wt.whiskerDashType,length:p(gt[I].whiskerLength)?p(wt.options.whiskerLength)?E:wt.options.whiskerLength:gt[I].whiskerLength,trimLength:p(gt[I].whiskerLength)&&p(wt.options.whiskerLength)?50:0};Vt.length=typeof Vt.length=="number"?0>=Vt.length?0:Vt.length>=E?E:Vt.length:typeof Vt.length=="string"?parseInt(Vt.length)*E/100>E?E:parseInt(Vt.length)*E/100>E:E,Vt.thickness=typeof Vt.thickness=="number"?0>Vt.thickness?0:Math.round(Vt.thickness):2;var Wt={color:gt[I].stemColor?gt[I].stemColor:gt[I].color?wt.stemColor?wt.stemColor:gt[I].color:wt.stemColor?wt.stemColor:d,thickness:gt[I].stemThickness?gt[I].stemThickness:wt.stemThickness,dashType:gt[I].stemDashType?gt[I].stemDashType:wt.stemDashType};if(Wt.thickness=typeof Wt.thickness=="number"?0>Wt.thickness?0:Math.round(Wt.thickness):2,gt[I].getTime?L=gt[I].x.getTime():L=gt[I].x,!(L<r.axisX.dataInfo.viewPortMin||L>r.axisX.dataInfo.viewPortMax)&&!p(gt[I].y)&&gt[I].y.length&&typeof gt[I].y[0]=="number"&&typeof gt[I].y[1]=="number"){var Nt=r.axisX.convertValueToPixel(L);o?M=Nt:N=Nt,Nt=r.axisY.convertValueToPixel(gt[I].y[0]),o?w=Nt:P=Nt,Nt=r.axisY.convertValueToPixel(gt[I].y[1]),o?b=Nt:c=Nt,o?(P=r.axisX.reversed?M+(_t?U:1)*E/2-(_t?Qt-1:0)*E<<0:M-(_t?U:1)*E/2+(_t?Qt-1:0)*E<<0,c=r.axisX.reversed?P-E<<0:P+E<<0):(w=r.axisX.reversed?N+(_t?U:1)*E/2-(_t?Qt-1:0)*E<<0:N-(_t?U:1)*E/2+(_t?Qt-1:0)*E<<0,b=r.axisX.reversed?w-E<<0:w+E<<0),!o&&P>c&&(Nt=P,P=c,c=Nt),o&&w>b&&(Nt=w,w=b,b=Nt),Nt=wt.dataPointIds[I],this._eventManager.objectMap[Nt]={id:Nt,objectType:"dataPoint",dataSeriesIndex:j,dataPointIndex:I,x1:Math.min(w,b),y1:Math.min(P,c),x2:Math.max(b,w),y2:Math.max(c,P),isXYSwapped:o,stemProperties:Wt,whiskerProperties:Vt},It(l,Math.min(w,b),Math.min(P,c),Math.max(b,w),Math.max(c,P),d,Vt,Wt,o),ut&&It(this._eventManager.ghostCtx,w,P,b,c,d,Vt,Wt,o),(gt[I].indexLabel||wt.indexLabel||gt[I].indexLabelFormatter||wt.indexLabelFormatter)&&(this._indexLabels.push({chartType:"error",dataPoint:gt[I],dataSeries:wt,indexKeyword:0,point:{x:o?gt[I].y[1]>=gt[I].y[0]?w:b:w+(b-w)/2,y:o?P+(c-P)/2:gt[I].y[1]>=gt[I].y[0]?c:P},direction:gt[I].y[1]>=gt[I].y[0]?-1:1,bounds:{x1:o?Math.min(w,b):w,y1:o?P:Math.min(P,c),x2:o?Math.max(w,b):b,y2:o?c:Math.max(P,c)},color:d,axisSwapped:o}),this._indexLabels.push({chartType:"error",dataPoint:gt[I],dataSeries:wt,indexKeyword:1,point:{x:o?gt[I].y[1]>=gt[I].y[0]?b:w:w+(b-w)/2,y:o?P+(c-P)/2:gt[I].y[1]>=gt[I].y[0]?P:c},direction:gt[I].y[1]>=gt[I].y[0]?1:-1,bounds:{x1:o?Math.min(w,b):w,y1:o?P:Math.min(P,c),x2:o?Math.max(w,b):b,y2:o?c:Math.max(P,c)},color:d,axisSwapped:o}))}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(_.x1,_.y1,_.width,_.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0}}},Y.prototype.renderRangeBar=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=null,d=this.plotArea,M=0,x,_,I,N,M=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;x=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/r.plotType.totalDataSeries))<<0;var w=r.axisX.dataInfo.minDiff;isFinite(w)||(w=.3*Math.abs(r.axisX.range)),w=this.options.dataPointWidth?this.dataPointWidth:.9*(d.height*(r.axisX.logarithmic?Math.log(w)/Math.log(r.axisX.range):Math.abs(w)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&M>x&&(M=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<M&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,M)),w<M&&(w=M),w>x&&(w=x),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(d.x1,d.y1,d.width,d.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip());for(var b=0;b<r.dataSeriesIndexes.length;b++){var P=r.dataSeriesIndexes[b],c=this.data[P],L=c.dataPoints;if(0<L.length){var V=!!(5<w&&c.bevelEnabled);for(l.strokeStyle="#4572A7 ",M=0;M<L.length;M++)if(L[M].getTime?N=L[M].x.getTime():N=L[M].x,!(N<r.axisX.dataInfo.viewPortMin||N>r.axisX.dataInfo.viewPortMax)&&!p(L[M].y)&&L[M].y.length&&typeof L[M].y[0]=="number"&&typeof L[M].y[1]=="number"){x=r.axisY.convertValueToPixel(L[M].y[0]),_=r.axisY.convertValueToPixel(L[M].y[1]),I=r.axisX.convertValueToPixel(N),I=r.axisX.reversed?I+r.plotType.totalDataSeries*w/2-(r.previousDataSeriesCount+b)*w<<0:I-r.plotType.totalDataSeries*w/2+(r.previousDataSeriesCount+b)*w<<0;var U=r.axisX.reversed?I-w<<0:I+w<<0;x>_&&(o=x,x=_,_=o),o=L[M].color?L[M].color:c._colorSet[M%c._colorSet.length],Re(l,x,r.axisX.reversed?U:I,_,r.axisX.reversed?I:U,o,0,null,V,!1,!1,!1,c.fillOpacity),o=c.dataPointIds[M],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:P,dataPointIndex:M,x1:x,y1:I,x2:_,y2:U},o=u(o),ut&&Re(this._eventManager.ghostCtx,x,r.axisX.reversed?U:I,_,r.axisX.reversed?I:U,o,0,null,!1,!1,!1,!1),(L[M].indexLabel||c.indexLabel||L[M].indexLabelFormatter||c.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:L[M],dataSeries:c,indexKeyword:0,point:{x:L[M].y[1]>=L[M].y[0]?x:_,y:I+(U-I)/2},direction:L[M].y[1]>=L[M].y[0]?-1:1,bounds:{x1:Math.min(x,_),y1:I,x2:Math.max(x,_),y2:U},color:o}),this._indexLabels.push({chartType:"rangeBar",dataPoint:L[M],dataSeries:c,indexKeyword:1,point:{x:L[M].y[1]>=L[M].y[0]?_:x,y:I+(U-I)/2},direction:L[M].y[1]>=L[M].y[0]?1:-1,bounds:{x1:Math.min(x,_),y1:I,x2:Math.max(x,_),y2:U},color:o}))}}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0}}},Y.prototype.renderRangeArea=function(r){function f(){if(G){for(var Ft=null,vt=N.length-1;0<=vt;vt--)Ft=N[vt],o.lineTo(Ft.x,Ft.y2),d.lineTo(Ft.x,Ft.y2);if(o.closePath(),o.globalAlpha=w.fillOpacity,o.fill(),o.globalAlpha=1,d.fill(),0<w.lineThickness){for(o.beginPath(),o.moveTo(Ft.x,Ft.y2),vt=0;vt<N.length;vt++)Ft=N[vt],o.lineTo(Ft.x,Ft.y2);for(o.moveTo(N[0].x,N[0].y1),vt=0;vt<N.length;vt++)Ft=N[vt],o.lineTo(Ft.x,Ft.y1);o.stroke()}o.beginPath(),o.moveTo(L,V),d.beginPath(),d.moveTo(L,V),G={x:L,y:V},N=[],N.push({x:L,y1:V,y2:U})}}var l=r.targetCanvasCtx||this.plotArea.ctx,o=ut?this._preRenderCtx:l;if(!(0>=r.dataSeriesIndexes.length)){var d=this._eventManager.ghostCtx,x=[],_=this.plotArea;o.save(),ut&&d.save(),o.beginPath(),o.rect(_.x1,_.y1,_.width,_.height),o.clip(),ut&&(d.beginPath(),d.rect(_.x1,_.y1,_.width,_.height),d.clip());for(var I=0;I<r.dataSeriesIndexes.length;I++){var N=[],M=r.dataSeriesIndexes[I],w=this.data[M],b=w.dataPoints,x=w.id;this._eventManager.objectMap[x]={objectType:"dataSeries",dataSeriesIndex:M},x=u(x),d.fillStyle=x;var x=[],P=!0,c=0,L,V,U,E,G=null;if(0<b.length){var j=w._colorSet[c%w._colorSet.length],wt=w.lineColor=w.options.lineColor||j,gt=wt;o.fillStyle=j,o.strokeStyle=wt,o.lineWidth=w.lineThickness;var _t="solid";if(o.setLineDash){var Qt=y(w.nullDataLineDashType,w.lineThickness),_t=w.lineDashType,se=y(_t,w.lineThickness);o.setLineDash(se)}for(var Vt=!0;c<b.length;c++)if(E=b[c].x.getTime?b[c].x.getTime():b[c].x,!(E<r.axisX.dataInfo.viewPortMin||E>r.axisX.dataInfo.viewPortMax&&(!w.connectNullData||!Vt)))if(b[c].y!==null&&b[c].y.length&&typeof b[c].y[0]=="number"&&typeof b[c].y[1]=="number"){if(L=r.axisX.convertValueToPixel(E),V=r.axisY.convertValueToPixel(b[c].y[0]),U=r.axisY.convertValueToPixel(b[c].y[1]),P||Vt?(w.connectNullData&&!P?(o.setLineDash&&(w.options.nullDataLineDashType||_t===w.lineDashType&&w.lineDashType!==w.nullDataLineDashType)&&(N[N.length-1].newLineDashArray=se,_t=w.nullDataLineDashType,o.setLineDash(Qt)),o.lineTo(L,V),ut&&d.lineTo(L,V),N.push({x:L,y1:V,y2:U})):(o.beginPath(),o.moveTo(L,V),G={x:L,y:V},N=[],N.push({x:L,y1:V,y2:U}),ut&&(d.beginPath(),d.moveTo(L,V))),Vt=P=!1):(o.lineTo(L,V),N.push({x:L,y1:V,y2:U}),ut&&d.lineTo(L,V),c%250==0&&f()),E=w.dataPointIds[c],this._eventManager.objectMap[E]={id:E,objectType:"dataPoint",dataSeriesIndex:M,dataPointIndex:c,x1:L,y1:V,y2:U},c<b.length-1&&(gt!==(b[c].lineColor||wt)||_t!==(b[c].lineDashType||w.lineDashType))&&(f(),gt=b[c].lineColor||wt,N[N.length-1].newStrokeStyle=gt,o.strokeStyle=gt,o.setLineDash&&(b[c].lineDashType?(_t=b[c].lineDashType,N[N.length-1].newLineDashArray=y(_t,w.lineThickness),o.setLineDash(N[N.length-1].newLineDashArray)):(_t=w.lineDashType,N[N.length-1].newLineDashArray=se,o.setLineDash(se)))),b[c].markerSize!==0&&(0<b[c].markerSize||0<w.markerSize)){var Wt=w.getMarkerProperties(c,L,U,o);x.push(Wt);var Nt=u(E);ut&&x.push({x:L,y:U,ctx:d,type:Wt.type,size:Wt.size,color:Nt,borderColor:Nt,borderThickness:Wt.borderThickness}),Wt=w.getMarkerProperties(c,L,V,o),x.push(Wt),Nt=u(E),ut&&x.push({x:L,y:V,ctx:d,type:Wt.type,size:Wt.size,color:Nt,borderColor:Nt,borderThickness:Wt.borderThickness})}(b[c].indexLabel||w.indexLabel||b[c].indexLabelFormatter||w.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:b[c],dataSeries:w,indexKeyword:0,point:{x:L,y:V},direction:b[c].y[0]>b[c].y[1]===r.axisY.reversed?-1:1,color:j}),this._indexLabels.push({chartType:"rangeArea",dataPoint:b[c],dataSeries:w,indexKeyword:1,point:{x:L,y:U},direction:b[c].y[0]>b[c].y[1]===r.axisY.reversed?1:-1,color:j}))}else Vt||P||f(),Vt=!0;f(),xi.drawMarkers(x)}}return ut&&(l.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(_.x1,_.y1,_.width,_.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:l,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderRangeSplineArea=function(r){function f(Wt,Nt){var Ft=q(V,2);if(0<Ft.length){if(0<M.lineThickness){o.strokeStyle=Nt,o.setLineDash&&o.setLineDash(Wt),o.beginPath(),o.moveTo(Ft[0].x,Ft[0].y);for(var vt=0;vt<Ft.length-3;vt+=3)(Ft[vt].newStrokeStyle||Ft[vt].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(Ft[vt].x,Ft[vt].y),Ft[vt].newStrokeStyle&&(o.strokeStyle=Ft[vt].newStrokeStyle),Ft[vt].newLineDashArray&&o.setLineDash(Ft[vt].newLineDashArray)),o.bezierCurveTo(Ft[vt+1].x,Ft[vt+1].y,Ft[vt+2].x,Ft[vt+2].y,Ft[vt+3].x,Ft[vt+3].y)}for(o.beginPath(),o.moveTo(Ft[0].x,Ft[0].y),ut&&(d.beginPath(),d.moveTo(Ft[0].x,Ft[0].y)),vt=0;vt<Ft.length-3;vt+=3)o.bezierCurveTo(Ft[vt+1].x,Ft[vt+1].y,Ft[vt+2].x,Ft[vt+2].y,Ft[vt+3].x,Ft[vt+3].y),ut&&d.bezierCurveTo(Ft[vt+1].x,Ft[vt+1].y,Ft[vt+2].x,Ft[vt+2].y,Ft[vt+3].x,Ft[vt+3].y);for(Ft=q(U,2),o.lineTo(U[U.length-1].x,U[U.length-1].y),vt=Ft.length-1;2<vt;vt-=3)o.bezierCurveTo(Ft[vt-1].x,Ft[vt-1].y,Ft[vt-2].x,Ft[vt-2].y,Ft[vt-3].x,Ft[vt-3].y),ut&&d.bezierCurveTo(Ft[vt-1].x,Ft[vt-1].y,Ft[vt-2].x,Ft[vt-2].y,Ft[vt-3].x,Ft[vt-3].y);if(o.closePath(),o.globalAlpha=M.fillOpacity,o.fill(),ut&&(d.closePath(),d.fill()),o.globalAlpha=1,0<M.lineThickness){o.strokeStyle=Nt,o.setLineDash&&o.setLineDash(Wt),o.beginPath(),o.moveTo(Ft[0].x,Ft[0].y);for(var Ht=vt=0;vt<Ft.length-3;vt+=3,Ht++)(V[Ht].newStrokeStyle||V[Ht].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(Ft[vt].x,Ft[vt].y),V[Ht].newStrokeStyle&&(o.strokeStyle=V[Ht].newStrokeStyle),V[Ht].newLineDashArray&&o.setLineDash(V[Ht].newLineDashArray)),o.bezierCurveTo(Ft[vt+1].x,Ft[vt+1].y,Ft[vt+2].x,Ft[vt+2].y,Ft[vt+3].x,Ft[vt+3].y);for(Ft=q(V,2),o.moveTo(Ft[0].x,Ft[0].y),Ht=vt=0;vt<Ft.length-3;vt+=3,Ht++)(V[Ht].newStrokeStyle||V[Ht].newLineDashArray)&&(o.stroke(),o.beginPath(),o.moveTo(Ft[vt].x,Ft[vt].y),V[Ht].newStrokeStyle&&(o.strokeStyle=V[Ht].newStrokeStyle),V[Ht].newLineDashArray&&o.setLineDash(V[Ht].newLineDashArray)),o.bezierCurveTo(Ft[vt+1].x,Ft[vt+1].y,Ft[vt+2].x,Ft[vt+2].y,Ft[vt+3].x,Ft[vt+3].y);o.stroke()}o.beginPath()}}var l=r.targetCanvasCtx||this.plotArea.ctx,o=ut?this._preRenderCtx:l;if(!(0>=r.dataSeriesIndexes.length)){var d=this._eventManager.ghostCtx,x=[],_=this.plotArea;o.save(),ut&&d.save(),o.beginPath(),o.rect(_.x1,_.y1,_.width,_.height),o.clip(),ut&&(d.beginPath(),d.rect(_.x1,_.y1,_.width,_.height),d.clip());for(var I=0;I<r.dataSeriesIndexes.length;I++){var N=r.dataSeriesIndexes[I],M=this.data[N],w=M.dataPoints,x=M.id;this._eventManager.objectMap[x]={objectType:"dataSeries",dataSeriesIndex:N},x=u(x),d.fillStyle=x;var x=[],b=0,P,c,L,V=[],U=[];if(0<w.length){var E=M._colorSet[b%M._colorSet.length],G=M.lineColor=M.options.lineColor||E,j=G;o.fillStyle=E,o.lineWidth=M.lineThickness;var wt="solid",gt;if(o.setLineDash){var _t=y(M.nullDataLineDashType,M.lineThickness),wt=M.lineDashType;gt=y(wt,M.lineThickness)}for(c=!1;b<w.length;b++)if(P=w[b].x.getTime?w[b].x.getTime():w[b].x,!(P<r.axisX.dataInfo.viewPortMin||P>r.axisX.dataInfo.viewPortMax&&(!M.connectNullData||!c)))if(w[b].y!==null&&w[b].y.length&&typeof w[b].y[0]=="number"&&typeof w[b].y[1]=="number"){P=r.axisX.convertValueToPixel(P),c=r.axisY.convertValueToPixel(w[b].y[0]),L=r.axisY.convertValueToPixel(w[b].y[1]);var Qt=M.dataPointIds[b];if(this._eventManager.objectMap[Qt]={id:Qt,objectType:"dataPoint",dataSeriesIndex:N,dataPointIndex:b,x1:P,y1:c,y2:L},V[V.length]={x:P,y:c},U[U.length]={x:P,y:L},b<w.length-1&&(j!==(w[b].lineColor||G)||wt!==(w[b].lineDashType||M.lineDashType))&&(j=w[b].lineColor||G,V[V.length-1].newStrokeStyle=j,o.setLineDash&&(w[b].lineDashType?(wt=w[b].lineDashType,V[V.length-1].newLineDashArray=y(wt,M.lineThickness)):(wt=M.lineDashType,V[V.length-1].newLineDashArray=gt))),w[b].markerSize!==0&&(0<w[b].markerSize||0<M.markerSize)){var se=M.getMarkerProperties(b,P,c,o);x.push(se);var Vt=u(Qt);ut&&x.push({x:P,y:c,ctx:d,type:se.type,size:se.size,color:Vt,borderColor:Vt,borderThickness:se.borderThickness}),se=M.getMarkerProperties(b,P,L,o),x.push(se),Vt=u(Qt),ut&&x.push({x:P,y:L,ctx:d,type:se.type,size:se.size,color:Vt,borderColor:Vt,borderThickness:se.borderThickness})}(w[b].indexLabel||M.indexLabel||w[b].indexLabelFormatter||M.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:w[b],dataSeries:M,indexKeyword:0,point:{x:P,y:c},direction:w[b].y[0]<=w[b].y[1]?-1:1,color:E}),this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:w[b],dataSeries:M,indexKeyword:1,point:{x:P,y:L},direction:w[b].y[0]<=w[b].y[1]?1:-1,color:E})),c=!1}else 0<b&&!c&&(M.connectNullData?o.setLineDash&&0<V.length&&(M.options.nullDataLineDashType||!w[b-1].lineDashType)&&(V[V.length-1].newLineDashArray=_t,wt=M.nullDataLineDashType):(f(gt,G),V=[],U=[])),c=!0;f(gt,G),xi.drawMarkers(x)}}return ut&&(l.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&o.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&o.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(_.x1,_.y1,_.width,_.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:l,dest:this.plotArea.ctx,animationCallback:Xe.xClipAnimation,easingFunction:Xe.easing.linear,animationBase:0}}},Y.prototype.renderWaterfall=function(r){var f=r.targetCanvasCtx||this.plotArea.ctx,l=ut?this._preRenderCtx:f;if(!(0>=r.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx,d=null,x=this.plotArea,b=0,_,I,N,M,w=r.axisY.convertValueToPixel(r.axisY.logarithmic?r.axisY.viewportMinimum:0),b=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;I=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/r.plotType.totalDataSeries))<<0;var P=r.axisX.dataInfo.minDiff;isFinite(P)||(P=.3*Math.abs(r.axisX.range)),P=this.options.dataPointWidth?this.dataPointWidth:.6*(x.width*(r.axisX.logarithmic?Math.log(P)/Math.log(r.axisX.range):Math.abs(P)/Math.abs(r.axisX.range))/r.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&b>I&&(b=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,I)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&I<b&&(I=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,b)),P<b&&(P=b),P>I&&(P=I),l.save(),ut&&this._eventManager.ghostCtx.save(),l.beginPath(),l.rect(x.x1,x.y1,x.width,x.height),l.clip(),ut&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(x.x1,x.y1,x.width,x.height),this._eventManager.ghostCtx.clip());for(var c=0;c<r.dataSeriesIndexes.length;c++){var L=r.dataSeriesIndexes[c],V=this.data[L],U=V.dataPoints,d=V._colorSet[0];V.risingColor=V.options.risingColor?V.options.risingColor:d,V.fallingColor=V.options.fallingColor?V.options.fallingColor:"#e40a0a";var E=typeof V.options.lineThickness=="number"?Math.round(V.lineThickness):1,G=Math.round(E)%2===1?-.5:0;if(0<U.length)for(var j=!!(5<P&&V.bevelEnabled),wt=!1,gt=null,_t=null,b=0;b<U.length;b++)if(U[b].getTime?M=U[b].x.getTime():M=U[b].x,typeof U[b].y!="number"){if(0<b&&!wt&&V.connectNullData)var Qt=V.options.nullDataLineDashType||!U[b-1].lineDashType?V.nullDataLineDashType:U[b-1].lineDashType;wt=!0}else{_=r.axisX.convertValueToPixel(M),I=V.dataPointEOs[b].cumulativeSum===0?w:r.axisY.convertValueToPixel(V.dataPointEOs[b].cumulativeSum),N=V.dataPointEOs[b].cumulativeSumYStartValue===0?w:r.axisY.convertValueToPixel(V.dataPointEOs[b].cumulativeSumYStartValue),_=r.axisX.reversed?_+r.plotType.totalDataSeries*P/2-(r.previousDataSeriesCount+c)*P<<0:_-r.plotType.totalDataSeries*P/2+(r.previousDataSeriesCount+c)*P<<0;var se=r.axisX.reversed?_-P<<0:_+P<<0;I>N&&(d=I,I=N,N=d),r.axisY.reversed&&(d=I,I=N,N=d),d=V.dataPointIds[b],this._eventManager.objectMap[d]={id:d,objectType:"dataPoint",dataSeriesIndex:L,dataPointIndex:b,x1:_,y1:I,x2:se,y2:N};var Wt=U[b].color?U[b].color:0<U[b].y?V.risingColor:V.fallingColor;Re(l,r.axisX.reversed?se:_,r.axisY.reversed?N:I,r.axisX.reversed?_:se,r.axisY.reversed?I:N,Wt,0,Wt,j,j,!1,!1,V.fillOpacity),d=u(d),ut&&Re(this._eventManager.ghostCtx,r.axisX.reversed?se:_,I,r.axisX.reversed?_:se,N,d,0,null,!1,!1,!1,!1);var Vt,Wt=_;Vt=typeof U[b].isIntermediateSum<"u"&&U[b].isIntermediateSum===!0||typeof U[b].isCumulativeSum<"u"&&U[b].isCumulativeSum===!0?0<U[b].y?I:N:0<U[b].y?N:I,0<b&&gt&&(!wt||V.connectNullData)&&(wt&&l.setLineDash&&l.setLineDash(y(Qt,E)),l.beginPath(),l.moveTo(gt,_t-G),l.lineTo(Wt,Vt-G),0<E&&l.stroke(),ut&&(o.beginPath(),o.moveTo(gt,_t-G),o.lineTo(Wt,Vt-G),0<E&&o.stroke())),wt=!1,gt=se,_t=0<U[b].y?I:N,Wt=U[b].lineDashType?U[b].lineDashType:V.options.lineDashType?V.options.lineDashType:"shortDash",l.strokeStyle=U[b].lineColor?U[b].lineColor:V.options.lineColor?V.options.lineColor:"#9e9e9e",l.lineWidth=E,l.setLineDash&&(Wt=y(Wt,E),l.setLineDash(Wt)),(U[b].indexLabel||V.indexLabel||U[b].indexLabelFormatter||V.indexLabelFormatter)&&this._indexLabels.push({chartType:"waterfall",dataPoint:U[b],dataSeries:V,point:{x:_+(se-_)/2,y:0<=U[b].y?I:N},direction:0>U[b].y===r.axisY.reversed?1:-1,bounds:{x1:_,y1:Math.min(I,N),x2:se,y2:Math.max(I,N)},color:d})}}return ut&&(f.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.globalCompositeOperation="source-atop",r.axisX.maskCanvas&&l.drawImage(r.axisX.maskCanvas,0,0,this.width,this.height),r.axisY.maskCanvas&&l.drawImage(r.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),l.clearRect(x.x1,x.y1,x.width,x.height),this._eventManager.ghostCtx.restore()),l.restore(),{source:f,dest:this.plotArea.ctx,animationCallback:Xe.fadeInAnimation,easingFunction:Xe.easing.easeInQuad,animationBase:0}}};var un=function(r,f,l,o,d,x,_,I,N){if(!(0>l)){if(typeof I>"u"&&(I=1),!ut){var M=Number((_%(2*Math.PI)).toFixed(8));Number((x%(2*Math.PI)).toFixed(8))===M&&(_-=1e-4)}r.save(),r.globalAlpha=I,d==="pie"?(r.beginPath(),r.moveTo(f.x,f.y),r.arc(f.x,f.y,l,x,_,!1),r.fillStyle=o,r.strokeStyle="white",r.lineWidth=2,r.closePath(),r.fill()):d==="doughnut"&&(r.beginPath(),r.arc(f.x,f.y,l,x,_,!1),0<=N&&r.arc(f.x,f.y,N*l,_,x,!0),r.closePath(),r.fillStyle=o,r.strokeStyle="white",r.lineWidth=2,r.fill()),r.globalAlpha=1,r.restore()}};Y.prototype.renderPie=function(r){function f(){if(M&&w){var Vt=0,Wt=0,Nt=0,Ft=0;p(M.options.indexLabelMaxWidth)&&(M.indexLabelMaxWidth=.33*P.width);for(var vt=0;vt<w.length;vt++){var Ht=w[vt],me=M.dataPointIds[vt];c[vt].id=me,c[vt].objectType="dataPoint",c[vt].dataPointIndex=vt,c[vt].dataSeriesIndex=0;var Pt=c[vt],Ai={percent:null,total:null},Qe=null,Ai=N.getPercentAndTotal(M,Ht);(M.indexLabelFormatter||Ht.indexLabelFormatter)&&(Qe={chart:N.options,dataSeries:M,dataPoint:Ht,total:Ai.total,percent:Ai.percent}),Ai=Ht.indexLabelFormatter?Ht.indexLabelFormatter(Qe):Ht.indexLabel?N.replaceKeywordsWithValue(Ht.indexLabel,Ht,M,vt):M.indexLabelFormatter?M.indexLabelFormatter(Qe):M.indexLabel?N.replaceKeywordsWithValue(M.indexLabel,Ht,M,vt):Ht.label?Ht.label:"",N._eventManager.objectMap[me]=Pt,Pt.center={x:j.x,y:j.y},Pt.y=Ht.y,Pt.radius=_t,Pt.percentInnerRadius=se,Pt.indexLabelText=Ai,Pt.indexLabelPlacement=M.indexLabelPlacement,Pt.indexLabelLineColor=Ht.indexLabelLineColor?Ht.indexLabelLineColor:M.options.indexLabelLineColor?M.options.indexLabelLineColor:Ht.color?Ht.color:M._colorSet[vt%M._colorSet.length],Pt.indexLabelLineThickness=p(Ht.indexLabelLineThickness)?M.indexLabelLineThickness:Ht.indexLabelLineThickness,Pt.indexLabelLineDashType=Ht.indexLabelLineDashType?Ht.indexLabelLineDashType:M.indexLabelLineDashType,Pt.indexLabelFontColor=Ht.indexLabelFontColor?Ht.indexLabelFontColor:M.indexLabelFontColor,Pt.indexLabelFontStyle=Ht.indexLabelFontStyle?Ht.indexLabelFontStyle:M.indexLabelFontStyle,Pt.indexLabelFontWeight=Ht.indexLabelFontWeight?Ht.indexLabelFontWeight:M.indexLabelFontWeight,Pt.indexLabelFontSize=p(Ht.indexLabelFontSize)?M.indexLabelFontSize:Ht.indexLabelFontSize,Pt.indexLabelFontFamily=Ht.indexLabelFontFamily?Ht.indexLabelFontFamily:M.indexLabelFontFamily,Pt.indexLabelBackgroundColor=Ht.indexLabelBackgroundColor?Ht.indexLabelBackgroundColor:M.options.indexLabelBackgroundColor?M.options.indexLabelBackgroundColor:M.indexLabelBackgroundColor,Pt.indexLabelBorderColor=Ht.indexLabelBorderColor?Ht.indexLabelBorderColor:M.options.indexLabelBorderColor?M.options.indexLabelBorderColor:M.indexLabelBorderColor,Pt.indexLabelBorderThickness=Ht.indexLabelBorderThickness?Ht.indexLabelBorderThickness:M.options.indexLabelBorderThickness?M.options.indexLabelBorderThickness:M.indexLabelBorderThickness,Pt.indexLabelPadding=Ht.indexLabelPadding?Ht.indexLabelPadding:M.options.indexLabelPadding?M.options.indexLabelPadding:M.indexLabelPadding,Pt.indexLabelMaxWidth=Ht.indexLabelMaxWidth?Ht.indexLabelMaxWidth:M.indexLabelMaxWidth,Pt.indexLabelWrap=typeof Ht.indexLabelWrap<"u"?Ht.indexLabelWrap:M.indexLabelWrap,Pt.indexLabelTextAlign=Ht.indexLabelTextAlign?Ht.indexLabelTextAlign:M.indexLabelTextAlign?M.indexLabelTextAlign:"left",Pt.startAngle=vt===0?M.startAngle?M.startAngle/180*Math.PI:0:c[vt-1].endAngle,Pt.startAngle=(Pt.startAngle+2*Math.PI)%(2*Math.PI),Pt.endAngle=Pt.startAngle+2*Math.PI/wt*Math.abs(Ht.y),Ht=(Pt.endAngle+Pt.startAngle)/2,Ht=(Ht+2*Math.PI)%(2*Math.PI),Pt.midAngle=Ht,Pt.midAngle>Math.PI/2-E&&Pt.midAngle<Math.PI/2+E?((Vt===0||c[Nt].midAngle>Pt.midAngle)&&(Nt=vt),Vt++):Pt.midAngle>3*Math.PI/2-E&&Pt.midAngle<3*Math.PI/2+E&&((Wt===0||c[Ft].midAngle>Pt.midAngle)&&(Ft=vt),Wt++),Pt.hemisphere=Ht>Math.PI/2&&Ht<=3*Math.PI/2?"left":"right",Pt.indexLabelTextBlock=new ct(N.plotArea.ctx,{fontSize:Pt.indexLabelFontSize,fontFamily:Pt.indexLabelFontFamily,fontColor:Pt.indexLabelFontColor,fontStyle:Pt.indexLabelFontStyle,fontWeight:Pt.indexLabelFontWeight,textAlign:Pt.indexLabelTextAlign,backgroundColor:Pt.indexLabelBackgroundColor,borderColor:Pt.indexLabelBorderColor,borderThickness:Pt.indexLabelBorderThickness,maxWidth:Pt.indexLabelMaxWidth,maxHeight:Pt.indexLabelWrap?5*Pt.indexLabelFontSize:1.5*Pt.indexLabelFontSize,text:Pt.indexLabelText,padding:Pt.indexLabelPadding,textBaseline:"middle"}),Pt.indexLabelTextBlock.measureText()}for(me=Ht=0,Ai=!1,vt=0;vt<w.length;vt++)Pt=c[(Nt+vt)%w.length],1<Vt&&Pt.midAngle>Math.PI/2-E&&Pt.midAngle<Math.PI/2+E&&(Ht<=Vt/2&&!Ai?(Pt.hemisphere="right",Ht++):(Pt.hemisphere="left",Ai=!0));for(Ai=!1,vt=0;vt<w.length;vt++)Pt=c[(Ft+vt)%w.length],1<Wt&&Pt.midAngle>3*Math.PI/2-E&&Pt.midAngle<3*Math.PI/2+E&&(me<=Wt/2&&!Ai?(Pt.hemisphere="left",me++):(Pt.hemisphere="right",Ai=!0))}}function l(Vt,Wt){var Nt=N.plotArea.ctx;for(Nt.clearRect(P.x1,P.y1,P.width,P.height),Nt.fillStyle=N.backgroundColor,Nt.fillRect(P.x1,P.y1,P.width,P.height),Nt=0;Nt<w.length;Nt++){var Ft=c[Nt].startAngle,vt=c[Nt].endAngle;if(vt>Ft){var Ht=.07*_t*Math.cos(c[Nt].midAngle),me=.07*_t*Math.sin(c[Nt].midAngle),Pt=!1;w[Nt].exploded?(1e-9<Math.abs(c[Nt].center.x-(j.x+Ht))||1e-9<Math.abs(c[Nt].center.y-(j.y+me)))&&(c[Nt].center.x=j.x+Ht*Vt,c[Nt].center.y=j.y+me*Vt,Pt=!0):(0<Math.abs(c[Nt].center.x-j.x)||0<Math.abs(c[Nt].center.y-j.y))&&(c[Nt].center.x=j.x+Ht*(1-Vt),c[Nt].center.y=j.y+me*(1-Vt),Pt=!0),Pt&&Wt&&(Ht={},Ht.dataSeries=M,Ht.dataPoint=M.dataPoints[Nt],Ht.index=Nt,N.toolTip.highlightObjects([Ht])),un(N.plotArea.ctx,c[Nt].center,c[Nt].radius,w[Nt].color?w[Nt].color:M._colorSet[Nt%M._colorSet.length],M.type,Ft,vt,M.fillOpacity,c[Nt].percentInnerRadius)}}for(Nt=N.plotArea.ctx,Nt.save(),Nt.fillStyle="black",Nt.strokeStyle="grey",Nt.textBaseline="middle",Nt.lineJoin="round",Ft=Ft=0;Ft<w.length;Ft++)vt=c[Ft],vt.indexLabelText&&(vt.indexLabelTextBlock.y-=vt.indexLabelTextBlock.height/2-vt.indexLabelTextBlock._lineHeight/2,Ht=0,Ht=vt.hemisphere==="left"?M.indexLabelPlacement!=="inside"?-(vt.indexLabelTextBlock.width+b):-vt.indexLabelTextBlock.width/2:M.indexLabelPlacement!=="inside"?b:-vt.indexLabelTextBlock.width/2,vt.indexLabelTextBlock.x+=Ht,vt.indexLabelTextBlock.render(!0),vt.indexLabelTextBlock.x-=Ht,vt.indexLabelTextBlock.y+=vt.indexLabelTextBlock.height/2-vt.indexLabelTextBlock._lineHeight/2,vt.indexLabelPlacement!=="inside"&&0<vt.indexLabelLineThickness&&(Ht=vt.center.x+_t*Math.cos(vt.midAngle),me=vt.center.y+_t*Math.sin(vt.midAngle),Nt.strokeStyle=vt.indexLabelLineColor,Nt.lineWidth=vt.indexLabelLineThickness,Nt.setLineDash&&Nt.setLineDash(y(vt.indexLabelLineDashType,vt.indexLabelLineThickness)),Nt.beginPath(),Nt.moveTo(Ht,me),Nt.lineTo(vt.indexLabelTextBlock.x,vt.indexLabelTextBlock.y),Nt.lineTo(vt.indexLabelTextBlock.x+(vt.hemisphere==="left"?-b:b),vt.indexLabelTextBlock.y),Nt.stroke()),Nt.lineJoin="miter");Nt.save()}function o(Vt,Wt){var Nt=0,Nt=Vt.indexLabelTextBlock.y-Vt.indexLabelTextBlock.height/2,Ft=Vt.indexLabelTextBlock.y+Vt.indexLabelTextBlock.height/2,vt=Wt.indexLabelTextBlock.y-Wt.indexLabelTextBlock.height/2,Ht=Wt.indexLabelTextBlock.y+Wt.indexLabelTextBlock.height/2;return Nt=Wt.indexLabelTextBlock.y>Vt.indexLabelTextBlock.y?vt-Ft:Nt-Ht}function d(Vt){for(var Wt=null,Nt=1;Nt<w.length;Nt++)if(Wt=(Vt+Nt+c.length)%c.length,c[Wt].hemisphere!==c[Vt].hemisphere){Wt=null;break}else{if(c[Wt].indexLabelText&&Wt!==Vt&&(0>o(c[Wt],c[Vt])||(c[Vt].hemisphere==="right"?c[Wt].indexLabelTextBlock.y>=c[Vt].indexLabelTextBlock.y:c[Wt].indexLabelTextBlock.y<=c[Vt].indexLabelTextBlock.y)))break;Wt=null}return Wt}function x(Vt,Wt,Nt){if(Nt=(Nt||0)+1,1e3<Nt)return 0;Wt=Wt||0;var Ft=0,vt=j.y-1*V,Ht=j.y+1*V;if(0<=Vt&&Vt<w.length){var me=c[Vt];if(0>Wt&&me.indexLabelTextBlock.y<vt||0<Wt&&me.indexLabelTextBlock.y>Ht)return 0;var Pt=0,Qe=0,Qe=Pt=Pt=0;for(0>Wt?me.indexLabelTextBlock.y-me.indexLabelTextBlock.height/2>vt&&me.indexLabelTextBlock.y-me.indexLabelTextBlock.height/2+Wt<vt&&(Wt=-(vt-(me.indexLabelTextBlock.y-me.indexLabelTextBlock.height/2+Wt))):me.indexLabelTextBlock.y+me.indexLabelTextBlock.height/2<vt&&me.indexLabelTextBlock.y+me.indexLabelTextBlock.height/2+Wt>Ht&&(Wt=me.indexLabelTextBlock.y+me.indexLabelTextBlock.height/2+Wt-Ht),Wt=me.indexLabelTextBlock.y+Wt,vt=0,vt=me.hemisphere==="right"?j.x+Math.sqrt(Math.pow(V,2)-Math.pow(Wt-j.y,2)):j.x-Math.sqrt(Math.pow(V,2)-Math.pow(Wt-j.y,2)),Qe=j.x+_t*Math.cos(me.midAngle),Pt=j.y+_t*Math.sin(me.midAngle),Pt=Math.sqrt(Math.pow(vt-Qe,2)+Math.pow(Wt-Pt,2)),Qe=Math.acos(_t/V),Pt=Math.acos((V*V+_t*_t-Pt*Pt)/(2*_t*V)),Wt=Pt<Qe?Wt-me.indexLabelTextBlock.y:0,vt=null,Ht=1;Ht<w.length;Ht++)if(vt=(Vt-Ht+c.length)%c.length,c[vt].hemisphere!==c[Vt].hemisphere){vt=null;break}else{if(c[vt].indexLabelText&&c[vt].hemisphere===c[Vt].hemisphere&&vt!==Vt&&(0>o(c[vt],c[Vt])||(c[Vt].hemisphere==="right"?c[vt].indexLabelTextBlock.y<=c[Vt].indexLabelTextBlock.y:c[vt].indexLabelTextBlock.y>=c[Vt].indexLabelTextBlock.y)))break;vt=null}Qe=vt,Pt=d(Vt),Ht=vt=0,0>Wt?(Ht=me.hemisphere==="right"?Qe:Pt,Ft=Wt,Ht!==null&&(Qe=-Wt,Wt=me.indexLabelTextBlock.y-me.indexLabelTextBlock.height/2-(c[Ht].indexLabelTextBlock.y+c[Ht].indexLabelTextBlock.height/2),Wt-Qe<L&&(vt=-Qe,Ht=x(Ht,vt,Nt+1),+Ht.toFixed(G)>+vt.toFixed(G)&&(Ft=Wt>L?-(Wt-L):-(Qe-(Ht-vt)))))):0<Wt&&(Ht=me.hemisphere==="right"?Pt:Qe,Ft=Wt,Ht!==null&&(Qe=Wt,Wt=c[Ht].indexLabelTextBlock.y-c[Ht].indexLabelTextBlock.height/2-(me.indexLabelTextBlock.y+me.indexLabelTextBlock.height/2),Wt-Qe<L&&(vt=Qe,Ht=x(Ht,vt,Nt+1),+Ht.toFixed(G)<+vt.toFixed(G)&&(Ft=Wt>L?Wt-L:Qe-(vt-Ht))))),Ft&&(Nt=me.indexLabelTextBlock.y+Ft,Wt=0,Wt=me.hemisphere==="right"?j.x+Math.sqrt(Math.pow(V,2)-Math.pow(Nt-j.y,2)):j.x-Math.sqrt(Math.pow(V,2)-Math.pow(Nt-j.y,2)),me.midAngle>Math.PI/2-E&&me.midAngle<Math.PI/2+E?(vt=(Vt-1+c.length)%c.length,vt=c[vt],Vt=c[(Vt+1+c.length)%c.length],me.hemisphere==="left"&&vt.hemisphere==="right"&&Wt>vt.indexLabelTextBlock.x?Wt=vt.indexLabelTextBlock.x-15:me.hemisphere==="right"&&Vt.hemisphere==="left"&&Wt<Vt.indexLabelTextBlock.x&&(Wt=Vt.indexLabelTextBlock.x+15)):me.midAngle>3*Math.PI/2-E&&me.midAngle<3*Math.PI/2+E&&(vt=(Vt-1+c.length)%c.length,vt=c[vt],Vt=c[(Vt+1+c.length)%c.length],me.hemisphere==="right"&&vt.hemisphere==="left"&&Wt<vt.indexLabelTextBlock.x?Wt=vt.indexLabelTextBlock.x+15:me.hemisphere==="left"&&Vt.hemisphere==="right"&&Wt>Vt.indexLabelTextBlock.x&&(Wt=Vt.indexLabelTextBlock.x-15)),me.indexLabelTextBlock.y=Nt,me.indexLabelTextBlock.x=Wt,me.indexLabelAngle=Math.atan2(me.indexLabelTextBlock.y-j.y,me.indexLabelTextBlock.x-j.x))}return Ft}function _(){var Vt=N.plotArea.ctx;Vt.fillStyle="grey",Vt.strokeStyle="grey",Vt.font="16px Arial",Vt.textBaseline="middle";for(var Ft=Vt=0,Wt=0,Nt=!0,Ft=0;10>Ft&&(1>Ft||0<Wt);Ft++){if((M.radius||!M.radius&&typeof M.innerRadius<"u"&&M.innerRadius!==null&&_t-Wt<=Qt)&&(Nt=!1),Nt&&(_t-=Wt),Wt=0,M.indexLabelPlacement!=="inside"){for(V=_t*U,Vt=0;Vt<w.length;Vt++){var vt=c[Vt];vt.indexLabelTextBlock.x=j.x+V*Math.cos(vt.midAngle),vt.indexLabelTextBlock.y=j.y+V*Math.sin(vt.midAngle),vt.indexLabelAngle=vt.midAngle,vt.radius=_t,vt.percentInnerRadius=se}for(var Ht,me,Vt=0;Vt<w.length;Vt++){var vt=c[Vt],Pt=d(Vt);if(Pt!==null){Ht=c[Vt],me=c[Pt];var Qe=0,Qe=o(Ht,me)-L;if(0>Qe){for(var hi=me=0,Ai=0;Ai<w.length;Ai++)Ai!==Vt&&c[Ai].hemisphere===vt.hemisphere&&(c[Ai].indexLabelTextBlock.y<vt.indexLabelTextBlock.y?me++:hi++);me=Qe/(me+hi||1)*hi;var hi=-1*(Qe-me),Pi=Ai=0;vt.hemisphere==="right"?(Ai=x(Vt,me),hi=-1*(Qe-Ai),Pi=x(Pt,hi),+Pi.toFixed(G)<+hi.toFixed(G)&&+Ai.toFixed(G)<=+me.toFixed(G)&&x(Vt,-(hi-Pi))):(Ai=x(Pt,me),hi=-1*(Qe-Ai),Pi=x(Vt,hi),+Pi.toFixed(G)<+hi.toFixed(G)&&+Ai.toFixed(G)<=+me.toFixed(G)&&x(Pt,-(hi-Pi)))}}}}else for(Vt=0;Vt<w.length;Vt++)vt=c[Vt],V=M.type==="pie"?.7*_t:.85*_t,Pt=j.x+V*Math.cos(vt.midAngle),me=j.y+V*Math.sin(vt.midAngle),vt.indexLabelTextBlock.x=Pt,vt.indexLabelTextBlock.y=me;for(Vt=0;Vt<w.length;Vt++)vt=c[Vt],Pt=vt.indexLabelTextBlock.measureText(),Pt.height!==0&&Pt.width!==0&&(Pt=Pt=0,vt.hemisphere==="right"?(Pt=P.x2-(vt.indexLabelTextBlock.x+vt.indexLabelTextBlock.width+b),Pt*=-1):Pt=P.x1-(vt.indexLabelTextBlock.x-vt.indexLabelTextBlock.width-b),0<Pt&&(!Nt&&vt.indexLabelText&&(me=vt.hemisphere==="right"?P.x2-vt.indexLabelTextBlock.x:vt.indexLabelTextBlock.x-P.x1,.3*vt.indexLabelTextBlock.maxWidth>me?vt.indexLabelText="":vt.indexLabelTextBlock.maxWidth=.85*me,.3*vt.indexLabelTextBlock.maxWidth<me&&(vt.indexLabelTextBlock.x-=vt.hemisphere==="right"?2:-2)),Math.abs(vt.indexLabelTextBlock.y-vt.indexLabelTextBlock.height/2-j.y)<_t||Math.abs(vt.indexLabelTextBlock.y+vt.indexLabelTextBlock.height/2-j.y)<_t)&&(Pt/=Math.abs(Math.cos(vt.indexLabelAngle)),9<Pt&&(Pt*=.3),Pt>Wt&&(Wt=Pt)),Pt=Pt=0,0<vt.indexLabelAngle&&vt.indexLabelAngle<Math.PI?(Pt=P.y2-(vt.indexLabelTextBlock.y+vt.indexLabelTextBlock.height/2+5),Pt*=-1):Pt=P.y1-(vt.indexLabelTextBlock.y-vt.indexLabelTextBlock.height/2-5),0<Pt&&(!Nt&&vt.indexLabelText&&(me=0<vt.indexLabelAngle&&vt.indexLabelAngle<Math.PI?-1:1,x(Vt,Pt*me)===0&&x(Vt,2*me)),Math.abs(vt.indexLabelTextBlock.x-j.x)<_t&&(Pt/=Math.abs(Math.sin(vt.indexLabelAngle)),9<Pt&&(Pt*=.3),Pt>Wt&&(Wt=Pt))));var ti=function(wi,mi,bi){for(var de=[],An=0;de.push(c[mi]),mi!==bi;mi=(mi+1+w.length)%w.length);for(de.sort(function(xn,In){return xn.y-In.y}),mi=0;mi<de.length&&(bi=de[mi],An<.7*wi);mi++)An+=bi.indexLabelTextBlock.height,bi.indexLabelTextBlock.text="",bi.indexLabelText="",bi.indexLabelTextBlock.measureText()};(function(){for(var wi=-1,mi=-1,bi=0,de=!1,An=0;An<w.length;An++)if(de=!1,Ht=c[An],Ht.indexLabelText){var xn=d(An);if(xn!==null){var In=c[xn];Qe=0,Qe=o(Ht,In);var Ks;if(Ks=0>Qe){Ks=Ht.indexLabelTextBlock.x;var $s=Ht.indexLabelTextBlock.y-Ht.indexLabelTextBlock.height/2,ve=Ht.indexLabelTextBlock.y+Ht.indexLabelTextBlock.height/2,yr=In.indexLabelTextBlock.y-In.indexLabelTextBlock.height/2,vn=In.indexLabelTextBlock.x+In.indexLabelTextBlock.width,Wr=In.indexLabelTextBlock.y+In.indexLabelTextBlock.height/2;Ks=!(Ht.indexLabelTextBlock.x+Ht.indexLabelTextBlock.width<In.indexLabelTextBlock.x-b||Ks>vn+b||$s>Wr+b||ve<yr-b)}Ks?(0>wi&&(wi=An),xn!==wi&&(mi=xn,bi+=-Qe),An%Math.max(w.length/10,3)===0&&(de=!0)):de=!0,de&&0<bi&&0<=wi&&0<=mi&&(ti(bi,wi,mi),mi=wi=-1,bi=0)}}0<bi&&ti(bi,wi,mi)})()}}function I(){if(N.plotArea.layoutManager.reset(),N.title&&(N.title.dockInsidePlotArea||N.title.horizontalAlign==="center"&&N.title.verticalAlign==="center")&&N.title.render(),N.subtitles)for(var Vt=0;Vt<N.subtitles.length;Vt++){var Wt=N.subtitles[Vt];(Wt.dockInsidePlotArea||Wt.horizontalAlign==="center"&&Wt.verticalAlign==="center")&&Wt.render()}N.legend&&(N.legend.dockInsidePlotArea||N.legend.horizontalAlign==="center"&&N.legend.verticalAlign==="center")&&(N.legend.setLayout(),N.legend.render())}var N=this;if(!(0>=r.dataSeriesIndexes.length)){var M=this.data[r.dataSeriesIndexes[0]],w=M.dataPoints,b=10,P=this.plotArea,c=M.dataPointEOs,L=2,V,U=1.3,E=20/180*Math.PI,G=6,j={x:(P.x2+P.x1)/2,y:(P.y2+P.y1)/2},wt=0;r=!1;for(var gt=0;gt<w.length;gt++)wt+=Math.abs(w[gt].y),!r&&typeof w[gt].indexLabel<"u"&&w[gt].indexLabel!==null&&0<w[gt].indexLabel.toString().length&&(r=!0),!r&&typeof w[gt].label<"u"&&w[gt].label!==null&&0<w[gt].label.toString().length&&(r=!0);if(wt!==0){r=r||typeof M.indexLabel<"u"&&M.indexLabel!==null&&0<M.indexLabel.toString().length;var _t=M.indexLabelPlacement!=="inside"&&r?.75*Math.min(P.width,P.height)/2:.92*Math.min(P.width,P.height)/2;M.radius&&(_t=tt(M.radius,_t));var Qt=typeof M.innerRadius<"u"&&M.innerRadius!==null?tt(M.innerRadius,_t):.7*_t,se=Math.min(Qt/_t,(_t-1)/_t);this.pieDoughnutClickHandler=function(Vt){N.isAnimating||!p(this.explodeOnClick)&&!this.explodeOnClick||(Vt=Vt.dataPoint,Vt.exploded=!Vt.exploded,1<this.dataPoints.length&&N._animator.animate(0,500,function(Wt){l(Wt,!0),I(),N.dispatchEvent("dataAnimationIterationEnd",{chart:N}),N.dispatchEvent("dataAnimationEnd",{chart:N})}))},f(),_(),_(),_(),_(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,function(Vt){var Wt=N.plotArea.ctx;Wt.clearRect(P.x1,P.y1,P.width,P.height),Wt.fillStyle=N.backgroundColor,Wt.fillRect(P.x1,P.y1,P.width,P.height);for(var Wt=c[0].startAngle+2*Math.PI*Vt,Nt=0;Nt<w.length;Nt++){var Ft=Nt===0?c[Nt].startAngle:vt,vt=Ft+(c[Nt].endAngle-c[Nt].startAngle),Ht=!1;vt>Wt&&(vt=Wt,Ht=!0);var me=w[Nt].color?w[Nt].color:M._colorSet[Nt%M._colorSet.length];if(vt>Ft&&un(N.plotArea.ctx,c[Nt].center,c[Nt].radius,me,M.type,Ft,vt,M.fillOpacity,c[Nt].percentInnerRadius),Ht)break}I(),N.dispatchEvent("dataAnimationIterationEnd",{chart:N}),1<=Vt&&N.dispatchEvent("dataAnimationEnd",{chart:N})},function(){N.disableToolTip=!1,N._animator.animate(0,N.animatedRender?500:0,function(Vt){l(Vt,!1),I(),N.dispatchEvent("dataAnimationIterationEnd",{chart:N})}),N.dispatchEvent("dataAnimationEnd",{chart:N})}),M.radius=_t,M.type==="doughnut"&&(M.innerRadius=Qt)}}};var on=function(r,f,l,o){typeof l>"u"&&(l=1),0>=Math.round(f.y4-f.y1)||(r.save(),r.globalAlpha=l,r.beginPath(),r.moveTo(Math.round(f.x1),Math.round(f.y1)),r.lineTo(Math.round(f.x2),Math.round(f.y2)),r.lineTo(Math.round(f.x3),Math.round(f.y3)),r.lineTo(Math.round(f.x4),Math.round(f.y4)),f.x5!=="undefined"&&(r.lineTo(Math.round(f.x5),Math.round(f.y5)),r.lineTo(Math.round(f.x6),Math.round(f.y6))),r.closePath(),r.fillStyle=o||f.color,r.fill(),r.globalAplha=1,r.restore())};Y.prototype.renderFunnel=function(r){function f(){for(var Se=0,Me=[],He=0;He<G.length;He++){if(typeof G[He].y>"u")return-1;G[He].y=typeof G[He].y=="number"?G[He].y:0,Se+=Math.abs(G[He].y)}if(Se===0)return-1;for(He=Me[0]=0;He<G.length;He++)Me.push(Math.abs(G[He].y)*Qt/Se);return Me}function l(){var Se=Ai,Me=hi,He=ti,je=wi,Ze,ki;Ze=Ft,ki=vt-me,je=Math.abs((ki-Ze)*(Me-Se+(je-He))/2),He=wi-ti,Ze=ki-Ze,ki=He*(ki-vt),ki=Math.abs(ki),ki=je+ki;for(var je=[],Zi=0,Ji=0;Ji<G.length;Ji++){if(typeof G[Ji].y>"u")return-1;G[Ji].y=typeof G[Ji].y=="number"?G[Ji].y:0,Zi+=Math.abs(G[Ji].y)}if(Zi===0)return-1;for(var Ki=je[0]=0,Ge=0,tn,_n,Me=Me-Se,Ki=!1,Ji=0;Ji<G.length;Ji++)Se=Math.abs(G[Ji].y)*ki/Zi,Ki?tn=Number(He.toFixed(3))==0?0:Se/He:(_n=In*In*Me*Me-4*Math.abs(In)*Se,0>_n?(_n=He,Ki=(Me+_n)*(Ze-Ge)/2,Se-=Ki,tn=Ze-Ge,Ge+=Ze-Ge,tn+=_n==0?0:Se/_n,Ge+=Se/_n,Ki=!0):(tn=(Math.abs(In)*Me-Math.sqrt(_n))/2,_n=Me-2*tn/Math.abs(In),Ge+=tn,Ge>Ze&&(Ge-=tn,_n=He,Ki=(Me+_n)*(Ze-Ge)/2,Se-=Ki,tn=Ze-Ge,Ge+=Ze-Ge,tn+=Se/_n,Ge+=Se/_n,Ki=!0),Me=_n)),je.push(tn);return je}function o(){if(E&&G){for(var Se,Me,He,je,Ze,ki,Zi,Ji,Ge,tn,_n,Ki,gi,Ii,si,Si,Pn,pn,ln=[],zs=[],Ln={percent:null,total:null},so=null,Ri=0;Ri<G.length;Ri++)pn=de[Ri],pn=typeof pn.x5<"u"?(pn.y2+pn.y4)/2:(pn.y2+pn.y3)/2,pn=c(pn).x2+1,ln[Ri]=Nt-(isNaN(pn)?0:pn)-Qe;pn=.5*Qe;for(var Ri=0,Pa=G.length-1;Ri<G.length||0<=Pa;Ri++,Pa--)Me=E.reversed?G[Pa]:G[Ri],Se=Me.color?Me.color:E.reversed?E._colorSet[(G.length-1-Ri)%E._colorSet.length]:E._colorSet[Ri%E._colorSet.length],He=Me.indexLabelPlacement||E.indexLabelPlacement||"outside",Pn=Me.indexLabelTextAlign||E.indexLabelTextAlign||"left",je=Me.indexLabelBackgroundColor||E.indexLabelBackgroundColor||(ut?"transparent":null),Ze=Me.indexLabelBorderColor||E.indexLabelBorderColor||(ut?"transparent":null),ki=p(Me.indexLabelBorderThickness)?E.indexLabelBorderThickness:Me.indexLabelBorderThickness,Zi=p(Me.indexLabelPadding)?E.options.indexLabelPadding?E.options.indexLabelPadding:E.indexLabelPadding:Me.indexLabelPadding,Ji=Me.indexLabelFontColor||E.indexLabelFontColor||"#979797",Ge=p(Me.indexLabelFontSize)?E.indexLabelFontSize:Me.indexLabelFontSize,tn=Me.indexLabelFontStyle||E.indexLabelFontStyle||"normal",_n=Me.indexLabelFontFamily||E.indexLabelFontFamily||"arial",Ki=Me.indexLabelFontWeight||E.indexLabelFontWeight||"normal",Se=Me.indexLabelLineColor||E.options.indexLabelLineColor||Se,gi=typeof Me.indexLabelLineThickness=="number"?Me.indexLabelLineThickness:typeof E.indexLabelLineThickness=="number"?E.indexLabelLineThickness:2,Ii=Me.indexLabelLineDashType||E.indexLabelLineDashType||"solid",si=typeof Me.indexLabelWrap<"u"?Me.indexLabelWrap:typeof E.indexLabelWrap<"u"?E.indexLabelWrap:!0,Si=E.dataPointIds[Ri],U._eventManager.objectMap[Si]={id:Si,objectType:"dataPoint",dataPointIndex:Ri,dataSeriesIndex:0,funnelSection:de[E.reversed?G.length-1-Ri:Ri]},E.indexLabelPlacement==="inside"&&(ln[Ri]=Ri!==xn?E.reversed?de[Ri].x2-de[Ri].x1:de[Ri].x3-de[Ri].x4:de[Ri].x3-de[Ri].x6,20>ln[Ri]&&(ln[Ri]=Ri!==xn&&E.reversed?de[Ri].x3-de[Ri].x4:de[Ri].x2-de[Ri].x1,ln[Ri]/=2)),Si=Me.indexLabelMaxWidth?Me.indexLabelMaxWidth:E.options.indexLabelMaxWidth?E.indexLabelMaxWidth:ln[Ri],(Si>ln[Ri]||0>Si)&&(Si=ln[Ri]),zs[Ri]=E.indexLabelPlacement==="inside"?si?Math.max(de[Ri].height,Ge):1.5*Ge+(typeof Zi=="object"?(Zi.top||0)+(Zi.bottom||0):2*Zi):!1,Ln=U.getPercentAndTotal(E,Me),(E.indexLabelFormatter||Me.indexLabelFormatter)&&(so={chart:U.options,dataSeries:E,dataPoint:Me,total:Ln.total,percent:Ln.percent}),Me=Me.indexLabelFormatter?Me.indexLabelFormatter(so):Me.indexLabel?U.replaceKeywordsWithValue(Me.indexLabel,Me,E,Ri):E.indexLabelFormatter?E.indexLabelFormatter(so):E.indexLabel?U.replaceKeywordsWithValue(E.indexLabel,Me,E,Ri):Me.label?Me.label:"",0>=gi&&(gi=0),1e3>Si&&1e3-Si<pn&&(Si+=1e3-Si),p(E.options.indexLabelMaxWidth)&&(E.indexLabelMaxWidth=p(E.indexLabelMaxWidth)?Si:Math.max(Si,E.indexLabelMaxWidth)),Ht.roundRect||a(Ht),He=new ct(Ht,{fontSize:Ge,fontFamily:_n,fontColor:Ji,fontStyle:tn,fontWeight:Ki,horizontalAlign:He,textAlign:Pn,backgroundColor:je,borderColor:Ze,borderThickness:ki,maxWidth:Si,maxHeight:zs[Ri]===!1?(si?4.28571429*Ge:1.5*Ge)+(typeof Zi=="object"?(Zi.top||0)+(Zi.bottom||0):2*Zi):zs[Ri],text:Me,padding:Zi,textBaseline:"middle"}),He.measureText(),He.height=He.height===2*He.padding?0:He.height,He.width=He.width===2*He.padding?0:He.width,ve.push({textBlock:He,id:E.reversed?Pa:Ri,isDirty:!1,lineColor:Se,lineThickness:gi,lineDashType:Ii,height:He.height<He.maxHeight?He.height:He.maxHeight,width:He.width<He.maxWidth?He.width:He.maxWidth})}}function d(){var Se,Me,He,je,Ze,ki=[];Ze=!1,He=0;for(var Zi,Ji=Nt-hi-Qe/2,Ji=E.options.indexLabelMaxWidth?E.indexLabelMaxWidth>Ji?Ji:E.indexLabelMaxWidth:Ji,Ge=ve.length-1;0<=Ge;Ge--)Zi=G[ve[Ge].id],He=ve[Ge],je=He.textBlock,Me=(Se=P(Ge)<de.length?ve[P(Ge)]:null)?Se.textBlock:null,He=He.height,Se&&je.y+He+$s>Me.y&&(Ze=!0),He=Zi.indexLabelMaxWidth||Ji,(He>Ji||0>He)&&(He=Ji),ki.push(He);if(Ze)for(Ge=ve.length-1;0<=Ge;Ge--)Se=de[Ge],ve[Ge].textBlock.maxWidth=ki[ki.length-(Ge+1)],ve[Ge].textBlock.measureText(),ve[Ge].textBlock.height=ve[Ge].textBlock.height===2*ve[Ge].textBlock.padding?0:ve[Ge].textBlock.height,ve[Ge].textBlock.width=ve[Ge].textBlock.width===2*ve[Ge].textBlock.padding?0:ve[Ge].textBlock.width,ve[Ge].textBlock.x=Nt-Ji,He=ve[Ge].textBlock.height<ve[Ge].textBlock.maxHeight?ve[Ge].textBlock.height:ve[Ge].textBlock.maxHeight,Ze=ve[Ge].textBlock.width<ve[Ge].textBlock.maxWidth?ve[Ge].textBlock.width:ve[Ge].textBlock.maxWidth,ve[Ge].height=He,ve[Ge].width=Ze,He=typeof Se.x5<"u"?(Se.y2+Se.y4)/2:(Se.y2+Se.y3)/2,ve[Ge].textBlock.y=He-ve[Ge].height/2,E.reversed?(ve[Ge].textBlock.y+ve[Ge].height>Pi+wt&&(ve[Ge].textBlock.y=Pi+wt-ve[Ge].height),ve[Ge].textBlock.y<bi-wt&&(ve[Ge].textBlock.y=bi-wt)):(ve[Ge].textBlock.y<Pi-wt&&(ve[Ge].textBlock.y=Pi-wt),ve[Ge].textBlock.y+ve[Ge].height>bi+wt&&(ve[Ge].textBlock.y=bi+wt-ve[Ge].height))}function x(){var Se,Me,He,je;if(E.indexLabelPlacement!=="inside")for(var Ze=0;Ze<de.length;Ze++)ve[Ze].textBlock.text.length==0?ve[Ze].isDirty=!0:(Se=de[Ze],He=typeof Se.x5<"u"?(Se.y2+Se.y4)/2:(Se.y2+Se.y3)/2,Me=E.reversed?typeof Se.x5<"u"&&He>mi?c(He).x2+1:(Se.x2+Se.x3)/2+1:typeof Se.x5<"u"?He<mi?c(He).x2+1:(Se.x4+Se.x3)/2+1:(Se.x2+Se.x3)/2+1,ve[Ze].textBlock.x=Me+Qe,ve[Ze].textBlock.y=He-ve[Ze].height/2,E.reversed?(ve[Ze].textBlock.y+ve[Ze].height>Pi+wt&&(ve[Ze].textBlock.y=Pi+wt-ve[Ze].height),ve[Ze].textBlock.y<bi-wt&&(ve[Ze].textBlock.y=bi-wt)):(ve[Ze].textBlock.y<Pi-wt&&(ve[Ze].textBlock.y=Pi-wt),ve[Ze].textBlock.y+ve[Ze].height>bi+wt&&(ve[Ze].textBlock.y=bi+wt-ve[Ze].height)));else for(Ze=0;Ze<de.length;Ze++)ve[Ze].textBlock.text.length==0?ve[Ze].isDirty=!0:(Se=de[Ze],Me=Se.height,He=ve[Ze].height,je=ve[Ze].width,Me>=He?(Me=Ze!=xn?(Se.x4+Se.x3)/2-je/2:(Se.x5+Se.x4)/2-je/2,He=Ze!=xn?(Se.y1+Se.y3)/2-He/2:(Se.y1+Se.y4)/2-He/2,ve[Ze].textBlock.x=Me,ve[Ze].textBlock.y=He):ve[Ze].isDirty=!0)}function _(){function Se(gi,Ii){var si;if(0>gi||gi>=ve.length)return 0;var Si,Pn=ve[gi].textBlock;return 0>Ii?(Ii*=-1,Si=b(gi),si=I(Si,gi),si>=Ii?(Pn.y-=Ii,Ii):gi==0?(0<si&&(Pn.y-=si),si):(si+=Se(Si,-(Ii-si)),0<si&&(Pn.y-=si),si)):(Si=P(gi),si=I(gi,Si),si>=Ii?(Pn.y+=Ii,Ii):gi==de.length-1?(0<si&&(Pn.y+=si),si):(si+=Se(Si,Ii-si),0<si&&(Pn.y+=si),si))}function Me(){var gi,Ii,si,Si,Pn=0,pn;Si=(vt-Ft+2*wt)/tn,pn=tn;for(var ln,zs=1;zs<pn;zs++){si=zs*Si;for(var Ln=ve.length-1;0<=Ln;Ln--)!ve[Ln].isDirty&&ve[Ln].textBlock.y<si&&ve[Ln].textBlock.y+ve[Ln].height>si&&(ln=P(Ln),!(ln>=ve.length-1)&&ve[Ln].textBlock.y+ve[Ln].height+$s>ve[ln].textBlock.y&&(ve[Ln].textBlock.y=ve[Ln].textBlock.y+ve[Ln].height-si>si-ve[Ln].textBlock.y?si+1:si-ve[Ln].height-1))}for(ln=de.length-1;0<ln;ln--)if(!ve[ln].isDirty){if(si=b(ln),0>si&&(si=0,ve[si].isDirty))break;if(ve[ln].textBlock.y<ve[si].textBlock.y+ve[si].height){for(Ii=Ii||ln,Si=ln,pn=0;ve[Si].textBlock.y<ve[si].textBlock.y+ve[si].height+$s;){if(gi=gi||ve[Si].textBlock.y+ve[Si].height,pn+=ve[Si].height,pn+=$s,Si=si,0>=Si){Si=0,pn+=ve[Si].height;break}if(si=b(Si),0>si){Si=0,pn+=ve[Si].height;break}}if(Si!=ln){Pn=ve[Si].textBlock.y,gi-=Pn,gi=pn-gi,Pn=He(gi,Ii,Si);break}}}return Pn}function He(gi,Ii,si){var Si=[],Pn=0,pn=0;for(gi=Math.abs(gi);si<=Ii;si++)Si.push(de[si]);for(Si.sort(function(ln,zs){return ln.height-zs.height}),si=0;si<Si.length&&(Ii=Si[si],Pn<gi);si++)pn++,Pn+=ve[Ii.id].height+$s,ve[Ii.id].textBlock.text="",ve[Ii.id].indexLabelText="",ve[Ii.id].isDirty=!0,ve[Ii.id].textBlock.measureText();return pn}for(var je,Ze,ki,Zi,Ji,Ge,tn=1,_n=0;_n<2*tn;_n++){for(var Ki=ve.length-1;0<=Ki&&(0<=b(Ki)&&b(Ki),ki=ve[Ki],Zi=ki.textBlock,Ge=(Ji=P(Ki)<de.length?ve[P(Ki)]:null)?Ji.textBlock:null,je=+ki.height.toFixed(6),Ze=+Zi.y.toFixed(6),!(!ki.isDirty&&Ji&&Ze+je+$s>+Ge.y.toFixed(6)&&(je=Zi.y+je+$s-Ge.y,Ze=Se(Ki,-je),Ze<je&&(0<Ze&&(je-=Ze),Ze=Se(P(Ki),je),Ze!=je))));Ki--);Me()}}function I(Se,Me){return(Me<de.length?ve[Me].textBlock.y:E.reversed?Pi+wt:bi+wt)-(0>Se?E.reversed?bi-wt:Pi-wt:ve[Se].textBlock.y+ve[Se].height+$s)}function N(Se,Me,He){var je,Ze,ki,Zi=[],Ji=wt,Ge=[];if(Me!==-1&&(0<=vn.indexOf(Me)?(Ze=vn.indexOf(Me),vn.splice(Ze,1)):(vn.push(Me),vn=vn.sort(function(Ki,gi){return Ki-gi}))),vn.length===0)Zi=Wr;else{Ze=wt*(vn.length!=1||vn[0]!=0&&vn[0]!=de.length-1?2:1)/M();for(var tn=0;tn<de.length;tn++){if(vn.length==1&&vn[0]==0){if(tn===0){Zi.push(Wr[tn]),je=Ji;continue}}else tn===0&&(je=-1*Ji);Zi.push(Wr[tn]+je),(0<=vn.indexOf(tn)||tn<de.length&&0<=vn.indexOf(tn+1))&&(je+=Ze)}}ki=function(){for(var Ki=[],gi=0;gi<de.length;gi++)Ki.push(Zi[gi]-de[gi].y1);return Ki}();var _n={startTime:new Date().getTime(),duration:He||500,easingFunction:function(Ki,gi,Ii,si){return Xe.easing.easeOutQuart(Ki,gi,Ii,si)},changeSection:function(Ki){for(var gi,Ii,si=0;si<de.length;si++)gi=ki[si],Ii=de[si],gi*=Ki,typeof Ge[si]>"u"&&(Ge[si]=0),0>Ge&&(Ge*=-1),Ii.y1+=gi-Ge[si],Ii.y2+=gi-Ge[si],Ii.y3+=gi-Ge[si],Ii.y4+=gi-Ge[si],Ii.y5&&(Ii.y5+=gi-Ge[si],Ii.y6+=gi-Ge[si]),Ge[si]=gi}};Se._animator.animate(0,He,function(Ki){var gi=Se.plotArea.ctx||Se.ctx;yr=!0,gi.clearRect(j.x1,j.y1,j.x2-j.x1,j.y2-j.y1),gi.fillStyle=Se.backgroundColor,gi.fillRect(j.x1,j.y1,j.width,j.height),_n.changeSection(Ki,Me);var Ii={};for(Ii.dataSeries=E,Ii.dataPoint=E.reversed?E.dataPoints[G.length-1-Me]:E.dataPoints[Me],Ii.index=E.reversed?G.length-1-Me:Me,Se.toolTip.highlightObjects([Ii]),Ii=0;Ii<de.length;Ii++)on(gi,de[Ii],E.fillOpacity);V(gi),Vt&&(E.indexLabelPlacement!=="inside"?w(gi):x(),L(gi)),1<=Ki&&(yr=!1)},null,Xe.easing.easeOutQuart)}function M(){for(var Se=0,Me=0;Me<de.length-1;Me++)(0<=vn.indexOf(Me)||0<=vn.indexOf(Me+1))&&Se++;return Se}function w(Se){for(var Me,He,je,Ze,ki=0;ki<de.length;ki++)Ze=ve[ki].lineThickness%2===1?.5:0,He=((de[ki].y2+de[ki].y4)/2<<0)+Ze,Me=c(He).x2-1,isNaN(Me)&&Math.round(de[ki].x1)===Math.round(de[ki].x4)&&Math.round(de[ki].x2)===Math.round(de[ki].x3)&&(Me=de[ki].x2),je=ve[ki].textBlock.x,Ze=(ve[ki].textBlock.y+ve[ki].height/2<<0)+Ze,ve[ki].isDirty||ve[ki].lineThickness==0||(Se.strokeStyle=ve[ki].lineColor,Se.lineWidth=ve[ki].lineThickness,Se.setLineDash&&Se.setLineDash(y(ve[ki].lineDashType,ve[ki].lineThickness)),Se.beginPath(),Se.moveTo(Me,He),Se.lineTo(je,Ze),Se.stroke())}function b(Se){for(Se-=1;-1<=Se&&Se!=-1&&ve[Se].isDirty;Se--);return Se}function P(Se){for(Se+=1;Se<=de.length&&Se!=de.length&&ve[Se].isDirty;Se++);return Se}function c(Se){for(var Me,He=0;He<G.length;He++)if(de[He].y1<Se&&de[He].y4>Se){Me=de[He];break}return Me?(Se=Me.y6&&Se>Me.y6?Me.x3+(Me.x4-Me.x3)/(Me.y4-Me.y3)*(Se-Me.y3):Me.x2+(Me.x3-Me.x2)/(Me.y3-Me.y2)*(Se-Me.y2),{x1:Se,x2:Se}):-1}function L(Se){for(var Me=0;Me<de.length;Me++)ve[Me].isDirty||(Se&&(ve[Me].textBlock.ctx=Se),ve[Me].textBlock.y+=ve[Me].textBlock._lineHeight/2,ve[Me].textBlock.render(!0),ve[Me].textBlock.y-=ve[Me].textBlock._lineHeight/2)}function V(Se){if(U.plotArea.layoutManager.reset(),Se.roundRect||a(Se),U.title&&(U.title.dockInsidePlotArea||U.title.horizontalAlign==="center"&&U.title.verticalAlign==="center")&&(U.title.ctx=Se,U.title.render()),U.subtitles)for(var Me=0;Me<U.subtitles.length;Me++){var He=U.subtitles[Me];(He.dockInsidePlotArea||He.horizontalAlign==="center"&&He.verticalAlign==="center")&&(U.subtitles.ctx=Se,He.render())}U.legend&&(U.legend.dockInsidePlotArea||U.legend.horizontalAlign==="center"&&U.legend.verticalAlign==="center")&&(U.legend.ctx=Se,U.legend.setLayout(),U.legend.render()),Zt.fNg&&Zt.fNg(U)}var U=this;if(!(0>=r.dataSeriesIndexes.length)){for(var E=this.data[r.dataSeriesIndexes[0]],G=E.dataPoints,j=this.plotArea,wt=.025*j.width,gt=.01*j.width,_t=0,Qt=j.height-2*wt-4,se=Math.min(j.width-2*gt,2.8*j.height),Vt=!1,Wt=0;Wt<G.length;Wt++)!Vt&&typeof G[Wt].indexLabel<"u"&&G[Wt].indexLabel!==null&&0<G[Wt].indexLabel.toString().length&&(Vt=!0),!Vt&&typeof G[Wt].label<"u"&&G[Wt].label!==null&&0<G[Wt].label.toString().length&&(Vt=!0),(!Vt&&typeof E.indexLabelFormatter=="function"||typeof G[Wt].indexLabelFormatter=="function")&&(Vt=!0);Vt=Vt||typeof E.indexLabel<"u"&&E.indexLabel!==null&&0<E.indexLabel.toString().length,E.indexLabelPlacement!=="inside"&&Vt||(gt=(j.width-.75*se)/2);var Wt=j.x1+gt,Nt=j.x2-gt,Ft=j.y1+wt+2,vt=j.y2-wt-2,Ht=r.targetCanvasCtx||this.plotArea.ctx||this.ctx;if(E.length!=0&&E.dataPoints&&E.visible&&G.length!==0){var me,Pt;r=75*se/100;var Qe=30*(Nt-r)/100;E.type==="funnel"?(me=p(E.options.neckHeight)?.35*Qt:E.neckHeight,Pt=p(E.options.neckWidth)?.25*r:E.neckWidth,typeof me=="string"&&me.match(/%$/)?(me=parseInt(me),me=me*Qt/100):me=parseInt(me),typeof Pt=="string"&&Pt.match(/%$/)?(Pt=parseInt(Pt),Pt=Pt*r/100):Pt=parseInt(Pt),me>Qt?me=Qt:0>=me&&(me=0),Pt>r?Pt=r-.5:0>=Pt&&(Pt=0)):E.type==="pyramid"&&(Pt=me=0,E.reversed=!E.reversed);var gt=Wt+r/2,Ai=Wt,hi=Wt+r,Pi=E.reversed?vt:Ft,ti=gt-Pt/2,wi=gt+Pt/2,mi=E.reversed?Ft+me:vt-me,bi=E.reversed?Ft:vt;Pt=E.valueRepresents=E.valueRepresents?E.valueRepresents:"height",Wt=[],r=[];var de=[],gt=[],An=Ft,xn,In=(mi-Pi)/(ti-Ai),Ks=-In,se=Pt==="area"?l():f();if(se!==-1){if(E.reversed)for(gt.push(An),Pt=se.length-1;0<Pt;Pt--)An+=se[Pt],gt.push(Math.round(An));else for(Pt=0;Pt<se.length;Pt++)An+=se[Pt],gt.push(Math.round(An));if(E.reversed)for(Pt=0;Pt<se.length;Pt++)gt[Pt]<mi?(Wt.push(ti),r.push(wi),xn=Pt):(Wt.push((gt[Pt]-Pi+In*Ai)/In),r.push((gt[Pt]-Pi+Ks*hi)/Ks));else for(Pt=0;Pt<se.length;Pt++)gt[Pt]<mi?(Wt.push((gt[Pt]-Pi+In*Ai)/In),r.push((gt[Pt]-Pi+Ks*hi)/Ks),xn=Pt):(Wt.push(ti),r.push(wi));for(Pt=0;Pt<se.length-1;Pt++)An=E.reversed?G[G.length-1-Pt].color?G[G.length-1-Pt].color:E._colorSet[(G.length-1-Pt)%E._colorSet.length]:G[Pt].color?G[Pt].color:E._colorSet[Pt%E._colorSet.length],Pt===xn?de.push({x1:Wt[Pt],y1:gt[Pt],x2:r[Pt],y2:gt[Pt],x3:wi,y3:mi,x4:r[Pt+1],y4:gt[Pt+1],x5:Wt[Pt+1],y5:gt[Pt+1],x6:ti,y6:mi,id:Pt,height:gt[Pt+1]-gt[Pt],color:An}):de.push({x1:Wt[Pt],y1:gt[Pt],x2:r[Pt],y2:gt[Pt],x3:r[Pt+1],y3:gt[Pt+1],x4:Wt[Pt+1],y4:gt[Pt+1],id:Pt,height:gt[Pt+1]-gt[Pt],color:An}),E.dataPointEOs[Pt]&&de[Pt]&&(E.dataPointEOs[Pt].sectionsofFunnel=de[Pt]);var $s=2,ve=[],yr=!1,vn=[],Wr=[],Wt=!1;for(r=r=0,v(vn),Pt=0;Pt<G.length;Pt++)G[Pt].exploded&&(Wt=!0,E.reversed?vn.push(G.length-1-Pt):vn.push(Pt));if(Ht.clearRect(j.x1,j.y1,j.width,j.height),Ht.fillStyle=U.backgroundColor,Ht.fillRect(j.x1,j.y1,j.width,j.height),Vt&&E.visible&&(o(),x(),E.indexLabelPlacement!=="inside")){for(d(),_(),Pt=0;Pt<G.length;Pt++)ve[Pt].isDirty||(r=ve[Pt].textBlock.x+ve[Pt].width,r=(Nt-r)/2,Pt==0&&(_t=r),_t>r&&(_t=r));for(Pt=0;Pt<de.length;Pt++)de[Pt].x1+=_t,de[Pt].x2+=_t,de[Pt].x3+=_t,de[Pt].x4+=_t,de[Pt].x5&&(de[Pt].x5+=_t,de[Pt].x6+=_t),ve[Pt].textBlock.x+=_t}for(Pt=0;Pt<de.length;Pt++)_t=de[Pt],on(Ht,_t,E.fillOpacity),Wr.push(_t.y1);if(V(Ht),Vt&&E.visible&&(E.indexLabelPlacement==="inside"||U.animationEnabled||w(Ht),U.animationEnabled||L()),!Vt)for(Pt=0;Pt<G.length;Pt++)_t=E.dataPointIds[Pt],r={id:_t,objectType:"dataPoint",dataPointIndex:Pt,dataSeriesIndex:0,funnelSection:de[E.reversed?G.length-1-Pt:Pt]},U._eventManager.objectMap[_t]=r;return(!U.animationEnabled&&Wt||U.animationEnabled&&!U.animatedRender)&&N(U,-1,0),this.funnelPyramidClickHandler=function(je){var Ze=-1;!yr&&!U.isAnimating&&(p(je.dataSeries.explodeOnClick)||je.dataSeries.explodeOnClick)&&(Ze=E.reversed?G.length-1-je.dataPointIndex:je.dataPointIndex,0<=Ze)&&(je=Ze,(E.type==="funnel"||E.type==="pyramid")&&(E.reversed?G[G.length-1-je].exploded=!G[G.length-1-je].exploded:G[je].exploded=!G[je].exploded),N(U,Ze,500))},{source:Ht,dest:this.plotArea.ctx,animationCallback:function(je,Ze){Xe.fadeInAnimation(je,Ze),1<=je&&(N(U,-1,500),V(U.plotArea.ctx||U.ctx))},easingFunction:Xe.easing.easeInQuad,animationBase:0}}}}},Y.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r){window.setTimeout(r,1e3/60)}}(),Y.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,Y.prototype.set=function(r,f,l){l=typeof l>"u"?!0:l,r==="options"?(this.options=f,l&&this.render()):Y.base.set.call(this,r,f,l)},Y.prototype.exportChart=function(r){r=typeof r>"u"?{}:r;var f=r.format?r.format:"png",l=r.fileName?r.fileName:this.exportFileName;if(r.toDataURL)return this.canvas.toDataURL("image/"+f);var o=this.canvas;if(o&&f&&l){l=l+"."+f,r="image/"+f;var o=o.toDataURL(r),d=!1,x=document.createElement("a");if(x.download=l,x.href=o,typeof Blob<"u"&&new Blob){for(var _=o.replace(/^data:[a-z\/]*;base64,/,""),_=atob(_),I=new ArrayBuffer(_.length),I=new Uint8Array(I),N=0;N<_.length;N++)I[N]=_.charCodeAt(N);f=new Blob([I.buffer],{type:"image/"+f});try{window.navigator.msSaveBlob(f,l),d=!0}catch{x.dataset.downloadurl=[r,x.download,x.href].join(":"),x.href=window.URL.createObjectURL(f)}}if(!d)try{event=document.createEvent("MouseEvents"),event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),x.dispatchEvent?x.dispatchEvent(event):x.fireEvent&&x.fireEvent("onclick")}catch{f=window.open(),f.document.write("<img src='"+o+"'></img><div>Please right click on the image and save it to your device</div>"),f.document.close()}}},Y.prototype.print=function(){var r=this.exportChart({toDataURL:!0}),f=document.createElement("iframe");f.setAttribute("class","canvasjs-chart-print-frame"),pt(f,{position:"absolute",width:"100%",border:"0px",margin:"0px 0px 0px 0px",padding:"0px 0px 0px 0px"}),f.style.height=this.height+"px",this._canvasJSContainer.appendChild(f);var l=this,o=f.contentWindow||f.contentDocument.document||f.contentDocument;o.document.open(),o.document.write(`<!DOCTYPE HTML>
<html><body><img src="`+r+'"/><body/></html>'),o.document.body&&o.document.body.style&&(o.document.body.style.margin="0px 0px 0px 0px",o.document.body.style.padding="0px 0px 0px 0px"),o.document.close(),setTimeout(function(){o.focus(),o.print(),setTimeout(function(){l._canvasJSContainer.removeChild(f)},1e3)},500)},Y.prototype.getPercentAndTotal=function(r,f){var l=null,o=null,d=l=null;if(0<=r.type.indexOf("stacked"))o=0,l=f.x.getTime?f.x.getTime():f.x,l in r.plotUnit.yTotals&&(o=r.plotUnit.yTotals[l],l=r.plotUnit.yAbsTotals[l],d=isNaN(f.y)||l===0?0:100*(f.y/l));else if(r.type==="pie"||r.type==="doughnut"||r.type==="funnel"||r.type==="pyramid"){for(l=o=0;l<r.dataPoints.length;l++)isNaN(r.dataPoints[l].y)||(o+=r.dataPoints[l].y);d=isNaN(f.y)?0:100*(f.y/o)}return{percent:d,total:o}},Y.prototype.replaceKeywordsWithValue=function(r,f,l,o,d){var x=this;if(d=typeof d>"u"?0:d,(0<=l.type.indexOf("stacked")||l.type==="pie"||l.type==="doughnut"||l.type==="funnel"||l.type==="pyramid")&&(0<=r.indexOf("#percent")||0<=r.indexOf("#total"))){var N="#percent",I="#total",_=this.getPercentAndTotal(l,f),I=isNaN(_.total)?I:_.total,N=isNaN(_.percent)?N:_.percent;do{if(_="",l.percentFormatString)_=l.percentFormatString;else{var _="#,##0.",M=Math.max(Math.ceil(Math.log(1/Math.abs(N))/Math.LN10),2);(isNaN(M)||!isFinite(M))&&(M=2);for(var w=0;w<M;w++)_+="#";l.percentFormatString=_}r=r.replace("#percent",ne(N,_,x._cultureInfo)),r=r.replace("#total",ne(I,l.yValueFormatString?l.yValueFormatString:"#,##0.########",x._cultureInfo))}while(0<=r.indexOf("#percent")||0<=r.indexOf("#total"))}return r.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,function(b){if(b[0]==='"'&&b[b.length-1]==='"'||b[0]==="'"&&b[b.length-1]==="'")return b.slice(1,b.length-1);b=s(b.slice(1,b.length-1)),b=b.replace("#index",d);var P=null;try{var c=b.match(/(.*?)\s*\[\s*(.*?)\s*\]/);c&&0<c.length&&(P=s(c[2]),b=s(c[1]))}catch{}if(c=null,b==="color")return l.type==="waterfall"?f.color?f.color:0<f.y?l.risingColor:l.fallingColor:l.type==="error"?l.color?l.color:l._colorSet[P%l._colorSet.length]:f.color?f.color:l.color?l.color:l._colorSet[o%l._colorSet.length];if(f.hasOwnProperty(b))c=f;else if(l.hasOwnProperty(b))c=l;else return"";return c=c[b],P!==null&&(c=c[P]),b==="x"?(l.axisX&&l.axisX.valueType==="dateTime"||l.xValueType==="dateTime"||f.x&&f.x.getTime)&&!l.axisX.logarithmic?ce(c,f.xValueFormatString?f.xValueFormatString:l.xValueFormatString?l.xValueFormatString:l.xValueFormatString=x.axisX&&x.axisX.autoValueFormatString?x.axisX.autoValueFormatString:"DD MMM YY",x._cultureInfo):ne(c,f.xValueFormatString?f.xValueFormatString:l.xValueFormatString?l.xValueFormatString:l.xValueFormatString="#,##0.########",x._cultureInfo):b==="y"?ne(c,f.yValueFormatString?f.yValueFormatString:l.yValueFormatString?l.yValueFormatString:l.yValueFormatString="#,##0.########",x._cultureInfo):b==="z"?ne(c,f.zValueFormatString?f.zValueFormatString:l.zValueFormatString?l.zValueFormatString:l.zValueFormatString="#,##0.########",x._cultureInfo):c})},n(Rt,H),Rt.prototype.setLayout=function(){var r=this.dockInsidePlotArea?this.chart.plotArea:this.chart,f=r.layoutManager.getFreeSpace(),l=null,o=0,d=0,x=0,_=0,I=this.markerMargin=this.chart.options.legend&&!p(this.chart.options.legend.markerMargin)?this.chart.options.legend.markerMargin:.3*this.fontSize;this.height=0;var N=[],M=[];this.verticalAlign==="top"||this.verticalAlign==="bottom"?(this.orientation="horizontal",l=this.verticalAlign,x=this.maxWidth=this.maxWidth!==null?this.maxWidth:f.width,_=this.maxHeight=this.maxHeight!==null?this.maxHeight:.5*f.height):this.verticalAlign==="center"&&(this.orientation="vertical",(this.horizontalAlign==="left"||this.horizontalAlign==="center"||this.horizontalAlign==="right")&&(l=this.horizontalAlign),x=this.maxWidth=this.maxWidth!==null?this.maxWidth:.5*f.width,_=this.maxHeight=this.maxHeight!==null?this.maxHeight:f.height),this.errorMarkerColor=[];for(var w=0;w<this.dataSeries.length;w++){var b=this.dataSeries[w];if(b.dataPoints&&b.dataPoints.length){if(b.type!=="pie"&&b.type!=="doughnut"&&b.type!=="funnel"&&b.type!=="pyramid"){var P=b.legendMarkerType=b.legendMarkerType?b.legendMarkerType:b.type!=="line"&&b.type!=="stepLine"&&b.type!=="spline"&&b.type!=="scatter"&&b.type!=="bubble"||!b.markerType?b.type==="error"&&b._linkedSeries?b._linkedSeries.legendMarkerType?b._linkedSeries.legendMarkerType:jt.getDefaultLegendMarker(b._linkedSeries.type):jt.getDefaultLegendMarker(b.type):b.markerType,c=b.legendText?b.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:b,dataPoint:null}):b.name,L=b.legendMarkerColor=b.legendMarkerColor?b.legendMarkerColor:b.markerColor?b.markerColor:b.type==="error"?p(b.whiskerColor)?b._colorSet[0]:b.whiskerColor:b._colorSet[0],V=b.markerSize||b.type!=="line"&&b.type!=="stepLine"&&b.type!=="spline"?.75*this.lineHeight:0,U=b.legendMarkerBorderColor?b.legendMarkerBorderColor:b.markerBorderColor,E=b.legendMarkerBorderThickness?b.legendMarkerBorderThickness:b.markerBorderThickness?Math.max(1,Math.round(.2*V)):0;b.type==="error"&&this.errorMarkerColor.push(L),c=b.legendText=this.chart.replaceKeywordsWithValue(c,b.dataPoints[0],b,w),P={markerType:P,markerColor:L,text:c,textBlock:null,chartType:b.type,markerSize:V,lineColor:b._colorSet[0],dataSeriesIndex:b.index,dataPointIndex:null,markerBorderColor:U,markerBorderThickness:E},N.push(P)}else for(var G=0;G<b.dataPoints.length;G++){var j=b.dataPoints[G],P=j.legendMarkerType?j.legendMarkerType:b.legendMarkerType?b.legendMarkerType:jt.getDefaultLegendMarker(b.type),c=j.legendText?j.legendText:j.name?j.name:b.legendText?b.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:b,dataPoint:j}):j.name?j.name:"DataPoint: "+(G+1),L=j.legendMarkerColor?j.legendMarkerColor:b.legendMarkerColor?b.legendMarkerColor:j.color?j.color:b.color?b.color:b._colorSet[G%b._colorSet.length],V=.75*this.lineHeight,U=j.legendMarkerBorderColor?j.legendMarkerBorderColor:b.legendMarkerBorderColor?b.legendMarkerBorderColor:j.markerBorderColor?j.markerBorderColor:b.markerBorderColor,E=j.legendMarkerBorderThickness?j.legendMarkerBorderThickness:b.legendMarkerBorderThickness?b.legendMarkerBorderThickness:j.markerBorderThickness||b.markerBorderThickness?Math.max(1,Math.round(.2*V)):0,c=this.chart.replaceKeywordsWithValue(c,j,b,G),P={markerType:P,markerColor:L,text:c,textBlock:null,chartType:b.type,markerSize:V,dataSeriesIndex:w,dataPointIndex:G,markerBorderColor:U,markerBorderThickness:E};(j.showInLegend||b.showInLegend&&j.showInLegend!==!1)&&N.push(P)}p(b.legendText)&&(b.legendText=b.name)}}if(this.reversed===!0&&N.reverse(),0<N.length){for(b=null,c=j=G=0,j=this.itemWidth!==null?this.itemMaxWidth!==null?Math.min(this.itemWidth,this.itemMaxWidth,x):this.itemMaxWidth=Math.min(this.itemWidth,x):this.itemMaxWidth!==null?Math.min(this.itemMaxWidth,x):this.itemMaxWidth=x,V=V===0?.75*this.lineHeight:V,j=(this.itemMaxWidth?this.itemMaxWidth:j)-(V+I),w=0;w<N.length;w++)P=N[w],L=j,(P.chartType==="line"||P.chartType==="spline"||P.chartType==="stepLine")&&(L-=2*.1*this.lineHeight),0>=_||typeof _>"u"||0>=L||typeof L>"u"||(this.orientation==="horizontal"?(P.textBlock=new ct(this.ctx,{x:0,y:0,maxWidth:L,maxHeight:this.itemWrap?_:this.lineHeight,angle:0,text:P.text,textAlign:this.itemTextAlign,fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),P.textBlock.measureText(),this.itemWidth!==null&&(P.textBlock.width=this.itemWidth-(V+I+(P.chartType==="line"||P.chartType==="spline"||P.chartType==="stepLine"?2*.1*this.lineHeight:0))),(!b||b.width+Math.round(P.textBlock.width+V+I+(b.width===0?0:this.horizontalSpacing)+(P.chartType==="line"||P.chartType==="spline"||P.chartType==="stepLine"?2*.1*this.lineHeight:0))>x)&&(b={items:[],width:0},M.push(b),this.height+=c,c=0),c=Math.max(c,P.textBlock.height?P.textBlock.height:this.lineHeight),P.textBlock.x=b.width,P.textBlock.y=0,b.width+=Math.round(P.textBlock.width+V+I+(b.width===0?0:this.horizontalSpacing)+(P.chartType==="line"||P.chartType==="spline"||P.chartType==="stepLine"?2*.1*this.lineHeight:0)),b.items.push(P),this.width=Math.max(b.width,this.width)):(P.textBlock=new ct(this.ctx,{x:0,y:0,maxWidth:j,maxHeight:this.itemWrap===!0?_:1.5*this.fontSize,angle:0,text:P.text,textAlign:this.itemTextAlign,fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),P.textBlock.measureText(),this.itemWidth!==null&&(P.textBlock.width=this.itemWidth-(V+I+(P.chartType==="line"||P.chartType==="spline"||P.chartType==="stepLine"?2*.1*this.lineHeight:0))),this.height<_-this.lineHeight?(b={items:[],width:0},M.push(b)):(b=M[G],G=(G+1)%M.length),b&&(this.height+=P.textBlock.height?P.textBlock.height:this.lineHeight,P.textBlock.x=b.width,P.textBlock.y=0,b.width+=Math.round(P.textBlock.width+V+I+(b.width===0?0:this.horizontalSpacing)+(P.chartType==="line"||P.chartType==="spline"||P.chartType==="stepLine"?2*.1*this.lineHeight:0)),b.items.push(P),this.width=Math.max(b.width,this.width))));this.height=this.itemWrap===!1?M.length*this.lineHeight:this.height+c,this.height=Math.min(_,this.height),this.width=Math.min(x,this.width)}for(this.verticalAlign==="top"?(d=this.horizontalAlign==="left"?f.x1:this.horizontalAlign==="right"?f.x2-this.width:f.x1+f.width/2-this.width/2,o=f.y1):this.verticalAlign==="center"?(d=this.horizontalAlign==="left"?f.x1:this.horizontalAlign==="right"?f.x2-this.width:f.x1+f.width/2-this.width/2,o=f.y1+f.height/2-this.height/2):this.verticalAlign==="bottom"&&(d=this.horizontalAlign==="left"?f.x1:this.horizontalAlign==="right"?f.x2-this.width:f.x1+f.width/2-this.width/2,o=f.y2-this.height),this.items=N,w=0;w<this.items.length;w++)P=N[w],P.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[P.id]={id:P.id,objectType:"legendItem",legendItemIndex:w,dataSeriesIndex:P.dataSeriesIndex,dataPointIndex:P.dataPointIndex};this.markerSize=V,this.rows=M,0<N.length&&r.layoutManager.registerSpace(l,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:d,y1:o,x2:d+this.width,y2:o+this.height}},Rt.prototype.render=function(){var r=this.bounds.x1,f=this.bounds.y1,l=this.markerMargin,o=this.maxWidth,d=this.maxHeight,x=this.markerSize,_=this.rows;(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(r,f,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);for(var I=0,N=0;N<_.length;N++){for(var M=_[N],w=0,b=0;b<M.items.length;b++){var P=M.items[b],c=P.textBlock.x+r+(b===0?.2*x:this.horizontalSpacing),L=f+I,V=c;if(this.chart.data[P.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(r,f,o,Math.max(d-d%this.lineHeight,0)),this.ctx.clip(),(P.chartType==="line"||P.chartType==="stepLine"||P.chartType==="spline")&&(this.ctx.strokeStyle=P.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(c-.1*this.lineHeight,L+this.lineHeight/2),this.ctx.lineTo(c+.85*this.lineHeight,L+this.lineHeight/2),this.ctx.stroke(),V-=.1*this.lineHeight),P.chartType==="error"){this.ctx.strokeStyle=this.errorMarkerColor[0],this.ctx.lineWidth=x/8,this.ctx.beginPath();var U=c-.08*this.lineHeight+.1*this.lineHeight,E=L+.15*this.lineHeight,G=.7*this.lineHeight,j=G+.02*this.lineHeight;this.ctx.moveTo(U,E),this.ctx.lineTo(U+G,E),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(U+G/2,E),this.ctx.lineTo(U+G/2,E+j),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(U,E+j),this.ctx.lineTo(U+G,E+j),this.ctx.stroke(),this.errorMarkerColor.shift()}xi.drawMarker(c+x/2,L+this.lineHeight/2,this.ctx,P.markerType,P.chartType==="error"||P.chartType==="line"||P.chartType==="spline"?P.markerSize/2:P.markerSize,P.markerColor,P.markerBorderColor,P.markerBorderThickness),P.textBlock.x=c+l+x,(P.chartType==="line"||P.chartType==="stepLine"||P.chartType==="spline")&&(P.textBlock.x+=.1*this.lineHeight),P.textBlock.y=Math.round(L+this.lineHeight/2),P.textBlock.render(!0),this.ctx.restore(),w=0<b?Math.max(w,P.textBlock.height?P.textBlock.height:this.lineHeight):P.textBlock.height?P.textBlock.height:this.lineHeight,this.chart.data[P.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),c=u(P.id),this.ghostCtx.fillStyle=c,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(V,P.textBlock.y-this.lineHeight/2,P.textBlock.x+P.textBlock.width-V,P.textBlock.height?P.textBlock.height:this.lineHeight),P.x1=this.chart._eventManager.objectMap[P.id].x1=V,P.y1=this.chart._eventManager.objectMap[P.id].y1=P.textBlock.y-this.lineHeight/2,P.x2=this.chart._eventManager.objectMap[P.id].x2=P.textBlock.x+P.textBlock.width,P.y2=this.chart._eventManager.objectMap[P.id].y2=P.textBlock.y+(P.textBlock.height?P.textBlock.height:this.lineHeight)-this.lineHeight/2}I+=w}},n(jt,H),jt.prototype.getDefaultAxisPlacement=function(){var r=this.type;return r==="column"||r==="line"||r==="stepLine"||r==="spline"||r==="area"||r==="stepArea"||r==="splineArea"||r==="stackedColumn"||r==="stackedLine"||r==="bubble"||r==="scatter"||r==="stackedArea"||r==="stackedColumn100"||r==="stackedLine100"||r==="stackedArea100"||r==="candlestick"||r==="ohlc"||r==="rangeColumn"||r==="rangeArea"||r==="rangeSplineArea"||r==="boxAndWhisker"||r==="waterfall"?"normal":r==="bar"||r==="stackedBar"||r==="stackedBar100"||r==="rangeBar"?"xySwapped":r==="pie"||r==="doughnut"||r==="funnel"||r==="pyramid"?"none":(r!=="error"&&window.console.log("Unknown Chart Type: "+r),null)},jt.getDefaultLegendMarker=function(r){return r==="column"||r==="stackedColumn"||r==="stackedLine"||r==="bar"||r==="stackedBar"||r==="stackedBar100"||r==="bubble"||r==="scatter"||r==="stackedColumn100"||r==="stackedLine100"||r==="stepArea"||r==="candlestick"||r==="ohlc"||r==="rangeColumn"||r==="rangeBar"||r==="rangeArea"||r==="rangeSplineArea"||r==="boxAndWhisker"||r==="waterfall"?"square":r==="line"||r==="stepLine"||r==="spline"||r==="pie"||r==="doughnut"?"circle":r==="area"||r==="splineArea"||r==="stackedArea"||r==="stackedArea100"||r==="funnel"||r==="pyramid"?"triangle":r==="error"?"none":(window.console.log("Unknown Chart Type: "+r),null)},jt.prototype.getDataPointAtX=function(r,f,l){if(!this.dataPoints||this.dataPoints.length===0)return null;var o={dataPoint:null,distance:1/0,index:NaN},d=null,x=0,_=0,I=1,N=1/0,M=0,w=0,b=0;for(this.chart.plotInfo.axisPlacement!=="none"&&(this.axisX.logarithmic?(b=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),b=1<b?Math.min(Math.max((this.dataPoints.length-1)/b*Math.log(r/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0):(b=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,b=0<b?Math.min(Math.max((this.dataPoints.length-1)/b*(r-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0));;){if(_=0<I?b+x:b-x,0<=_&&_<this.dataPoints.length){var d=this.dataPoints[_],P=this.axisX&&this.axisX.logarithmic?d.x>r?d.x/r:r/d.x:Math.abs(d.x-r);if(P<o.distance&&(p(l)||l&&!p(d.y))&&(o.dataPoint=d,o.distance=P,o.index=_),d=P,d<=N?N=d:0<I?M++:w++,1e3<M&&1e3<w)break}else if(0>b-x&&b+x>=this.dataPoints.length)break;I===-1?(x++,I=1):I=-1}return f||(o.dataPoint.x.getTime?o.dataPoint.x.getTime():o.dataPoint.x)!==(r.getTime?r.getTime():r)?f&&o.dataPoint!==null?o:null:o},jt.prototype.getDataPointAtXY=function(r,f,l){if(!this.dataPoints||this.dataPoints.length===0||r<this.chart.plotArea.x1||r>this.chart.plotArea.x2||f<this.chart.plotArea.y1||f>this.chart.plotArea.y2)return null;l=l||!1;var o=[],d=0,x=0,_=1,I=!1,N=1/0,M=0,w=0,P=0;if(this.chart.plotInfo.axisPlacement!=="none")if(P=(this.chart.axisX[0]?this.chart.axisX[0]:this.chart.axisX2[0]).getXValueAt({x:r,y:f}),this.axisX.logarithmic)var b=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x),P=1<b?Math.min(Math.max((this.dataPoints.length-1)/b*Math.log(P/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;else b=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,P=0<b?Math.min(Math.max((this.dataPoints.length-1)/b*(P-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;for(;;){if(x=0<_?P+d:P-d,0<=x&&x<this.dataPoints.length){var b=this.chart._eventManager.objectMap[this.dataPointIds[x]],c=this.dataPoints[x],L=null;if(b){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":case"waterfall":case"error":r>=b.x1&&r<=b.x2&&f>=b.y1&&f<=b.y2&&(o.push({dataPoint:c,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y1-f),Math.abs(b.y2-f))}),I=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var V=A("markerSize",c,this)||4,U=l?20:V,L=Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-f,2));L<=U&&o.push({dataPoint:c,dataPointIndex:x,dataSeries:this,distance:L}),b=Math.abs(b.x1-r),b<=N?N=b:0<_?M++:w++,L<=V/2&&(I=!0);break;case"rangeArea":case"rangeSplineArea":V=A("markerSize",c,this)||4,U=l?20:V,L=Math.min(Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-f,2)),Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y2-f,2))),L<=U&&o.push({dataPoint:c,dataPointIndex:x,dataSeries:this,distance:L}),b=Math.abs(b.x1-r),b<=N?N=b:0<_?M++:w++,L<=V/2&&(I=!0);break;case"bubble":V=b.size,L=Math.sqrt(Math.pow(b.x1-r,2)+Math.pow(b.y1-f,2)),L<=V/2&&(o.push({dataPoint:c,dataPointIndex:x,dataSeries:this,distance:L}),I=!0);break;case"pie":case"doughnut":V=b.center,U=this.type==="doughnut"?b.percentInnerRadius*b.radius:0,L=Math.sqrt(Math.pow(V.x-r,2)+Math.pow(V.y-f,2)),L<b.radius&&L>U&&(L=Math.atan2(f-V.y,r-V.x),0>L&&(L+=2*Math.PI),L=Number(((180*(L/Math.PI)%360+360)%360).toFixed(12)),V=Number(((180*(b.startAngle/Math.PI)%360+360)%360).toFixed(12)),U=Number(((180*(b.endAngle/Math.PI)%360+360)%360).toFixed(12)),U===0&&1<b.endAngle&&(U=360),V>=U&&c.y!==0&&!p(c.y)&&(U+=360,L<V&&(L+=360)),L>V&&L<U&&(o.push({dataPoint:c,dataPointIndex:x,dataSeries:this,distance:0}),I=!0));break;case"funnel":case"pyramid":L=b.funnelSection,f>L.y1&&f<L.y4&&(L.y6?f>L.y6?(x=L.x6+(L.x5-L.x6)/(L.y5-L.y6)*(f-L.y6),L=L.x3+(L.x4-L.x3)/(L.y4-L.y3)*(f-L.y3)):(x=L.x1+(L.x6-L.x1)/(L.y6-L.y1)*(f-L.y1),L=L.x2+(L.x3-L.x2)/(L.y3-L.y2)*(f-L.y2)):(x=L.x1+(L.x4-L.x1)/(L.y4-L.y1)*(f-L.y1),L=L.x2+(L.x3-L.x2)/(L.y3-L.y2)*(f-L.y2)),r>x&&r<L&&(o.push({dataPoint:c,dataPointIndex:b.dataPointIndex,dataSeries:this,distance:0}),I=!0));break;case"boxAndWhisker":(r>=b.x1-b.borderThickness/2&&r<=b.x2+b.borderThickness/2&&f>=b.y4-b.borderThickness/2&&f<=b.y1+b.borderThickness/2||Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&f>=b.y1&&f<=b.y4)&&(o.push({dataPoint:c,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-f),Math.abs(b.y3-f))}),I=!0);break;case"candlestick":(r>=b.x1-b.borderThickness/2&&r<=b.x2+b.borderThickness/2&&f>=b.y2-b.borderThickness/2&&f<=b.y3+b.borderThickness/2||Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&f>=b.y1&&f<=b.y4)&&(o.push({dataPoint:c,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-f),Math.abs(b.y3-f))}),I=!0);break;case"ohlc":(Math.abs(b.x2-r+b.x1-r)<b.borderThickness&&f>=b.y2&&f<=b.y3||r>=b.x1&&r<=(b.x2+b.x1)/2&&f>=b.y1-b.borderThickness/2&&f<=b.y1+b.borderThickness/2||r>=(b.x1+b.x2)/2&&r<=b.x2&&f>=b.y4-b.borderThickness/2&&f<=b.y4+b.borderThickness/2)&&(o.push({dataPoint:c,dataPointIndex:x,dataSeries:this,distance:Math.min(Math.abs(b.x1-r),Math.abs(b.x2-r),Math.abs(b.y2-f),Math.abs(b.y3-f))}),I=!0)}if(I||1e3<M&&1e3<w)break}}else if(0>P-d&&P+d>=this.dataPoints.length)break;_===-1?(d++,_=1):_=-1}for(r=null,f=0;f<o.length;f++)r?o[f].distance<=r.distance&&(r=o[f]):r=o[f];return r},jt.prototype.getMarkerProperties=function(r,f,l,o){var d=this.dataPoints,x=d[r].markerColor?d[r].markerColor:this.markerColor?this.markerColor:d[r].color?d[r].color:this.color?this.color:this._colorSet[r%this._colorSet.length],_=d[r].markerBorderColor?d[r].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,I=p(d[r].markerBorderThickness)?this.markerBorderThickness?this.markerBorderThickness:null:d[r].markerBorderThickness,N=d[r].markerType?d[r].markerType:this.markerType;return r=p(d[r].markerSize)?this.markerSize:d[r].markerSize,{x:f,y:l,ctx:o,type:N,size:r,color:x,borderColor:_,borderThickness:I}},n(Ot,H),Ot.prototype.createExtraLabelsForLog=function(r){if(r=(r||0)+1,!(5<r)){var f=this.logLabelValues[0]||this.intervalStartPosition;if(Math.log(this.range)/Math.log(f/this.viewportMinimum)<this.noTicks-1){for(var l=Ot.getNiceNumber((f-this.viewportMinimum)/Math.min(Math.max(2,this.noTicks-this.logLabelValues.length),3),!0),o=Math.ceil(this.viewportMinimum/l)*l;o<f;o+=l)o<this.viewportMinimum||this.logLabelValues.push(o);this.logLabelValues.sort(h),this.createExtraLabelsForLog(r)}}},Ot.prototype.createLabels=function(){var r,f,l=0,_=0,o,d=0,x=0,_=0,_=this.interval,I=0,N,M=.6*this.chart.height,w;r=!1;var b=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],P=b.length?p(this.scaleBreaks.firstBreakIndex)?0:this.scaleBreaks.firstBreakIndex:0;if(this.type!=="axisX"||this.valueType!=="dateTime"||this.logarithmic){if(o=this.viewportMaximum,this.labels){r=Math.ceil(_);for(var _=Math.ceil(this.intervalStartPosition),c=!1,l=_;l<this.viewportMaximum;l+=r)if(this.labels[l])c=!0;else{c=!1;break}c&&(this.interval=r,this.intervalStartPosition=_)}if(this.logarithmic&&!this.equidistantInterval)for(this.logLabelValues||(this.logLabelValues=[],this.createExtraLabelsForLog()),_=0,c=P;_<this.logLabelValues.length;_++)if(l=this.logLabelValues[_],l<this.viewportMinimum)_++;else{for(;c<b.length&&l>b[c].endValue;c++);r=c<b.length&&l>=b[c].startValue&&l<=b[c].endValue,w=l,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:w,label:this.labels[w]?this.labels[w]:null}):this.type==="axisX"&&this.labels[w]?this.labels[w]:ne(w,this.valueFormatString,this.chart._cultureInfo),r=new ct(this.ctx,{x:0,y:0,maxWidth:d,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,cornerRadius:this.labelCornerRadius,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:this.labelBorderThickness,padding:this.labelPadding}),this._labels.push({position:w,textBlock:r,effectiveHeight:null}))}for(c=P,l=this.intervalStartPosition;l<=o;l=parseFloat(1e-12>this.interval?this.logarithmic&&this.equidistantInterval?l*Math.pow(this.logarithmBase,this.interval):l+this.interval:(this.logarithmic&&this.equidistantInterval?l*Math.pow(this.logarithmBase,this.interval):l+this.interval).toFixed(12))){for(;c<b.length&&l>b[c].endValue;c++);r=c<b.length&&l>=b[c].startValue&&l<=b[c].endValue,w=l,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:w,label:this.labels[w]?this.labels[w]:null}):this.type==="axisX"&&this.labels[w]?this.labels[w]:ne(w,this.valueFormatString,this.chart._cultureInfo),r=new ct(this.ctx,{x:0,y:0,maxWidth:d,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,textAlign:this.labelTextAlign,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",padding:this.labelPadding}),this._labels.push({position:w,textBlock:r,effectiveHeight:null}))}}else for(this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval),o=e(new Date(this.viewportMaximum),this.interval,this.intervalType),c=P,l=this.intervalStartPosition;l<o;e(l,_,this.intervalType)){for(r=l.getTime();c<b.length&&r>b[c].endValue;c++);w=r,r=c<b.length&&r>=b[c].startValue&&r<=b[c].endValue,r||(r=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:new Date(w),label:this.labels[w]?this.labels[w]:null}):this.type==="axisX"&&this.labels[w]?this.labels[w]:ce(w,this.valueFormatString,this.chart._cultureInfo),r=new ct(this.ctx,{x:0,y:0,maxWidth:d,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxHeight:x,angle:this.labelAngle,text:this.prefix+r+this.suffix,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",padding:this.labelPadding}),this._labels.push({position:w,textBlock:r,effectiveHeight:null,breaksLabelType:void 0}))}for(this._position==="bottom"||this._position==="top"?(I=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.width*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.width/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*Pe[this.intervalType+"Duration"]*this.interval,d=typeof this.options.labelMaxWidth>"u"?.5*this.chart.width>>0:this.options.labelMaxWidth,this.chart.panEnabled||(x=typeof this.options.labelWrap>"u"||this.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize+(typeof this.labelPadding=="object"?(this.labelPadding.top||0)+(this.labelPadding.bottom||0):2*this.labelPadding))):(this._position==="left"||this._position==="right")&&(I=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.height*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.height/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*Pe[this.intervalType+"Duration"]*this.interval,this.chart.panEnabled||(d=typeof this.options.labelMaxWidth>"u"?.3*this.chart.width>>0:this.options.labelMaxWidth),x=typeof this.options.labelWrap>"u"||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize),_=0;_<this._labels.length;_++){r=this._labels[_].textBlock,r.maxWidth=d,r.maxHeight=x;var L=r.measureText();N=L.height}if(o=[],P=b=0,this.labelAutoFit||this.options.labelAutoFit){if(p(this.labelAngle)||(this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360)),this._position==="bottom"||this._position==="top")if(d=Math.floor(.9*I),P=0,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=d,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,l=0;l<this._labels.length;l++)if(!this._labels[l].breaksLabelType){r=this._labels[l].textBlock;for(var V,c=r.text.split(" "),_=0;_<c.length;_++)w=c[_],this.ctx.font=r.fontStyle+" "+r.fontWeight+" "+r.fontSize+"px "+r.fontFamily,w=this.ctx.measureText(w),w.width>P&&(V=l,P=w.width)}for(l=0,l=this.intervalStartPosition<this.viewportMinimum?1:0;l<this._labels.length;l++)if(!this._labels[l].breaksLabelType){for(r=this._labels[l].textBlock,L=r.measureText(),c=l+1;c<this._labels.length;c++)if(!this._labels[c].breaksLabelType){f=this._labels[c].textBlock,f=f.measureText();break}if(o.push(r.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,o),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),_=d*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(x-r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),p(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&this.options.labelAngle!==0){if(this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:Math.min((_-d*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),_),w=(M-(N+r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(-25)))/Math.sin(Math.PI/180*Math.abs(-25)),!p(this.options.labelWrap))this.labelWrap?p(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=Math.min(Math.max(d,P),w),this.sessionVariables.labelWrap=this.labelWrap,f&&L.width+f.width>>0>2*d&&(this.sessionVariables.labelAngle=-25)):(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>d?-25:this.sessionVariables.labelAngle):p(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=d,f&&L.width+f.width>>0>2*d&&(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=w)):(this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>d?-25:this.sessionVariables.labelAngle,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelWrap=this.labelWrap);else if(p(this.options.labelWrap)){if(!p(this.options.labelMaxWidth))this.options.labelMaxWidth<d?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=_):(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=x);else if(!p(f)){if(_=L.width+f.width>>0,c=this.labelFontSize,P<d)_-2*d>b&&(b=_-2*d,_>=2*d&&_<2.2*d?(this.sessionVariables.labelMaxWidth=d,p(this.options.labelFontSize)&&12<c&&(c=Math.floor(12/13*c),r.measureText()),this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?c:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):_>=2.2*d&&_<2.8*d?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=w,this.sessionVariables.labelFontSize=c):_>=2.8*d&&_<3.2*d?(this.sessionVariables.labelMaxWidth=Math.max(d,P),this.sessionVariables.labelWrap=!0,p(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?c:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):_>=3.2*d&&_<3.6*d?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=w,this.sessionVariables.labelFontSize=this.labelFontSize):_>3.6*d&&_<5*d?(p(this.options.labelFontSize)&&12<c&&(c=Math.floor(12/13*c),r.measureText()),this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?c:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=w):_>5*d&&(this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=d,this.sessionVariables.labelFontSize=c,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=this.labelAngle));else if(V===l&&(V===0&&P+this._labels[V+1].textBlock.measureText().width-2*d>b||V===this._labels.length-1&&P+this._labels[V-1].textBlock.measureText().width-2*d>b||0<V&&V<this._labels.length-1&&P+this._labels[V+1].textBlock.measureText().width-2*d>b&&P+this._labels[V-1].textBlock.measureText().width-2*d>b))b=V===0?P+this._labels[V+1].textBlock.measureText().width-2*d:P+this._labels[V-1].textBlock.measureText().width-2*d,this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?c:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=w;else if(b===0)for(this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?c:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,_=0;_<this._labels.length;_++)r=this._labels[_].textBlock,r.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(d,P),w),L=r.measureText(),_<this._labels.length-1&&(c=_+1,f=this._labels[c].textBlock,f.maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(d,P),w),f=f.measureText(),L.width+f.width>>0>2*d&&(this.sessionVariables.labelAngle=-25))}}}else this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:Math.min((_-d*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),_),w=this.labelAngle!=0?(M-(N+r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)):d,this.sessionVariables.labelMaxHeight=this.labelWrap?(M-w*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)):1.5*this.labelFontSize,p(this.options.labelWrap)?p(this.options.labelWrap)&&(this.labelWrap&&!p(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:w,this.sessionVariables.labelMaxHeight=x):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=w,this.sessionVariables.labelMaxHeight=Math.max(_,.9*I),this.sessionVariables.labelWrap=this.labelWrap)):(this.options.labelWrap?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:w):(p(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:w,this.sessionVariables.labelWrap=this.labelWrap),this.sessionVariables.labelMaxHeight=x)}for(this.sessionVariables.labelMaxHeight=Math.max(this.sessionVariables.labelMaxHeight,1.5*this.labelFontSize),_=0;_<this._labels.length;_++)r=this._labels[_].textBlock,r.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,r.fontSize=this.sessionVariables.labelFontSize,r.angle=this.labelAngle=this.sessionVariables.labelAngle,r.wrap=this.labelWrap=this.sessionVariables.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText()}else for(l=0;l<this._labels.length;l++)r=this._labels[l].textBlock,r.maxWidth=this.labelMaxWidth=p(this.options.labelMaxWidth)?p(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=d:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,r.fontSize=this.labelFontSize=p(this.options.labelFontSize)?p(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,r.angle=this.labelAngle=p(this.options.labelAngle)?p(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,r.wrap=this.labelWrap=p(this.options.labelWrap)?p(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,r.maxHeight=p(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=x:this.sessionVariables.labelMaxHeight,r.measureText();else if(this._position==="left"||this._position==="right")if(d=p(this.options.labelMaxWidth)?.3*this.chart.width>>0:this.options.labelMaxWidth,x=typeof this.options.labelWrap>"u"||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=d,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=p(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,l=0;l<this._labels.length;l++)if(!this._labels[l].breaksLabelType){for(r=this._labels[l].textBlock,L=r.measureText(),c=l+1;c<this._labels.length;c++)if(!this._labels[c].breaksLabelType){f=this._labels[c].textBlock,f=f.measureText();break}o.push(r.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,o),_=d*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(x-r.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),p(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&this.options.labelAngle!==0?p(this.options.labelWrap)?p(this.options.labelWrap)&&(p(this.options.labelMaxWidth)?p(f)||(I=L.height+f.height>>0,I-2*x>P&&(P=I-2*x,I>=2*x&&I<2.4*x?(p(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize):I>=2.4*x&&I<2.8*x?(this.sessionVariables.labelMaxHeight=_,this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelWrap=!0):I>=2.8*x&&I<3.2*x?(this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelWrap=!0,p(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=p(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):I>=3.2*x&&I<3.6*x?(this.sessionVariables.labelMaxHeight=_,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelFontSize=this.labelFontSize):I>3.6*x&&I<10*x?(p(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxWidth=d,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelAngle=p(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):I>10*x&&I<50*x&&(p(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),r.measureText()),this.sessionVariables.labelFontSize=p(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=d,this.sessionVariables.labelAngle=p(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle))):(this.sessionVariables.labelMaxHeight=x,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth)):(this.sessionVariables.labelMaxWidth=this.labelWrap?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:this.labelMaxWidth?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:d,this.sessionVariables.labelMaxHeight=x):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=this.labelAngle===0?d:Math.min((_-x*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)),x),p(this.options.labelWrap)?p(this.options.labelWrap)&&(this.labelWrap&&!p(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=_):(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:d,this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:_,p(this.options.labelMaxWidth)&&(this.sessionVariables.labelAngle=this.labelAngle))):this.options.labelWrap?(this.sessionVariables.labelMaxHeight=this.labelAngle===0?x:_,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=d):(this.sessionVariables.labelMaxHeight=x,p(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap))}for(_=0;_<this._labels.length;_++)r=this._labels[_].textBlock,r.maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,r.fontSize=this.labelFontSize=this.sessionVariables.labelFontSize,r.angle=this.labelAngle=this.sessionVariables.labelAngle,r.wrap=this.labelWrap=this.sessionVariables.labelWrap,r.maxHeight=this.sessionVariables.labelMaxHeight,r.measureText()}else for(p(this.chart.stockChart)||this.chart.isNavigator||(this.sessionVariables.labelMaxHeight=x),l=0;l<this._labels.length;l++)r=this._labels[l].textBlock,r.maxWidth=this.labelMaxWidth=p(this.options.labelMaxWidth)?p(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=d:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,r.fontSize=this.labelFontSize=p(this.options.labelFontSize)?p(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,r.angle=this.labelAngle=p(this.options.labelAngle)?p(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,r.wrap=this.labelWrap=p(this.options.labelWrap)?p(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,r.maxHeight=p(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=x:this.sessionVariables.labelMaxHeight,r.measureText()}for(l=0;l<this.stripLines.length;l++){var d=this.stripLines[l],U;d.labelFontSize=d.labelPlacement==="outside"&&p(d.options.labelFontSize)?this.labelFontSize:d.labelFontSize,d.labelFontFamily=d.labelPlacement==="outside"&&p(d.options.labelFontFamily)?this.labelFontFamily:d.labelFontFamily,d.labelFontWeight=d.labelPlacement==="outside"&&p(d.options.labelFontWeight)?this.labelFontWeight:d.labelFontWeight,d.labelFontStyle=d.labelPlacement==="outside"&&p(d.options.labelFontStyle)?this.labelFontStyle:d.labelFontStyle,d.labelPlacement==="outside"?(x=this.sessionVariables.labelMaxWidth,(this._position==="bottom"||this._position==="top")&&(p(d.options.labelWrap)&&!p(this.sessionVariables.stripLineLabelMaxHeight)?U=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=U=d.labelWrap?.8*this.chart.height>>0:1.5*d.labelFontSize+(typeof d.labelPadding=="object"?(d.labelPadding.top||0)+(d.labelPadding.bottom||0):2*d.labelPadding)),(this._position==="left"||this._position==="right")&&(p(d.options.labelWrap)&&!p(this.sessionVariables.stripLineLabelMaxHeight)?U=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=U=d.labelWrap?.8*this.chart.width>>0:1.5*d.labelFontSize+(typeof d.labelPadding=="object"?(d.labelPadding.top||0)+(d.labelPadding.bottom||0):2*d.labelPadding)),p(d.labelBackgroundColor)&&(d.labelBackgroundColor="#EEEEEE")):(x=this._position==="bottom"||this._position==="top"?.9*this.chart.width>>0:.9*this.chart.height>>0,U=p(d.options.labelWrap)||d.labelWrap?this._position==="bottom"||this._position==="top"?.8*this.chart.width>>0:.8*this.chart.height>>0:1.5*d.labelFontSize+(typeof d.labelPadding=="object"?(d.labelPadding.top||0)+(d.labelPadding.bottom||0):2*d.labelPadding),p(d.labelBackgroundColor)&&(p(d.startValue)&&d.startValue!==0?d.labelBackgroundColor=ut?"transparent":null:d.labelBackgroundColor="#EEEEEE")),r=new ct(this.ctx,{x:0,y:0,backgroundColor:d.labelBackgroundColor,borderColor:d.labelBorderColor,borderThickness:d.labelBorderThickness,cornerRadius:d.labelCornerRadius,maxWidth:d.options.labelMaxWidth?d.options.labelMaxWidth:x,maxHeight:U,angle:this.labelAngle,text:d.labelFormatter?d.labelFormatter({chart:this.chart,axis:this,stripLine:d}):d.label,textAlign:d.labelTextAlign,fontSize:d.labelFontSize,fontFamily:d.labelFontFamily,fontWeight:d.labelFontWeight,fontColor:d.labelFontColor||d.color,fontStyle:d.labelFontStyle,textBaseline:"middle",padding:d.labelPadding}),this._stripLineLabels.push({position:d.value,textBlock:r,effectiveHeight:null,stripLine:d})}},Ot.prototype.createLabelsAndCalculateWidth=function(){var r=0,f=0;this._labels=[],this._stripLineLabels=[];var l=this.chart.isNavigator?0:5;if(this.labelEffectiveWidth=p(this.labelEffectiveWidth)?0:this.labelEffectiveWidth,this._position==="left"||this._position==="right"){for(this.createLabels(),f=0;f<this._labels.length;f++){var o=this._labels[f].textBlock,o=o.measureText(),d=0,d=this.labelAngle===0?o.width:o.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+o.height*Math.sin(Math.PI/180*Math.abs(this.labelAngle));r<=d&&(this.labelEffectiveWidth=r=d),this._labels[f].effectiveWidth=d}for(f=0;f<this._stripLineLabels.length;f++)this._stripLineLabels[f].stripLine.labelPlacement==="outside"&&this._stripLineLabels[f].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[f].stripLine.value<=this.viewportMaximum&&(o=this._stripLineLabels[f].textBlock,o=o.measureText(),d=this.labelAngle===0?o.width:o.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+o.height*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),this.tickPlacement==="inside"&&(d+=this.tickLength),this.labelPlacement==="inside"&&(r+=d+l),r<=d&&(r=d),this.stripLineLabelEffectiveWidth=this._stripLineLabels[f].effectiveWidth=d)}return(this.title?this._titleTextBlock.measureText().height+2:0)+r+this.tickLength+l},Ot.prototype.createLabelsAndCalculateHeight=function(){var r=0;this._labels=[],this._stripLineLabels=[];var f,l=0,o=this.chart.isNavigator?0:5;if(this.labelEffectiveHeight=p(this.labelEffectiveHeight)?0:this.labelEffectiveHeight,this._position==="bottom"||this._position==="top"){for(this.createLabels(),l=0;l<this._labels.length;l++){f=this._labels[l].textBlock,f=f.measureText();var d=0,d=this.labelAngle===0?f.height:f.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+f.height*Math.cos(Math.PI/180*Math.abs(this.labelAngle));r<=d&&(this.labelEffectiveHeight=r=d),this._labels[l].effectiveHeight=d}for(l=0;l<this._stripLineLabels.length;l++)this._stripLineLabels[l].stripLine.labelPlacement==="outside"&&this._stripLineLabels[l].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[l].stripLine.value<=this.viewportMaximum&&(f=this._stripLineLabels[l].textBlock,f=f.measureText(),d=this.labelAngle===0?f.height:f.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+f.height*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),this.tickPlacement==="inside"&&(d+=this.tickLength),this.labelPlacement==="inside"&&(r+=d+o),r<=d&&(r=d),this.stripLineLabelEffectiveHeight=this._stripLineLabels[l].effectiveHeight=d)}return(this.title?this._titleTextBlock.measureText().height+2:0)+r+this.tickLength+o},Ot.setLayout=function(r,f,l,o,d,x){var _,I,N,M,w=r[0]?r[0].chart:f[0].chart,b=w.isNavigator?0:10,P=w._axes;if(r&&0<r.length)for(var c=0;c<r.length;c++)r[c]&&r[c].calculateAxisParameters();if(f&&0<f.length)for(c=0;c<f.length;c++)f[c].calculateAxisParameters();if(l&&0<l.length)for(c=0;c<l.length;c++)l[c].calculateAxisParameters();if(o&&0<o.length)for(c=0;c<o.length;c++)o[c].calculateAxisParameters();for(c=0;c<P.length;c++)if(P[c]&&P[c].scaleBreaks&&P[c].scaleBreaks._appliedBreaks.length)for(var L=P[c].scaleBreaks._appliedBreaks,V=0;V<L.length&&!(L[V].startValue>P[c].viewportMaximum);V++)L[V].endValue<P[c].viewportMinimum||(p(P[c].scaleBreaks.firstBreakIndex)&&(P[c].scaleBreaks.firstBreakIndex=V),L[V].startValue>=P[c].viewPortMinimum&&(P[c].scaleBreaks.lastBreakIndex=V));for(var U=V=0,E=0,G=0,j=0,wt=0,gt=0,_t,Qt,se=I=0,Vt,Wt,Nt,L=Vt=Wt=Nt=!1,c=0;c<P.length;c++)P[c]&&P[c].title&&(P[c]._titleTextBlock=new ct(P[c].ctx,{text:P[c].title,fontSize:P[c].titleFontSize,fontFamily:P[c].titleFontFamily,fontWeight:P[c].titleFontWeight,fontColor:P[c].titleFontColor,fontStyle:P[c].titleFontStyle,borderColor:P[c].titleBorderColor,borderThickness:P[c].titleBorderThickness,backgroundColor:P[c].titleBackgroundColor,cornerRadius:P[c].titleCornerRadius,textBaseline:"middle",textAlign:P[c].titleTextAlign,padding:P[c].titlePadding}));for(c=0;c<P.length;c++)if(P[c].title){var Ft=1.5*P[c].titleFontSize+(typeof P[c].titlePadding=="object"?(P[c].titlePadding.top||0)+(P[c].titlePadding.bottom||0):2*P[c].titlePadding);switch(P[c]._titleTextBlock.maxWidth=P[c].titleMaxWidth||x.height,P[c]._titleTextBlock.maxHeight=P[c].titleWrap?.8*x.width:Math.min(Ft,.8*x.width),P[c]._position){case"left":P[c]._titleTextBlock.angle=-90;break;case"right":P[c]._titleTextBlock.angle=90;break;default:P[c]._titleTextBlock.maxWidth=P[c].titleMaxWidth||x.width,P[c]._titleTextBlock.maxHeight=P[c].titleWrap?.8*x.height:Math.min(Ft,.8*x.height),P[c]._titleTextBlock.angle=0}}if(d==="normal"){for(var G=[],j=[],wt=[],gt=[],vt=[],Ht=[],me=[],Pt=[];4>V;){var Qe=0,Ai=0,hi=0,Pi=0,ti=Ft=d=0,wi=I=0,mi=0,bi=_=0;if(l&&0<l.length)for(wt=[],c=_=0;c<l.length;c++)wt.push(Math.ceil(l[c]?l[c].createLabelsAndCalculateWidth():0)),_+=wt[c],ti+=l[c]&&!w.isNavigator?l[c].margin:0;else wt.push(Math.ceil(l[0]?l[0].createLabelsAndCalculateWidth():0));if(me.push(wt),o&&0<o.length)for(gt=[],c=bi=0;c<o.length;c++)gt.push(Math.ceil(o[c]?o[c].createLabelsAndCalculateWidth():0)),bi+=gt[c],I+=o[c]?o[c].margin:0;else gt.push(Math.ceil(o[0]?o[0].createLabelsAndCalculateWidth():0));if(Pt.push(gt),_=Math.round(x.x1+_+ti-(l[0]?(l[0].labelPlacement==="inside"?l[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(l[0].tickPlacement==="inside"?l[0].tickLength:0):0)),N=Math.round(Math.min(x.x2-bi-I+(o[0]?(o[0].labelPlacement==="inside"?o[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(o[0].tickPlacement==="inside"?o[0].tickLength:0):0),w.width-b)),r&&0<r.length)for(G=[],c=wi=0;c<r.length;c++)r[c]&&(r[c].lineCoordinates={}),r[c].lineCoordinates.width=Math.abs(N-_),r[c].title&&(r[c]._titleTextBlock.maxWidth=0<r[c].titleMaxWidth&&r[c].titleMaxWidth<r[c].lineCoordinates.width?r[c].titleMaxWidth:r[c].lineCoordinates.width),G.push(Math.ceil(r[c]?r[c].createLabelsAndCalculateHeight():0)),wi+=G[c],d+=r[c]&&!w.isNavigator?r[c].margin:0;else G.push(Math.ceil(r[0]?r[0].createLabelsAndCalculateHeight():0));if(vt.push(G),f&&0<f.length)for(j=[],c=mi=0;c<f.length;c++)f[c]&&(f[c].lineCoordinates={}),f[c].lineCoordinates.width=Math.abs(N-_),f[c].title&&(f[c]._titleTextBlock.maxWidth=0<f[c].titleMaxWidth&&f[c].titleMaxWidth<f[c].lineCoordinates.width?f[c].titleMaxWidth:f[c].lineCoordinates.width),j.push(Math.ceil(f[c]?f[c].createLabelsAndCalculateHeight():0)),mi+=j[c],Ft+=f[c]&&!w.isNavigator?f[c].margin:0;else j.push(Math.ceil(f[0]?f[0].createLabelsAndCalculateHeight():0));if(Ht.push(j),r&&0<r.length)for(c=0;c<r.length;c++){if(r[c]){if(r[c].lineCoordinates.x1=_,r[c].lineCoordinates.x2=N,r[c]._labels&&1<r[c]._labels.length){var de=I=0;I=r[c]._labels[1],de=r[c].valueType==="dateTime"?r[c]._labels[r[c]._labels.length-2]:r[c]._labels[r[c]._labels.length-1],U=I.textBlock.width*Math.cos(Math.PI/180*Math.abs(I.textBlock.angle))+(I.textBlock.height-I.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(I.textBlock.angle)),E=de.textBlock.width*Math.cos(Math.PI/180*Math.abs(de.textBlock.angle))+de.textBlock.height*Math.sin(Math.PI/180*Math.abs(de.textBlock.angle))}!r[c]||!r[c].labelAutoFit||p(_t)||p(Qt)||w.isNavigator||w.stockChart||(I=0,0<r[c].labelAngle?(M=E-(de.textBlock.height-de.textBlock._lineHeight/2)*Math.sin(Math.PI/180*de.textBlock.angle),Qt+M>N&&r[c].convertPixelToValue(Qt)>=r[c].viewportMinimum&&r[c].convertPixelToValue(Qt)<=r[c].viewportMaximum&&(I+=Qt+M-N-bi)):0>r[c].labelAngle?_t-U<_&&_t-U<r[c].viewportMinimum&&(se=_-(ti+r[c].tickLength+wt+_t-U+r[c].labelFontSize/2)):r[c].labelAngle===0&&(Qt+E>N&&r[c].convertPixelToValue(Qt)>=r[c].viewportMinimum&&r[c].convertPixelToValue(Qt)<=r[c].viewportMaximum&&(I=Qt+E/2-N-bi),_t-U<_&&_t-U<r[c].viewportMinimum&&(se=_-ti-r[c].tickLength-wt-_t+U/2)),r[c].viewportMaximum===r[c].maximum&&r[c].viewportMinimum===r[c].minimum&&0<r[c].labelAngle&&0<I?N-=I:r[c].viewportMaximum===r[c].maximum&&r[c].viewportMinimum===r[c].minimum&&0>r[c].labelAngle&&0<se?_+=se:r[c].viewportMaximum===r[c].maximum&&r[c].viewportMinimum===r[c].minimum&&r[c].labelAngle===0&&(0<se&&(_+=se),0<I&&(N-=I))),w.panEnabled?wi=p(w.sessionVariables.axisX.height)||w.stockChart?w.sessionVariables.axisX.height=wi:w.sessionVariables.axisX.height:w.sessionVariables.axisX.height=wi,I=Math.round(x.y2-wi-d+Qe),M=Math.round(x.y2),r[c].lineCoordinates.width=N-_,r[c].lineCoordinates.y1=I,r[c].lineCoordinates.y2=I,r[c].bounds={x1:_,y1:I,x2:N,y2:M-(wi+d-G[c]-Qe),width:N-_},r[c].bounds.height=r[c].bounds.y2-r[c].bounds.y1,r[c].labelPlacement==="inside"&&(r[c].lineCoordinates.y1=r[0].bounds.y1+Qe+(r[c].labelEffectiveHeight||0)+(w.isNavigator?0:5),r[c].lineCoordinates.y2=r[c].lineCoordinates.y1+r[c].lineThickness/2),r[c].tickPlacement==="inside"&&(r[c].lineCoordinates.y1+=r[c].tickLength,r[c].lineCoordinates.y2=r[c].lineCoordinates.y1+r[c].lineThickness/2)}Qe+=G[c]+r[c].margin}if(f&&0<f.length)for(c=0;c<f.length;c++)f[c].lineCoordinates.x1=_,f[c].lineCoordinates.x2=N,f[c].lineCoordinates.width=Math.abs(N-_),f[c]._labels&&1<f[c]._labels.length&&(I=f[c]._labels[1],de=f[c].valueType==="dateTime"?f[c]._labels[f[c]._labels.length-2]:f[c]._labels[f[c]._labels.length-1],U=I.textBlock.width*Math.cos(Math.PI/180*Math.abs(I.textBlock.angle))+(I.textBlock.height-de.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(I.textBlock.angle)),E=de.textBlock.width*Math.cos(Math.PI/180*Math.abs(de.textBlock.angle))+(de.textBlock.height-de.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(de.textBlock.angle))),w.panEnabled?mi=p(w.sessionVariables.axisX2.height)||w.stockChart?w.sessionVariables.axisX2.height=mi:w.sessionVariables.axisX2.height:w.sessionVariables.axisX2.height=mi,I=Math.round(x.y1),M=f[c].lineCoordinates.y1=I+mi+Ft-Ai,f[c].lineCoordinates.y2=I,f[c].bounds={x1:_,y1:I+(mi+Ft-j[c]-Ai),x2:N,y2:M,width:N-_},f[c].bounds.height=f[c].bounds.y2-f[c].bounds.y1,f[c].labelPlacement==="inside"&&(f[c].lineCoordinates.y1=f[0].bounds.y2-Ai-(f[c].labelEffectiveHeight||0)-5),f[c].tickPlacement==="inside"&&(f[c].lineCoordinates.y1-=f[c].tickLength),Ai+=j[c]+f[c].margin;if(l&&0<l.length)for(c=0;c<l.length;c++)ti=w.isNavigator?0:10,l[c]&&(_=N=Math.round((r[0]?r[0].lineCoordinates.x1:f[0].lineCoordinates.x1)+(l[0]?(l[0].labelPlacement==="inside"?l[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(l[0].tickPlacement==="inside"?l[0].tickLength:0):0)),ti=l[c]._labels&&0<l[c]._labels.length?l[c]._labels[l[c]._labels.length-1].textBlock._lineHeight/2:b,I=Math.round(Math.max(x.y1+mi+Ft-(f[0]?(f[0].labelPlacement==="inside"?f[0].labelEffectiveHeight+5:0)+(f[0].tickPlacement==="inside"?f[0].tickLength:0):0),Math.max(ti,b))),ti=0<r.length?0:l[c]._labels&&0<l[c]._labels.length?l[c]._labels[0].textBlock.height/2:b,M=Math.round(x.y2-wi+(r[0]?(r[0].labelPlacement==="inside"?r[0].labelEffectiveHeight+(w.isNavigator?0:5):0)+(r[0].tickPlacement==="inside"?r[0].tickLength:0):0)-d-ti),l[c].lineCoordinates={x1:_-hi,y1:I,x2:N-hi,y2:M,height:Math.abs(M-I)},l[c].bounds={x1:_-(wt[c]+hi),y1:I,x2:N-hi,y2:M,height:M-I},l[c].bounds.width=l[c].bounds.x2-l[c].bounds.x1,l[c].labelPlacement==="inside"&&(l[c].lineCoordinates.x1=l[0].bounds.x1+wt[0]-hi-(l[c].labelEffectiveWidth||0)-5,l[c].lineCoordinates.x2=l[c].lineCoordinates.x1+l[c].lineThickness/2),l[c].tickPlacement==="inside"&&(l[c].lineCoordinates.x1-=l[c].tickLength,l[c].lineCoordinates.x2=l[c].lineCoordinates.x1+l[c].lineThickness/2),l[c].title&&(l[c]._titleTextBlock.maxWidth=0<l[c].titleMaxWidth&&l[c].titleMaxWidth<l[c].lineCoordinates.height?l[c].titleMaxWidth:l[c].lineCoordinates.height),hi+=wt[c]+l[c].margin);if(o&&0<o.length)for(c=0;c<o.length;c++)o[c]&&(_=N=Math.round((r[0]?r[0].lineCoordinates.x2:f[0].lineCoordinates.x2)-(o[0]?(o[0].labelPlacement==="inside"?o[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(o[0].tickPlacement==="inside"?o[0].tickLength:0):0)),ti=o[c]._labels&&0<o[c]._labels.length?o[c]._labels[o[c]._labels.length-1].textBlock.height/2:0,I=Math.round(Math.max(x.y1+mi+Ft-(f[0]?(f[0].labelPlacement==="inside"?f[0].labelEffectiveHeight+(w.isNavigator?0:5):0)+(f[0].tickPlacement==="inside"?f[0].tickLength:0):0),Math.max(ti,b))),ti=0<r.length?0:o[c]._labels&&0<o[c]._labels.length?o[c]._labels[0].textBlock.height/2:0,M=Math.round(x.y2-(wi+d+ti)+(r[0]?(r[0].labelPlacement==="inside"?r[0].labelEffectiveHeight+(w.isNavigator?0:5):0)+(r[0].tickPlacement==="inside"?r[0].tickLength:0):0)),o[c].lineCoordinates={x1:_+Pi,y1:I,x2:_+Pi,y2:M,height:Math.abs(M-I)},o[c].bounds={x1:_+Pi,y1:I,x2:N+gt[c]+Pi,y2:M,height:M-I},o[c].bounds.width=o[c].bounds.x2-o[c].bounds.x1,o[c].labelPlacement==="inside"&&(o[c].lineCoordinates.x1=o[0].bounds.x1+Pi+(o[c].labelEffectiveWidth||0)+(w.isNavigator?0:5),o[c].lineCoordinates.x2=o[c].lineCoordinates.x1+o[c].lineThickness/2),o[c].tickPlacement==="inside"&&(o[c].lineCoordinates.x1+=o[c].tickLength,o[c].lineCoordinates.x2=o[c].lineCoordinates.x1+o[c].lineThickness/2),o[c].title&&(o[c]._titleTextBlock.maxWidth=0<o[c].titleMaxWidth&&o[c].titleMaxWidth<o[c].lineCoordinates.height?o[c].titleMaxWidth:o[c].lineCoordinates.height),Pi+=gt[c]+o[c].margin);if(r&&0<r.length)for(c=0;c<r.length;c++)r[c]&&(r[c].calculateValueToPixelConversionParameters(),r[c].calculateBreaksSizeInValues(),r[c]._labels&&1<r[c]._labels.length&&(_t=(r[c].logarithmic?Math.log(r[c]._labels[1].position/r[c].viewportMinimum)/r[c].conversionParameters.lnLogarithmBase:r[c]._labels[1].position-r[c].viewportMinimum)*Math.abs(r[c].conversionParameters.pixelPerUnit)+r[c].lineCoordinates.x1,_=r[c]._labels[r[c]._labels.length-(r[c].valueType==="dateTime"?2:1)].position,_=r[c].getApparentDifference(r[c].viewportMinimum,_),Qt=r[c].logarithmic?(1<_?Math.log(_)/r[c].conversionParameters.lnLogarithmBase*Math.abs(r[c].conversionParameters.pixelPerUnit):0)+r[c].lineCoordinates.x1:(0<_?_*Math.abs(r[c].conversionParameters.pixelPerUnit):0)+r[c].lineCoordinates.x1));if(f&&0<f.length)for(c=0;c<f.length;c++)f[c].calculateValueToPixelConversionParameters(),f[c].calculateBreaksSizeInValues(),f[c]._labels&&1<f[c]._labels.length&&(_t=(f[c].logarithmic?Math.log(f[c]._labels[1].position/f[c].viewportMinimum)/f[c].conversionParameters.lnLogarithmBase:f[c]._labels[1].position-f[c].viewportMinimum)*Math.abs(f[c].conversionParameters.pixelPerUnit)+f[c].lineCoordinates.x1,_=f[c]._labels[f[c]._labels.length-(f[c].valueType==="dateTime"?2:1)].position,_=f[c].getApparentDifference(f[c].viewportMinimum,_),Qt=f[c].logarithmic?(1<_?Math.log(_)/f[c].conversionParameters.lnLogarithmBase*Math.abs(f[c].conversionParameters.pixelPerUnit):0)+f[c].lineCoordinates.x1:(0<_?_*Math.abs(f[c].conversionParameters.pixelPerUnit):0)+f[c].lineCoordinates.x1);for(c=0;c<P.length;c++)P[c].type==="axisY"&&(P[c].calculateValueToPixelConversionParameters(),P[c].calculateBreaksSizeInValues());if(0<V){if(r&&0<r.length)for(c=0;c<r.length;c++)L=vt[V-1][c]===vt[V][c];else L=!0;if(f&&0<f.length)for(c=0;c<f.length;c++)Vt=Ht[V-1][c]===Ht[V][c];else Vt=!0;if(l&&0<l.length)for(c=0;c<l.length;c++)Wt=me[V-1][c]===me[V][c];else Wt=!0;if(o&&0<o.length)for(c=0;c<o.length;c++)Nt=Pt[V-1][c]===Pt[V][c];else Nt=!0}if(L&&Vt&&Wt&&Nt)break;V++}if(r&&0<r.length)for(c=0;c<r.length;c++)r[c].calculateStripLinesThicknessInValues(),r[c].calculateBreaksInPixels();if(f&&0<f.length)for(c=0;c<f.length;c++)f[c].calculateStripLinesThicknessInValues(),f[c].calculateBreaksInPixels();if(l&&0<l.length)for(c=0;c<l.length;c++)l[c].calculateStripLinesThicknessInValues(),l[c].calculateBreaksInPixels();if(o&&0<o.length)for(c=0;c<o.length;c++)o[c].calculateStripLinesThicknessInValues(),o[c].calculateBreaksInPixels()}else{for(b=[],_t=[],se=[],U=[],E=[],Qt=[],vt=[],Ht=[];4>V;){if(wi=Pi=hi=I=ti=Ft=d=Pt=me=Qe=mi=0,r&&0<r.length)for(se=[],c=Pi=0;c<r.length;c++)se.push(Math.ceil(r[c]?r[c].createLabelsAndCalculateWidth():0)),Pi+=se[c],d+=r[c]&&!w.isNavigator?r[c].margin:0;else se.push(Math.ceil(r[0]?r[0].createLabelsAndCalculateWidth():0));if(vt.push(se),f&&0<f.length)for(U=[],c=wi=0;c<f.length;c++)U.push(Math.ceil(f[c]?f[c].createLabelsAndCalculateWidth():0)),wi+=U[c],Ft+=f[c]?f[c].margin:0;else U.push(Math.ceil(f[0]?f[0].createLabelsAndCalculateWidth():0));if(Ht.push(U),l&&0<l.length)for(c=0;c<l.length;c++)l[c].lineCoordinates={},_=Math.round(x.x1+Pi+d-(r[0]?(r[0].labelPlacement==="inside"?r[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(r[0].tickPlacement==="inside"?r[0].tickLength:0):0)),N=Math.round(Math.min(x.x2-wi-Ft+(f[0]?(f[0].labelPlacement==="inside"?f[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(f[0].tickPlacement==="inside"?f[0].tickLength:0):0),w.width-10)),l[c].labelAutoFit&&!p(G)&&(0<!r.length&&(_=0>l[c].labelAngle?Math.max(_,G):l[c].labelAngle===0?Math.max(_,G/2):_),0<!f.length&&(N=0<l[c].labelAngle||l[c].labelAngle===0?N-j/2:N)),l[c].lineCoordinates.x1=_,l[c].lineCoordinates.x2=N,l[c].lineCoordinates.width=Math.abs(N-_),l[c].title&&(l[c]._titleTextBlock.maxWidth=0<l[c].titleMaxWidth&&l[c].titleMaxWidth<l[c].lineCoordinates.width?l[c].titleMaxWidth:l[c].lineCoordinates.width);if(o&&0<o.length)for(c=0;c<o.length;c++)o[c].lineCoordinates={},_=Math.round(x.x1+Pi+d-(r[0]?(r[0].labelPlacement==="inside"?r[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(r[0].tickPlacement==="inside"?r[0].tickLength:0):0)),N=Math.round(Math.min(x.x2-wi-Ft+(f[0]?(f[0].labelPlacement==="inside"?f[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(f[0].tickPlacement==="inside"?f[0].tickLength:0):0),o[c].chart.width-10)),o[c]&&o[c].labelAutoFit&&!p(wt)&&(0<!r.length&&(_=0<o[c].labelAngle?Math.max(_,wt):o[c].labelAngle===0?Math.max(_,wt/2):_),0<!f.length&&(N-=gt/2)),o[c].lineCoordinates.x1=_,o[c].lineCoordinates.x2=N,o[c].lineCoordinates.width=Math.abs(N-_),o[c].title&&(o[c]._titleTextBlock.maxWidth=0<o[c].titleMaxWidth&&o[c].titleMaxWidth<o[c].lineCoordinates.width?o[c].titleMaxWidth:o[c].lineCoordinates.width);if(l&&0<l.length)for(b=[],c=hi=0;c<l.length;c++)b.push(Math.ceil(l[c]?l[c].createLabelsAndCalculateHeight():0)),hi+=b[c]+l[c].margin,ti+=l[c].margin;else b.push(Math.ceil(l[0]?l[0].createLabelsAndCalculateHeight():0));if(E.push(b),o&&0<o.length)for(_t=[],c=0;c<o.length;c++)_t.push(Math.ceil(o[c]?o[c].createLabelsAndCalculateHeight():0)),I+=o[c].margin;else _t.push(Math.ceil(o[0]?o[0].createLabelsAndCalculateHeight():0));if(Qt.push(_t),l&&0<l.length)for(c=0;c<l.length;c++)0<l[c]._labels.length&&(I=l[c]._labels[0],de=l[c]._labels[l[c]._labels.length-1],G=I.textBlock.width*Math.cos(Math.PI/180*Math.abs(I.textBlock.angle))+(I.textBlock.height-de.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(I.textBlock.angle)),j=de.textBlock.width*Math.cos(Math.PI/180*Math.abs(de.textBlock.angle))+(de.textBlock.height-de.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(de.textBlock.angle)));if(o&&0<o.length)for(c=0;c<o.length;c++)o[c]&&0<o[c]._labels.length&&(I=o[c]._labels[0],de=o[c]._labels[o[c]._labels.length-1],wt=I.textBlock.width*Math.cos(Math.PI/180*Math.abs(I.textBlock.angle))+(I.textBlock.height-de.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(I.textBlock.angle)),gt=de.textBlock.width*Math.cos(Math.PI/180*Math.abs(de.textBlock.angle))+(de.textBlock.height-de.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(de.textBlock.angle)));if(w.panEnabled)for(c=0;c<l.length;c++)b[c]=p(w.sessionVariables.axisY[c].height)?w.sessionVariables.axisY[c].height=b[c]:w.sessionVariables.axisY[c].height;else for(c=0;c<l.length;c++)w.sessionVariables.axisY[c].height=b[c];if(l&&0<l.length)for(c=l.length-1;0<=c;c--)I=Math.round(x.y2),M=Math.round(x.y2>l[c].chart.height?l[c].chart.height:x.y2),l[c].lineCoordinates.y1=I-(b[c]+l[c].margin+mi),l[c].lineCoordinates.y2=I-(b[c]+l[c].margin+mi),l[c].labelPlacement==="inside"&&(l[c].lineCoordinates.y1=l[c].lineCoordinates.y1+l[c].labelEffectiveHeight+(w.isNavigator?0:5),l[c].lineCoordinates.y2=l[c].lineCoordinates.y1+l[c].lineThickness/2),l[c].tickPlacement==="inside"&&(l[c].lineCoordinates.y1+=l[c].tickLength,l[c].lineCoordinates.y2=l[c].lineCoordinates.y1+l[c].lineThickness/2),l[c].bounds={x1:_,y1:I-(b[c]+mi+l[c].margin),x2:N,y2:M-(mi+l[c].margin),width:N-_,height:b[c]},l[c].title&&(l[c]._titleTextBlock.maxWidth=0<l[c].titleMaxWidth&&l[c].titleMaxWidth<l[c].lineCoordinates.width?l[c].titleMaxWidth:l[c].lineCoordinates.width),mi+=b[c]+l[c].margin;if(o&&0<o.length)for(c=o.length-1;0<=c;c--)o[c]&&(I=Math.round(x.y1),M=Math.round(x.y1+(_t[c]+o[c].margin+Qe)),o[c].lineCoordinates.y1=M,o[c].lineCoordinates.y2=M,o[c].labelPlacement==="inside"&&(o[c].lineCoordinates.y1=M-o[c].labelEffectiveHeight-5,o[c].lineCoordinates.y2=o[c].lineCoordinates.y1-o[c].lineThickness/2),o[c].tickPlacement==="inside"&&(o[c].lineCoordinates.y1-=o[c].tickLength,o[c].lineCoordinates.y2=o[c].lineCoordinates.y1-o[c].lineThickness/2),o[c].bounds={x1:_,y1:I+(o[c].margin+Qe),x2:N,y2:M,width:N-_},o[c].bounds.height=o[c].bounds.y2-o[c].bounds.y1,o[c].title&&(o[c]._titleTextBlock.maxWidth=0<o[c].titleMaxWidth&&o[c].titleMaxWidth<o[c].lineCoordinates.width?o[c].titleMaxWidth:o[c].lineCoordinates.width),Qe+=_t[c]+o[c].margin);if(r&&0<r.length)for(c=0;c<r.length;c++){if(ti=r[c]._labels&&0<r[c]._labels.length?r[c]._labels[0].textBlock.fontSize/2:0,_=Math.round(x.x1+d),I=o&&0<o.length?Math.round(o[0]?o[0].lineCoordinates.y2:x.y1<Math.max(ti,10)?Math.max(ti,10):x.y1):x.y1<Math.max(ti,10)?Math.max(ti,10):x.y1,N=Math.round(x.x1+Pi+d),M=l&&0<l.length?Math.round(l[0]?l[0].lineCoordinates.y1:x.y2-hi>w.height-Math.max(ti,10)?w.height-Math.max(ti,10):x.y2-hi):x.y2>w.height-Math.max(ti,10)?w.height-Math.max(ti,10):x.y2,l&&0<l.length)for(de=0;de<l.length;de++)l[de]&&l[de].labelAutoFit&&(N=l[de].lineCoordinates.x1+(r[0]?(r[0].labelPlacement==="inside"?r[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(r[0].tickPlacement==="inside"?r[0].tickLength:0):0),_=0>l[de].labelAngle||l[de].labelAngle===0?N-Pi:_);if(o&&0<o.length)for(de=0;de<o.length;de++)o[de]&&o[de].labelAutoFit&&(N=o[de].lineCoordinates.x1+(r[0]?(r[0].labelPlacement==="inside"?r[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(r[0].tickPlacement==="inside"?r[0].tickLength:0):0),_=N-Pi);r[c].lineCoordinates={x1:N-me,y1:I,x2:N-me,y2:M,height:Math.abs(M-I)},r[c].labelPlacement==="inside"&&(r[c].lineCoordinates.x1=r[c].lineCoordinates.x1-r[c].labelEffectiveWidth-5,r[c].lineCoordinates.x2=r[c].lineCoordinates.x1+r[c].lineThickness/2),r[c].tickPlacement==="inside"&&(r[c].lineCoordinates.x1-=r[c].tickLength,r[c].lineCoordinates.x2=r[c].lineCoordinates.x1+r[c].lineThickness/2),r[c].bounds={x1:N-(se[c]+me),y1:I,x2:N-me,y2:M,height:M-I},r[c].bounds.width=r[c].bounds.x2-r[c].bounds.x1,r[c].title&&(r[c]._titleTextBlock.maxWidth=0<r[c].titleMaxWidth&&r[c].titleMaxWidth<r[c].lineCoordinates.height?r[c].titleMaxWidth:r[c].lineCoordinates.height),r[c].calculateValueToPixelConversionParameters(),r[c].calculateBreaksSizeInValues(),me+=se[c]+r[c].margin}if(f&&0<f.length)for(c=0;c<f.length;c++){if(ti=f[c]._labels&&0<f[c]._labels.length?f[c]._labels[0].textBlock.fontSize/2:0,N=Math.round(x.x1-Ft),I=o&&0<o.length?Math.round(o[0]?o[0].lineCoordinates.y2:x.y1<Math.max(ti,10)?Math.max(ti,10):x.y1):x.y1<Math.max(ti,10)?Math.max(ti,10):x.y1,_=Math.round(x.x2-wi-Ft),M=l&&0<l.length?Math.round(l[0]?l[0].lineCoordinates.y1:x.y2-hi>w.height-Math.max(ti,10)?w.height-Math.max(ti,10):x.y2-hi):x.y2>w.height-Math.max(ti,10)?w.height-Math.max(ti,10):x.y2,l&&0<l.length)for(de=0;de<l.length;de++)l[de]&&l[de].labelAutoFit&&(_=l[de].lineCoordinates.x2-(f[0]?(f[0].labelPlacement==="inside"?f[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(f[0].tickPlacement==="inside"?f[0].tickLength:0):0),N=0>l[de].labelAngle||l[de].labelAngle===0?_+wi:_);if(o&&0<o.length)for(de=0;de<o.length;de++)o[de]&&o[de].labelAutoFit&&(_=o[de].lineCoordinates.x2-(f[0]?(f[0].labelPlacement==="inside"?f[0].labelEffectiveWidth+(w.isNavigator?0:5):0)+(f[0].tickPlacement==="inside"?f[0].tickLength:0):0),N=_+wi);f[c].lineCoordinates={x1:_+Pt,y1:I,x2:_+Pt,y2:M,height:Math.abs(M-I)},f[c].labelPlacement==="inside"&&(f[c].lineCoordinates.x1=f[c].lineCoordinates.x1+f[c].labelEffectiveWidth+(w.isNavigator?0:5),f[c].lineCoordinates.x2=f[c].lineCoordinates.x1+f[c].lineThickness/2),f[c].tickPlacement==="inside"&&(f[c].lineCoordinates.x1+=f[c].tickLength,f[c].lineCoordinates.x2=f[c].lineCoordinates.x1+f[c].lineThickness/2),f[c].bounds={x1:_+Pt,y1:I,x2:_+U[c]+Pt,y2:M,height:M-I},f[c].bounds.width=f[c].bounds.x2-f[c].bounds.x1,f[c].title&&(f[c]._titleTextBlock.maxWidth=0<f[c].titleMaxWidth&&f[c].titleMaxWidth<f[c].lineCoordinates.height?f[c].titleMaxWidth:f[c].lineCoordinates.height),f[c].calculateValueToPixelConversionParameters(),f[c].calculateBreaksSizeInValues(),Pt+=U[c]+f[c].margin}for(c=0;c<P.length;c++)P[c].type==="axisY"&&(P[c].calculateValueToPixelConversionParameters(),P[c].calculateBreaksSizeInValues());if(0<V){if(r&&0<r.length)for(c=0;c<r.length;c++)L=vt[V-1][c]===vt[V][c];else L=!0;if(f&&0<f.length)for(c=0;c<f.length;c++)Vt=Ht[V-1][c]===Ht[V][c];else Vt=!0;if(l&&0<l.length)for(c=0;c<l.length;c++)Wt=E[V-1][c]===E[V][c];else Wt=!0;if(o&&0<o.length)for(c=0;c<o.length;c++)Nt=Qt[V-1][c]===Qt[V][c];else Nt=!0}if(L&&Vt&&Wt&&Nt)break;V++}if(l&&0<l.length)for(c=0;c<l.length;c++)l[c].calculateStripLinesThicknessInValues(),l[c].calculateBreaksInPixels();if(o&&0<o.length)for(c=0;c<o.length;c++)o[c].calculateStripLinesThicknessInValues(),o[c].calculateBreaksInPixels();if(r&&0<r.length)for(c=0;c<r.length;c++)r[c].calculateStripLinesThicknessInValues(),r[c].calculateBreaksInPixels();if(f&&0<f.length)for(c=0;c<f.length;c++)f[c].calculateStripLinesThicknessInValues(),f[c].calculateBreaksInPixels()}},Ot.render=function(r,f,l,o,d){d=r[0]?r[0].chart:f[0].chart;var x=d.ctx;if(d.alignVerticalAxes&&d.alignVerticalAxes(),x.save(),x.beginPath(),r&&r.length&&x.rect(2,r[0].bounds.y1,r[0].chart.width-4,r[r.length-1].bounds.y2),f&&f.length&&x.rect(2,f[f.length-1].bounds.y1,f[0].chart.width-4,f[0].bounds.y2),x.clip(),r&&0<r.length)for(var _=0;_<r.length;_++)r[_].renderLabelsTicksAndTitle();if(f&&0<f.length)for(_=0;_<f.length;_++)f[_].renderLabelsTicksAndTitle();if(x.restore(),l&&0<l.length)for(_=0;_<l.length;_++)l[_].renderLabelsTicksAndTitle();if(o&&0<o.length)for(_=0;_<o.length;_++)o[_].renderLabelsTicksAndTitle();if(d.preparePlotArea(),_=d.plotArea,x.save(),x.beginPath(),x.rect(_.x1,_.y1,Math.abs(_.x2-_.x1),Math.abs(_.y2-_.y1)),x.clip(),r&&0<r.length)for(_=0;_<r.length;_++)r[_].renderStripLinesOfThicknessType("value");if(f&&0<f.length)for(_=0;_<f.length;_++)f[_].renderStripLinesOfThicknessType("value");if(l&&0<l.length)for(_=0;_<l.length;_++)l[_].renderStripLinesOfThicknessType("value");if(o&&0<o.length)for(_=0;_<o.length;_++)o[_].renderStripLinesOfThicknessType("value");if(r&&0<r.length)for(_=0;_<r.length;_++)r[_].renderInterlacedColors();if(f&&0<f.length)for(_=0;_<f.length;_++)f[_].renderInterlacedColors();if(l&&0<l.length)for(_=0;_<l.length;_++)l[_].renderInterlacedColors();if(o&&0<o.length)for(_=0;_<o.length;_++)o[_].renderInterlacedColors();if(x.restore(),r&&0<r.length)for(_=0;_<r.length;_++)r[_].renderGrid(),ut&&(r[_].createMask(),r[_].renderBreaksBackground());if(f&&0<f.length)for(_=0;_<f.length;_++)f[_].renderGrid(),ut&&(f[_].createMask(),f[_].renderBreaksBackground());if(l&&0<l.length)for(_=0;_<l.length;_++)l[_].renderGrid(),ut&&(l[_].createMask(),l[_].renderBreaksBackground());if(o&&0<o.length)for(_=0;_<o.length;_++)o[_].renderGrid(),ut&&(o[_].createMask(),o[_].renderBreaksBackground());if(r&&0<r.length)for(_=0;_<r.length;_++)r[_].renderAxisLine();if(f&&0<f.length)for(_=0;_<f.length;_++)f[_].renderAxisLine();if(l&&0<l.length)for(_=0;_<l.length;_++)l[_].renderAxisLine();if(o&&0<o.length)for(_=0;_<o.length;_++)o[_].renderAxisLine();if(x=!1,r&&0<r.length)for(_=0;_<r.length;_++)r[_].renderStripLinesOfThicknessType("pixel"),r[_].crosshair&&r[_].crosshair.enabled&&(x=!0,d.clearedOverlayedCanvas=r[_].type);if(f&&0<f.length)for(_=0;_<f.length;_++)f[_].renderStripLinesOfThicknessType("pixel"),f[_].crosshair&&f[_].crosshair.enabled&&(x=!0,d.clearedOverlayedCanvas=f[_].type);if(l&&0<l.length)for(_=0;_<l.length;_++)l[_].renderStripLinesOfThicknessType("pixel"),l[_].crosshair&&l[_].crosshair.enabled&&(x=!0,d.clearedOverlayedCanvas=l[_].type);if(o&&0<o.length)for(_=0;_<o.length;_++)o[_].renderStripLinesOfThicknessType("pixel"),o[_].crosshair&&o[_].crosshair.enabled&&(x=!0,d.clearedOverlayedCanvas=o[_].type);(x||!x&&d.clearedOverlayedCanvas&&0<=d.clearedOverlayedCanvas.indexOf("axis"))&&(d.resetOverlayedCanvas(),d.renderCrosshairs(null,p(d.sessionVariables.crosshairShownByPixel)||d.sessionVariables.crosshairShownByPixel?!0:d.sessionVariables.crosshairShownByPixel))},Ot.prototype.calculateStripLinesThicknessInValues=function(){for(var r=0;r<this.stripLines.length;r++)if(this.stripLines[r].startValue!==null&&this.stripLines[r].endValue!==null){var f=Math.min(this.stripLines[r].startValue,this.stripLines[r].endValue),l=Math.max(this.stripLines[r].startValue,this.stripLines[r].endValue),o=this.getApparentDifference(f,l);this.stripLines[r].value=this.convertPixelToValue((this.convertValueToPixel(f)+this.convertValueToPixel(l))/2),this.stripLines[r].thickness=o,this.stripLines[r]._thicknessType="value"}},Ot.prototype.calculateBreaksSizeInValues=function(){for(var r=this._position==="left"||this._position==="right"?this.lineCoordinates.height||this.chart.height:this.lineCoordinates.width||this.chart.width,f=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],l=this.conversionParameters.pixelPerUnit||r/(this.logarithmic?this.conversionParameters.maximum/this.conversionParameters.minimum:this.conversionParameters.maximum-this.conversionParameters.minimum),o=this.scaleBreaks&&!p(this.scaleBreaks.options.spacing),d,x=0;x<f.length;x++)d=o||!p(f[x].options.spacing),f[x].spacing=tt(f[x].spacing,r,8,d?.1*r:8,d?0:3)<<0,f[x].size=0>f[x].spacing?0:Math.abs(f[x].spacing/l),this.logarithmic&&(f[x].size=Math.pow(this.logarithmBase,f[x].size))},Ot.prototype.calculateBreaksInPixels=function(){if(!(this.scaleBreaks&&0>=this.scaleBreaks._appliedBreaks.length)){var r=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];r.length&&(this.scaleBreaks.firstBreakIndex=this.scaleBreaks.lastBreakIndex=null);for(var f=0;f<r.length&&!(r[f].startValue>this.conversionParameters.maximum);f++)r[f].endValue<this.conversionParameters.minimum||(p(this.scaleBreaks.firstBreakIndex)&&(this.scaleBreaks.firstBreakIndex=f),r[f].startValue>=this.conversionParameters.minimum&&(r[f].startPixel=this.convertValueToPixel(r[f].startValue),this.scaleBreaks.lastBreakIndex=f),r[f].endValue<=this.conversionParameters.maximum&&(r[f].endPixel=this.convertValueToPixel(r[f].endValue)))}},Ot.prototype.renderLabelsTicksAndTitle=function(){var r=this,f=!1,l=0,o=0,d=1,x=0;if(this.labelAngle!==0&&this.labelAngle!==360&&(d=1.2),typeof this.options.interval>"u"){if(this._position==="bottom"||this._position==="top")if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var l=[],d=this.labelAngle!==0&&this.labelAngle!==360?1:1.2,_,I=this.viewportMaximum,N=this.lineCoordinates.width/Math.log(this.range),w=this._labels.length-1;0<=w&&(b=this._labels[w],!(b.position<this.viewportMinimum));w--)b.position>this.viewportMaximum||!(w===this._labels.length-1||_<Math.log(I/b.position)*N/d)||(l.push(b),I=b.position,_=b.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=l}else{for(w=0;w<this._labels.length;w++)b=this._labels[w],b.position<this.viewportMinimum||(_=b.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),l+=_);l>this.lineCoordinates.width*d&&this.labelAutoFit&&(f=!0)}if(this._position==="left"||this._position==="right")if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){for(var l=[],M,I=this.viewportMaximum,N=this.lineCoordinates.height/Math.log(this.range),w=this._labels.length-1;0<=w&&(b=this._labels[w],!(b.position<this.viewportMinimum));w--)b.position>this.viewportMaximum||!(w===this._labels.length-1||M<Math.log(I/b.position)*N)||(l.push(b),I=b.position,M=b.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=l}else{for(w=0;w<this._labels.length;w++)b=this._labels[w],b.position<this.viewportMinimum||(M=b.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)),o+=M);o>this.lineCoordinates.height*d&&this.labelAutoFit&&(f=!0)}}this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit&&this._labels.sort(function(c,L){return c.position-L.position});var w=0,b,P;if(this._position==="bottom"){for(w=0;w<this._labels.length;w++)b=this._labels[w],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(P=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(P.x<<0)+.5:P.x<<0,this.ctx.beginPath(),this.ctx.moveTo(o,P.y<<0),this.ctx.lineTo(o,P.y+this.tickLength<<0),this.ctx.stroke()),f&&x++%2!==0&&this.labelAutoFit||(b.textBlock.angle===0?(P.x-=b.textBlock.width/2,P.y=this.labelPlacement==="inside"?P.y-((this.tickPlacement==="inside"?this.tickLength:0)+b.textBlock.height-b.textBlock._lineHeight/2+5):P.y+(this.tickPlacement==="inside"?0:this.tickLength)+b.textBlock._lineHeight/2+5):0>this.labelAngle?(P.x=P.x-(this.labelPlacement==="inside"?0:b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.topPadding*Math.sin(Math.PI/180*this.labelAngle),P.y=this.labelPlacement==="inside"?P.y-(this.tickPlacement==="inside"?this.tickLength:0)-5-(b.textBlock.height-b.textBlock._lineHeight/2)*Math.cos(Math.PI/180*this.labelAngle):P.y+(this.tickPlacement==="inside"?0:this.tickLength)+5+Math.abs(b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-b.textBlock._lineHeight/2*Math.cos(Math.PI/180*this.labelAngle))):(P.x=P.x-(this.labelPlacement==="inside"?b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0)+b.textBlock.topPadding*Math.sin(Math.PI/180*this.labelAngle),P.y=this.labelPlacement==="inside"?P.y-(this.tickPlacement==="inside"?this.tickLength:0)-5-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-(b.textBlock.height-b.textBlock._lineHeight/2)*Math.cos(Math.PI/180*this.labelAngle):P.y+(this.tickPlacement==="inside"?0:this.tickLength)+5+Math.abs(b.textBlock._lineHeight/2*Math.cos(Math.PI/180*this.labelAngle))),b.textBlock.x=P.x,b.textBlock.y=P.y));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(w=0;w<r._labels.length;w++)if(b=r._labels[w],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(P=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var c=r.ctx.lineWidth%2===1?(P.x<<0)+.5:P.x<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(c,P.y<<0),r.ctx.lineTo(c,P.y-r.tickLength<<0),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y2-this._titleTextBlock.height+this._titleTextBlock._lineHeight/2-1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="top"){for(w=0;w<this._labels.length;w++)b=this._labels[w],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(P=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(P.x<<0)+.5:P.x<<0,this.ctx.beginPath(),this.ctx.moveTo(o,P.y<<0),this.ctx.lineTo(o,P.y-this.tickLength<<0),this.ctx.stroke()),f&&x++%2!==0&&this.labelAutoFit||(b.textBlock.angle===0?(P.x-=b.textBlock.width/2,P.y=this.labelPlacement==="inside"?P.y+b.textBlock._lineHeight/2+(this.tickPlacement==="inside"?this.tickLength:0)+5:P.y-((this.tickPlacement==="inside"?0:this.tickLength)+b.textBlock.height-b.textBlock._lineHeight/2)-5):0>this.labelAngle?(P.x=P.x-(this.labelPlacement==="inside"?b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0)+b.textBlock.topPadding*Math.sin(Math.PI/180*this.labelAngle),P.y=this.labelPlacement==="inside"?P.y+(this.tickPlacement==="inside"?this.tickLength:0)+5-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+b.textBlock._lineHeight/2*Math.cos(Math.PI/180*this.labelAngle):P.y-(this.tickPlacement==="inside"?0:this.tickLength)-5-(b.textBlock.height-b.textBlock._lineHeight/2)*Math.cos(Math.PI/180*this.labelAngle)):(P.x=P.x-(this.labelPlacement==="inside"?0:b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle))+b.textBlock.topPadding*Math.sin(Math.PI/180*this.labelAngle),P.y=this.labelPlacement==="inside"?P.y+(this.tickPlacement==="inside"?this.tickLength:0)+5+b.textBlock._lineHeight/2*Math.cos(Math.PI/180*this.labelAngle):P.y-(this.tickPlacement==="inside"?0:this.tickLength)-5-((b.textBlock.height-b.textBlock._lineHeight/2)*Math.cos(Math.PI/180*this.labelAngle)+b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle))),b.textBlock.x=P.x,b.textBlock.y=P.y));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(w=0;w<r._labels.length;w++)if(b=r._labels[w],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(P=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var c=r.ctx.lineWidth%2===1?(P.x<<0)+.5:P.x<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(c,P.y<<0),r.ctx.lineTo(c,P.y+r.tickLength<<0),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y1+this._titleTextBlock._lineHeight/2+1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="left"){for(w=0;w<this._labels.length;w++)b=this._labels[w],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(P=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(P.y<<0)+.5:P.y<<0,this.ctx.beginPath(),this.ctx.moveTo(P.x<<0,o),this.ctx.lineTo(P.x-this.tickLength<<0,o),this.ctx.stroke()),f&&x++%2!==0&&this.labelAutoFit||(this.labelAngle===0?(b.textBlock.y=P.y-b.textBlock.topPadding,b.textBlock.x=this.labelPlacement==="inside"?P.x+(this.tickPlacement==="inside"?this.tickLength:0)+5:P.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5):0>this.labelAngle?(b.textBlock.y=(this.labelPlacement==="inside"?P.y:P.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle))-b.textBlock.topPadding*Math.cos(Math.PI/180*this.labelAngle),b.textBlock.x=this.labelPlacement==="inside"?P.x-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?this.tickLength:0)+5:P.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5):(b.textBlock.y=(this.labelPlacement==="inside"?P.y:P.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle))-b.textBlock.topPadding*Math.cos(Math.PI/180*this.labelAngle),b.textBlock.x=this.labelPlacement==="inside"?P.x+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?this.tickLength:0)+5:P.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?0:this.tickLength)-5)));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(w=0;w<r._labels.length;w++)if(b=r._labels[w],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(P=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var c=r.ctx.lineWidth%2===1?(P.y<<0)+.5:P.y<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(P.x<<0,c),r.ctx.lineTo(P.x+r.tickLength<<0,c),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x1+this._titleTextBlock._lineHeight/2,this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if(this._position==="right"){for(w=0;w<this._labels.length;w++)b=this._labels[w],b.position<this.viewportMinimum||b.position>this.viewportMaximum||(P=this.getPixelCoordinatesOnAxis(b.position),this.tickThickness&&this.tickPlacement!="inside"&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=this.ctx.lineWidth%2===1?(P.y<<0)+.5:P.y<<0,this.ctx.beginPath(),this.ctx.moveTo(P.x<<0,o),this.ctx.lineTo(P.x+this.tickLength<<0,o),this.ctx.stroke()),f&&x++%2!==0&&this.labelAutoFit||(this.labelAngle===0?(b.textBlock.y=P.y-b.textBlock.topPadding,b.textBlock.x=this.labelPlacement==="inside"?P.x-b.textBlock.width-(this.tickPlacement==="inside"?this.tickLength:0)-5:P.x+(this.tickPlacement==="inside"?0:this.tickLength)+5):0>this.labelAngle?(b.textBlock.y=(this.labelPlacement==="inside"?P.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):P.y)-b.textBlock.topPadding*Math.cos(Math.PI/180*this.labelAngle),b.textBlock.x=this.labelPlacement==="inside"?P.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?this.tickLength:0)-5:P.x-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?0:this.tickLength)+5):(b.textBlock.y=(this.labelPlacement==="inside"?P.y-b.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):P.y)-b.textBlock.topPadding*Math.cos(Math.PI/180*this.labelAngle),b.textBlock.x=this.labelPlacement==="inside"?P.x-b.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-b.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle)-(this.tickPlacement==="inside"?this.tickLength:0)-5:P.x+(b.textBlock.height-b.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)+(this.tickPlacement==="inside"?0:this.tickLength)+5)));this.tickPlacement==="inside"&&this.chart.addEventListener("dataAnimationIterationEnd",function(){for(w=0;w<r._labels.length;w++)if(b=r._labels[w],!(b.position<r.viewportMinimum||b.position>r.viewportMaximum)&&(P=r.getPixelCoordinatesOnAxis(b.position),r.tickThickness)){r.ctx.lineWidth=r.tickThickness,r.ctx.strokeStyle=r.tickColor;var c=r.ctx.lineWidth%2===1?(P.y<<0)+.5:P.y<<0;r.ctx.save(),r.ctx.beginPath(),r.ctx.moveTo(P.x<<0,c),r.ctx.lineTo(P.x-r.tickLength<<0,c),r.ctx.stroke(),r.ctx.restore()}},this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x2-this._titleTextBlock._lineHeight/2,this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}if(x=0,this.labelPlacement==="inside")this.chart.addEventListener("dataAnimationIterationEnd",function(){for(w=0;w<r._labels.length;w++)b=r._labels[w],b.position<r.viewportMinimum||b.position>r.viewportMaximum||f&&x++%2!==0&&r.labelAutoFit||(r.ctx.save(),r.ctx.beginPath(),b.textBlock.render(!0),r.ctx.restore())},this);else for(w=0;w<this._labels.length;w++)b=this._labels[w],b.position<this.viewportMinimum||b.position>this.viewportMaximum||f&&x++%2!==0&&this.labelAutoFit||b.textBlock.render(!0)},Ot.prototype.renderInterlacedColors=function(){var r=this.chart.plotArea.ctx,f,l,o=this.chart.plotArea,d=0;if(f=!0,(this._position==="bottom"||this._position==="top")&&this.interlacedColor)for(r.fillStyle=this.interlacedColor,d=0;d<this._labels.length;d++)f?(f=this.getPixelCoordinatesOnAxis(this._labels[d].position),l=d+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[d+1].position),r.fillRect(Math.min(l.x,f.x),o.y1,Math.abs(l.x-f.x),Math.abs(o.y1-o.y2)),f=!1):f=!0;else if((this._position==="left"||this._position==="right")&&this.interlacedColor)for(r.fillStyle=this.interlacedColor,d=0;d<this._labels.length;d++)f?(l=this.getPixelCoordinatesOnAxis(this._labels[d].position),f=d+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[d+1].position),r.fillRect(o.x1,Math.min(l.y,f.y),Math.abs(o.x1-o.x2),Math.abs(f.y-l.y)),f=!1):f=!0;r.beginPath()},Ot.prototype.renderStripLinesOfThicknessType=function(r){if(this.stripLines&&0<this.stripLines.length&&r){var f=this,l,o,d=0,x=0,_=!1;o=!1;for(var I=[],N=[],M=!1,w,d=0;d<this.stripLines.length;d++){var b=this.stripLines[d];b._thicknessType===r&&(r==="pixel"&&(b.value<this.viewportMinimum||b.value>this.viewportMaximum||p(b.value)||isNaN(this.range))||r==="value"&&(b.startValue<=this.viewportMinimum&&b.endValue<=this.viewportMinimum||b.startValue>=this.viewportMaximum&&b.endValue>=this.viewportMaximum||p(b.startValue)||p(b.endValue)||isNaN(this.range))||I.push(b))}for(d=0;d<this._stripLineLabels.length;d++)if(b=this.stripLines[d],l=this._stripLineLabels[d],!(l.position<this.viewportMinimum||l.position>this.viewportMaximum||isNaN(this.range)))if(o=this.getPixelCoordinatesOnAxis(l.position),l.stripLine.labelPlacement==="outside"){if(b&&(this.ctx.strokeStyle=b.color,this.ctx.lineWidth=b._thicknessType==="pixel"?b.thickness:this.tickThickness,p(b.opacity)||b._thicknessType!=="pixel"||(w=b.ctx.globalAlpha,b.ctx.globalAlpha=b.opacity)),this._position==="bottom"){var P=this.ctx.lineWidth%2===1?(o.x<<0)+.5:o.x<<0;this.ctx.beginPath(),this.ctx.moveTo(P,o.y<<0),this.ctx.lineTo(P,o.y+this.tickLength<<0),this.ctx.stroke(),this.labelAngle===0?(o.x-=l.textBlock.width/2,o.y+=this.tickLength+l.textBlock.fontSize/2+5):(o.x-=(0>this.labelAngle?l.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0)-l.textBlock.topPadding*Math.sin(Math.PI/180*this.labelAngle),o.y+=this.tickLength+5+(0>this.labelAngle?Math.abs(l.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-l.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle)):Math.abs(l.textBlock.fontSize/2*Math.cos(Math.PI/180*this.labelAngle))))}else this._position==="top"?(P=this.ctx.lineWidth%2===1?(o.x<<0)+.5:o.x<<0,this.ctx.beginPath(),this.ctx.moveTo(P,o.y<<0),this.ctx.lineTo(P,o.y-this.tickLength<<0),this.ctx.stroke(),this.labelAngle===0?(o.x-=l.textBlock.width/2,o.y-=this.tickLength+l.textBlock.height-l.textBlock.fontSize/2):(o.x-=(0<this.labelAngle?l.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0)-l.textBlock.topPadding*Math.sin(Math.PI/180*this.labelAngle),o.y-=this.tickLength+2+(0<this.labelAngle?(l.textBlock.height-l.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+l.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):(l.textBlock.height-l.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)))):this._position==="left"?(P=this.ctx.lineWidth%2===1?(o.y<<0)+.5:o.y<<0,this.ctx.beginPath(),this.ctx.moveTo(o.x<<0,P),this.ctx.lineTo(o.x-this.tickLength<<0,P),this.ctx.stroke(),this.labelAngle===0?(o.x=o.x-l.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5,o.y-=l.textBlock.topPadding):(o.y-=l.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+l.textBlock.topPadding*Math.cos(Math.PI/180*this.labelAngle),o.x-=this.tickLength+5+(0<this.labelAngle?l.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+l.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle):l.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-(l.textBlock.height-l.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle)))):this._position==="right"&&(P=this.ctx.lineWidth%2===1?(o.y<<0)+.5:o.y<<0,this.ctx.beginPath(),this.ctx.moveTo(o.x<<0,P),this.ctx.lineTo(o.x+this.tickLength<<0,P),this.ctx.stroke(),this.labelAngle===0?(o.x=o.x+this.tickLength+5,o.y-=l.textBlock.topPadding):(o.y-=l.textBlock.topPadding*Math.cos(Math.PI/180*this.labelAngle),o.x=this.tickLength+5+(0<this.labelAngle?o.x+(l.textBlock.height-l.textBlock.fontSize/2)*Math.sin(Math.PI/180*this.labelAngle):o.x-l.textBlock.fontSize/2*Math.sin(Math.PI/180*this.labelAngle))));w&&(b.ctx.globalAlpha=w),l.textBlock.x=o.x,l.textBlock.y=o.y,N.push(l)}else b._thicknessType===r&&(l.textBlock.angle=-90,this._position==="bottom"?(l.textBlock.maxWidth=this.options.stripLines[d].labelMaxWidth?this.options.stripLines[d].labelMaxWidth:this.chart.plotArea.height-3,l.textBlock.measureText(),o.x-l.textBlock.height-b.thickness/2>this.chart.plotArea.x1?p(b.startValue)?o.x-=l.textBlock.height-l.textBlock.fontSize/2+b.thickness/2:o.x-=l.textBlock.height/2-l.textBlock.fontSize/2:(l.textBlock.angle=90,p(b.startValue)?o.x+=l.textBlock.height-l.textBlock.fontSize/2+b.thickness/2:o.x+=l.textBlock.height/2-l.textBlock.fontSize/2),o.y=l.textBlock.angle===-90?l.stripLine.labelAlign==="near"?this.chart.plotArea.y2-3:l.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1+l.textBlock.width)/2:this.chart.plotArea.y1+l.textBlock.width+3:l.stripLine.labelAlign==="near"?this.chart.plotArea.y2-l.textBlock.width-3:l.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1-l.textBlock.width)/2:this.chart.plotArea.y1+3):this._position==="top"?(l.textBlock.maxWidth=this.options.stripLines[d].labelMaxWidth?this.options.stripLines[d].labelMaxWidth:this.chart.plotArea.height-3,l.textBlock.measureText(),o.x-l.textBlock.height-b.thickness/2>this.chart.plotArea.x1?p(b.startValue)?o.x-=l.textBlock.height-l.textBlock.fontSize/2+b.thickness/2:o.x-=l.textBlock.height/2-l.textBlock.fontSize/2:(l.textBlock.angle=90,p(b.startValue)?o.x+=l.textBlock.height-l.textBlock.fontSize/2+b.thickness/2:o.x+=l.textBlock.height/2-l.textBlock.fontSize/2),o.y=l.textBlock.angle===-90?l.stripLine.labelAlign==="near"?this.chart.plotArea.y1+l.textBlock.width+3:l.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1+l.textBlock.width)/2:this.chart.plotArea.y2-3:l.stripLine.labelAlign==="near"?this.chart.plotArea.y1+3:l.stripLine.labelAlign==="center"?(this.chart.plotArea.y2+this.chart.plotArea.y1-l.textBlock.width)/2:this.chart.plotArea.y2-l.textBlock.width-3):this._position==="left"?(l.textBlock.maxWidth=this.options.stripLines[d].labelMaxWidth?this.options.stripLines[d].labelMaxWidth:this.chart.plotArea.width-3,l.textBlock.angle=0,l.textBlock.measureText(),o.y-l.textBlock.height-b.thickness/2>this.chart.plotArea.y1?p(b.startValue)?o.y-=l.textBlock.height-l.textBlock.fontSize/2+b.thickness/2:o.y-=l.textBlock.height/2-l.textBlock.fontSize/2:p(b.startValue)?o.y+=l.textBlock.height-l.textBlock.fontSize/2+b.thickness/2:o.y+=l.textBlock.height/2-l.textBlock.fontSize+3,o.x=l.stripLine.labelAlign==="near"?this.chart.plotArea.x1+3:l.stripLine.labelAlign==="center"?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-l.textBlock.width/2:this.chart.plotArea.x2-l.textBlock.width-3):this._position==="right"&&(l.textBlock.maxWidth=this.options.stripLines[d].labelMaxWidth?this.options.stripLines[d].labelMaxWidth:this.chart.plotArea.width-3,l.textBlock.angle=0,l.textBlock.measureText(),o.y-l.textBlock.height-b.thickness/2>this.chart.plotArea.y1?p(b.startValue)?o.y-=l.textBlock.height-l.textBlock.fontSize/2+b.thickness/2:o.y-=l.textBlock.height/2-l.textBlock.fontSize/2:p(b.startValue)?o.y+=l.textBlock.height-l.textBlock.fontSize/2+b.thickness/2:o.y-=l.textBlock.height/2-l.textBlock.fontSize/2+3,o.x=l.stripLine.labelAlign==="near"?this.chart.plotArea.x2-l.textBlock.width-3:l.stripLine.labelAlign==="center"?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-l.textBlock.width/2:this.chart.plotArea.x1+3),l.textBlock.x=o.x,l.textBlock.y=o.y,N.push(l));if(!M){for(o=!1,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),d=0;d<I.length;d++)b=I[d],b.showOnTop?_||(_=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),x=0;x<I.length;x++)b=I[x],b.showOnTop&&b.render();this.ctx.restore()},b)):b.render();for(d=0;d<N.length;d++)l=N[d],l.stripLine.showOnTop?o||(o=!0,this.chart.addEventListener("dataAnimationIterationEnd",function(){for(x=0;x<N.length;x++)l=N[x],l.stripLine.labelPlacement==="inside"&&l.stripLine.showOnTop&&(f.ctx.save(),f.ctx.beginPath(),f.ctx.rect(f.chart.plotArea.x1,f.chart.plotArea.y1,f.chart.plotArea.width,f.chart.plotArea.height),f.ctx.clip(),l.textBlock.render(!0),f.ctx.restore())},l.textBlock)):l.stripLine.labelPlacement==="inside"&&l.textBlock.render(!0);this.ctx.restore(),M=!0}if(M)for(o=!1,d=0;d<N.length;d++)l=N[d],l.stripLine.labelPlacement==="outside"&&l.textBlock.render(!0)}},Ot.prototype.renderBreaksBackground=function(){this.chart._breaksCanvas&&this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length&&this.maskCanvas&&(this.chart._breaksCanvasCtx.save(),this.chart._breaksCanvasCtx.beginPath(),this.chart._breaksCanvasCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.chart._breaksCanvasCtx.clip(),this.chart._breaksCanvasCtx.drawImage(this.maskCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx.restore())},Ot.prototype.createMask=function(){if(this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length){var r=this.scaleBreaks._appliedBreaks;ut?(this.maskCanvas=nt(this.chart.width,this.chart.height),this.maskCtx=this.maskCanvas.getContext("2d")):(this.maskCanvas=this.chart.plotArea.canvas,this.maskCtx=this.chart.plotArea.ctx),this.maskCtx.save(),this.maskCtx.beginPath(),this.maskCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.maskCtx.clip();for(var f=0;f<r.length;f++)r[f].endValue<this.viewportMinimum||r[f].startValue>this.viewportMaximum||isNaN(this.range)||r[f].render(this.maskCtx);this.maskCtx.restore()}},Ot.prototype.renderCrosshair=function(r,f){isFinite(this.minimum)&&isFinite(this.maximum)&&this.crosshair.render(r,f)},Ot.prototype.showCrosshair=function(r){p(r)||r<this.viewportMinimum||r>this.viewportMaximum||(this._position==="top"||this._position==="bottom"?this.crosshair.render(this.convertValueToPixel(r),null,r):this.crosshair.render(null,this.convertValueToPixel(r),r))},Ot.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var r=this.chart.ctx;r.save();var f,l=this.chart.plotArea;if(r.lineWidth=this.gridThickness,r.strokeStyle=this.gridColor,r.setLineDash&&r.setLineDash(y(this.gridDashType,this.gridThickness)),this._position==="bottom"||this._position==="top")for(o=0;o<this._labels.length;o++)this._labels[o].position<this.viewportMinimum||this._labels[o].position>this.viewportMaximum||this._labels[o].breaksLabelType||(r.beginPath(),f=this.getPixelCoordinatesOnAxis(this._labels[o].position),f=r.lineWidth%2===1?(f.x<<0)+.5:f.x<<0,r.moveTo(f,l.y1<<0),r.lineTo(f,l.y2<<0),r.stroke());else if(this._position==="left"||this._position==="right")for(var o=0;o<this._labels.length;o++)this._labels[o].position<this.viewportMinimum||this._labels[o].position>this.viewportMaximum||this._labels[o].breaksLabelType||(r.beginPath(),f=this.getPixelCoordinatesOnAxis(this._labels[o].position),f=r.lineWidth%2===1?(f.y<<0)+.5:f.y<<0,r.moveTo(l.x1<<0,f),r.lineTo(l.x2<<0,f),r.stroke());r.restore()}},Ot.prototype.renderAxisLine=function(){var r=this.chart.ctx,f=ut?this.chart._preRenderCtx:r,l=Math.ceil(this.tickThickness/(this.reversed?-2:2)),o=Math.ceil(this.tickThickness/(this.reversed?2:-2)),d,x;if(f.save(),this._position==="bottom"||this._position==="top"){if(this.lineThickness){this.reversed?(d=this.lineCoordinates.x2,x=this.lineCoordinates.x1):(d=this.lineCoordinates.x1,x=this.lineCoordinates.x2),f.lineWidth=this.lineThickness,f.strokeStyle=this.lineColor?this.lineColor:"black",f.setLineDash&&f.setLineDash(y(this.lineDashType,this.lineThickness));var _=this.lineThickness%2===1?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;if(f.beginPath(),this.scaleBreaks&&!p(this.scaleBreaks.firstBreakIndex))if(p(this.scaleBreaks.lastBreakIndex))d=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+o;else for(var I=this.scaleBreaks.firstBreakIndex;I<=this.scaleBreaks.lastBreakIndex;I++)f.moveTo(d,_),f.lineTo(this.scaleBreaks._appliedBreaks[I].startPixel+l,_),d=this.scaleBreaks._appliedBreaks[I].endPixel+o;d&&(f.moveTo(d,_),f.lineTo(x,_)),f.stroke()}}else if((this._position==="left"||this._position==="right")&&this.lineThickness){if(this.reversed?(d=this.lineCoordinates.y1,x=this.lineCoordinates.y2):(d=this.lineCoordinates.y2,x=this.lineCoordinates.y1),f.lineWidth=this.lineThickness,f.strokeStyle=this.lineColor,f.setLineDash&&f.setLineDash(y(this.lineDashType,this.lineThickness)),_=this.lineThickness%2===1?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,f.beginPath(),this.scaleBreaks&&!p(this.scaleBreaks.firstBreakIndex))if(p(this.scaleBreaks.lastBreakIndex))d=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+l;else for(I=this.scaleBreaks.firstBreakIndex;I<=this.scaleBreaks.lastBreakIndex;I++)f.moveTo(_,d),f.lineTo(_,this.scaleBreaks._appliedBreaks[I].startPixel+o),d=this.scaleBreaks._appliedBreaks[I].endPixel+l;d&&(f.moveTo(_,d),f.lineTo(_,x)),f.stroke()}ut&&(r.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx&&this.chart._breaksCanvasCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),f.clearRect(0,0,this.chart.width,this.chart.height)),f.restore()},Ot.prototype.getPixelCoordinatesOnAxis=function(r){var f={};return(this._position==="bottom"||this._position==="top")&&(f.x=this.convertValueToPixel(r),f.y=this.lineCoordinates.y1),(this._position==="left"||this._position==="right")&&(f.y=this.convertValueToPixel(r),f.x=this.lineCoordinates.x2),f},Ot.prototype.convertPixelToValue=function(r){if(typeof r>"u")return null;var l=0,d=0,f,l=!0,o=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],d=typeof r=="number"?r:this._position==="left"||this._position==="right"?r.y:r.x;if(this.logarithmic){if(r=f=Math.pow(this.logarithmBase,(d-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit),d<=this.conversionParameters.reference==(this._position==="left"||this._position==="right")!==this.reversed){for(d=0;d<o.length;d++)if(!(o[d].endValue<this.conversionParameters.minimum))if(l)if(o[d].startValue<this.conversionParameters.minimum){if(1<o[d].size&&this.conversionParameters.minimum*Math.pow(o[d].endValue/o[d].startValue,Math.log(f)/Math.log(o[d].size))<o[d].endValue){r=Math.pow(o[d].endValue/o[d].startValue,Math.log(f)/Math.log(o[d].size));break}else r*=o[d].endValue/this.conversionParameters.minimum/Math.pow(o[d].size,Math.log(o[d].endValue/this.conversionParameters.minimum)/Math.log(o[d].endValue/o[d].startValue)),f/=Math.pow(o[d].size,Math.log(o[d].endValue/this.conversionParameters.minimum)/Math.log(o[d].endValue/o[d].startValue));l=!1}else if(f>o[d].startValue/this.conversionParameters.minimum){if(f/=o[d].startValue/this.conversionParameters.minimum,f<o[d].size){r*=Math.pow(o[d].endValue/o[d].startValue,o[d].size===1?1:Math.log(f)/Math.log(o[d].size))/f;break}else r*=o[d].endValue/o[d].startValue/o[d].size;f/=o[d].size,l=!1}else break;else if(f>o[d].startValue/o[d-1].endValue){if(f/=o[d].startValue/o[d-1].endValue,f<o[d].size){r*=Math.pow(o[d].endValue/o[d].startValue,o[d].size===1?1:Math.log(f)/Math.log(o[d].size))/f;break}else r*=o[d].endValue/o[d].startValue/o[d].size;f/=o[d].size}else break}else for(d=o.length-1;0<=d;d--)if(!(o[d].startValue>this.conversionParameters.minimum))if(l)if(o[d].endValue>this.conversionParameters.minimum){if(1<o[d].size&&this.conversionParameters.minimum*Math.pow(o[d].endValue/o[d].startValue,Math.log(f)/Math.log(o[d].size))>o[d].startValue){r=Math.pow(o[d].endValue/o[d].startValue,Math.log(f)/Math.log(o[d].size));break}else r*=o[d].startValue/this.conversionParameters.minimum*Math.pow(o[d].size,Math.log(o[d].startValue/this.conversionParameters.minimum)/Math.log(o[d].endValue/o[d].startValue))*f,f*=Math.pow(o[d].size,Math.log(this.conversionParameters.minimum/o[d].startValue)/Math.log(o[d].endValue/o[d].startValue));l=!1}else if(f<o[d].endValue/this.conversionParameters.minimum){if(f/=o[d].endValue/this.conversionParameters.minimum,f>1/o[d].size){r*=Math.pow(o[d].endValue/o[d].startValue,1>=o[d].size?1:Math.log(f)/Math.log(o[d].size))*f;break}else r/=o[d].endValue/o[d].startValue/o[d].size;f*=o[d].size,l=!1}else break;else if(f<o[d].endValue/o[d+1].startValue){if(f/=o[d].endValue/o[d+1].startValue,f>1/o[d].size){r*=Math.pow(o[d].endValue/o[d].startValue,1>=o[d].size?1:Math.log(f)/Math.log(o[d].size))*f;break}else r/=o[d].endValue/o[d].startValue/o[d].size;f*=o[d].size}else break;l=r*this.viewportMinimum}else{if(r=f=(d-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit,d<=this.conversionParameters.reference==(this._position==="left"||this._position==="right")!==this.reversed){for(d=0;d<o.length;d++)if(!(o[d].endValue<this.conversionParameters.minimum))if(l)if(o[d].startValue<this.conversionParameters.minimum){if(o[d].size&&this.conversionParameters.minimum+f*(o[d].endValue-o[d].startValue)/o[d].size<o[d].endValue){r=0>=o[d].size?0:f*(o[d].endValue-o[d].startValue)/o[d].size;break}else r+=o[d].endValue-this.conversionParameters.minimum-o[d].size*(o[d].endValue-this.conversionParameters.minimum)/(o[d].endValue-o[d].startValue),f-=o[d].size*(o[d].endValue-this.conversionParameters.minimum)/(o[d].endValue-o[d].startValue);l=!1}else if(f>o[d].startValue-this.conversionParameters.minimum){if(f-=o[d].startValue-this.conversionParameters.minimum,f<o[d].size){r+=(o[d].endValue-o[d].startValue)*(o[d].size===0?1:f/o[d].size)-f;break}else r+=o[d].endValue-o[d].startValue-o[d].size;f-=o[d].size,l=!1}else break;else if(f>o[d].startValue-o[d-1].endValue){if(f-=o[d].startValue-o[d-1].endValue,f<o[d].size){r+=(o[d].endValue-o[d].startValue)*(o[d].size===0?1:f/o[d].size)-f;break}else r+=o[d].endValue-o[d].startValue-o[d].size;f-=o[d].size}else break}else for(d=o.length-1;0<=d;d--)if(!(o[d].startValue>this.conversionParameters.minimum))if(l)if(o[d].endValue>this.conversionParameters.minimum)if(o[d].size&&this.conversionParameters.minimum+f*(o[d].endValue-o[d].startValue)/o[d].size>o[d].startValue){r=0>=o[d].size?0:f*(o[d].endValue-o[d].startValue)/o[d].size;break}else r+=o[d].startValue-this.conversionParameters.minimum+o[d].size*(this.conversionParameters.minimum-o[d].startValue)/(o[d].endValue-o[d].startValue),f+=o[d].size*(this.conversionParameters.minimum-o[d].startValue)/(o[d].endValue-o[d].startValue),l=!1;else if(f<o[d].endValue-this.conversionParameters.minimum){if(f-=o[d].endValue-this.conversionParameters.minimum,f>-1*o[d].size){r+=(o[d].endValue-o[d].startValue)*(o[d].size===0?1:f/o[d].size)+f;break}else r-=o[d].endValue-o[d].startValue-o[d].size;f+=o[d].size,l=!1}else break;else if(f<o[d].endValue-o[d+1].startValue){if(f-=o[d].endValue-o[d+1].startValue,f>-1*o[d].size){r+=(o[d].endValue-o[d].startValue)*(o[d].size===0?1:f/o[d].size)+f;break}else r-=o[d].endValue-o[d].startValue-o[d].size;f+=o[d].size}else break;l=this.conversionParameters.minimum+r}return l},Ot.prototype.convertValueToPixel=function(r){return r=this.getApparentDifference(this.conversionParameters.minimum,r,r),this.logarithmic?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*Math.log(r/this.conversionParameters.minimum)/this.conversionParameters.lnLogarithmBase+.5<<0:this.type==="axisX"?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(r-this.conversionParameters.minimum)+.5<<0:this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(r-this.conversionParameters.minimum)+.5},Ot.prototype.getApparentDifference=function(r,f,l,o){var d=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];if(this.logarithmic){l=p(l)?f/r:l;for(var x=0;x<d.length&&!(f<d[x].startValue);x++)r>d[x].endValue||(r<=d[x].startValue&&f>=d[x].endValue?l=l/d[x].endValue*d[x].startValue*d[x].size:r>=d[x].startValue&&f>=d[x].endValue?l=l/d[x].endValue*r*Math.pow(d[x].size,Math.log(d[x].endValue/r)/Math.log(d[x].endValue/d[x].startValue)):r<=d[x].startValue&&f<=d[x].endValue?l=l/f*d[x].startValue*Math.pow(d[x].size,Math.log(f/d[x].startValue)/Math.log(d[x].endValue/d[x].startValue)):!o&&r>d[x].startValue&&f<d[x].endValue&&(l=r*Math.pow(d[x].size,Math.log(f/r)/Math.log(d[x].endValue/d[x].startValue))))}else for(l=p(l)?Math.abs(f-r):l,x=0;x<d.length&&!(f<d[x].startValue);x++)r>d[x].endValue||(r<=d[x].startValue&&f>=d[x].endValue?l=l-d[x].endValue+d[x].startValue+d[x].size:r>d[x].startValue&&f>=d[x].endValue?l=l-d[x].endValue+r+d[x].size*(d[x].endValue-r)/(d[x].endValue-d[x].startValue):r<=d[x].startValue&&f<d[x].endValue?l=l-f+d[x].startValue+d[x].size*(f-d[x].startValue)/(d[x].endValue-d[x].startValue):!o&&r>d[x].startValue&&f<d[x].endValue&&(l=r+d[x].size*(f-r)/(d[x].endValue-d[x].startValue)));return l},Ot.prototype.setViewPortRange=function(r,f){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(r,f),this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(r,f)},Ot.prototype.getXValueAt=function(r){if(!r)return null;var f=null;return this._position==="left"?f=this.convertPixelToValue(r.y):this._position==="bottom"&&(f=this.convertPixelToValue(r.x)),f},Ot.prototype.calculateValueToPixelConversionParameters=function(r){r=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];var f={pixelPerUnit:null,minimum:null,reference:null},l=this.lineCoordinates.width,o=this.lineCoordinates.height,l=this._position==="bottom"||this._position==="top"?l:o,o=Math.abs(this.range);if(this.logarithmic)for(var d=0;d<r.length&&!(this.viewportMaximum<r[d].startValue);d++)this.viewportMinimum>r[d].endValue||(this.viewportMinimum>=r[d].startValue&&this.viewportMaximum<=r[d].endValue?l=0:this.viewportMinimum<=r[d].startValue&&this.viewportMaximum>=r[d].endValue?(o=o/r[d].endValue*r[d].startValue,l=0<r[d].spacing.toString().indexOf("%")?l*(1-parseFloat(r[d].spacing)/100):l-Math.min(r[d].spacing,.1*l)):this.viewportMinimum>r[d].startValue&&this.viewportMaximum>=r[d].endValue?(o=o/r[d].endValue*this.viewportMinimum,l=0<r[d].spacing.toString().indexOf("%")?l*(1-parseFloat(r[d].spacing)/100*Math.log(r[d].endValue/this.viewportMinimum)/Math.log(r[d].endValue/r[d].startValue)):l-Math.min(r[d].spacing,.1*l)*Math.log(r[d].endValue/this.viewportMinimum)/Math.log(r[d].endValue/r[d].startValue)):this.viewportMinimum<=r[d].startValue&&this.viewportMaximum<r[d].endValue&&(o=o/this.viewportMaximum*r[d].startValue,l=0<r[d].spacing.toString().indexOf("%")?l*(1-parseFloat(r[d].spacing)/100*Math.log(this.viewportMaximum/r[d].startValue)/Math.log(r[d].endValue/r[d].startValue)):l-Math.min(r[d].spacing,.1*l)*Math.log(this.viewportMaximum/r[d].startValue)/Math.log(r[d].endValue/r[d].startValue)));else for(d=0;d<r.length&&!(this.viewportMaximum<r[d].startValue);d++)this.viewportMinimum>r[d].endValue||(this.viewportMinimum>=r[d].startValue&&this.viewportMaximum<=r[d].endValue?l=0:this.viewportMinimum<=r[d].startValue&&this.viewportMaximum>=r[d].endValue?(o=o-r[d].endValue+r[d].startValue,l=0<r[d].spacing.toString().indexOf("%")?l*(1-parseFloat(r[d].spacing)/100):l-Math.min(r[d].spacing,.1*l)):this.viewportMinimum>r[d].startValue&&this.viewportMaximum>=r[d].endValue?(o=o-r[d].endValue+this.viewportMinimum,l=0<r[d].spacing.toString().indexOf("%")?l*(1-parseFloat(r[d].spacing)/100*(r[d].endValue-this.viewportMinimum)/(r[d].endValue-r[d].startValue)):l-Math.min(r[d].spacing,.1*l)*(r[d].endValue-this.viewportMinimum)/(r[d].endValue-r[d].startValue)):this.viewportMinimum<=r[d].startValue&&this.viewportMaximum<r[d].endValue&&(o=o-this.viewportMaximum+r[d].startValue,l=0<r[d].spacing.toString().indexOf("%")?l*(1-parseFloat(r[d].spacing)/100*(this.viewportMaximum-r[d].startValue)/(r[d].endValue-r[d].startValue)):l-Math.min(r[d].spacing,.1*l)*(this.viewportMaximum-r[d].startValue)/(r[d].endValue-r[d].startValue)));f.minimum=this.viewportMinimum,f.maximum=this.viewportMaximum,f.range=o,(this._position==="bottom"||this._position==="top")&&(this.logarithmic?(f.lnLogarithmBase=Math.log(this.logarithmBase),f.pixelPerUnit=(this.reversed?-1:1)*l*f.lnLogarithmBase/Math.log(Math.abs(o))):f.pixelPerUnit=(this.reversed?-1:1)*l/Math.abs(o),f.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1),(this._position==="left"||this._position==="right")&&(this.logarithmic?(f.lnLogarithmBase=Math.log(this.logarithmBase),f.pixelPerUnit=(this.reversed?1:-1)*l*f.lnLogarithmBase/Math.log(Math.abs(o))):f.pixelPerUnit=(this.reversed?1:-1)*l/Math.abs(o),f.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2),this.conversionParameters=f},Ot.prototype.calculateAxisParameters=function(){if(this.logarithmic)this.calculateLogarithmicAxisParameters();else{var l=this.chart.layoutManager.getFreeSpace(),r=!1,f=!1;this._position==="bottom"||this._position==="top"?(this.maxWidth=l.width,this.maxHeight=l.height):(this.maxWidth=l.height,this.maxHeight=l.width);var l=this.type==="axisX"?this.chart.plotInfo.axisPlacement==="xySwapped"?62:70:this.chart.plotInfo.axisPlacement==="xySwapped"?50:40,_=4;this.type==="axisX"&&(_=600>this.maxWidth?8:6);var l=Math.max(_,Math.floor(this.maxWidth/l)),o,d,x,_=0;if(!p(this.options.viewportMinimum)&&!p(this.options.viewportMaximum)&&this.options.viewportMinimum>=this.options.viewportMaximum&&(this.viewportMinimum=this.viewportMaximum=null),p(this.options.viewportMinimum)&&!p(this.sessionVariables.newViewportMinimum)&&!isNaN(this.sessionVariables.newViewportMinimum)?this.viewportMinimum=this.sessionVariables.newViewportMinimum:(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),p(this.options.viewportMaximum)&&!p(this.sessionVariables.newViewportMaximum)&&!isNaN(this.sessionVariables.newViewportMaximum)?this.viewportMaximum=this.sessionVariables.newViewportMaximum:(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),!p(this.minimum)&&this.viewportMinimum<this.minimum&&(this.viewportMinimum=this.minimum),!p(this.maximum)&&this.viewportMaximum>this.maximum&&(this.viewportMaximum=this.maximum),this.scaleBreaks){for(_=0;_<this.scaleBreaks._appliedBreaks.length;_++)if((!p(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[_].startValue||!p(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[_].startValue||!p(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[_].startValue)&&(!p(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[_].endValue||!p(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[_].endValue||!p(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[_].endValue)){this.scaleBreaks._appliedBreaks.splice(_,1);break}}if(this.type==="axisX"){if(this.dataSeries&&0<this.dataSeries.length)for(o=0;o<this.dataSeries.length;o++)this.dataSeries[o].xValueType==="dateTime"&&(f=!0);o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,d=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,d-o===0&&(_=typeof this.options.interval>"u"?.4:this.options.interval,d+=_,o-=_),this.dataInfo.minDiff!==1/0?x=this.dataInfo.minDiff:1<d-o?x=.5*Math.abs(d-o):(x=1,f&&(r=!0))}else this.type==="axisY"&&(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,d=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(o)||isFinite(d)?isFinite(o)?isFinite(d)||(d=o):o=d:(d=typeof this.options.interval>"u"?-1/0:this.options.interval,o=typeof this.options.interval<"u"||isFinite(this.dataInfo.minDiff)?0:1/0),o===0&&d===0?(d+=9,o=0):d-o===0?(_=Math.min(Math.abs(.01*Math.abs(d)),5),d+=_,o-=_):o>d?(_=Math.min(.01*Math.abs(this.getApparentDifference(d,o,null,!0)),5),0<=d?o=d-_:d=isFinite(o)?o+_:0):(_=Math.min(.01*Math.abs(this.getApparentDifference(o,d,null,!0)),.05),d!==0&&(d+=_),o!==0&&(o-=_)),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<d-o?.5*Math.abs(d-o):1,this.includeZero&&(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&0<o&&(o=0),this.includeZero&&(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&0>d&&(d=0));_=this.getApparentDifference(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum,isNaN(this.viewportMaximum)||this.viewportMaximum===null?d:this.viewportMaximum,null,!0),this.type==="axisX"&&f?(this.valueType="dateTime",this.intervalType||(_/1<=l?(this.interval=1,this.intervalType="millisecond"):_/2<=l?(this.interval=2,this.intervalType="millisecond"):_/5<=l?(this.interval=5,this.intervalType="millisecond"):_/10<=l?(this.interval=10,this.intervalType="millisecond"):_/20<=l?(this.interval=20,this.intervalType="millisecond"):_/50<=l?(this.interval=50,this.intervalType="millisecond"):_/100<=l?(this.interval=100,this.intervalType="millisecond"):_/200<=l?(this.interval=200,this.intervalType="millisecond"):_/250<=l?(this.interval=250,this.intervalType="millisecond"):_/300<=l?(this.interval=300,this.intervalType="millisecond"):_/400<=l?(this.interval=400,this.intervalType="millisecond"):_/500<=l?(this.interval=500,this.intervalType="millisecond"):_/(1*Pe.secondDuration)<=l?(this.interval=1,this.intervalType="second"):_/(2*Pe.secondDuration)<=l?(this.interval=2,this.intervalType="second"):_/(5*Pe.secondDuration)<=l?(this.interval=5,this.intervalType="second"):_/(10*Pe.secondDuration)<=l?(this.interval=10,this.intervalType="second"):_/(15*Pe.secondDuration)<=l?(this.interval=15,this.intervalType="second"):_/(20*Pe.secondDuration)<=l?(this.interval=20,this.intervalType="second"):_/(30*Pe.secondDuration)<=l?(this.interval=30,this.intervalType="second"):_/(1*Pe.minuteDuration)<=l?(this.interval=1,this.intervalType="minute"):_/(2*Pe.minuteDuration)<=l?(this.interval=2,this.intervalType="minute"):_/(5*Pe.minuteDuration)<=l?(this.interval=5,this.intervalType="minute"):_/(10*Pe.minuteDuration)<=l?(this.interval=10,this.intervalType="minute"):_/(15*Pe.minuteDuration)<=l?(this.interval=15,this.intervalType="minute"):_/(20*Pe.minuteDuration)<=l?(this.interval=20,this.intervalType="minute"):_/(30*Pe.minuteDuration)<=l?(this.interval=30,this.intervalType="minute"):_/(1*Pe.hourDuration)<=l?(this.interval=1,this.intervalType="hour"):_/(2*Pe.hourDuration)<=l?(this.interval=2,this.intervalType="hour"):_/(3*Pe.hourDuration)<=l?(this.interval=3,this.intervalType="hour"):_/(6*Pe.hourDuration)<=l?(this.interval=6,this.intervalType="hour"):_/(1*Pe.dayDuration)<=l?(this.interval=1,this.intervalType="day"):_/(2*Pe.dayDuration)<=l?(this.interval=2,this.intervalType="day"):_/(4*Pe.dayDuration)<=l?(this.interval=4,this.intervalType="day"):_/(1*Pe.weekDuration)<=l?(this.interval=1,this.intervalType="week"):_/(2*Pe.weekDuration)<=l?(this.interval=2,this.intervalType="week"):_/(3*Pe.weekDuration)<=l?(this.interval=3,this.intervalType="week"):_/(1*Pe.monthDuration)<=l?(this.interval=1,this.intervalType="month"):_/(2*Pe.monthDuration)<=l?(this.interval=2,this.intervalType="month"):_/(3*Pe.monthDuration)<=l?(this.interval=3,this.intervalType="month"):_/(6*Pe.monthDuration)<=l?(this.interval=6,this.intervalType="month"):(this.interval=_/(1*Pe.yearDuration)<=l?1:_/(2*Pe.yearDuration)<=l?2:_/(4*Pe.yearDuration)<=l?4:Math.floor(Ot.getNiceNumber(_/(l-1),!0)/Pe.yearDuration),this.intervalType="year")),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=o-x/2),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=d+x/2),r?this.autoValueFormatString="MMM DD YYYY HH:mm":this.intervalType==="year"?this.autoValueFormatString="YYYY":this.intervalType==="month"?this.autoValueFormatString="MMM YYYY":this.intervalType==="week"?this.autoValueFormatString="MMM DD YYYY":this.intervalType==="day"?this.autoValueFormatString="MMM DD YYYY":this.intervalType==="hour"?this.autoValueFormatString="hh:mm TT":this.intervalType==="minute"?this.autoValueFormatString="hh:mm TT":this.intervalType==="second"?this.autoValueFormatString="hh:mm:ss TT":this.intervalType==="millisecond"&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",_=Ot.getNiceNumber(_,!1),this.interval=this.options&&0<this.options.interval?this.options.interval:Ot.getNiceNumber(_/(l-1),!0),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.type==="axisX"?o-x/2:Math.floor(o/this.interval)*this.interval),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.type==="axisX"?d+x/2:Math.ceil(d/this.interval)*this.interval),this.viewportMaximum===0&&this.viewportMinimum===0&&(this.options.viewportMinimum===0?this.viewportMaximum+=10:this.options.viewportMaximum===0&&(this.viewportMinimum-=10),this.options&&typeof this.options.interval>"u"&&(this.interval=Ot.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(l-1),!0)))),(this.minimum===null||this.maximum===null)&&(this.type==="axisX"?(o=this.minimum!==null?this.minimum:this.dataInfo.min,d=this.maximum!==null?this.maximum:this.dataInfo.max,d-o===0&&(_=typeof this.options.interval>"u"?.4:this.options.interval,d+=_,o-=_),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<d-o?.5*Math.abs(d-o):1):this.type==="axisY"&&(o=this.minimum!==null?this.minimum:this.dataInfo.min,d=this.maximum!==null?this.maximum:this.dataInfo.max,isFinite(o)||isFinite(d)?o===0&&d===0?(d+=9,o=0):d-o===0?(_=Math.min(Math.abs(.01*Math.abs(d)),5),d+=_,o-=_):o>d?(_=Math.min(.01*Math.abs(this.getApparentDifference(d,o,null,!0)),5),0<=d?o=d-_:d=isFinite(o)?o+_:0):(_=Math.min(.01*Math.abs(this.getApparentDifference(o,d,null,!0)),.05),d!==0&&(d+=_),o!==0&&(o-=_)):(d=typeof this.options.interval>"u"?-1/0:this.options.interval,o=typeof this.options.interval<"u"||isFinite(this.dataInfo.minDiff)?0:1/0),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:1<d-o?.5*Math.abs(d-o):1,this.includeZero&&(this.minimum===null||isNaN(this.minimum))&&0<o&&(o=0),this.includeZero&&(this.maximum===null||isNaN(this.maximum))&&0>d&&(d=0)),Math.abs(this.getApparentDifference(o,d,null,!0)),this.type==="axisX"&&f?(this.valueType="dateTime",(this.minimum===null||isNaN(this.minimum))&&(this.minimum=o-x/2,this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),(this.maximum===null||isNaN(this.maximum))&&(this.maximum=d+x/2,this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum))):(this.intervalType=this.valueType="number",this.minimum===null&&(this.minimum=this.type==="axisX"?o-x/2:Math.floor(o/this.interval)*this.interval,this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),this.maximum===null&&(this.maximum=this.type==="axisX"?d+x/2:Math.ceil(d/this.interval)*this.interval,this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum)),this.maximum===0&&this.minimum===0&&(this.options.minimum===0?this.maximum+=10:this.options.maximum===0&&(this.minimum-=10)))),p(this.sessionVariables.newViewportMinimum)&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),p(this.sessionVariables.newViewportMaximum)&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.range=this.viewportMaximum-this.viewportMinimum,this.intervalStartPosition=this.type==="axisX"&&f?this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval,this.valueFormatString||(this.valueFormatString=Ot.generateValueFormatString(this.range,2))}},Ot.prototype.calculateLogarithmicAxisParameters=function(){var l=this.chart.layoutManager.getFreeSpace(),r=Math.log(this.logarithmBase),f;this._position==="bottom"||this._position==="top"?(this.maxWidth=l.width,this.maxHeight=l.height):(this.maxWidth=l.height,this.maxHeight=l.width);var l=this.type==="axisX"?500>this.maxWidth?7:Math.max(7,Math.floor(this.maxWidth/100)):Math.max(Math.floor(this.maxWidth/50),3),o,d,x,_;if(_=1,(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks){for(_=0;_<this.scaleBreaks._appliedBreaks.length;_++)if((!p(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[_].startValue||!p(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[_].startValue||!p(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[_].startValue)&&(!p(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[_].endValue||!p(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[_].endValue||!p(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[_].endValue)){this.scaleBreaks._appliedBreaks.splice(_,1);break}}this.type==="axisX"?(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,d=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,d/o===1&&(_=Math.pow(this.logarithmBase,typeof this.options.interval>"u"?.4:this.options.interval),d*=_,o/=_),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:d/o>this.logarithmBase?d/o*Math.pow(this.logarithmBase,.5):this.logarithmBase):this.type==="axisY"&&(o=this.viewportMinimum!==null?this.viewportMinimum:this.dataInfo.viewPortMin,d=this.viewportMaximum!==null?this.viewportMaximum:this.dataInfo.viewPortMax,0>=o&&!isFinite(d)?(d=typeof this.options.interval>"u"?0:this.options.interval,o=1):0>=o?o=d:isFinite(d)||(d=o),o===1&&d===1?(d*=this.logarithmBase-1/this.logarithmBase,o=1):d/o===1?(_=Math.min(d*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),d*=_,o/=_):o>d?(_=Math.min(o/d*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),1<=d?o=d/_:d=o*_):(_=Math.min(d/o*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),d!==1&&(d*=_),o!==1&&(o/=_)),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:d/o>this.logarithmBase?d/o*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&1<o&&(o=1),this.includeZero&&(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&1>d&&(d=1)),_=(isNaN(this.viewportMaximum)||this.viewportMaximum===null?d:this.viewportMaximum)/(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum);var I=(isNaN(this.viewportMaximum)||this.viewportMaximum===null?d:this.viewportMaximum)-(isNaN(this.viewportMinimum)||this.viewportMinimum===null?o:this.viewportMinimum);if(this.intervalType="number",_=Math.pow(this.logarithmBase,Ot.getNiceNumber(Math.abs(Math.log(_)/r),!1)),this.options&&0<this.options.interval?this.interval=this.options.interval:(this.interval=Ot.getNiceExponent(Math.log(_)/r/(l-1),!0),f=Ot.getNiceNumber(I/(l-1),!0)),(this.viewportMinimum===null||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.type==="axisX"?o/Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(o)/r/this.interval))),(this.viewportMaximum===null||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.type==="axisX"?d*Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(d)/r/this.interval))),this.viewportMaximum===1&&this.viewportMinimum===1&&(this.options.viewportMinimum===1?this.viewportMaximum*=this.logarithmBase-1/this.logarithmBase:this.options.viewportMaximum===1&&(this.viewportMinimum/=this.logarithmBase-1/this.logarithmBase),this.options&&typeof this.options.interval>"u"&&(this.interval=Ot.getNiceExponent(Math.ceil(Math.log(_)/r)/(l-1)),f=Ot.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(l-1),!0))),(this.minimum===null||this.maximum===null)&&(this.type==="axisX"?(o=this.minimum!==null?this.minimum:this.dataInfo.min,d=this.maximum!==null?this.maximum:this.dataInfo.max,d/o===1&&(_=Math.pow(this.logarithmBase,typeof this.options.interval>"u"?.4:this.options.interval),d*=_,o/=_),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:d/o>this.logarithmBase?d/o*Math.pow(this.logarithmBase,.5):this.logarithmBase):this.type==="axisY"&&(o=this.minimum!==null?this.minimum:this.dataInfo.min,d=this.maximum!==null?this.maximum:this.dataInfo.max,isFinite(o)||isFinite(d)?o===1&&d===1?(d*=this.logarithmBase,o/=this.logarithmBase):d/o===1?(_=Math.pow(this.logarithmBase,this.interval),d*=_,o/=_):o>d?(_=Math.min(.01*(o/d),5),1<=d?o=d/_:d=o*_):(_=Math.min(d/o*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),d!==1&&(d*=_),o!==1&&(o/=_)):(d=typeof this.options.interval>"u"?0:this.options.interval,o=1),x=this.dataInfo.minDiff!==1/0?this.dataInfo.minDiff:d/o>this.logarithmBase?d/o*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(this.minimum===null||isNaN(this.minimum))&&1<o&&(o=1),this.includeZero&&(this.maximum===null||isNaN(this.maximum))&&1>d&&(d=1)),this.intervalType="number",this.minimum===null&&(this.minimum=this.type==="axisX"?o/Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(o)/r/this.interval)),p(this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?typeof this.sessionVariables.newViewportMinimum>"u"?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum)||(this.minimum=Math.min(this.minimum,this.sessionVariables.viewportMinimum===null||isNaN(this.sessionVariables.viewportMinimum)?typeof this.sessionVariables.newViewportMinimum>"u"?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum))),this.maximum===null&&(this.maximum=this.type==="axisX"?d*Math.sqrt(x):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(d)/r/this.interval)),p(this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?typeof this.sessionVariables.newViewportMaximum>"u"?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum)||(this.maximum=Math.max(this.maximum,this.sessionVariables.viewportMaximum===null||isNaN(this.sessionVariables.viewportMaximum)?typeof this.sessionVariables.newViewportMaximum>"u"?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum))),this.maximum===1&&this.minimum===1&&(this.options.minimum===1?this.maximum*=this.logarithmBase-1/this.logarithmBase:this.options.maximum===1&&(this.minimum/=this.logarithmBase-1/this.logarithmBase))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.viewportMinimum>this.viewportMaximum&&(!this.options.viewportMinimum&&!this.options.minimum||this.options.viewportMaximum||this.options.maximum?this.options.viewportMinimum||this.options.minimum||!this.options.viewportMaximum&&!this.options.maximum||(this.viewportMinimum=this.minimum=(this.options.viewportMaximum||this.options.maximum)/Math.pow(this.logarithmBase,2*Math.ceil(this.interval))):this.viewportMaximum=this.maximum=this.options.viewportMinimum||this.options.minimum),o=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(r*this.interval)+.2)*this.interval),this.range=this.viewportMaximum/this.viewportMinimum,this.noTicks=l,!this.options.interval&&this.range<Math.pow(this.logarithmBase,8>this.viewportMaximum||3>l?2:3)){for(r=Math.floor(this.viewportMinimum/f+.5)*f;r<this.viewportMinimum;)r+=f;this.equidistantInterval=!1,this.intervalStartPosition=r,this.interval=f}else this.options.interval||(f=Math.ceil(this.interval),this.range>this.interval&&(this.interval=f,o=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(r*this.interval)+.2)*this.interval))),this.equidistantInterval=!0,this.intervalStartPosition=o;if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",1>this.viewportMinimum)&&(r=Math.floor(Math.abs(Math.log(this.viewportMinimum)/Math.LN10))+2,(isNaN(r)||!isFinite(r))&&(r=2),2<r))for(_=0;_<r-2;_++)this.valueFormatString+="#"},Ot.generateValueFormatString=function(r,f){var l="#,##0.",o=f;1>r&&(o+=Math.floor(Math.abs(Math.log(r)/Math.LN10)),isNaN(o)||!isFinite(o))&&(o=f);for(var d=0;d<o;d++)l+="#";return l},Ot.getNiceExponent=function(r,f){var l=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,l),o=0>l?1>=o?1:5>=o?5:10:Math.max(Math.floor(o),1);return-20>l?Number(o*Math.pow(10,l)):Number((o*Math.pow(10,l)).toFixed(20))},Ot.getNiceNumber=function(r,f){var l=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,l),o=f?1.5>o?1:3>o?2:7>o?5:10:1>=o?1:2>=o?2:5>=o?5:10;return-20>l?Number(o*Math.pow(10,l)):Number((o*Math.pow(10,l)).toFixed(20))},Ot.prototype.getLabelStartPoint=function(){var r=Pe[this.intervalType+"Duration"]*this.interval,r=new Date(Math.floor(this.viewportMinimum/r)*r);return this.intervalType!=="millisecond"&&(this.intervalType==="second"?0<r.getMilliseconds()&&(r.setSeconds(r.getSeconds()+1),r.setMilliseconds(0)):this.intervalType==="minute"?(0<r.getSeconds()||0<r.getMilliseconds())&&(r.setMinutes(r.getMinutes()+1),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="hour"?(0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setHours(r.getHours()+1),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="day"?(0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setDate(r.getDate()+1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="week"?(0<r.getDay()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setDate(r.getDate()+(7-r.getDay())),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="month"?(1<r.getDate()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setMonth(r.getMonth()+1),r.setDate(1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)):this.intervalType==="year"&&(0<r.getMonth()||1<r.getDate()||0<r.getHours()||0<r.getMinutes()||0<r.getSeconds()||0<r.getMilliseconds())&&(r.setFullYear(r.getFullYear()+1),r.setMonth(0),r.setDate(1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0))),r},n(re,H),n(Ve,H),Ve.prototype.createUserOptions=function(r){if(typeof r<"u"||this.options._isPlaceholder){var f=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(v(this.parent[this.optionsName]),f=this.parent.options[this.optionsName].indexOf(this.options)),this.options=typeof r>"u"?{}:r,this.parent.options[this.optionsName][f]=this.options}},Ve.prototype.render=function(r){if(this.spacing!==0||this.options.lineThickness!==0&&(typeof this.options.lineThickness<"u"||this.parent.lineThickness!==0)){var f=this.ctx,l=this.ctx.globalAlpha;this.ctx=r||this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip();var o=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.startValue),d=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.endValue);this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.globalAlpha=1,u(this.id);var x,_,I,N,M,w;r=Math.max(this.spacing,3);var b=Math.max(0,this.lineThickness);if(this.ctx.lineWidth=b,this.ctx.setLineDash&&this.ctx.setLineDash(y(this.lineDashType,b)),this.scaleBreaks.parent._position==="bottom"||this.scaleBreaks.parent._position==="top"){if(o=b%2===1?(o.x<<0)+.5:o.x<<0,_=b%2===1?(d.x<<0)+.5:d.x<<0,this.scaleBreaks.parent._position==="top"?(d=this.chart.plotArea.y1,I=this.chart.plotArea.y2+b/2+.5<<0):(d=this.chart.plotArea.y2,I=this.chart.plotArea.y1-b/2+.5<<0,r*=-1),this.bounds={x1:o-b/2,y1:d,x2:_+b/2,y2:I},this.ctx.moveTo(o,d),this.type==="straight"||this.scaleBreaks.parent._position==="top"&&0>=r||this.scaleBreaks.parent._position==="bottom"&&0<=r)this.ctx.lineTo(o,I),this.ctx.lineTo(_,I),this.ctx.lineTo(_,d);else if(this.type==="wavy"){N=o,M=d,x=.5,w=(I-M)/r/3;for(var P=0;P<w;P++)this.ctx.bezierCurveTo(N+x*r,M+r,N+x*r,M+2*r,N,M+3*r),M+=3*r,x*=-1;for(this.ctx.bezierCurveTo(N+x*r,M+r,N+x*r,M+2*r,N,M+3*r),N=_,x*=-1,this.ctx.lineTo(N,M),P=0;P<w;P++)this.ctx.bezierCurveTo(N+x*r,M-r,N+x*r,M-2*r,N,M-3*r),M-=3*r,x*=-1}else if(this.type==="zigzag"){for(x=-1,M=d+r,N=o+r,w=(I-M)/r/2,P=0;P<w;P++)this.ctx.lineTo(N,M),N+=2*x*r,M+=2*r,x*=-1;for(this.ctx.lineTo(N,M),N+=_-o,P=0;P<w+1;P++)this.ctx.lineTo(N,M),N+=2*x*r,M-=2*r,x*=-1;this.ctx.lineTo(N+x*r,M+r)}}else if(this.scaleBreaks.parent._position==="left"||this.scaleBreaks.parent._position==="right"){if(d=b%2===1?(d.y<<0)+.5:d.y<<0,I=b%2===1?(o.y<<0)+.5:o.y<<0,this.scaleBreaks.parent._position==="left"?(o=this.chart.plotArea.x1,_=this.chart.plotArea.x2+b/2+.5<<0):(o=this.chart.plotArea.x2,_=this.chart.plotArea.x1-b/2+.5<<0,r*=-1),this.bounds={x1:o,y1:d-b/2,x2:_,y2:I+b/2},this.ctx.moveTo(o,d),this.type==="straight"||this.scaleBreaks.parent._position==="left"&&0>=r||this.scaleBreaks.parent._position==="right"&&0<=r)this.ctx.lineTo(_,d),this.ctx.lineTo(_,I),this.ctx.lineTo(o,I);else if(this.type==="wavy"){for(N=o,M=d,x=.5,w=(_-N)/r/3,P=0;P<w;P++)this.ctx.bezierCurveTo(N+r,M+x*r,N+2*r,M+x*r,N+3*r,M),N+=3*r,x*=-1;for(this.ctx.bezierCurveTo(N+r,M+x*r,N+2*r,M+x*r,N+3*r,M),M=I,x*=-1,this.ctx.lineTo(N,M),P=0;P<w;P++)this.ctx.bezierCurveTo(N-r,M+x*r,N-2*r,M+x*r,N-3*r,M),N-=3*r,x*=-1}else if(this.type==="zigzag"){for(x=1,M=d-r,N=o+r,w=(_-N)/r/2,P=0;P<w;P++)this.ctx.lineTo(N,M),M+=2*x*r,N+=2*r,x*=-1;for(this.ctx.lineTo(N,M),M+=I-d,P=0;P<w+1;P++)this.ctx.lineTo(N,M),M+=2*x*r,N-=2*r,x*=-1;this.ctx.lineTo(N+r,M+x*r)}}0<b&&this.ctx.stroke(),this.ctx.closePath(),this.ctx.globalAlpha=this.fillOpacity,this.ctx.globalCompositeOperation="destination-over",this.ctx.fill(),this.ctx.restore(),this.ctx.globalAlpha=l,this.ctx=f}},n(ui,H),ui.prototype.createUserOptions=function(r){if(typeof r<"u"||this.options._isPlaceholder){var f=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(v(this.parent.stripLines),f=this.parent.options.stripLines.indexOf(this.options)),this.options=typeof r>"u"?{}:r,this.parent.options.stripLines[f]=this.options}},ui.prototype.render=function(){this.ctx.save();var r=this.parent.getPixelCoordinatesOnAxis(this.value),f=Math.abs(this._thicknessType==="pixel"?this.thickness:Math.abs(this.parent.convertValueToPixel(this.endValue)-this.parent.convertValueToPixel(this.startValue)));if(0<f){var l=this.opacity===null?1:this.opacity;this.ctx.strokeStyle=this.color,this.ctx.beginPath();var o=this.ctx.globalAlpha;this.ctx.globalAlpha=l,u(this.id);var d,x,_,I;this.ctx.lineWidth=f,this.ctx.setLineDash&&this.ctx.setLineDash(y(this.lineDashType,f)),this.parent._position==="bottom"||this.parent._position==="top"?(d=x=this.ctx.lineWidth%2===1?(r.x<<0)+.5:r.x<<0,_=this.chart.plotArea.y1,I=this.chart.plotArea.y2,this.bounds={x1:d-f/2,y1:_,x2:x+f/2,y2:I}):(this.parent._position==="left"||this.parent._position==="right")&&(_=I=this.ctx.lineWidth%2===1?(r.y<<0)+.5:r.y<<0,d=this.chart.plotArea.x1,x=this.chart.plotArea.x2,this.bounds={x1:d,y1:_-f/2,x2:x,y2:I+f/2}),this.ctx.moveTo(d,_),this.ctx.lineTo(x,I),this.ctx.stroke(),this.ctx.globalAlpha=o}this.ctx.restore()},n(yi,H),yi.prototype.showAt=function(r){if(!this.enabled)return!1;var f=this.chart,l=!1;if(f.resetOverlayedCanvas(),f.clearedOverlayedCanvas=this.parent.type,this.chart.renderCrosshairs(this.parent),f.plotInfo.axisPlacement==="xySwapped"){if(this.parent._position==="bottom")for(var o=0;o<f.axisY.length;o++)this.parent===f.axisY[o]&&(f.axisY[o]._crosshairValue=r>=f.axisY[o].viewportMinimum&&r<=f.axisY[o].viewportMaximum?r:null);else if(this.parent._position==="top")for(o=0;o<f.axisY2.length;o++)this.parent===f.axisY2[o]&&(f.axisY2[o]._crosshairValue=r>=f.axisY2[o].viewportMinimum&&r<=f.axisY2[o].viewportMaximum?r:null);else if(this.parent._position==="left")for(o=0;o<f.axisX.length;o++)this.parent===f.axisX[o]&&(f.axisX[o]._crosshairValue=r>=f.axisX[o].viewportMinimum&&r<=f.axisX[o].viewportMaximum?r:null);else if(this.parent._position==="right")for(o=0;o<f.axisX2.length;o++)this.parent===f.axisX2[o]&&(f.axisX2[o]._crosshairValue=r>=f.axisX2[o].viewportMinimum&&r<=f.axisX2[o].viewportMaximum?r:null)}else if(this.parent._position==="bottom")for(o=0;o<f.axisX.length;o++)this.parent===f.axisX[o]&&(f.axisX[o]._crosshairValue=r>=f.axisX[o].viewportMinimum&&r<=f.axisX[o].viewportMaximum?r:null);else if(this.parent._position==="top")for(o=0;o<f.axisX2.length;o++)this.parent===f.axisX2[o]&&(f.axisX2[o]._crosshairValue=r>=f.axisX2[o].viewportMinimum&&r<=f.axisX2[o].viewportMaximum?r:null);else if(this.parent._position==="left")for(o=0;o<f.axisY.length;o++)this.parent===f.axisY[o]&&(f.axisY[o]._crosshairValue=r>=f.axisY[o].viewportMinimum&&r<=f.axisY[o].viewportMaximum?r:null);else if(this.parent._position==="right")for(o=0;o<f.axisY2.length;o++)this.parent===f.axisY2[o]&&(f.axisY2[o]._crosshairValue=r>=f.axisY2[o].viewportMinimum&&r<=f.axisY2[o].viewportMaximum?r:null);for(o=0;o<f.axisX.length;o++)r=f.axisX[o]._crosshairValue,f.axisX[o].crosshair&&f.axisX[o].crosshair.enabled&&(!p(r)&&r>=f.axisX[o].viewportMinimum&&r<=f.axisX[o].viewportMaximum?(f.axisX[o].showCrosshair(r),f.axisX[o].sessionVariables.crosshairValue=f.axisX[o].crosshair._updatedValue=r,this===f.axisX[o].crosshair&&(l=!0)):r!==void 0&&(f.axisX[o].sessionVariables.crosshairValue=f.axisX[o].crosshair._updatedValue=null));for(o=0;o<f.axisX2.length;o++)r=f.axisX2[o]._crosshairValue,f.axisX2[o].crosshair&&f.axisX2[o].crosshair.enabled&&(!p(r)&&r>=f.axisX2[o].viewportMinimum&&r<=f.axisX2[o].viewportMaximum?(f.axisX2[o].showCrosshair(r),f.axisX2[o].sessionVariables.crosshairValue=f.axisX2[o].crosshair._updatedValue=r,this===f.axisX2[o].crosshair&&(l=!0)):r!==void 0&&(f.axisX2[o].sessionVariables.crosshairValue=f.axisX2[o].crosshair._updatedValue=null));for(o=0;o<f.axisY.length;o++)r=f.axisY[o]._crosshairValue,f.axisY[o].crosshair&&f.axisY[o].crosshair.enabled&&(!p(r)&&r>=f.axisY[o].viewportMinimum&&r<=f.axisY[o].viewportMaximum?(f.axisY[o].showCrosshair(r),f.axisY[o].sessionVariables.crosshairValue=f.axisY[o].crosshair._updatedValue=r,this===f.axisY[o].crosshair&&(l=!0)):r!==void 0&&(f.axisY[o].sessionVariables.crosshairValue=f.axisY[o].crosshair._updatedValue=null));for(o=0;o<f.axisY2.length;o++)r=f.axisY2[o]._crosshairValue,f.axisY2[o].crosshair&&f.axisY2[o].crosshair.enabled&&(!p(r)&&r>=f.axisY2[o].viewportMinimum&&r<=f.axisY2[o].viewportMaximum?(f.axisY2[o].showCrosshair(r),f.axisY2[o].sessionVariables.crosshairValue=f.axisY2[o].crosshair._updatedValue=r,this===f.axisY2[o].crosshair&&(l=!0)):r!==void 0&&(f.axisY2[o].sessionVariables.crosshairValue=f.axisY2[o].crosshair._updatedValue=null));return this.chart.toolTip&&this.chart.toolTip._entries&&this.chart.toolTip.highlightObjects(this.chart.toolTip._entries),f.sessionVariables.crosshairShownByPixel=!1,l},yi.prototype.hide=function(){this.chart.resetOverlayedCanvas(),this.chart.renderCrosshairs(this.parent),this._hidden=!0},yi.prototype.render=function(r,f,l){var o,d,x,_,I=null,N=null,M=null,w="";this.valueFormatString||(this.parent.valueType==="dateTime"?this.valueFormatString=this.parent.valueFormatString:(M=0,M=this.chart.plotInfo.axisPlacement==="xySwapped"?50<this.parent.range?0:500<this.chart.width&&25>this.parent.range?2:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0):50<this.parent.range?0:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0),this.valueFormatString=Ot.generateValueFormatString(this.parent.range,M)));var b=this.opacity===null?1:this.opacity,P=Math.abs(this._thicknessType==="pixel"?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness),c=this.chart.overlaidCanvasCtx,L=c.globalAlpha;if(c.beginPath(),c.strokeStyle=this.color,c.lineWidth=P,c.save(),this.labelFontSize=Math.abs(p(this.options.labelFontSize)?this.parent.labelFontSize:this.labelFontSize),this.labelMaxWidth=p(this.options.labelMaxWidth)?.3*this.chart.width:this.labelMaxWidth,this.labelMaxHeight=p(this.options.labelWrap)||this.labelWrap?.3*this.chart.height:1.5*this.labelFontSize+(typeof this.labelPadding=="object"?(this.labelPadding.top||0)+(this.labelPadding.bottom||0):2*this.labelPadding),0<P&&c.setLineDash&&c.setLineDash(y(this.lineDashType,P)),M=new ct(c,{x:0,y:0,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxWidth:this.labelMaxWidth,maxHeight:this.labelMaxHeight,angle:this.labelAngle,text:w,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,padding:this.labelPadding,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this.snapToDataPoint){var V=0,w=[];if(this.chart.plotInfo.axisPlacement==="xySwapped"){var U=null;this.parent._position==="bottom"||this.parent._position==="top"?V=this.parent.dataSeries[0].axisX.convertPixelToValue({y:f}):(this.parent._position==="left"||this.parent._position==="right")&&(V=this.parent.convertPixelToValue({y:f}));for(var E=0;E<this.parent.dataSeries.length;E++)(U=this.parent.dataSeries[E].getDataPointAtX(V,!0,!0))&&0<=U.index&&(U.dataSeries=this.parent.dataSeries[E],U.dataPoint.y!==null&&U.dataSeries.visible&&w.push(U));if(U=null,w.length===0)return;w.sort(function(_t,Qt){return _t.distance-Qt.distance});var G=U=0;yPercent=cumulativeY=0;for(var V=1/0,j,E=0;E<w.length;E++){if(w[E].dataSeries.type==="rangeBar"||w[E].dataSeries.type==="error"){if(w[E].dataPoint.y)for(var wt=0;wt<w[E].dataPoint.y.length;wt++)G=Math.abs(r-this.parent.convertValueToPixel(w[E].dataPoint.y[wt])),G<=V&&(V=G,U=E)}else w[E].dataSeries.type==="stackedBar"?(cumulativeY=w[E].dataSeries.dataPointEOs[w[E].index].cumulativeY,G=Math.abs(r-this.parent.convertValueToPixel(cumulativeY)),G<=V&&(V=G,U=E)):w[E].dataSeries.type==="stackedBar100"?(G=w[0].dataPoint.x.getTime?w[0].dataPoint.x.getTime():w[0].dataPoint.x,p(j)&&(j=Math.abs(r-this.parent.convertValueToPixel(100*(w[0].dataSeries.dataPointEOs[w[0].index].cumulativeY/w[0].dataSeries.plotUnit.dataPointYSums[G])))),cumulativeY=w[E].dataSeries.dataPointEOs[w[E].index].cumulativeY,G=w[E].dataPoint.x.getTime?w[E].dataPoint.x.getTime():w[E].dataPoint.x,yPercent=100*(cumulativeY/w[E].dataSeries.plotUnit.dataPointYSums[G]),G=Math.abs(r-this.parent.convertValueToPixel(yPercent)),G<=j&&(j=G,U=E)):(G=Math.abs(r-this.parent.convertValueToPixel(w[E].dataPoint.y)),G<=V&&(V=G,U=E));p(j)||(V=Math.min(V,j))}if(j=w[U],E=0,this.parent._position==="bottom"||this.parent._position==="top"){if(j.dataSeries.type==="rangeBar"||j.dataSeries.type==="error"){for(V=Math.abs(r-this.parent.convertValueToPixel(j.dataPoint.y[0])),w=0;w<j.dataPoint.y.length;w++)G=Math.abs(r-this.parent.convertValueToPixel(j.dataPoint.y[w])),G<V&&(V=G,E=w);I=c.lineWidth%2===1?(this.parent.convertValueToPixel(j.dataPoint.y[E])<<0)+.5:this.parent.convertValueToPixel(j.dataPoint.y[E])<<0,this.value=j.dataPoint.y[E],M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.y[E]}):p(this.options.label)?ne(p(l)?j.dataPoint.y[E]:l,this.valueFormatString,this.chart._cultureInfo):this.label}else j.dataSeries.type==="stackedBar"?(V=Math.abs(r-this.parent.convertValueToPixel(w[0].dataPoint.y)),cumulativeY=j.dataSeries.dataPointEOs[j.index].cumulativeY,I=c.lineWidth%2===1?(this.parent.convertValueToPixel(cumulativeY)<<0)+.5:this.parent.convertValueToPixel(cumulativeY)<<0,this.value=cumulativeY,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:cumulativeY}):p(this.options.label)?ne(p(l)?cumulativeY:l,this.valueFormatString,this.chart._cultureInfo):this.label):j.dataSeries.type==="stackedBar100"?(V=Math.abs(r-this.parent.convertValueToPixel(w[0].dataPoint.y)),cumulativeY=j.dataSeries.dataPointEOs[j.index].cumulativeY,G=j.dataPoint.x.getTime?j.dataPoint.x.getTime():j.dataPoint.x,yPercent=100*(cumulativeY/j.dataSeries.plotUnit.dataPointYSums[G]),I=c.lineWidth%2===1?(this.parent.convertValueToPixel(yPercent)<<0)+.5:this.parent.convertValueToPixel(yPercent)<<0,this.value=yPercent,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:yPercent}):p(this.options.label)?ne(p(l)?yPercent:l,this.valueFormatString,this.chart._cultureInfo):this.label):(I=c.lineWidth%2===1?(this.parent.convertValueToPixel(j.dataPoint.y)<<0)+.5:this.parent.convertValueToPixel(j.dataPoint.y)<<0,this.value=j.dataPoint.y,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.y}):p(this.options.label)?ne(p(l)?j.dataPoint.y:l,this.valueFormatString,this.chart._cultureInfo):this.label);o=d=I,x=this.chart.plotArea.y1,_=this.chart.plotArea.y2,this.bounds={x1:o-P/2,y1:x,x2:d+P/2,y2:_},M.x=o-M.measureText().width/2,M.x+M.width>this.chart.bounds.x2?M.x=this.chart.bounds.x2-M.width:M.x<this.chart.bounds.x1&&(M.x=this.chart.bounds.x1),M.y=this.parent.lineCoordinates.y2+(this.parent._position==="top"?-M.height+this.parent.tickLength:M.fontSize/2)+2,M.y+M.height>this.chart.bounds.y2?M.y=this.chart.bounds.y2-M.height:M.y<this.chart.bounds.y1&&(M.y=this.chart.bounds.y1)}else if(this.parent._position==="left"||this.parent._position==="right"){if(x=_=N=c.lineWidth%2===1?(this.parent.convertValueToPixel(j.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(j.dataPoint.x)<<0,o=this.chart.plotArea.x1,d=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-P/2,x2:d,y2:_+P/2},E=!1,this.parent.labels)for(V=Math.ceil(this.parent.interval),w=0;w<this.parent.viewportMaximum;w+=V)if(this.parent.labels[w])E=!0;else{E=!1;break}if(E){if(this.parent.type==="axisX")for(V=this.parent.convertPixelToValue({y:f}),U=null,E=0;E<this.parent.dataSeries.length;E++)(U=this.parent.dataSeries[E].getDataPointAtX(V,!0,!0))&&0<=U.index&&(M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.x}):p(this.options.label)?U.dataPoint.label:this.label)}else M.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.x}):p(this.options.label)?ne(j.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.x}):p(this.options.label)?ce(j.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label;this.value=j.dataPoint.x,M.y=_+M.fontSize/2-M.measureText().height/2+2,M.y-M.fontSize/2<this.chart.bounds.y1?M.y=this.chart.bounds.y1+M.fontSize/2+2:M.y+M.measureText().height-M.fontSize/2>this.chart.bounds.y2&&(M.y=this.chart.bounds.y2-M.measureText().height+M.fontSize/2),this.parent._position==="left"?M.x=this.parent.lineCoordinates.x2-M.measureText().width:this.parent._position==="right"&&(M.x=this.parent.lineCoordinates.x2)}}else if(this.parent._position==="bottom"||this.parent._position==="top"){for(V=this.parent.convertPixelToValue({x:r}),E=0;E<this.parent.dataSeries.length;E++)(U=this.parent.dataSeries[E].getDataPointAtX(V,!0,!0))&&0<=U.index&&(U.dataSeries=this.parent.dataSeries[E],U.dataPoint.y!==null&&U.dataSeries.visible&&w.push(U));if(w.length===0)return;if(w.sort(function(_t,Qt){return _t.distance-Qt.distance}),j=w[0],o=d=I=c.lineWidth%2===1?(this.parent.convertValueToPixel(j.dataPoint.x)<<0)+.5:this.parent.convertValueToPixel(j.dataPoint.x)<<0,x=this.chart.plotArea.y1,_=this.chart.plotArea.y2,this.bounds={x1:o-P/2,y1:x,x2:d+P/2,y2:_},E=!1,this.parent.labels)for(V=Math.ceil(this.parent.interval),w=0;w<this.parent.viewportMaximum;w+=V)if(this.parent.labels[w])E=!0;else{E=!1;break}if(E){if(this.parent.type==="axisX")for(V=this.parent.convertPixelToValue({x:r}),U=null,E=0;E<this.parent.dataSeries.length;E++)(U=this.parent.dataSeries[E].getDataPointAtX(V,!0,!0))&&0<=U.index&&(M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.x}):p(this.options.label)?U.dataPoint.label:this.label)}else M.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.x}):p(this.options.label)?ne(j.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.x}):p(this.options.label)?ce(j.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label;this.value=j.dataPoint.x,M.x=o-M.measureText().width/2,M.x+M.width>this.chart.bounds.x2&&(M.x=this.chart.bounds.x2-M.width),M.x<this.chart.bounds.x1&&(M.x=this.chart.bounds.x1),this.parent._position==="bottom"?M.y=this.parent.lineCoordinates.y2+M.fontSize/2+2:this.parent._position==="top"&&(M.y=this.parent.lineCoordinates.y1-M.height+M.fontSize/2+2)}else if(this.parent._position==="left"||this.parent._position==="right"){for(!p(this.parent.dataSeries)&&0<this.parent.dataSeries.length&&(V=this.parent.dataSeries[0].axisX.convertPixelToValue({x:r})),E=0;E<this.parent.dataSeries.length;E++)(U=this.parent.dataSeries[E].getDataPointAtX(V,!0,!0))&&0<=U.index&&(U.dataSeries=this.parent.dataSeries[E],U.dataPoint.y!==null&&U.dataSeries.visible&&w.push(U));if(w.length===0)return;for(w.sort(function(_t,Qt){return _t.distance-Qt.distance}),G=U=0,V=1/0,E=0;E<w.length;E++){if(w[E].dataSeries.type==="rangeColumn"||w[E].dataSeries.type==="rangeArea"||w[E].dataSeries.type==="error"||w[E].dataSeries.type==="rangeSplineArea"||w[E].dataSeries.type==="candlestick"||w[E].dataSeries.type==="ohlc"||w[E].dataSeries.type==="boxAndWhisker"){if(w[E].dataPoint.y)for(wt=0;wt<w[E].dataPoint.y.length;wt++)G=Math.abs(f-this.parent.convertValueToPixel(w[E].dataPoint.y[wt])),G<=V&&(V=G,U=E)}else w[E].dataSeries.type==="stackedColumn"?(o=w[E].dataSeries.dataPointEOs[w[E].index].cumulativeY,G=Math.abs(f-this.parent.convertValueToPixel(o)),G<=V&&(V=G,U=E)):w[E].dataSeries.type==="stackedArea"?(o=w[E].dataSeries.dataPointEOs[w[E].index].cumulativeY,G=Math.abs(f-this.parent.convertValueToPixel(o)),G<=V&&(V=G,U=E)):w[E].dataSeries.type==="stackedColumn100"||w[E].dataSeries.type==="stackedArea100"?(G=w[0].dataPoint.x.getTime?w[0].dataPoint.x.getTime():w[0].dataPoint.x,p(j)&&(j=Math.abs(f-this.parent.convertValueToPixel(100*(w[0].dataSeries.dataPointEOs[w[0].index].cumulativeY/w[0].dataSeries.plotUnit.dataPointYSums[G])))),w[E].dataSeries.type==="stackedColumn100"?(N=w[E].dataSeries.dataPointEOs[w[E].index].cumulativeY,G=w[E].dataPoint.x.getTime?w[E].dataPoint.x.getTime():w[E].dataPoint.x,o=100*(N/w[E].dataSeries.plotUnit.dataPointYSums[G]),G=Math.abs(f-this.parent.convertValueToPixel(o)),G<=j&&(j=G,U=E)):w[E].dataSeries.type==="stackedArea100"&&(N=w[E].dataSeries.dataPointEOs[w[E].index].cumulativeY,G=w[E].dataPoint.x.getTime?w[E].dataPoint.x.getTime():w[E].dataPoint.x,o=100*(N/w[E].dataSeries.plotUnit.dataPointYSums[G]),G=Math.abs(f-this.parent.convertValueToPixel(o)),G<=j&&(j=G,U=E))):w[E].dataSeries.type==="waterfall"?(G=Math.abs(f-this.parent.convertValueToPixel(w[E].dataSeries.dataPointEOs[w[E].index].cumulativeSum)),G<=V&&(j=V=G,U=E)):(G=Math.abs(f-this.parent.convertValueToPixel(w[E].dataPoint.y)),G<=V&&(V=G,U=E));p(j)||(V=Math.min(V,j))}if(j=w[U],E=0,j.dataSeries.type==="rangeColumn"||j.dataSeries.type==="rangeArea"||j.dataSeries.type==="error"||j.dataSeries.type==="rangeSplineArea"||j.dataSeries.type==="candlestick"||j.dataSeries.type==="ohlc"||j.dataSeries.type==="boxAndWhisker"){for(V=Math.abs(f-this.parent.convertValueToPixel(j.dataPoint.y[0])),w=0;w<j.dataPoint.y.length;w++)G=Math.abs(f-this.parent.convertValueToPixel(j.dataPoint.y[w])),G<V&&(V=G,E=w);N=c.lineWidth%2===1?(this.parent.convertValueToPixel(j.dataPoint.y[E])<<0)+.5:this.parent.convertValueToPixel(j.dataPoint.y[E])<<0,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataPoint.y[E]}):p(this.options.label)?ne(p(l)?j.dataPoint.y[E]:l,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=j.dataPoint.y[E]}else j.dataSeries.type==="stackedColumn"?(o=j.dataSeries.dataPointEOs[j.index].cumulativeY,N=c.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):p(this.options.label)?ne(p(l)?o:l,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):j.dataSeries.type==="stackedArea"?(o=j.dataSeries.dataPointEOs[j.index].cumulativeY,N=c.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):p(this.options.label)?ne(p(l)?o:l,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):j.dataSeries.type==="stackedColumn100"?(N=j.dataSeries.dataPointEOs[j.index].cumulativeY,G=j.dataPoint.x.getTime?j.dataPoint.x.getTime():j.dataPoint.x,o=100*(N/j.dataSeries.plotUnit.dataPointYSums[G]),N=c.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):p(this.options.label)?ne(p(l)?o:l,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):j.dataSeries.type==="stackedArea100"?(N=j.dataSeries.dataPointEOs[j.index].cumulativeY,G=j.dataPoint.x.getTime?j.dataPoint.x.getTime():j.dataPoint.x,o=100*(N/j.dataSeries.plotUnit.dataPointYSums[G]),N=c.lineWidth%2===1?(this.parent.convertValueToPixel(o)<<0)+.5:this.parent.convertValueToPixel(o)<<0,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:o}):p(this.options.label)?ne(p(l)?o:l,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=o):j.dataSeries.type==="waterfall"?(N=c.lineWidth%2===1?(this.parent.convertValueToPixel(j.dataSeries.dataPointEOs[j.index].cumulativeSum)<<0)+.5:this.parent.convertValueToPixel(j.dataSeries.dataPointEOs[j.index].cumulativeSum)<<0,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:j.dataSeries.dataPointEOs[j.index].cumulativeSum}):p(this.options.label)?ne(p(l)?j.dataSeries.dataPointEOs[j.index].cumulativeSum:l,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=j.dataSeries.dataPointEOs[j.index].cumulativeSum):(N=c.lineWidth%2===1?(p(r)?f:this.parent.convertValueToPixel(j.dataPoint.y)<<0)+.5:p(r)?f:this.parent.convertValueToPixel(j.dataPoint.y)<<0,M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?j.dataPoint.y:l}):p(this.options.label)?ne(p(l)?j.dataPoint.y:l,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=j.dataPoint.y);x=_=N,o=this.chart.plotArea.x1,d=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-P/2,x2:d,y2:_+P/2},M.y=_+M.fontSize/2-M.measureText().height/2+2,M.y-M.fontSize/2<this.chart.bounds.y1?M.y=this.chart.bounds.y1+M.fontSize/2+2:M.y+M.measureText().height-M.fontSize/2>this.chart.bounds.y2&&(M.y=this.chart.bounds.y2-M.measureText().height+M.fontSize/2),this.parent._position==="left"?M.x=this.parent.lineCoordinates.x2-M.measureText().width:this.parent._position==="right"&&(M.x=this.parent.lineCoordinates.x2)}w=null,c.globalAlpha=b,(this.parent._position==="bottom"||this.parent._position==="top")&&(this.parent._position==="top"&&M.y-M.fontSize/2<this.chart.bounds.y1&&(M.y=this.chart.bounds.y1+M.fontSize/2),this.parent._position==="bottom"&&this.parent.lineCoordinates.y2+M.measureText().height>this.chart.bounds.y2&&(M.y=this.chart.bounds.y2-M.height+M.fontSize/2+2),this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&0<P&&(c.moveTo(o,x),c.lineTo(d,_),c.stroke(),this._hidden=!1)),(this.parent._position==="left"||this.parent._position==="right")&&(this.parent._position==="left"&&M.x<this.chart.bounds.x1&&(M.x=this.chart.bounds.x1),this.parent._position==="right"&&M.x+M.measureText().width>this.chart.bounds.x2&&(M.x=this.chart.bounds.x2-M.measureText().width),this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&0<P&&(c.moveTo(o,x),c.lineTo(d,_),c.stroke(),this._hidden=!1))}else{if(this.parent._position==="bottom"||this.parent._position==="top"?(o=d=I=c.lineWidth%2===1?(r<<0)+.5:r<<0,x=this.chart.plotArea.y1,_=this.chart.plotArea.y2,this.bounds={x1:o-P/2,y1:x,x2:d+P/2,y2:_}):(this.parent._position==="left"||this.parent._position==="right")&&(x=_=N=c.lineWidth%2===1?(f<<0)+.5:f<<0,o=this.chart.plotArea.x1,d=this.chart.plotArea.x2,this.bounds={x1:o,y1:x-P/2,x2:d,y2:_+P/2}),this.chart.plotInfo.axisPlacement==="xySwapped")if(this.parent._position==="left"||this.parent._position==="right"){if(E=!1,this.parent.labels)for(V=Math.ceil(this.parent.interval),w=0;w<this.parent.viewportMaximum;w+=V)if(this.parent.labels[w])E=!0;else{E=!1;break}if(E){if(this.parent.type==="axisX")for(V=this.parent.convertPixelToValue({y:f}),U=null,E=0;E<this.parent.dataSeries.length;E++)(U=this.parent.dataSeries[E].getDataPointAtX(V,!0))&&0<=U.index&&(M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?this.parent.convertPixelToValue(r):l}):p(this.options.label)?U.dataPoint.label:this.label)}else M.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?this.parent.convertPixelToValue(f):l}):p(this.options.label)?ne(p(l)?this.parent.convertPixelToValue(f):l,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?this.parent.convertPixelToValue(f):l}):p(this.options.label)?ce(p(l)?this.parent.convertPixelToValue(f):l,this.valueFormatString,this.chart._cultureInfo):this.label;M.y=f+M.fontSize/2-M.measureText().height/2+2,M.y-M.fontSize/2<this.chart.bounds.y1?M.y=this.chart.bounds.y1+M.fontSize/2+2:M.y+M.measureText().height-M.fontSize/2>this.chart.bounds.y2&&(M.y=this.chart.bounds.y2-M.measureText().height+M.fontSize/2),this.parent._position==="left"?M.x=this.parent.lineCoordinates.x1-M.measureText().width:this.parent._position==="right"&&(M.x=this.parent.lineCoordinates.x2)}else(this.parent._position==="bottom"||this.parent._position==="top")&&(M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?this.parent.convertPixelToValue(r):l}):p(this.options.label)?ne(p(l)?this.parent.convertPixelToValue(r):l,this.valueFormatString,this.chart._cultureInfo):this.label,M.x=o-M.measureText().width/2,M.x+M.width>this.chart.bounds.x2&&(M.x=this.chart.bounds.x2-M.width),M.x<this.chart.bounds.x1&&(M.x=this.chart.bounds.x1),this.parent._position==="bottom"?M.y=this.parent.lineCoordinates.y2+M.fontSize/2+2:this.parent._position==="top"&&(M.y=this.parent.lineCoordinates.y1-M.height+M.fontSize/2+2));else if(this.parent._position==="bottom"||this.parent._position==="top"){if(E=!1,w="",this.parent.labels)for(V=Math.ceil(this.parent.interval),w=0;w<this.parent.viewportMaximum;w+=V)if(this.parent.labels[w])E=!0;else{E=!1;break}if(E){if(this.parent.type==="axisX")for(V=this.parent.convertPixelToValue({x:r}),U=null,E=0;E<this.parent.dataSeries.length;E++)(U=this.parent.dataSeries[E].getDataPointAtX(V,!0))&&0<=U.index&&(M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?this.parent.convertPixelToValue(r):l}):p(this.options.label)?p(l)?U.dataPoint.label:l:this.label)}else M.text=this.parent.valueType!=="dateTime"||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?0<this.parent.dataSeries.length?this.parent.convertPixelToValue(r):"":l}):p(this.options.label)?ne(p(l)?this.parent.convertPixelToValue(r):l,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?this.parent.convertPixelToValue(r):l}):p(this.options.label)?ce(p(l)?this.parent.convertPixelToValue(r):l,this.valueFormatString,this.chart._cultureInfo):this.label;M.x=o-M.measureText().width/2,M.x+M.width>this.chart.bounds.x2&&(M.x=this.chart.bounds.x2-M.width),M.x<this.chart.bounds.x1&&(M.x=this.chart.bounds.x1),this.parent._position==="bottom"?M.y=this.parent.lineCoordinates.y2+M.fontSize/2+2:this.parent._position==="top"&&(M.y=this.parent.lineCoordinates.y1-M.height+M.fontSize/2+2)}else(this.parent._position==="left"||this.parent._position==="right")&&(M.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:p(l)?this.parent.convertPixelToValue(f):l}):p(this.options.label)?ne(p(l)?this.parent.convertPixelToValue(f):l,this.valueFormatString,this.chart._cultureInfo):this.label,M.y=f+M.fontSize/2-M.measureText().height/2+2,M.y-M.fontSize/2<this.chart.bounds.y1?M.y=this.chart.bounds.y1+M.fontSize/2+2:M.y+M.measureText().height-M.fontSize/2>this.chart.bounds.y2&&(M.y=this.chart.bounds.y2-M.measureText().height+M.fontSize/2),this.parent._position==="left"?M.x=this.parent.lineCoordinates.x2-M.measureText().width:this.parent._position==="right"&&(M.x=this.parent.lineCoordinates.x2));this.parent._position==="left"&&M.x<this.chart.bounds.x1?M.x=this.chart.bounds.x1:this.parent._position==="right"&&M.x+M.measureText().width>this.chart.bounds.x2?M.x=this.chart.bounds.x2-M.measureText().width:this.parent._position==="top"&&M.y-M.fontSize/2<this.chart.bounds.y1?M.y=this.chart.bounds.y1+M.fontSize/2:this.parent._position==="bottom"&&this.parent.lineCoordinates.y2+M.measureText().height>this.chart.bounds.y2&&(M.y=this.chart.bounds.y2-M.height+M.fontSize/2+2),c.globalAlpha=b,0<P&&(c.moveTo(o,x),c.lineTo(d,_),c.stroke(),this._hidden=!1),this.value=this.parent._position==="bottom"||this.parent._position==="top"?this.parent.convertPixelToValue(r):this.parent.convertPixelToValue(f)}(this.parent._position==="bottom"||this.parent._position==="top")&&(this.parent.sessionVariables.crosshairValue=this._updatedValue=this.parent.convertPixelToValue(I)),(this.parent._position==="left"||this.parent._position==="right")&&(this.parent.sessionVariables.crosshairValue=this._updatedValue=this.parent.convertPixelToValue(N)),this._textBlock=M,this._label=l,p(l)||this.renderLabel(),c.restore(),c.globalAlpha=L},yi.prototype.renderLabel=function(){this.value>=Math.min(this.parent.viewportMinimum,this.parent.viewportMaximum)&&this.value<=Math.max(this.parent.viewportMinimum,this.parent.viewportMaximum)&&(p(this._textBlock)||p(this._textBlock.text)||!(typeof this._textBlock.text.valueOf()=="number"||0<this._textBlock.text.length)||this._hidden||this._textBlock.render(!0),p(this._label)&&this.dispatchEvent("updated",{chart:this.chart,crosshair:this.options,axis:this.parent,value:this.value},this.parent))},n(oi,H),oi.prototype._updateOptions=function(){this.updateOption("enabled"),this.updateOption("shared"),this.updateOption("animationEnabled"),this.updateOption("content"),this.updateOption("contentFormatter"),this.updateOption("reversed"),this.updateOption("backgroundColor"),this.updateOption("borderColor"),this.updateOption("borderThickness"),this.updateOption("cornerRadius"),this.updateOption("fontSize"),this.updateOption("fontColor"),this.updateOption("fontFamily"),this.updateOption("fontWeight"),this.updateOption("fontStyle")},oi.prototype._initialize=function(){if(this.updateOption("updated"),this.updateOption("hidden"),this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.pointerEvents="none",this.container.style.display="none";var r=document.createElement("div");r.style.width="auto",r.style.height="auto",r.style.minWidth="50px",r.style.lineHeight="normal",r.style.margin="0px 0px 0px 0px",r.style.padding="5px",r.style.fontFamily="Calibri, Arial, Georgia, serif",r.style.fontWeight="normal",r.style.fontStyle=ut?"italic":"normal",r.style.fontSize="14px",r.style.color="#000000",r.style.textShadow="1px 1px 1px rgba(0, 0, 0, 0.1)",r.style.textAlign="left",r.style.border="2px solid gray",r.style.background=ut?"rgba(255,255,255,.9)":"rgb(255,255,255)",r.style.textIndent="0px",r.style.whiteSpace="nowrap",r.style.borderRadius="5px",r.style.MozUserSelect="none",r.style.WebkitUserSelect="none",r.style.msUserSelect="none",r.style.userSelect="none",ut||(r.style.filter="alpha(opacity = 90)",r.style.filter="progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666')"),r.innerText="Sample Tooltip",this.container.appendChild(r),this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},oi.prototype.mouseMoveHandler=function(r,f){this._lastUpdated&&4>new Date().getTime()-this._lastUpdated||(this._lastUpdated=new Date().getTime(),this.chart.resetOverlayedCanvas(),this._updateToolTip(r,f),this.enabled&&this._updatedEventParameters&&!isNaN(this._prevX)&&!isNaN(this._prevY)&&this.container&&this.container.style&&this.dispatchEvent(this.container.style.display==="none"?"hidden":"updated",this._updatedEventParameters,this))},oi.prototype._updateToolTip=function(r,f,l){if(l=typeof l>"u"?!0:l,this._updateOptions(),this.container||this._initialize(),this.enabled||this.hide(),!this.chart.disableToolTip){if(typeof r>"u"||typeof f>"u"){if(isNaN(this._prevX)||isNaN(this._prevY))return;r=this._prevX,f=this._prevY}else this._prevX=r,this._prevY=f;var o=null,d=null,x=[],_=0;if(this.shared&&this.enabled&&this.chart.plotInfo.axisPlacement!=="none"){var I=[];if(this.chart.axisX)for(var N=0;N<this.chart.axisX.length;N++){for(var _=this.chart.plotInfo.axisPlacement==="xySwapped"?this.chart.axisX[N].convertPixelToValue({y:f}):this.chart.axisX[N].convertPixelToValue({x:r}),M=null,o=0;o<this.chart.axisX[N].dataSeries.length;o++)(M=this.chart.axisX[N].dataSeries[o].getDataPointAtX(_,l,!0))&&0<=M.index&&(M.dataSeries=this.chart.axisX[N].dataSeries[o],M.dataPoint.y!==null&&M.dataSeries.visible&&I.push(M));M=null}if(this.chart.axisX2)for(N=0;N<this.chart.axisX2.length;N++){for(_=this.chart.plotInfo.axisPlacement==="xySwapped"?this.chart.axisX2[N].convertPixelToValue({y:f}):this.chart.axisX2[N].convertPixelToValue({x:r}),M=null,o=0;o<this.chart.axisX2[N].dataSeries.length;o++)(M=this.chart.axisX2[N].dataSeries[o].getDataPointAtX(_,l,!0))&&0<=M.index&&(M.dataSeries=this.chart.axisX2[N].dataSeries[o],M.dataPoint.y!==null&&M.dataSeries.visible&&I.push(M));M=null}if(I.length===0)return;for(I.sort(function(w,b){return w.dataSeries.axisX.logarithmic||b.dataSeries.axisX.logarithmic?w.distance-b.distance:w.distance/w.dataSeries.axisX.range-b.distance/b.dataSeries.axisX.range}),l=I[0],o=0;o<I.length;o++)I[o].dataPoint.x.valueOf()===l.dataPoint.x.valueOf()&&x.push(I[o]);I=null}else{if(o=this.chart.getDataPointAtXY(r,f,l))this.currentDataPointIndex=o.dataPointIndex,this.currentSeriesIndex=o.dataSeries.index;else if(ut)if(o=R(r,f,this.chart._eventManager.ghostCtx),0<o&&typeof this.chart._eventManager.objectMap[o]<"u"){if(o=this.chart._eventManager.objectMap[o],o.objectType==="legendItem")return;this.currentSeriesIndex=o.dataSeriesIndex,this.currentDataPointIndex=0<=o.dataPointIndex?o.dataPointIndex:-1}else this.currentDataPointIndex=-1;else this.currentDataPointIndex=-1;if(0<=this.currentSeriesIndex){if(d=this.chart.data[this.currentSeriesIndex],M={},0<=this.currentDataPointIndex)o=d.dataPoints[this.currentDataPointIndex],M.dataSeries=d,M.dataPoint=o,M.index=this.currentDataPointIndex,M.distance=Math.abs(o.x-_),d.type==="waterfall"&&(M.cumulativeSumYStartValue=d.dataPointEOs[this.currentDataPointIndex].cumulativeSumYStartValue,M.cumulativeSum=d.dataPointEOs[this.currentDataPointIndex].cumulativeSum);else if(this.enabled&&d&&(d.type==="line"||d.type==="stepLine"||d.type==="spline"||d.type==="area"||d.type==="stepArea"||d.type==="splineArea"||d.type==="stackedArea"||d.type==="stackedArea100"||d.type==="rangeArea"||d.type==="rangeSplineArea"||d.type==="candlestick"||d.type==="ohlc"||d.type==="boxAndWhisker"))_=d.axisX.convertPixelToValue({x:r}),M=d.getDataPointAtX(_,l,!0),p(M)||(M.dataSeries=d,this.currentDataPointIndex=M.index,o=M.dataPoint);else{this.chart.clearedOverlayedCanvas==="toolTip"&&(this.chart.resetOverlayedCanvas(),this.chart.clearedOverlayedCanvas=null,this.container&&(this.container.style.display="none"));return}if(!p(M)&&!p(M.dataPoint)&&!p(M.dataPoint.y))if(M.dataSeries.axisY)if(0<M.dataPoint.y.length){for(o=l=0;o<M.dataPoint.y.length;o++)M.dataPoint.y[o]<M.dataSeries.axisY.viewportMinimum?l--:M.dataPoint.y[o]>M.dataSeries.axisY.viewportMaximum&&l++;l<M.dataPoint.y.length&&l>-M.dataPoint.y.length&&x.push(M)}else d.type==="column"||d.type==="bar"?0>M.dataPoint.y?0>M.dataSeries.axisY.viewportMinimum&&M.dataSeries.axisY.viewportMaximum>=M.dataPoint.y&&x.push(M):M.dataSeries.axisY.viewportMinimum<=M.dataPoint.y&&0<=M.dataSeries.axisY.viewportMaximum&&x.push(M):d.type==="bubble"?(l=this.chart._eventManager.objectMap[d.dataPointIds[M.index]].size/2,M.dataPoint.y>=M.dataSeries.axisY.viewportMinimum-l&&M.dataPoint.y<=M.dataSeries.axisY.viewportMaximum+l&&x.push(M)):d.type==="waterfall"?(l=0,M.cumulativeSumYStartValue<M.dataSeries.axisY.viewportMinimum?l--:M.cumulativeSumYStartValue>M.dataSeries.axisY.viewportMaximum&&l++,M.cumulativeSum<M.dataSeries.axisY.viewportMinimum?l--:M.cumulativeSum>M.dataSeries.axisY.viewportMaximum&&l++,2>l&&-2<l&&x.push(M)):(0<=M.dataSeries.type.indexOf("100")||d.type==="stackedColumn"||d.type==="stackedBar"||d.type==="stackedArea"||M.dataPoint.y>=M.dataSeries.axisY.viewportMinimum&&M.dataPoint.y<=M.dataSeries.axisY.viewportMaximum)&&x.push(M);else x.push(M)}}if(0<x.length){if(this.highlightObjects(x),this.enabled){if(l="",l=this.getToolTipInnerHTML({entries:x}),l!==null){if(this.contentDiv.innerHTML=l,this.isToolTipDefinedInData&&p(this.options.content)&&p(this.options.contentFormatter))for(_=this.contentDiv.getElementsByTagName("span"),o=0;o<_.length;o++)_[o]&&(_[o].style.color=_[o].getAttribute("data-color"));_=!1,this.container.style.display==="none"&&(_=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:ut?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor=x[0].dataSeries.type==="waterfall"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:0<x[0].dataPoint.y?x[0].dataSeries.risingColor:x[0].dataSeries.fallingColor:x[0].dataSeries.type==="error"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[d.index%x[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[x[0].index%x[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||this.borderThickness===0?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||this.cornerRadius===0?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||this.fontSize===0?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:ut?"italic":"normal"}catch{}x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"||x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"||x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?r=r-10-this.container.clientWidth:(r=x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x)-this.container.clientWidth<<0,r-=10),0>r&&(r=Math.max(0,r+this.container.clientWidth+20)),r+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(r=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),f=x.length!==1||this.shared||x[0].dataSeries.type!=="line"&&x[0].dataSeries.type!=="stepLine"&&x[0].dataSeries.type!=="spline"&&x[0].dataSeries.type!=="area"&&x[0].dataSeries.type!=="stepArea"&&x[0].dataSeries.type!=="splineArea"?x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x):f:x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y),f=-f+10,0<f+this.container.clientHeight+5&&(f-=f+this.container.clientHeight+5-0),this.fixMozTransitionDelay(r,f),!this.animationEnabled||_?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.positionLeft=r,this.positionBottom=f,this.container.style.left=r+"px",this.container.style.bottom=f+"px"}else this.hide(!1),this.enabled&&this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this);for(f=[],o=0;o<x.length;o++)f.push({xValue:x[o].dataPoint.x,dataPoint:x[o].dataPoint,dataSeries:x[o].dataSeries,dataPointIndex:x[o].index,dataSeriesIndex:x[o].dataSeries._index});this._updatedEventParameters={chart:this.chart,toolTip:this.options,content:l,entries:f},this._entries=x}}else this.hide(),this.enabled&&this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this);this._dataSeriesIndex=this._xValue=null}},oi.prototype.highlightObjects=function(r){var f=this.chart.overlaidCanvasCtx;p(this.chart.clearedOverlayedCanvas)||this.chart.clearedOverlayedCanvas==="toolTip"?(this.chart.resetOverlayedCanvas(),f.clearRect(0,0,this.chart.width,this.chart.height),this.chart.clearedOverlayedCanvas="toolTip"):this.chart.clearedOverlayedCanvas=null,f.save();var l=this.chart.plotArea,o=0;for(f.beginPath(),f.rect(l.x1,l.y1,l.x2-l.x1,l.y2-l.y1),f.clip(),l=0;l<r.length;l++){var d=r[l];if((d=this.chart._eventManager.objectMap[d.dataSeries.dataPointIds[d.index]])&&d.objectType&&d.objectType==="dataPoint"){var o=this.chart.data[d.dataSeriesIndex],x=o.dataPoints[d.dataPointIndex],_=d.dataPointIndex;x.highlightEnabled===!1||o.highlightEnabled!==!0&&x.highlightEnabled!==!0||(o.type==="line"||o.type==="stepLine"||o.type==="spline"||o.type==="scatter"||o.type==="area"||o.type==="stepArea"||o.type==="splineArea"||o.type==="stackedArea"||o.type==="stackedArea100"||o.type==="rangeArea"||o.type==="rangeSplineArea"?(x=o.getMarkerProperties(_,d.x1,d.y1,this.chart.overlaidCanvasCtx),x.size=Math.max(1.5*x.size<<0,10),x.borderColor=x.borderColor||"#FFFFFF",x.borderThickness=x.borderThickness||Math.ceil(.1*x.size),xi.drawMarkers([x]),typeof d.y2<"u"&&(x=o.getMarkerProperties(_,d.x1,d.y2,this.chart.overlaidCanvasCtx),x.size=Math.max(1.5*x.size<<0,10),x.borderColor=x.borderColor||"#FFFFFF",x.borderThickness=x.borderThickness||Math.ceil(.1*x.size),xi.drawMarkers([x]))):o.type==="bubble"?(x=o.getMarkerProperties(_,d.x1,d.y1,this.chart.overlaidCanvasCtx),x.size=d.size,x.color="white",x.borderColor="white",f.globalAlpha=.3,xi.drawMarkers([x]),f.globalAlpha=1):o.type==="column"||o.type==="stackedColumn"||o.type==="stackedColumn100"||o.type==="bar"||o.type==="rangeBar"||o.type==="stackedBar"||o.type==="stackedBar100"||o.type==="rangeColumn"||o.type==="waterfall"?Re(f,d.x1,d.y1,d.x2,d.y2,"white",0,null,!1,!1,!1,!1,.3):o.type==="pie"||o.type==="doughnut"?un(f,d.center,d.radius,"white",o.type,d.startAngle,d.endAngle,.3,d.percentInnerRadius):o.type==="funnel"||o.type==="pyramid"?on(f,d.funnelSection,.3,"white"):o.type==="candlestick"?(f.globalAlpha=1,f.strokeStyle=d.color,f.lineWidth=2*d.borderThickness,o=f.lineWidth%2===0?0:.5,f.beginPath(),f.moveTo(d.x3-o,Math.min(d.y2,d.y3)),f.lineTo(d.x3-o,Math.min(d.y1,d.y4)),f.stroke(),f.beginPath(),f.moveTo(d.x3-o,Math.max(d.y1,d.y4)),f.lineTo(d.x3-o,Math.max(d.y2,d.y3)),f.stroke(),Re(f,d.x1,Math.min(d.y1,d.y4),d.x2,Math.max(d.y1,d.y4),"transparent",2*d.borderThickness,d.color,!1,!1,!1,!1),f.globalAlpha=1):o.type==="ohlc"?(f.globalAlpha=1,f.strokeStyle=d.color,f.lineWidth=2*d.borderThickness,o=f.lineWidth%2===0?0:.5,f.beginPath(),f.moveTo(d.x3-o,d.y2),f.lineTo(d.x3-o,d.y3),f.stroke(),f.beginPath(),f.moveTo(d.x3,d.y1),f.lineTo(d.x1,d.y1),f.stroke(),f.beginPath(),f.moveTo(d.x3,d.y4),f.lineTo(d.x2,d.y4),f.stroke(),f.globalAlpha=1):o.type==="boxAndWhisker"?(f.save(),f.globalAlpha=1,f.strokeStyle=d.stemColor,f.lineWidth=2*d.stemThickness,0<d.stemThickness&&(f.beginPath(),f.moveTo(d.x3,d.y2+d.borderThickness/2),f.lineTo(d.x3,d.y1+d.whiskerThickness/2),f.stroke(),f.beginPath(),f.moveTo(d.x3,d.y4-d.whiskerThickness/2),f.lineTo(d.x3,d.y3-d.borderThickness/2),f.stroke()),f.beginPath(),Re(f,d.x1,Math.max(d.y2,d.y3),d.x2,Math.min(d.y2,d.y3),"transparent",2*d.borderThickness,d.color,!1,!1,!1,!1),f.globalAlpha=1,f.strokeStyle=d.whiskerColor,f.lineWidth=2*d.whiskerThickness,0<d.whiskerThickness&&(f.beginPath(),f.moveTo(Math.floor(d.x3-d.whiskerLength/2),d.y4),f.lineTo(Math.ceil(d.x3+d.whiskerLength/2),d.y4),f.stroke(),f.beginPath(),f.moveTo(Math.floor(d.x3-d.whiskerLength/2),d.y1),f.lineTo(Math.ceil(d.x3+d.whiskerLength/2),d.y1),f.stroke()),f.globalAlpha=1,f.strokeStyle=d.lineColor,f.lineWidth=2*d.lineThickness,0<d.lineThickness&&(f.beginPath(),f.moveTo(d.x1,d.y5),f.lineTo(d.x2,d.y5),f.stroke()),f.restore(),f.globalAlpha=1):o.type==="error"&&It(f,d.x1,d.y1,d.x2,d.y2,"white",d.whiskerProperties,d.stemProperties,d.isXYSwapped,.3))}}f.restore(),f.globalAlpha=1,f.beginPath()},oi.prototype.getToolTipInnerHTML=function(r){r=r.entries;var f=null,l=null,o=null,d=0,x="";this.isToolTipDefinedInData=!0;for(var _=0;_<r.length;_++)if(r[_].dataSeries.toolTipContent||r[_].dataPoint.toolTipContent){this.isToolTipDefinedInData=!1;break}if(this.isToolTipDefinedInData&&(this.content&&typeof this.content=="function"||this.contentFormatter))r={chart:this.chart,toolTip:this.options,entries:r},f=this.contentFormatter?this.contentFormatter(r):this.content(r);else if(this.shared&&this.chart.plotInfo.axisPlacement!=="none"){for(var I=null,N="",_=0;_<r.length;_++){if(l=r[_].dataSeries,o=r[_].dataPoint,d=r[_].index,x="",_===0&&this.isToolTipDefinedInData&&!this.content){if(this.chart.axisX&&0<this.chart.axisX.length?N+=typeof this.chart.axisX[0].labels[o.x]<"u"?this.chart.axisX[0].labels[o.x]:"{x}":this.chart.axisX2&&0<this.chart.axisX2.length&&(N+=typeof this.chart.axisX2[0].labels[o.x]<"u"?this.chart.axisX2[0].labels[o.x]:"{x}"),N+="</br>",!l.visible)continue;N=this.chart.replaceKeywordsWithValue(N,o,l,d)}o.toolTipContent===null||typeof o.toolTipContent>"u"&&l.options.toolTipContent===null||(l.type==="line"||l.type==="stepLine"||l.type==="spline"||l.type==="area"||l.type==="stepArea"||l.type==="splineArea"||l.type==="column"||l.type==="bar"||l.type==="scatter"||l.type==="stackedColumn"||l.type==="stackedColumn100"||l.type==="stackedBar"||l.type==="stackedBar100"||l.type==="stackedArea"||l.type==="stackedArea100"||l.type==="waterfall"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=I!=l.axisXIndex?l.axisX.title?l.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y}`,I=l.axisXIndex):l.type==="bubble"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=I!=l.axisXIndex?l.axisX.title?l.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}`):l.type==="rangeColumn"||l.type==="rangeBar"||l.type==="rangeArea"||l.type==="rangeSplineArea"||l.type==="error"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=I!=l.axisXIndex?l.axisX.title?l.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}`):l.type==="candlestick"||l.type==="ohlc"?(this.chart.axisX&&1<this.chart.axisX.length&&(x+=I!=l.axisXIndex?l.axisX.title?l.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}`):l.type==="boxAndWhisker"&&(this.chart.axisX&&1<this.chart.axisX.length&&(x+=I!=l.axisXIndex?l.axisX.title?l.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),x+=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>{name}:</span><br/>Minimum: &nbsp;{y[0]}<br/>Q1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}`),f===null&&(f=""),l.visible&&(this.reversed===!0?(f=this.chart.replaceKeywordsWithValue(x,o,l,d)+f,_<r.length-1&&(f="</br>"+f)):(f+=this.chart.replaceKeywordsWithValue(x,o,l,d),_<r.length-1&&(f+="</br>"))))}f!==null&&(f=N+f)}else{if(l=r[0].dataSeries,o=r[0].dataPoint,d=r[0].index,o.toolTipContent===null||typeof o.toolTipContent>"u"&&l.options.toolTipContent===null)return null;l.type==="line"||l.type==="stepLine"||l.type==="spline"||l.type==="area"||l.type==="stepArea"||l.type==="splineArea"||l.type==="column"||l.type==="bar"||l.type==="scatter"||l.type==="stackedColumn"||l.type==="stackedColumn100"||l.type==="stackedBar"||l.type==="stackedBar100"||l.type==="stackedArea"||l.type==="stackedArea100"||l.type==="waterfall"?x=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}":l.type==="bubble"?x=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":l.type==="pie"||l.type==="doughnut"||l.type==="funnel"||l.type==="pyramid"?x=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.name?"{name}:</span>&nbsp;&nbsp;":o.label?"{label}:</span>&nbsp;&nbsp;":"</span>")+"{y}":l.type==="rangeColumn"||l.type==="rangeBar"||l.type==="rangeArea"||l.type==="rangeSplineArea"||l.type==="error"?x=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":l.type==="candlestick"||l.type==="ohlc"?x=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+"</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}":l.type==="boxAndWhisker"&&(x=o.toolTipContent?o.toolTipContent:l.toolTipContent?l.toolTipContent:this.content&&typeof this.content!="function"?this.content:`<span data-color='"`+(this.options.fontColor?"":"'{color}'")+`"'>`+(o.label?"{label}":"{x}")+"</span><br/>Minimum: &nbsp;{y[0]}<br/>Q1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),f===null&&(f=""),f+=this.chart.replaceKeywordsWithValue(x,o,l,d)}return f},oi.prototype.enableAnimation=function(){if(!this.container.style.WebkitTransition){var r=this.getContainerTransition(this.containerTransitionDuration);this.container.style.WebkitTransition=r,this.container.style.MsTransition=r,this.container.style.transition=r,this.container.style.MozTransition=this.mozContainerTransition}},oi.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},oi.prototype.hide=function(r){this.container&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._entries=this._dataSeriesIndex=this._xValue=null,this._prevY=this._prevX=NaN,this._updatedEventParameters=null,(typeof r>"u"||r)&&this.chart.resetOverlayedCanvas())},oi.prototype.show=function(r,f,l){this._updateToolTip(r,f,typeof l>"u"?!1:l)},oi.prototype.showAtIndex=function(r,f){},oi.prototype.showAtX=function(r,f){if(!this.enabled)return!1;!p(this.chart.clearedOverlayedCanvas)&&this.chart.clearedOverlayedCanvas.indexOf("axis")&&(this.chart.clearedOverlayedCanvas=null),this._updateOptions();var l,o,d,x=[];if(d=!1,f=!p(f)&&0<=f&&f<this.chart.data.length?f:0,this.shared)for(var _=0;_<this.chart.data.length;_++)l=this.chart.data[_],(o=l.getDataPointAtX(r,!1))&&o.dataPoint&&!p(o.dataPoint.y)&&l.visible&&(o.dataSeries=l,this.chart.data[f].axisX.convertValueToPixel(r)===l.axisX.convertValueToPixel(o.dataPoint.x)&&x.push(o));else l=this.chart.data[f],(o=l.getDataPointAtX(r,!1))&&o.dataPoint&&!p(o.dataPoint.y)&&l.visible&&(o.dataSeries=l,x.push(o));if(0<x.length){for(_=0;_<x.length;_++)if(o=x[_],(this.shared||0<=o.dataSeries.type.indexOf("100"))&&o.dataSeries.axisX&&o.dataPoint.x>=o.dataSeries.axisX.viewportMinimum&&o.dataPoint.x<=o.dataSeries.axisX.viewportMaximum){d=!1;break}else if(o.dataSeries.axisX&&o.dataSeries.axisY&&(o.dataPoint.x<o.dataSeries.axisX.viewportMinimum||o.dataPoint.x>o.dataSeries.axisX.viewportMaximum||o.dataPoint.y<o.dataSeries.axisY.viewportMinimum||o.dataPoint.y>o.dataSeries.axisY.viewportMaximum))d=!0;else{d=!1;break}if(d)return this.hide(),!1;if(this.highlightObjects(x),this.chart.clearedOverlayedCanvas==="toolTip"&&this.chart.renderCrosshairs(),this._entries=x,_="",_=this.getToolTipInnerHTML({entries:x}),_!==null){if(this.contentDiv.innerHTML=_,this.isToolTipDefinedInData&&p(this.options.content)&&p(this.options.contentFormatter))for(o=this.contentDiv.getElementsByTagName("span"),_=0;_<o.length;_++)o[_]&&(o[_].style.color=o[_].getAttribute("data-color"));_=!1,this.container.style.display==="none"&&(_=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:ut?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor=x[0].dataSeries.type==="waterfall"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:0<x[0].dataPoint.y?x[0].dataSeries.risingColor:x[0].dataSeries.fallingColor:x[0].dataSeries.type==="error"?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[l.index%x[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:x[0].dataPoint.color?x[0].dataPoint.color:x[0].dataSeries.color?x[0].dataSeries.color:x[0].dataSeries._colorSet[x[0].index%x[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||this.borderThickness===0?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||this.cornerRadius===0?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||this.fontSize===0?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:ut?"italic":"normal"}catch{}x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"?l=x[0].dataSeries.dataPointEOs[x[0].index].center.x+x[0].dataSeries.radius*Math.cos(x[0].dataSeries.dataPointEOs[x[0].index].midAngle)+-(x[0].dataSeries.dataPointEOs[x[0].index].hemisphere==="left"?0:this.container.clientWidth):x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"?(o=x[0].dataSeries.dataPointEOs[x[0].index].sectionsofFunnel,l=(o.x1+o.x2-this.container.clientWidth)/2):(l=x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y.length?x[0].dataPoint.y[x[0].dataPoint.y.length-1]:x[0].dataPoint.y)-this.container.clientWidth<<0:x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x)-this.container.clientWidth<<0,l-=10),0>l&&(l+=this.container.clientWidth+20),l+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(l=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),x.length!==1||this.shared||x[0].dataSeries.type!=="line"&&x[0].dataSeries.type!=="stepLine"&&x[0].dataSeries.type!=="spline"&&x[0].dataSeries.type!=="area"&&x[0].dataSeries.type!=="stepArea"&&x[0].dataSeries.type!=="splineArea"?x[0].dataSeries.type==="pie"||x[0].dataSeries.type==="doughnut"?(o=x[0].dataSeries.dataPointEOs[x[0].index].center.y+x[0].dataSeries.radius*Math.sin(x[0].dataSeries.dataPointEOs[x[0].index].midAngle),o<x[0].dataSeries.dataPointEOs[x[0].index].center.y&&(o+=this.container.clientHeight)):x[0].dataSeries.type==="funnel"||x[0].dataSeries.type==="pyramid"?(o=x[0].dataSeries.dataPointEOs[x[0].dataSeries.reversed?x[0].dataSeries.dataPointEOs.length-1-x[0].index:x[0].index].sectionsofFunnel,o=typeof o.x5<"u"?(o.y2+o.y4)/2:(o.y2+o.y3)/2+this.container.clientHeight/2):o=x[0].dataSeries.type==="bar"||x[0].dataSeries.type==="rangeBar"||x[0].dataSeries.type==="stackedBar"||x[0].dataSeries.type==="stackedBar100"?x[0].dataSeries.axisX.convertValueToPixel(x[0].dataPoint.x):x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y.length?x[0].dataPoint.y[x[0].dataPoint.y.length-1]:x[0].dataPoint.y):o=x[0].dataSeries.axisY.convertValueToPixel(x[0].dataPoint.y),o=-o+10,0<o+this.container.clientHeight+5&&(o-=o+this.container.clientHeight+5-0),this.fixMozTransitionDelay(l,o),!this.animationEnabled||_?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.container.style.left=l+"px",this.container.style.bottom=o+"px"}else return this.hide(!1),!1}else return this.hide(),!1;return this._xValue=r,this._dataSeriesIndex=f,this._prevY=this._prevX=NaN,!0},oi.prototype.fixMozTransitionDelay=function(r,f){if(20<this.chart._eventManager.lastObjectId)this.mozContainerTransition=this.getContainerTransition(0);else{var l=parseFloat(this.container.style.left),l=isNaN(l)?0:l,o=parseFloat(this.container.style.bottom),o=isNaN(o)?0:o;10<Math.sqrt(Math.pow(l-r,2)+Math.pow(o-f,2))?this.mozContainerTransition=this.getContainerTransition(.1):this.mozContainerTransition=this.getContainerTransition(0)}},oi.prototype.getContainerTransition=function(r){return"left "+r+"s ease-out 0s, bottom "+r+"s ease-out 0s"},Oi.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],ut&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},Oi.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},Oi.prototype.mouseEventHandler=function(r){if(r.type==="mousemove"||r.type==="click"){var f=[],l=We(r),o=null;if((o=this.chart.getObjectAtXY(l.x,l.y,!1))&&typeof this.objectMap[o]<"u")if(o=this.objectMap[o],o.objectType==="dataPoint"){var d=this.chart.data[o.dataSeriesIndex],x=d.dataPoints[o.dataPointIndex],_=o.dataPointIndex;o.eventParameter={x:l.x,y:l.y,dataPoint:x,dataSeries:d.options,dataPointIndex:_,dataSeriesIndex:d.index,chart:this.chart},o.eventContext={context:x,userContext:x,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},f.push(o),o=this.objectMap[d.id],o.eventParameter={x:l.x,y:l.y,dataPoint:x,dataSeries:d.options,dataPointIndex:_,dataSeriesIndex:d.index,chart:this.chart},o.eventContext={context:d,userContext:d.options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},f.push(this.objectMap[d.id])}else o.objectType==="legendItem"&&(d=this.chart.data[o.dataSeriesIndex],x=o.dataPointIndex!==null?d.dataPoints[o.dataPointIndex]:null,o.eventParameter={x:l.x,y:l.y,dataSeries:d.options,dataPoint:x,dataPointIndex:o.dataPointIndex,dataSeriesIndex:o.dataSeriesIndex,chart:this.chart},o.eventContext={context:this.chart.legend,userContext:this.chart.legend.options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},f.push(o));for(d=[],l=0;l<this.mouseoveredObjectMaps.length;l++){for(x=!0,o=0;o<f.length;o++)if(f[o].id===this.mouseoveredObjectMaps[l].id){x=!1;break}x?this.fireEvent(this.mouseoveredObjectMaps[l],"mouseout",r):d.push(this.mouseoveredObjectMaps[l])}for(this.mouseoveredObjectMaps=d,l=0;l<f.length;l++){for(d=!1,o=0;o<this.mouseoveredObjectMaps.length;o++)if(f[l].id===this.mouseoveredObjectMaps[o].id){d=!0;break}d||(this.fireEvent(f[l],"mouseover",r),this.mouseoveredObjectMaps.push(f[l])),r.type==="click"?this.fireEvent(f[l],"click",r):r.type==="mousemove"&&this.fireEvent(f[l],"mousemove",r)}}},Oi.prototype.fireEvent=function(r,f,l){if(r&&f){var o=r.eventParameter,d=r.eventContext,x=r.eventContext.userContext;x&&d&&x[d[f]]&&x[d[f]].call(x,o),f!=="mouseout"?x.cursor&&x.cursor!==l.target.style.cursor&&(l.target.style.cursor=x.cursor):(l.target.style.cursor=this.chart.panEnabled?d.mouseout!=="itemmouseout"||x.dockInsidePlotArea?"move":this.chart._defaultCursor:this.chart._defaultCursor,delete r.eventParameter,delete r.eventContext),f==="click"&&r.objectType==="dataPoint"&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[r.dataSeriesIndex],o),f==="click"&&r.objectType==="dataPoint"&&this.chart.funnelPyramidClickHandler&&this.chart.funnelPyramidClickHandler.call(this.chart.data[r.dataSeriesIndex],o)}},ze.prototype.animate=function(r,f,l,o,d){var x=this;for(this.chart.isAnimating=!0,d=d||Xe.easing.linear,l&&this.animations.push({startTime:new Date().getTime()+(r||0),duration:f,animationCallback:l,onComplete:o}),r=[];0<this.animations.length;)f=this.animations.shift(),l=new Date().getTime(),o=0,f.startTime<=l&&(o=d(Math.min(l-f.startTime,f.duration),0,1,f.duration),o=Math.min(o,1),isNaN(o)||!isFinite(o))&&(o=1),1>o&&r.push(f),f.animationCallback(o),1<=o&&f.onComplete&&f.onComplete();this.animations=r,0<this.animations.length?this.animationRequestId=this.chart.requestAnimFrame.call(window,function(){x.animate.call(x)}):this.chart.isAnimating=!1},ze.prototype.cancelAllAnimations=function(){this.animations=[],this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId),this.animationRequestId=null,this.chart.isAnimating=!1};var Xe={yScaleAnimation:function(r,f){if(r!==0){var l=f.dest,o=f.source.canvas,d=f.animationBase;l.drawImage(o,0,0,o.width,o.height,0,d-d*r,l.canvas.width/ie,r*l.canvas.height/ie)}},xScaleAnimation:function(r,f){if(r!==0){var l=f.dest,o=f.source.canvas,d=f.animationBase;l.drawImage(o,0,0,o.width,o.height,d-d*r,0,r*l.canvas.width/ie,l.canvas.height/ie)}},xClipAnimation:function(r,f){if(r!==0){var l=f.dest,o=f.source.canvas;l.save(),0<r&&l.drawImage(o,0,0,o.width*r,o.height,0,0,o.width*r/ie,o.height/ie),l.restore()}},fadeInAnimation:function(r,f){if(r!==0){var l=f.dest,o=f.source.canvas;l.save(),l.globalAlpha=r,l.drawImage(o,0,0,o.width,o.height,0,0,l.canvas.width/ie,l.canvas.height/ie),l.restore()}},easing:{linear:function(r,f,l,o){return l*r/o+f},easeOutQuad:function(r,f,l,o){return-l*(r/=o)*(r-2)+f},easeOutQuart:function(r,f,l,o){return-l*((r=r/o-1)*r*r*r-1)+f},easeInQuad:function(r,f,l,o){return l*(r/=o)*r+f},easeInQuart:function(r,f,l,o){return l*(r/=o)*r*r*r+f}}},xi={drawMarker:function(r,f,l,o,d,x,_,I){if(l){var N=1;l.fillStyle=x||"#000000",l.strokeStyle=_||"#000000",l.lineWidth=I||0,l.setLineDash&&l.setLineDash(y("solid",I)),o==="circle"?(l.moveTo(r,f),l.beginPath(),l.arc(r,f,d/2,0,2*Math.PI,!1),x&&l.fill(),I&&(_?l.stroke():(N=l.globalAlpha,l.globalAlpha=.15,l.strokeStyle="black",l.stroke(),l.globalAlpha=N))):o==="square"?(l.beginPath(),l.rect(r-d/2,f-d/2,d,d),x&&l.fill(),I&&(_?l.stroke():(N=l.globalAlpha,l.globalAlpha=.15,l.strokeStyle="black",l.stroke(),l.globalAlpha=N))):o==="triangle"?(l.beginPath(),l.moveTo(r-d/2,f+d/2),l.lineTo(r+d/2,f+d/2),l.lineTo(r,f-d/2),l.closePath(),x&&l.fill(),I&&(_?l.stroke():(N=l.globalAlpha,l.globalAlpha=.15,l.strokeStyle="black",l.stroke(),l.globalAlpha=N)),l.beginPath()):o==="cross"&&(l.strokeStyle=x,l.lineWidth=d/4,l.beginPath(),l.moveTo(r-d/2,f-d/2),l.lineTo(r+d/2,f+d/2),l.stroke(),l.moveTo(r+d/2,f-d/2),l.lineTo(r-d/2,f+d/2),l.stroke())}},drawMarkers:function(r){for(var f=0;f<r.length;f++){var l=r[f];xi.drawMarker(l.x,l.y,l.ctx,l.type,l.size,l.color,l.borderColor,l.borderThickness)}}};return Y}(),z.version="v3.12.12 GA",window.CanvasJS&&z&&!window.CanvasJS.Chart&&(window.CanvasJS.Chart=z)})();document.createElement("canvas").getContext||function(){function n(){return this.context_||(this.context_=new y(this))}function t(X,z,it){var mt=yt.call(arguments,2);return function(){return X.apply(z,mt.concat(yt.call(arguments)))}}function e(X){return String(X).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function i(X){X.namespaces.g_vml_||X.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),X.namespaces.g_o_||X.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),X.styleSheets.ex_canvas_||(X=X.createStyleSheet(),X.owningElement.id="ex_canvas_",X.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function s(X){var z=X.srcElement;switch(X.propertyName){case"width":z.getContext().clearRect(),z.style.width=z.attributes.width.nodeValue+"px",z.firstChild.style.width=z.clientWidth+"px";break;case"height":z.getContext().clearRect(),z.style.height=z.attributes.height.nodeValue+"px",z.firstChild.style.height=z.clientHeight+"px"}}function a(X){X=X.srcElement,X.firstChild&&(X.firstChild.style.width=X.clientWidth+"px",X.firstChild.style.height=X.clientHeight+"px")}function h(){return[[1,0,0],[0,1,0],[0,0,1]]}function u(X,z){for(var it=h(),mt=0;3>mt;mt++)for(var dt=0;3>dt;dt++){for(var Tt=0,Dt=0;3>Dt;Dt++)Tt+=X[mt][Dt]*z[Dt][dt];it[mt][dt]=Tt}return it}function m(X,z){z.fillStyle=X.fillStyle,z.lineCap=X.lineCap,z.lineJoin=X.lineJoin,z.lineWidth=X.lineWidth,z.miterLimit=X.miterLimit,z.shadowBlur=X.shadowBlur,z.shadowColor=X.shadowColor,z.shadowOffsetX=X.shadowOffsetX,z.shadowOffsetY=X.shadowOffsetY,z.strokeStyle=X.strokeStyle,z.globalAlpha=X.globalAlpha,z.font=X.font,z.textAlign=X.textAlign,z.textBaseline=X.textBaseline,z.arcScaleX_=X.arcScaleX_,z.arcScaleY_=X.arcScaleY_,z.lineScale_=X.lineScale_}function p(X){var it=X.indexOf("(",3),z=X.indexOf(")",it+1),it=X.substring(it+1,z).split(",");return(it.length!=4||X.charAt(3)!="a")&&(it[3]=1),it}function v(X,z,it){return Math.min(it,Math.max(z,X))}function T(X,z,it){return 0>it&&it++,1<it&&it--,1>6*it?X+6*(z-X)*it:1>2*it?z:2>3*it?X+6*(z-X)*(2/3-it):X}function C(X){if(X in Yt)return Yt[X];var z,it=1;if(X=String(X),X.charAt(0)=="#")z=X;else if(/^rgb/.test(X)){it=p(X),z="#";for(var mt,dt=0;3>dt;dt++)mt=it[dt].indexOf("%")!=-1?Math.floor(255*(parseFloat(it[dt])/100)):+it[dt],z+=kt[v(mt,0,255)];it=+it[3]}else if(/^hsl/.test(X)){if(dt=it=p(X),z=parseFloat(dt[0])/360%360,0>z&&z++,mt=v(parseFloat(dt[1])/100,0,1),dt=v(parseFloat(dt[2])/100,0,1),mt==0)mt=dt=z=dt;else{var Tt=.5>dt?dt*(1+mt):dt+mt-dt*mt,Dt=2*dt-Tt;mt=T(Dt,Tt,z+1/3),dt=T(Dt,Tt,z),z=T(Dt,Tt,z-1/3)}z="#"+kt[Math.floor(255*mt)]+kt[Math.floor(255*dt)]+kt[Math.floor(255*z)],it=it[3]}else z=Mt[X]||X;return Yt[X]={color:z,alpha:it}}function y(X){this.m_=h(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*$,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=X;var z="width:"+X.clientWidth+"px;height:"+X.clientHeight+"px;overflow:hidden;position:absolute",it=X.ownerDocument.createElement("div");it.style.cssText=z,X.appendChild(it),z=it.cloneNode(!1),z.style.backgroundColor="red",z.style.filter="alpha(opacity=0)",X.appendChild(z),this.element_=it,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function F(X,z,it,mt){X.currentPath_.push({type:"bezierCurveTo",cp1x:z.x,cp1y:z.y,cp2x:it.x,cp2y:it.y,x:mt.x,y:mt.y}),X.currentX_=mt.x,X.currentY_=mt.y}function O(X,z){var mt=C(X.strokeStyle),it=mt.color,mt=mt.alpha*X.globalAlpha,dt=X.lineScale_*X.lineWidth;1>dt&&(mt*=dt),z.push("<g_vml_:stroke",' opacity="',mt,'"',' joinstyle="',X.lineJoin,'"',' miterlimit="',X.miterLimit,'"',' endcap="',ut[X.lineCap]||"square",'"',' weight="',dt,'px"',' color="',it,'" />')}function R(X,z,it,mt){var dt=X.fillStyle,Tt=X.arcScaleX_,Dt=X.arcScaleY_,oe=mt.x-it.x,ue=mt.y-it.y;if(dt instanceof J){var pe=0,we=mt=0,At=0,Ut=1;if(dt.type_=="gradient"){pe=dt.x1_/Tt,it=dt.y1_/Dt;var Ct=A(X,dt.x0_/Tt,dt.y0_/Dt),pe=A(X,pe,it),pe=180*Math.atan2(pe.x-Ct.x,pe.y-Ct.y)/Math.PI;0>pe&&(pe+=360),1e-6>pe&&(pe=0)}else Ct=A(X,dt.x0_,dt.y0_),mt=(Ct.x-it.x)/oe,we=(Ct.y-it.y)/ue,oe/=Tt*$,ue/=Dt*$,Ut=St.max(oe,ue),At=2*dt.r0_/Ut,Ut=2*dt.r1_/Ut-At;Tt=dt.colors_,Tt.sort(function(Ce,ge){return Ce.offset-ge.offset}),Dt=Tt.length,Ct=Tt[0].color,it=Tt[Dt-1].color,oe=Tt[0].alpha*X.globalAlpha,X=Tt[Dt-1].alpha*X.globalAlpha;for(var ue=[],Pe=0;Pe<Dt;Pe++){var Ee=Tt[Pe];ue.push(Ee.offset*Ut+At+" "+Ee.color)}z.push('<g_vml_:fill type="',dt.type_,'"',' method="none" focus="100%"',' color="',Ct,'"',' color2="',it,'"',' colors="',ue.join(","),'"',' opacity="',X,'"',' g_o_:opacity2="',oe,'"',' angle="',pe,'"',' focusposition="',mt,",",we,'" />')}else dt instanceof nt?oe&&ue&&z.push("<g_vml_:fill",' position="',-it.x/oe*Tt*Tt,",",-it.y/ue*Dt*Dt,'"',' type="tile"',' src="',dt.src_,'" />'):(dt=C(X.fillStyle),z.push('<g_vml_:fill color="',dt.color,'" opacity="',dt.alpha*X.globalAlpha,'" />'))}function A(X,z,it){return X=X.m_,{x:$*(z*X[0][0]+it*X[1][0]+X[2][0])-ct,y:$*(z*X[0][1]+it*X[1][1]+X[2][1])-ct}}function Z(X,z,it){isFinite(z[0][0])&&isFinite(z[0][1])&&isFinite(z[1][0])&&isFinite(z[1][1])&&isFinite(z[2][0])&&isFinite(z[2][1])&&(X.m_=z,it&&(X.lineScale_=H(tt(z[0][0]*z[1][1]-z[0][1]*z[1][0]))))}function J(X){this.type_=X,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function nt(X,z){if(!X||X.nodeType!=1||X.tagName!="IMG")throw new pt("TYPE_MISMATCH_ERR");if(X.readyState!="complete")throw new pt("INVALID_STATE_ERR");switch(z){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=z;break;default:throw new pt("SYNTAX_ERR")}this.src_=X.src,this.width_=X.width,this.height_=X.height}function pt(X){this.code=this[X],this.message=X+": DOM Exception "+this.code}var St=Math,at=St.round,ot=St.sin,Q=St.cos,tt=St.abs,H=St.sqrt,$=10,ct=$/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var yt=Array.prototype.slice;i(document);var Bt={init:function(X){X=X||document,X.createElement("canvas"),X.attachEvent("onreadystatechange",t(this.init_,this,X))},init_:function(X){X=X.getElementsByTagName("canvas");for(var z=0;z<X.length;z++)this.initElement(X[z])},initElement:function(X){if(!X.getContext){X.getContext=n,i(X.ownerDocument),X.innerHTML="",X.attachEvent("onpropertychange",s),X.attachEvent("onresize",a);var z=X.attributes;z.width&&z.width.specified?X.style.width=z.width.nodeValue+"px":X.width=X.clientWidth,z.height&&z.height.specified?X.style.height=z.height.nodeValue+"px":X.height=X.clientHeight}return X}};Bt.init();for(var kt=[],K=0;16>K;K++)for(var zt=0;16>zt;zt++)kt[16*K+zt]=K.toString(16)+zt.toString(16);var Mt={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},Yt={},Zt={},ut={butt:"flat",round:"round"},K=y.prototype;K.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},K.beginPath=function(){this.currentPath_=[]},K.moveTo=function(X,z){var it=A(this,X,z);this.currentPath_.push({type:"moveTo",x:it.x,y:it.y}),this.currentX_=it.x,this.currentY_=it.y},K.lineTo=function(X,z){var it=A(this,X,z);this.currentPath_.push({type:"lineTo",x:it.x,y:it.y}),this.currentX_=it.x,this.currentY_=it.y},K.bezierCurveTo=function(X,z,it,mt,dt,Tt){dt=A(this,dt,Tt),X=A(this,X,z),it=A(this,it,mt),F(this,X,it,dt)},K.quadraticCurveTo=function(X,z,it,mt){X=A(this,X,z),it=A(this,it,mt),mt={x:this.currentX_+2/3*(X.x-this.currentX_),y:this.currentY_+2/3*(X.y-this.currentY_)},F(this,mt,{x:mt.x+(it.x-this.currentX_)/3,y:mt.y+(it.y-this.currentY_)/3},it)},K.arc=function(X,z,it,mt,dt,Tt){it*=$;var Dt=Tt?"at":"wa",oe=X+Q(mt)*it-ct,ue=z+ot(mt)*it-ct;mt=X+Q(dt)*it-ct,dt=z+ot(dt)*it-ct,oe!=mt||Tt||(oe+=.125),X=A(this,X,z),oe=A(this,oe,ue),mt=A(this,mt,dt),this.currentPath_.push({type:Dt,x:X.x,y:X.y,radius:it,xStart:oe.x,yStart:oe.y,xEnd:mt.x,yEnd:mt.y})},K.rect=function(X,z,it,mt){this.moveTo(X,z),this.lineTo(X+it,z),this.lineTo(X+it,z+mt),this.lineTo(X,z+mt),this.closePath()},K.strokeRect=function(X,z,it,mt){var dt=this.currentPath_;this.beginPath(),this.moveTo(X,z),this.lineTo(X+it,z),this.lineTo(X+it,z+mt),this.lineTo(X,z+mt),this.closePath(),this.stroke(),this.currentPath_=dt},K.fillRect=function(X,z,it,mt){var dt=this.currentPath_;this.beginPath(),this.moveTo(X,z),this.lineTo(X+it,z),this.lineTo(X+it,z+mt),this.lineTo(X,z+mt),this.closePath(),this.fill(),this.currentPath_=dt},K.createLinearGradient=function(X,z,it,mt){var dt=new J("gradient");return dt.x0_=X,dt.y0_=z,dt.x1_=it,dt.y1_=mt,dt},K.createRadialGradient=function(X,z,it,mt,dt,Tt){var Dt=new J("gradientradial");return Dt.x0_=X,Dt.y0_=z,Dt.r0_=it,Dt.x1_=mt,Dt.y1_=dt,Dt.r1_=Tt,Dt},K.drawImage=function(X,z){var it,mt,dt,Tt,Dt,oe,ue,pe;dt=X.runtimeStyle.width,Tt=X.runtimeStyle.height,X.runtimeStyle.width="auto",X.runtimeStyle.height="auto";var we=X.width,At=X.height;if(X.runtimeStyle.width=dt,X.runtimeStyle.height=Tt,arguments.length==3)it=arguments[1],mt=arguments[2],Dt=oe=0,ue=dt=we,pe=Tt=At;else if(arguments.length==5)it=arguments[1],mt=arguments[2],dt=arguments[3],Tt=arguments[4],Dt=oe=0,ue=we,pe=At;else if(arguments.length==9)Dt=arguments[1],oe=arguments[2],ue=arguments[3],pe=arguments[4],it=arguments[5],mt=arguments[6],dt=arguments[7],Tt=arguments[8];else throw Error("Invalid number of arguments");var Ut=A(this,it,mt),Ct=[];if(Ct.push(" <g_vml_:group",' coordsize="',10*$,",",10*$,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var Pe=[];Pe.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",at(Ut.x/$),",","Dy=",at(Ut.y/$),"");var Ee=A(this,it+dt,mt),Ce=A(this,it,mt+Tt);it=A(this,it+dt,mt+Tt),Ut.x=St.max(Ut.x,Ee.x,Ce.x,it.x),Ut.y=St.max(Ut.y,Ee.y,Ce.y,it.y),Ct.push("padding:0 ",at(Ut.x/$),"px ",at(Ut.y/$),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",Pe.join(""),", sizingmethod='clip');")}else Ct.push("top:",at(Ut.y/$),"px;left:",at(Ut.x/$),"px;");Ct.push(' ">','<g_vml_:image src="',X.src,'"',' style="width:',$*dt,"px;"," height:",$*Tt,'px"',' cropleft="',Dt/we,'"',' croptop="',oe/At,'"',' cropright="',(we-Dt-ue)/we,'"',' cropbottom="',(At-oe-pe)/At,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",Ct.join(""))},K.stroke=function(X){var z=[];z.push("<g_vml_:shape",' filled="',!!X,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*$,",",10*$,'"',' stroked="',!X,'"',' path="');for(var it={x:null,y:null},mt={x:null,y:null},dt=0;dt<this.currentPath_.length;dt++){var Tt=this.currentPath_[dt];switch(Tt.type){case"moveTo":z.push(" m ",at(Tt.x),",",at(Tt.y));break;case"lineTo":z.push(" l ",at(Tt.x),",",at(Tt.y));break;case"close":z.push(" x "),Tt=null;break;case"bezierCurveTo":z.push(" c ",at(Tt.cp1x),",",at(Tt.cp1y),",",at(Tt.cp2x),",",at(Tt.cp2y),",",at(Tt.x),",",at(Tt.y));break;case"at":case"wa":z.push(" ",Tt.type," ",at(Tt.x-this.arcScaleX_*Tt.radius),",",at(Tt.y-this.arcScaleY_*Tt.radius)," ",at(Tt.x+this.arcScaleX_*Tt.radius),",",at(Tt.y+this.arcScaleY_*Tt.radius)," ",at(Tt.xStart),",",at(Tt.yStart)," ",at(Tt.xEnd),",",at(Tt.yEnd))}Tt&&((it.x==null||Tt.x<it.x)&&(it.x=Tt.x),(mt.x==null||Tt.x>mt.x)&&(mt.x=Tt.x),(it.y==null||Tt.y<it.y)&&(it.y=Tt.y),(mt.y==null||Tt.y>mt.y)&&(mt.y=Tt.y))}z.push(' ">'),X?R(this,z,it,mt):O(this,z),z.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",z.join(""))},K.fill=function(){this.stroke(!0)},K.closePath=function(){this.currentPath_.push({type:"close"})},K.save=function(){var X={};m(this,X),this.aStack_.push(X),this.mStack_.push(this.m_),this.m_=u(h(),this.m_)},K.restore=function(){this.aStack_.length&&(m(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},K.translate=function(X,z){Z(this,u([[1,0,0],[0,1,0],[X,z,1]],this.m_),!1)},K.rotate=function(X){var z=Q(X);X=ot(X),Z(this,u([[z,X,0],[-X,z,0],[0,0,1]],this.m_),!1)},K.scale=function(X,z){this.arcScaleX_*=X,this.arcScaleY_*=z,Z(this,u([[X,0,0],[0,z,0],[0,0,1]],this.m_),!0)},K.transform=function(X,z,it,mt,dt,Tt){Z(this,u([[X,z,0],[it,mt,0],[dt,Tt,1]],this.m_),!0)},K.setTransform=function(X,z,it,mt,dt,Tt){Z(this,[[X,z,0],[it,mt,0],[dt,Tt,1]],!0)},K.drawText_=function(X,z,it,mt,dt){var Tt=this.m_;mt=0;var Dt=1e3,oe=0,ue=[],pe;if(pe=this.font,Zt[pe])pe=Zt[pe];else{var we=document.createElement("div").style;try{we.font=pe}catch{}pe=Zt[pe]={style:we.fontStyle||"normal",variant:we.fontVariant||"normal",weight:we.fontWeight||"normal",size:we.fontSize||10,family:we.fontFamily||"sans-serif"}}var we=pe,At=this.element_;pe={};for(var Ut in we)pe[Ut]=we[Ut];switch(Ut=parseFloat(At.currentStyle.fontSize),At=parseFloat(we.size),typeof we.size=="number"?pe.size=we.size:we.size.indexOf("px")!=-1?pe.size=At:we.size.indexOf("em")!=-1?pe.size=Ut*At:we.size.indexOf("%")!=-1?pe.size=Ut/100*At:we.size.indexOf("pt")!=-1?pe.size=At/.75:pe.size=Ut,pe.size*=.981,Ut=pe.style+" "+pe.variant+" "+pe.weight+" "+pe.size+"px "+pe.family,At=this.element_.currentStyle,we=this.textAlign.toLowerCase(),we){case"left":case"center":case"right":break;case"end":we=At.direction=="ltr"?"right":"left";break;case"start":we=At.direction=="rtl"?"right":"left";break;default:we="left"}switch(this.textBaseline){case"hanging":case"top":oe=pe.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":oe=-pe.size/2.25}switch(we){case"right":mt=1e3,Dt=.05;break;case"center":mt=Dt=500}z=A(this,z+0,it+oe),ue.push('<g_vml_:line from="',-mt,' 0" to="',Dt,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!dt,'" stroked="',!!dt,'" style="position:absolute;width:1px;height:1px;">'),dt?O(this,ue):R(this,ue,{x:-mt,y:0},{x:Dt,y:pe.size}),dt=Tt[0][0].toFixed(3)+","+Tt[1][0].toFixed(3)+","+Tt[0][1].toFixed(3)+","+Tt[1][1].toFixed(3)+",0,0",z=at(z.x/$)+","+at(z.y/$),ue.push('<g_vml_:skew on="t" matrix="',dt,'" ',' offset="',z,'" origin="',mt,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',e(X),'" style="v-text-align:',we,";font:",e(Ut),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",ue.join(""))},K.fillText=function(X,z,it,mt){this.drawText_(X,z,it,mt,!1)},K.strokeText=function(X,z,it,mt){this.drawText_(X,z,it,mt,!0)},K.measureText=function(X){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var z=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(z.createTextNode(X)),{width:this.textMeasureEl_.offsetWidth}},K.clip=function(){},K.arcTo=function(){},K.createPattern=function(X,z){return new nt(X,z)},J.prototype.addColorStop=function(X,z){z=C(z),this.colors_.push({offset:X,color:z.color,alpha:z.alpha})},K=pt.prototype=Error(),K.INDEX_SIZE_ERR=1,K.DOMSTRING_SIZE_ERR=2,K.HIERARCHY_REQUEST_ERR=3,K.WRONG_DOCUMENT_ERR=4,K.INVALID_CHARACTER_ERR=5,K.NO_DATA_ALLOWED_ERR=6,K.NO_MODIFICATION_ALLOWED_ERR=7,K.NOT_FOUND_ERR=8,K.NOT_SUPPORTED_ERR=9,K.INUSE_ATTRIBUTE_ERR=10,K.INVALID_STATE_ERR=11,K.SYNTAX_ERR=12,K.INVALID_MODIFICATION_ERR=13,K.NAMESPACE_ERR=14,K.INVALID_ACCESS_ERR=15,K.VALIDATION_ERR=16,K.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=Bt,CanvasRenderingContext2D=y,CanvasGradient=J,CanvasPattern=nt,DOMException=pt}()});var ig;function Yv(){if(ig==null){let n=typeof document<"u"?document.head:null;ig=!!(n&&(n.createShadowRoot||n.attachShadow))}return ig}function fl(n){if(Yv()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function sr(n){return n.composedPath?n.composedPath()[0]:n.target}function ml(n){return n.buttons===0||n.detail===0}function gl(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}function xl(n,t=0){return Gv(n)?Number(n):arguments.length===2?t:0}function Gv(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function ls(n){return n instanceof Dn?n.nativeElement:n}function Es(n,t,e,i,s){let a=parseInt(tg.major),h=parseInt(tg.minor);return a>19||a===19&&h>0||a===0&&h===0?n.listen(t,e,i,s):(t.addEventListener(e,i,s),()=>{t.removeEventListener(e,i,s)})}var Pu=new WeakMap,vl=(()=>{class n{_appRef;_injector=be(kr);_environmentInjector=be(Zm);load(e){let i=this._appRef=this._appRef||this._injector.get(Av),s=Pu.get(i);s||(s={loaders:new Set,refs:[]},Pu.set(i,s),i.onDestroy(()=>{Pu.get(i)?.refs.forEach(a=>a.destroy()),Pu.delete(i)})),s.loaders.has(e)||(s.loaders.add(e),s.refs.push(eg(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ng;try{ng=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ng=!1}var ks=(()=>{class n{_platformId=be(Mv);isBrowser=this._platformId?Nv(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||ng)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pw=new Fn("cdk-dir-doc",{providedIn:"root",factory:fw});function fw(){return be(nr)}var mw=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function qv(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?mw.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Va=(()=>{class n{value="ltr";change=new an;constructor(){let e=be(pw,{optional:!0});if(e){let i=e.body?e.body.dir:null,s=e.documentElement?e.documentElement.dir:null;this.value=qv(i||s||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qr=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(qr||{}),Eu,_l;function Zv(){if(_l==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return _l=!1,_l;if("scrollBehavior"in document.documentElement.style)_l=!0;else{let n=Element.prototype.scrollTo;n?_l=!/\{\s*\[native code\]\s*\}/.test(n.toString()):_l=!1}}return _l}function Mh(){if(typeof document!="object"||!document)return qr.NORMAL;if(Eu==null){let n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),Eu=qr.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Eu=n.scrollLeft===0?qr.NEGATED:qr.INVERTED),n.remove()}return Eu}var Th=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({})}return n})();var gw=20,sg=(()=>{class n{_ngZone=be(Nn);_platform=be(ks);_renderer=be(To).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new pi;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=gw){return this._platform.isBrowser?new pr(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let s=e>0?this._scrolled.pipe(Ym(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):dh()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let s=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Er(a=>!a||s.indexOf(a)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((s,a)=>{this._scrollableContainsElement(a,e)&&i.push(a)}),i}_scrollableContainsElement(e,i){let s=ls(i),a=e.getElementRef().nativeElement;do if(s==a)return!0;while(s=s.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bc=(()=>{class n{elementRef=be(Dn);scrollDispatcher=be(sg);ngZone=be(Nn);dir=be(Va,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new pi;_renderer=be(ul);_cleanupScroll;_elementScrolled=new pi;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=s?e.end:e.start),e.right==null&&(e.right=s?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),s&&Mh()!=qr.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),Mh()==qr.INVERTED?e.left=e.right:Mh()==qr.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;Zv()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",s="right",a=this.elementRef.nativeElement;if(e=="top")return a.scrollTop;if(e=="bottom")return a.scrollHeight-a.clientHeight-a.scrollTop;let h=this.dir&&this.dir.value=="rtl";return e=="start"?e=h?s:i:e=="end"&&(e=h?i:s),h&&Mh()==qr.INVERTED?e==i?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:h&&Mh()==qr.NEGATED?e==i?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:e==i?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),xw=20,Iu=(()=>{class n{_platform=be(ks);_listeners;_viewportSize;_change=new pi;_document=be(nr,{optional:!0});constructor(){let e=be(Nn),i=be(To).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let s=a=>this._change.next(a);this._listeners=[i.listen("window","resize",s),i.listen("window","orientationchange",s)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:s}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+s,right:e.left+i,height:s,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),s=e.documentElement,a=s.getBoundingClientRect(),h=-a.top||e.body.scrollTop||i.scrollY||s.scrollTop||0,u=-a.left||e.body.scrollLeft||i.scrollX||s.scrollLeft||0;return{top:h,left:u}}change(e=xw){return e>0?this._change.pipe(Ym(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ku=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({})}return n})(),Kv=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({imports:[Th,ku,Th,ku]})}return n})();var rg={},Oc=(()=>{class n{_appId=be(Sv);getId(e){return this._appId!=="ng"&&(e+=this._appId),rg.hasOwnProperty(e)||(rg[e]=0),`${e}${rg[e]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vc(n){return Array.isArray(n)?n:[n]}function d_(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let s=0;s<e.length;s++)e[s].removeAttribute("id");return i==="canvas"?Qv(n,t):(i==="input"||i==="select"||i==="textarea")&&Jv(n,t),$v("canvas",n,t,Qv),$v("input, textarea, select",n,t,Jv),t}function $v(n,t,e,i){let s=t.querySelectorAll(n);if(s.length){let a=e.querySelectorAll(n);for(let h=0;h<s.length;h++)i(s[h],a[h])}}var vw=0;function Jv(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${vw++}`)}function Qv(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function fg(n){let t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function lg(n,t,e){let{top:i,bottom:s,left:a,right:h}=n;return e>=i&&e<=s&&t>=a&&t<=h}function Wc(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function t_(n,t,e,i){let{top:s,right:a,bottom:h,left:u,width:m,height:p}=n,v=m*t,T=p*t;return i>s-T&&i<h+T&&e>u-v&&e<a+v}var Lu=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:fg(e)})})}handleScroll(t){let e=sr(t),i=this.positions.get(e);if(!i)return null;let s=i.scrollPosition,a,h;if(e===this._document){let p=this.getViewportScrollPosition();a=p.top,h=p.left}else a=e.scrollTop,h=e.scrollLeft;let u=s.top-a,m=s.left-h;return this.positions.forEach((p,v)=>{p.clientRect&&e!==v&&e.contains(v)&&Wc(p.clientRect,u,m)}),s.top=a,s.left=h,{top:u,left:m}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function u_(n,t){let e=n.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(s=>i.appendChild(s)),i}function mg(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){let s=t[i];s?n.setProperty(i,s,e?.has(i)?"important":""):n.removeProperty(i)}return n}function Ch(n,t){let e=t?"":"none";mg(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function e_(n,t,e){mg(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Du(n,t){return t&&t!="none"?n+" "+t:n}function i_(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=Ru(t.left,t.top)}function Ru(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function n_(n){let t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function _w(n){let t=getComputedStyle(n),e=ag(t,"transition-property"),i=e.find(u=>u==="transform"||u==="all");if(!i)return 0;let s=e.indexOf(i),a=ag(t,"transition-duration"),h=ag(t,"transition-delay");return n_(a[s])+n_(h[s])}function ag(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}var bw=new Set(["position"]),hg=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,s,a,h,u,m,p,v){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=s,this._previewTemplate=a,this._previewClass=h,this._pickupPositionOnPage=u,this._initialTransform=m,this._zIndex=p,this._renderer=v}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),s_(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return _w(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,s;if(i&&t){let a=t.matchSize?this._initialDomRect:null,h=t.viewContainer.createEmbeddedView(i,t.context);h.detectChanges(),s=u_(h,this._document),this._previewEmbeddedView=h,t.matchSize?i_(s,a):s.style.transform=Ru(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else s=d_(this._rootElement),i_(s,this._initialDomRect),this._initialTransform&&(s.style.transform=this._initialTransform);return mg(s.style,{"pointer-events":"none",margin:s_(s)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},bw),Ch(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("popover","manual"),s.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(a=>s.classList.add(a)):s.classList.add(e)),s}};function s_(n){return"showPopover"in n}var yw={passive:!0},r_={passive:!1},ww={passive:!1,capture:!0},Sw=800,a_=new Set(["position"]),cg=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Li(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new pi;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=As.EMPTY;_pointerUpSubscription=As.EMPTY;_scrollSubscription=As.EMPTY;_resizeSubscription=As.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Ch(e,t)))}_disabled=!1;beforeStarted=new pi;started=new pi;released=new pi;ended=new pi;entered=new pi;exited=new pi;dropped=new pi;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,s,a,h,u){this._config=e,this._document=i,this._ngZone=s,this._viewportRuler=a,this._dragDropRegistry=h,this._renderer=u,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new Lu(i),h.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>ls(i)),this._handles.forEach(i=>Ch(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=ls(t);return e!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[Es(this._renderer,e,"mousedown",this._pointerDown,r_),Es(this._renderer,e,"touchstart",this._pointerDown,yw),Es(this._renderer,e,"dragstart",this._nativeDragStart,r_)]),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?ls(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Ch(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Ch(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let s=Math.abs(e.x-this._pickupPositionOnPage.x),a=Math.abs(e.y-this._pickupPositionOnPage.y);if(s+a>=this._config.dragStartThreshold){let u=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),m=this._dropContainer;if(!u){this._endDragSequence(t);return}(!m||!m.isDragging()&&!m.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let s=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,a=this._activeTransform;a.x=i.x-s.x+this._passiveTransform.x,a.y=i.y-s.y+this._passiveTransform.y,this._applyRootElementTransform(a.x,a.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){zc(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=Es(this._renderer,e,"selectstart",Mw,ww)}),i){let s=this._rootElement,a=s.parentNode,h=this._placeholder=this._createPlaceholderElement(),u=this._anchor=this._anchor||this._document.createComment("");a.insertBefore(u,s),this._initialTransform=s.style.transform||"",this._preview=new hg(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(a,e)),e_(s,!1,a_),this._document.body.appendChild(a.replaceChild(h,s)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),s=zc(e),a=!s&&e.button!==0,h=this._rootElement,u=sr(e),m=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+Sw>Date.now(),p=s?gl(e):ml(e);if(u&&u.draggable&&e.type==="mousedown"&&e.preventDefault(),i||a||m||p)return;if(this._handles.length){let C=h.style;this._rootElementTapHighlight=C.webkitTapHighlightColor||"",C.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(C=>this._updateOnScroll(C)),this._boundaryElement&&(this._boundaryRect=fg(this._boundaryElement));let v=this._previewTemplate;this._pickupPositionInElement=v&&v.template&&!v.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let T=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:T.x,y:T.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){e_(this._rootElement,!0,a_),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),s=this._getPointerPositionOnPage(t),a=this._getDragDistance(s),h=e._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:a,dropPoint:s,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:h,distance:a,dropPoint:s,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,h,a,s,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:s}){let a=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=a,this._dropContainer.enter(this,t,e,a===this._initialContainer&&a.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:a,currentIndex:a.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,s),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let s=u=>{(!u||this._preview&&sr(u)===this._preview.element&&u.propertyName==="transform")&&(h(),i(),clearTimeout(a))},a=setTimeout(s,e*1.5),h=this._preview.addEventListener("transitionend",s)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=u_(this._placeholderRef,this._document)):i=d_(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){let s=e===this._rootElement?null:e,a=s?s.getBoundingClientRect():t,h=zc(i)?i.targetTouches[0]:i,u=this._getViewportScrollPosition(),m=h.pageX-a.left-u.left,p=h.pageY-a.top-u.top;return{x:a.left-t.left+m,y:a.top-t.top+p}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=zc(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,s=i.pageX-e.left,a=i.pageY-e.top;if(this._ownerSVGElement){let h=this._ownerSVGElement.getScreenCTM();if(h){let u=this._ownerSVGElement.createSVGPoint();return u.x=s,u.y=a,u.matrixTransform(h.inverse())}}return{x:s,y:a}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:s}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?s=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:a,y:h}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,u=this._boundaryRect,{width:m,height:p}=this._getPreviewRect(),v=u.top+h,T=u.bottom-(p-h),C=u.left+a,y=u.right-(m-a);i=o_(i,C,y),s=o_(s,v,T)}return{x:i,y:s}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,s=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,h=Math.abs(e-a.x),u=Math.abs(i-a.y);return h>this._config.pointerDirectionChangeThreshold&&(s.x=e>a.x?1:-1,a.x=e),u>this._config.pointerDirectionChangeThreshold&&(s.y=i>a.y?1:-1,a.y=i),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Ch(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let i=1/this.scale,s=Ru(t*i,e*i),a=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=a.transform&&a.transform!="none"?a.transform:""),a.transform=Du(s,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,s=Ru(t,e);this._preview.setTransform(Du(s,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),s=this._boundaryElement.getBoundingClientRect();if(s.width===0&&s.height===0||i.width===0&&i.height===0)return;let a=s.left-i.left,h=i.right-s.right,u=s.top-i.top,m=i.bottom-s.bottom;s.width>i.width?(a>0&&(t+=a),h>0&&(t-=h)):t=0,s.height>i.height?(u>0&&(e+=u),m>0&&(e-=m)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:zc(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=sr(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Wc(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=fl(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let s=this._document;return e||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement||s.body}return ls(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function o_(n,t,e){return Math.max(t,Math.min(e,n))}function zc(n){return n.type[0]==="t"}function Mw(n){n.preventDefault()}function Nu(n,t,e){let i=l_(t,n.length-1),s=l_(e,n.length-1);if(i===s)return;let a=n[i],h=s<i?-1:1;for(let u=i;u!==s;u+=h)n[u]=n[u+h];n[s]=a}function l_(n,t){return Math.max(0,Math.min(t,n))}var Fu=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,s){let a=this._itemPositions,h=this._getItemIndexFromPointerPosition(t,e,i,s);if(h===-1&&a.length>0)return null;let u=this.orientation==="horizontal",m=a.findIndex(R=>R.drag===t),p=a[h],v=a[m].clientRect,T=p.clientRect,C=m>h?1:-1,y=this._getItemOffsetPx(v,T,C),F=this._getSiblingOffsetPx(m,a,C),O=a.slice();return Nu(a,m,h),a.forEach((R,A)=>{if(O[A]===R)return;let Z=R.drag===t,J=Z?y:F,nt=Z?t.getPlaceholderElement():R.drag.getRootElement();R.offset+=J;let pt=Math.round(R.offset*(1/R.drag.scale));u?(nt.style.transform=Du(`translate3d(${pt}px, 0, 0)`,R.initialTransform),Wc(R.clientRect,0,J)):(nt.style.transform=Du(`translate3d(0, ${pt}px, 0)`,R.initialTransform),Wc(R.clientRect,J,0))}),this._previousSwap.overlaps=lg(T,e,i),this._previousSwap.drag=p.drag,this._previousSwap.delta=u?s.x:s.y,{previousIndex:m,currentIndex:h}}enter(t,e,i,s){let a=s==null||s<0?this._getItemIndexFromPointerPosition(t,e,i):s,h=this._activeDraggables,u=h.indexOf(t),m=t.getPlaceholderElement(),p=h[a];if(p===t&&(p=h[a+1]),!p&&(a==null||a===-1||a<h.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(p=h[0]),u>-1&&h.splice(u,1),p&&!this._dragDropRegistry.isDragging(p)){let v=p.getRootElement();v.parentElement.insertBefore(m,v),h.splice(a,0,t)}else this._element.appendChild(m),h.push(t);m.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(s=>s.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Wc(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:fg(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){let s=this.orientation==="horizontal",a=s?e.left-t.left:e.top-t.top;return i===-1&&(a+=s?e.width-t.width:e.height-t.height),a}_getSiblingOffsetPx(t,e,i){let s=this.orientation==="horizontal",a=e[t].clientRect,h=e[t+i*-1],u=a[s?"width":"height"]*i;if(h){let m=s?"left":"top",p=s?"right":"bottom";i===-1?u-=h.clientRect[m]-a[p]:u+=a[m]-h.clientRect[p]}return u}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,s=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let h=i[i.length-1].clientRect;return s?t>=h.right:e>=h.bottom}else{let h=i[0].clientRect;return s?t<=h.left:e<=h.top}}_getItemIndexFromPointerPosition(t,e,i,s){let a=this.orientation==="horizontal",h=this._itemPositions.findIndex(({drag:u,clientRect:m})=>{if(u===t)return!1;if(s){let p=a?s.x:s.y;if(u===this._previousSwap.drag&&this._previousSwap.overlaps&&p===this._previousSwap.delta)return!1}return a?e>=Math.floor(m.left)&&e<Math.floor(m.right):i>=Math.floor(m.top)&&i<Math.floor(m.bottom)});return h===-1||!this._sortPredicate(h,t)?-1:h}},dg=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let s=e[i];this._relatedNodes.push([s,s.nextSibling])}this.withItems(t)}sort(t,e,i,s){let a=this._getItemIndexFromPointerPosition(t,e,i),h=this._previousSwap;if(a===-1||this._activeItems[a]===t)return null;let u=this._activeItems[a];if(h.drag===u&&h.overlaps&&h.deltaX===s.x&&h.deltaY===s.y)return null;let m=this.getItemIndex(t),p=t.getPlaceholderElement(),v=u.getRootElement();a>m?v.after(p):v.before(p),Nu(this._activeItems,m,a);let T=this._getRootNode().elementFromPoint(e,i);return h.deltaX=s.x,h.deltaY=s.y,h.drag=u,h.overlaps=v===T||v.contains(T),{previousIndex:m,currentIndex:a}}enter(t,e,i,s){let a=s==null||s<0?this._getItemIndexFromPointerPosition(t,e,i):s;a===-1&&(a=this._getClosestItemIndexToPointer(t,e,i));let h=this._activeItems[a],u=this._activeItems.indexOf(t);u>-1&&this._activeItems.splice(u,1),h&&!this._dragDropRegistry.isDragging(h)?(this._activeItems.splice(a,0,t),h.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[s,a]=this._relatedNodes[i];s.parentNode===t&&s.nextSibling!==a&&(a===null?t.appendChild(s):a.parentNode===t&&t.insertBefore(s,a))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let s=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),a=s?this._activeItems.findIndex(h=>{let u=h.getRootElement();return s===u||u.contains(s)}):-1;return a===-1||!this._sortPredicate(a,t)?-1:a}_getRootNode(){return this._rootNode||(this._rootNode=fl(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let s=1/0,a=-1;for(let h=0;h<this._activeItems.length;h++){let u=this._activeItems[h];if(u!==t){let{x:m,y:p}=u.getRootElement().getBoundingClientRect(),v=Math.hypot(e-m,i-p);v<s&&(s=v,a=h)}}return a}},h_=.05,p_=.05,Rr=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(Rr||{}),js=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(js||{}),ug=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new pi;entered=new pi;exited=new pi;dropped=new pi;sorted=new pi;receivingStarted=new pi;receivingStopped=new pi;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=As.EMPTY;_verticalScrollDirection=Rr.NONE;_horizontalScrollDirection=js.NONE;_scrollNode;_stopScrollTimers=new pi;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,s,a){this._dragDropRegistry=e,this._ngZone=s,this._viewportRuler=a;let h=this.element=ls(t);this._document=i,this.withOrientation("vertical").withElementContainer(h),e.registerDropContainer(this),this._parentPositions=new Lu(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,s){this._draggingStarted(),s==null&&this.sortingDisabled&&(s=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,s),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,s,a,h,u,m={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:s,isPointerOverContainer:a,distance:h,dropPoint:u,event:m})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(s=>s.isDragging()).every(s=>t.indexOf(s)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof Fu&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new dg(this._document,this._dragDropRegistry);else{let e=new Fu(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=ls(this.element),i=this._scrollableElements.indexOf(this._container),s=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),s>-1&&this._scrollableElements.splice(s,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,s){if(this.sortingDisabled||!this._domRect||!t_(this._domRect,h_,e,i))return;let a=this._sortStrategy.sort(t,e,i,s);a&&this.sorted.next({previousIndex:a.previousIndex,currentIndex:a.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,s=Rr.NONE,a=js.NONE;if(this._parentPositions.positions.forEach((h,u)=>{u===this._document||!h.clientRect||i||t_(h.clientRect,h_,t,e)&&([s,a]=Tw(u,h.clientRect,this._direction,t,e),(s||a)&&(i=u))}),!s&&!a){let{width:h,height:u}=this._viewportRuler.getViewportSize(),m={width:h,height:u,top:0,right:h,bottom:u,left:0};s=f_(m,e),a=m_(m,t),i=window}i&&(s!==this._verticalScrollDirection||a!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=s,this._horizontalScrollDirection=a,this._scrollNode=i,(s||a)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),wv(0,jm).pipe(Gi(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===Rr.UP?t.scrollBy(0,-e):this._verticalScrollDirection===Rr.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===js.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===js.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&lg(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(s=>s._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!lg(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let s=this._getShadowRoot().elementFromPoint(e,i);return s?s===this._container||this._container.contains(s):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(s=>this.enterPredicate(s,this)||this._draggables.indexOf(s)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=fl(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function f_(n,t){let{top:e,bottom:i,height:s}=n,a=s*p_;return t>=e-a&&t<=e+a?Rr.UP:t>=i-a&&t<=i+a?Rr.DOWN:Rr.NONE}function m_(n,t){let{left:e,right:i,width:s}=n,a=s*p_;return t>=e-a&&t<=e+a?js.LEFT:t>=i-a&&t<=i+a?js.RIGHT:js.NONE}function Tw(n,t,e,i,s){let a=f_(t,s),h=m_(t,i),u=Rr.NONE,m=js.NONE;if(a){let p=n.scrollTop;a===Rr.UP?p>0&&(u=Rr.UP):n.scrollHeight-p>n.clientHeight&&(u=Rr.DOWN)}if(h){let p=n.scrollLeft;e==="rtl"?h===js.RIGHT?p<0&&(m=js.RIGHT):n.scrollWidth+p>n.clientWidth&&(m=js.LEFT):h===js.LEFT?p>0&&(m=js.LEFT):n.scrollWidth-p>n.clientWidth&&(m=js.RIGHT)}return[u,m]}var Uc={capture:!0},og={passive:!1,capture:!0},Cw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=li({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,s){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),gg=(()=>{class n{_ngZone=be(Nn);_document=be(nr);_styleLoader=be(vl);_renderer=be(To).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Li([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new pi;pointerUp=new pi;scroll=new pi;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=Es(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,og)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(Cw),this._activeDragInstances.update(s=>[...s,e]),this._activeDragInstances().length===1)){let s=i.type.startsWith("touch"),a=u=>this.pointerUp.next(u),h=[["scroll",u=>this.scroll.next(u),Uc],["selectstart",this._preventDefaultWhileDragging,og]];s?h.push(["touchend",a,Uc],["touchcancel",a,Uc]):h.push(["mouseup",a,Uc]),s||h.push(["mousemove",u=>this.pointerMove.next(u),og]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=h.map(([u,m,p])=>Es(this._renderer,this._document,u,m,p))})}}stopDragging(e){this._activeDragInstances.update(i=>{let s=i.indexOf(e);return s>-1?(i.splice(s,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this.scroll];return e&&e!==this._document&&i.push(new pr(s=>this._ngZone.runOutsideAngular(()=>{let a=Es(this._renderer,e,"scroll",h=>{this._activeDragInstances().length&&s.next(h)},Uc);return()=>{a()}}))),_o(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Aw={dragStartThreshold:5,pointerDirectionChangeThreshold:5},xg=(()=>{class n{_document=be(nr);_ngZone=be(Nn);_viewportRuler=be(Iu);_dragDropRegistry=be(gg);_renderer=be(To).createRenderer(null,null);constructor(){}createDrag(e,i=Aw){return new cg(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new ug(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pg=new Fn("CDK_DRAG_PARENT");var g_=new Fn("CdkDragHandle"),x_=(()=>{class n{element=be(Dn);_parentDrag=be(pg,{optional:!0,skipSelf:!0});_dragDropRegistry=be(gg);_stateChanges=new pi;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let i=this._dragDropRegistry.getDragDirectiveForNode(e);if(i){this._parentDrag=i,i._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",Yn]},features:[gr([{provide:g_,useExisting:n}])]})}return n})(),v_=new Fn("CDK_DRAG_CONFIG"),__=new Fn("CdkDropList"),Bu=(()=>{class n{element=be(Dn);dropContainer=be(__,{optional:!0,skipSelf:!0});_ngZone=be(Nn);_viewContainerRef=be(Co);_dir=be(Va,{optional:!0});_changeDetectorRef=be(Eo);_selfHandle=be(g_,{optional:!0,self:!0});_parentDrag=be(pg,{optional:!0,skipSelf:!0});_dragDropRegistry=be(gg);_destroyed=new pi;_handles=new ir([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new an;released=new an;ended=new an;entered=new an;exited=new an;dropped=new an;moved=new pr(e=>{let i=this._dragRef.moved.pipe(Ba(s=>({source:this,pointerPosition:s.pointerPosition,event:s.event,delta:s.delta,distance:s.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=be(kr);constructor(){let e=this.dropContainer,i=be(v_,{optional:!0}),s=be(xg);this._dragRef=s.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(Gi(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){So(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,s=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,s&&!s.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),s=i.indexOf(e);s>-1&&(i.splice(s,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):ls(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,s=this.dragStartDelay,a=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,h=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof s=="object"&&s?s:xl(s),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(h).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(Gr(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let s=this._dragDropRegistry.getDragDirectiveForNode(i);if(s){e.withParent(s._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:s,constrainPosition:a,previewClass:h,boundaryElement:u,draggingDisabled:m,rootElementSelector:p,previewContainer:v}=e;this.disabled=m??!1,this.dragStartDelay=s||0,i&&(this.lockAxis=i),a&&(this.constrainPosition=a),h&&(this.previewClass=h),u&&(this.boundaryElement=u),p&&(this.rootElementSelector=p),v&&(this.previewContainer=v)}_setupHandlesListener(){this._handles.pipe(fu(e=>{let i=e.map(s=>s.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Fc(e=>_o(...e.map(i=>i._stateChanges.pipe(da(i))))),Gi(this._destroyed)).subscribe(e=>{let i=this._dragRef,s=e.element.nativeElement;e.disabled?i.disableHandle(s):i.enableHandle(s)})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,s){i&2&&Bn("cdk-drag-disabled",s.disabled)("cdk-drag-dragging",s._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Yn],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",pa]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[gr([{provide:pg,useExisting:n}]),Oa]})}return n})(),c_=new Fn("CdkDropListGroup");var b_=(()=>{class n{element=be(Dn);_changeDetectorRef=be(Eo);_scrollDispatcher=be(sg);_dir=be(Va,{optional:!0});_group=be(c_,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new pi;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=be(Oc).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new an;entered=new an;exited=new an;sorted=new an;_unsortedItems=new Set;constructor(){let e=be(xg),i=be(v_,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(s,a)=>this.enterPredicate(s.data,a.data),this._dropListRef.sortPredicate=(s,a,h)=>this.sortPredicate(s,a.data,h.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(e._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=n._dropLists.indexOf(this);e>-1&&n._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(da(this._dir.value),Gi(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=Vc(this.connectedTo).map(s=>{if(typeof s=="string"){let a=n._dropLists.find(h=>h.id===s);return a}return s});if(this._group&&this._group._items.forEach(s=>{i.indexOf(s)===-1&&i.push(s)}),!this._scrollableParentsResolved){let s=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(a=>a.getElementRef().nativeElement);this._dropListRef.withScrollableParents(s),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let s=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(s)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=xl(this.autoScrollStep,2),e.connectedTo(i.filter(s=>s&&s!==this).map(s=>s._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),_o(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:s,sortingDisabled:a,listAutoScrollDisabled:h,listOrientation:u}=e;this.disabled=s??!1,this.sortingDisabled=a??!1,this.autoScrollDisabled=h??!1,this.orientation=u||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,s){i&2&&(Jn("id",s.id),Bn("cdk-drop-list-disabled",s.disabled)("cdk-drop-list-dragging",s._dropListRef.isDragging())("cdk-drop-list-receiving",s._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Yn],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Yn],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Yn],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[gr([{provide:c_,useValue:void 0},{provide:__,useExisting:n}])]})}return n})();var y_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({providers:[xg],imports:[ku]})}return n})();var Ew=["*"];function kw(n,t){n&1&&(Xt(0,"div",8),Po(1),Jt())}var nn=class n{constructor(t){this.launcherService=t}title=Xs("");type=Xs("");minimized=Li(!1);dialogMap={settings:13,education:4,projects:11,notes:10,search:12,todos:17,stlviewer:15,weather:19,about:0,help:7,"about-me":1,skills:14,"new-note":8,"edit-note":5,"delete-note":2,"new-todo":9,"edit-todo":6,"delete-todo":3,timer:16};closeDialog(){let t=this.type(),e=this.dialogMap[t];e!==void 0?this.launcherService.closeDialog(e):console.warn(`[DialogWindow] No DialogPurpose mapped for type: '${t}'`)}toggleMinimized(){let t=document.querySelector(".window-header");this.minimized()?(this.minimized.set(!1),t?.classList.remove("full-radius")):(this.minimized.set(!0),t?.classList.add("full-radius"))}static \u0275fac=function(e){return new(e||n)(Fi(Vn))};static \u0275cmp=li({type:n,selectors:[["dialog-window"]],inputs:{title:[1,"title"],type:[1,"type"]},ngContentSelectors:Ew,decls:10,vars:2,consts:[["id","window","cdkDrag","",1,"window"],["cdkDragHandle","",1,"window-header","d-flex","flex-row"],[1,"ms-1"],[1,"flex-fill"],[1,"minimize-btn","d-flex","flex-row","me-1"],["src","images/arrow-up.svg",3,"click"],[1,"close-btn"],[1,"bi","bi-x",3,"click"],["cdkScrollable","",1,"window-content","p-3",2,"padding","10px"]],template:function(e,i){e&1&&(Ao(),Xt(0,"div",0)(1,"div",1)(2,"span",2),Ae(3),Jt(),Ue(4,"div",3),Xt(5,"div",4)(6,"img",5),ii("click",function(){return i.toggleMinimized()}),Jt()(),Xt(7,"div",6)(8,"i",7),ii("click",function(){return i.closeDialog()}),Jt()()(),ji(9,kw,2,0,"div",8),Jt()),e&2&&(_e(3),us(i.title()),_e(6),Qi(i.minimized()?-1:9))},dependencies:[y_,Bc,Bu,x_,On],styles:[".window[_ngcontent-%COMP%]{position:absolute;top:5%;left:5%;min-width:250px;max-width:1240px;border:1px solid var(--cv-darkgrey);box-shadow:2px 2px 6px var(--black30);border-radius:10px;background-color:var(--cv-white)}.window-header[_ngcontent-%COMP%]{cursor:move;background-color:var(--cv-white);padding:5px;border-top-left-radius:10px;border-top-right-radius:10px;font-family:Roboto;text-shadow:0px 0px 1px var(--cv-grey);font-weight:500;position:relative;z-index:10}.full-radius[_ngcontent-%COMP%]{border-radius:10px}*[_ngcontent-%COMP%]{color:var(--cv-darkgrey)}.close-btn[_ngcontent-%COMP%], .minimize-btn[_ngcontent-%COMP%]{cursor:pointer;text-align:center;height:24px;width:24px;border:1px solid var(--cv-grey);border-radius:50%;transition:all .15s ease-in-out}.close-btn[_ngcontent-%COMP%]:hover, .minimize-btn[_ngcontent-%COMP%]:hover{border:1px solid var(--cv-grey);background-color:var(--cv-grey)}.close-btn[_ngcontent-%COMP%]:hover   .bi-x[_ngcontent-%COMP%], .minimize-btn[_ngcontent-%COMP%]:hover   .bi-x[_ngcontent-%COMP%]{color:var(--cv-white)}.close-btn[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .minimize-btn[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:brightness(163%)}.bi-x[_ngcontent-%COMP%]{color:var(--cv-grey);transition:all .15s ease-in-out}"]})};function Iw(n,t){if(n&1&&Ue(0,"div",1),n&2){let e=$e();vu("id",e.chartContainerId),qe("ngStyle",e.styles)}}typeof document=="object"&&document&&(S_=w_());var S_,M_=(()=>{class n{constructor(){this.shouldUpdateChart=!1,this.isDOMPresent=typeof document=="object"&&!!document,this.chartInstance=new an,this.options=this.options?this.options:{},this.styles=this.styles?this.styles:{width:"100%",position:"relative"},this.styles.height=this.options.height?this.options.height+"px":"400px",this.chartContainerId="canvasjs-angular-chart-container-"+n._cjsChartContainerId++}ngDoCheck(){this.prevChartOptions!=this.options&&(this.shouldUpdateChart=!0)}ngOnChanges(){this.shouldUpdateChart&&this.chart&&(this.chart.options=this.options,this.chart.render(),this.shouldUpdateChart=!1,this.prevChartOptions=this.options)}ngAfterViewInit(){this.isDOMPresent&&(this.chart=new S_.Chart(this.chartContainerId,this.options),this.chart.render(),this.prevChartOptions=this.options,this.chartInstance.emit(this.chart))}ngOnDestroy(){this.chart&&this.chart.destroy()}}return n._cjsChartContainerId=0,n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=li({type:n,selectors:[["canvasjs-chart"]],inputs:{options:"options",styles:"styles"},outputs:{chartInstance:"chartInstance"},standalone:!1,features:[Oa],decls:1,vars:1,consts:[[3,"id","ngStyle",4,"ngIf"],[3,"id","ngStyle"]],template:function(e,i){e&1&&ji(0,Iw,1,2,"div",0),e&2&&qe("ngIf",i.isDOMPresent)},dependencies:[ma,Dv],encapsulation:2}),n})(),T_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Tn({type:n}),n.\u0275inj=Mn({imports:[[On]]}),n})();var Hc;function C_(){if(Hc==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Hc=!0}))}finally{Hc=Hc||!1}return Hc}function Ah(n){return C_()?n:!!n.capture}var A_=new Fn("cdk-input-modality-detector-options"),P_={ignoreKeys:[18,17,224,91,16]},E_=650,vg={passive:!0,capture:!0},k_=(()=>{class n{_platform=be(ks);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new ir(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(i=>i===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=sr(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<E_||(this._modality.next(ml(e)?"keyboard":"mouse"),this._mostRecentTarget=sr(e))};_onTouchstart=e=>{if(gl(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=sr(e)};constructor(){let e=be(Nn),i=be(nr),s=be(A_,{optional:!0});if(this._options=ds(ds({},P_),s),this.modalityDetected=this._modality.pipe(uh(1)),this.modalityChanged=this.modalityDetected.pipe(Gm()),this._platform.isBrowser){let a=be(To).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[Es(a,i,"keydown",this._onKeydown,vg),Es(a,i,"mousedown",this._onMousedown,vg),Es(a,i,"touchstart",this._onTouchstart,vg)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xc=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Xc||{}),I_=new Fn("cdk-focus-monitor-default-options"),Vu=Ah({passive:!0,capture:!0}),_g=(()=>{class n{_ngZone=be(Nn);_platform=be(ks);_inputModalityDetector=be(k_);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=be(nr,{optional:!0});_stopInputModalityDetector=new pi;constructor(){let e=be(I_,{optional:!0});this._detectionMode=e?.detectionMode||Xc.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let i=sr(e);for(let s=i;s;s=s.parentElement)e.type==="focus"?this._onFocus(e,s):this._onBlur(e,s)};monitor(e,i=!1){let s=ls(e);if(!this._platform.isBrowser||s.nodeType!==1)return dh();let a=fl(s)||this._getDocument(),h=this._elementInfo.get(s);if(h)return i&&(h.checkChildren=!0),h.subject;let u={checkChildren:i,subject:new pi,rootNode:a};return this._elementInfo.set(s,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(e){let i=ls(e),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(e,i,s){let a=ls(e),h=this._getDocument().activeElement;a===h?this._getClosestElementsInfo(a).forEach(([u,m])=>this._originChanged(u,i,m)):(this._setOrigin(i),typeof a.focus=="function"&&a.focus(s))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===Xc.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===Xc.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?E_:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(e,i){let s=this._elementInfo.get(i),a=sr(e);!s||!s.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),s)}_onBlur(e,i){let s=this._elementInfo.get(i);!s||s.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vu),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vu)}),this._rootNodeFocusListenerCount.set(i,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gi(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vu),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vu),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,s){this._setClasses(e,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((s,a)=>{(a===e||s.checkChildren&&a.contains(e))&&i.push([a,s])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let a=e.labels;if(a){for(let h=0;h<a.length;h++)if(a[h].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bg=(()=>{class n{_elementRef=be(Dn);_focusMonitor=be(_g);_monitorSubscription;_focusOrigin=null;cdkFocusChange=new an;constructor(){}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(i=>{this._focusOrigin=i,this.cdkFocusChange.emit(i)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]})}return n})();var L_=new Set,bl,Dw=(()=>{class n{_platform=be(ks);_nonce=be(Tv,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Fw}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&Rw(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rw(n,t){if(!L_.has(n))try{bl||(bl=document.createElement("style"),t&&bl.setAttribute("nonce",t),bl.setAttribute("type","text/css"),document.head.appendChild(bl)),bl.sheet&&(bl.sheet.insertRule(`@media ${n} {body{ }}`,0),L_.add(n))}catch(e){console.error(e)}}function Fw(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var R_=(()=>{class n{_mediaMatcher=be(Dw);_zone=be(Nn);_queries=new Map;_destroySubject=new pi;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return D_(Vc(e)).some(s=>this._registerQuery(s).mql.matches)}observe(e){let s=D_(Vc(e)).map(h=>this._registerQuery(h).observable),a=pu(s);return a=bv(a.pipe(Gr(1)),a.pipe(uh(1),bo(0))),a.pipe(Ba(h=>{let u={matches:!1,breakpoints:{}};return h.forEach(({matches:m,query:p})=>{u.matches=u.matches||m,u.breakpoints[p]=m}),u}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),a={observable:new pr(h=>{let u=m=>this._zone.run(()=>h.next(m));return i.addListener(u),()=>{i.removeListener(u)}}).pipe(da(i),Ba(({matches:h})=>({query:e,matches:h})),Gi(this._destroySubject)),mql:i};return this._queries.set(e,a),a}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function D_(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Nw(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let t=0;t<n.addedNodes.length;t++)if(!(n.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<n.removedNodes.length;t++)if(!(n.removedNodes[t]instanceof Comment))return!1;return!0}return!1}var F_=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bw=(()=>{class n{_mutationObserverFactory=be(F_);_observedElements=new Map;_ngZone=be(Nn);constructor(){}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){let i=ls(e);return new pr(s=>{let h=this._observeElement(i).pipe(Ba(u=>u.filter(m=>!Nw(m))),Er(u=>!!u.length)).subscribe(u=>{this._ngZone.run(()=>{s.next(u)})});return()=>{h.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(e))this._observedElements.get(e).count++;else{let i=new pi,s=this._mutationObserverFactory.create(a=>i.next(a));s&&s.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:s,stream:i,count:1})}return this._observedElements.get(e).stream})}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){let{observer:i,stream:s}=this._observedElements.get(e);i&&i.disconnect(),s.complete(),this._observedElements.delete(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yg=(()=>{class n{_contentObserver=be(Bw);_elementRef=be(Dn);event=new an;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(e){this._debounce=xl(e),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let e=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?e.pipe(bo(this.debounce)):e).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",Yn],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),N_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({providers:[F_]})}return n})();var ko=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(ko||{}),B_="cdk-high-contrast-black-on-white",O_="cdk-high-contrast-white-on-black",wg="cdk-high-contrast-active",Sg=(()=>{class n{_platform=be(ks);_hasCheckedHighContrastMode;_document=be(nr);_breakpointSubscription;constructor(){this._breakpointSubscription=be(R_).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ko.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(e):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(e.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ko.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ko.BLACK_ON_WHITE}return ko.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(wg,B_,O_),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===ko.BLACK_ON_WHITE?e.add(wg,B_):i===ko.WHITE_ON_BLACK&&e.add(wg,O_)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ow=200,zu=class{_letterKeyStream=new pi;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new pi;selectedItem=this._selectedItem;constructor(t,e){let i=typeof e?.debounceInterval=="number"?e.debounceInterval:Ow;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(fu(e=>this._pressedLetters.push(e)),bo(t),Er(()=>this._pressedLetters.length>0),Ba(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let i=1;i<this._items.length+1;i++){let s=(this._selectedItemIndex+i)%this._items.length,a=this._items[s];if(!this._skipPredicateFn?.(a)&&a.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(a);break}}this._pressedLetters=[]})}};function Uu(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Wu=class{_items;_activeItemIndex=-1;_activeItem=Li(null);_wrap=!1;_typeaheadSubscription=As.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,e){this._items=t,t instanceof Nc?this._itemChangesSubscription=t.changes.subscribe(i=>this._itemsChanged(i.toArray())):$m(t)&&(this._effectRef=Lv(()=>this._itemsChanged(t()),{injector:e}))}tabOut=new pi;change=new pi;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new zu(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem();this.updateActiveItem(t),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!t[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&s){this.setNextItemActive();break}else return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&s){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&s){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&s){let a=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(a>0?a:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&s){let a=this._activeItemIndex+this._pageUpAndDown.delta,h=this._getItemsArray().length;this._setActiveItemByIndex(a<h?a:h-1,-1);break}else return;default:(s||Uu(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),i=typeof t=="number"?t:e.indexOf(t),s=e[i];this._activeItem.set(s??null),this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let i=1;i<=e.length;i++){let s=(this._activeItemIndex+t*i+e.length)%e.length,a=e[s];if(!this._skipPredicateFn(a)){this.setActiveItem(s);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(t+=e,!i[t])return;this.setActiveItem(t)}}_getItemsArray(){return $m(this._items)?this._items():this._items instanceof Nc?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let e=this._activeItem();if(e){let i=t.indexOf(e);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i))}}};var jc=class extends Wu{_origin="program";setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};var Mg=class{_box;_destroyed=new pi;_resizeSubject=new pi;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new pr(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(Er(e=>e.some(i=>i.target===t)),qm({bufferSize:1,refCount:!0}),Gi(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},V_=(()=>{class n{_cleanupErrorListener;_observers=new Map;_ngZone=be(Nn);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(e,i){let s=i?.box||"content-box";return this._observers.has(s)||this._observers.set(s,new Mg(s)),this._observers.get(s).observe(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ph=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Hu=class extends Ph{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(t,e,i,s,a){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.projectableNodes=a}},yl=class extends Ph{templateRef;viewContainerRef;context;injector;constructor(t,e,i,s){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=s}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},Xu=class extends Ph{element;constructor(t){super(),this.element=t instanceof Dn?t.nativeElement:t}},ju=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Hu)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof yl)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof Xu)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Tg=(()=>{class n extends yl{constructor(){let e=be(Mo),i=be(Co);super(e,i)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[ua]})}return n})();var Yu=(()=>{class n extends ju{_moduleRef=be(Cv,{optional:!0});_document=be(nr);_viewContainerRef=be(Co);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new an;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,s=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let s=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(s,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{s.parentNode&&s.parentNode.replaceChild(i,s)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ua]})}return n})();var z_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=li({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,s){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var Fr=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Fr||{}),Cg=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Fr.HIDDEN;constructor(t,e,i,s=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=s}fadeOut(){this._renderer.fadeOutRipple(this)}},U_=Ah({passive:!0,capture:!0}),Ag=class{_events=new Map;addHandler(t,e,i,s){let a=this._events.get(e);if(a){let h=a.get(i);h?h.add(s):a.set(i,new Set([s]))}else this._events.set(e,new Map([[i,new Set([s])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,U_)})}removeHandler(t,e,i){let s=this._events.get(t);if(!s)return;let a=s.get(e);a&&(a.delete(i),a.size===0&&s.delete(e),s.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,U_)))}_delegateEventHandler=t=>{let e=sr(t);e&&this._events.get(t.type)?.forEach((i,s)=>{(s===e||s.contains(e))&&i.forEach(a=>a.handleEvent(t))})}},W_={enterDuration:225,exitDuration:150},Vw=800,H_=Ah({passive:!0,capture:!0}),X_=["mousedown","touchstart"],j_=["mouseup","mouseleave","touchend","touchcancel"],zw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=li({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,s){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),Pg=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new Ag;constructor(t,e,i,s,a){this._target=t,this._ngZone=e,this._platform=s,s.isBrowser&&(this._containerElement=ls(i)),a&&a.get(vl).load(zw)}fadeInRipple(t,e,i={}){let s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=ds(ds({},W_),i.animation);i.centered&&(t=s.left+s.width/2,e=s.top+s.height/2);let h=i.radius||Uw(t,e,s),u=t-s.left,m=e-s.top,p=a.enterDuration,v=document.createElement("div");v.classList.add("mat-ripple-element"),v.style.left=`${u-h}px`,v.style.top=`${m-h}px`,v.style.height=`${h*2}px`,v.style.width=`${h*2}px`,i.color!=null&&(v.style.backgroundColor=i.color),v.style.transitionDuration=`${p}ms`,this._containerElement.appendChild(v);let T=window.getComputedStyle(v),C=T.transitionProperty,y=T.transitionDuration,F=C==="none"||y==="0s"||y==="0s, 0s"||s.width===0&&s.height===0,O=new Cg(this,v,i,F);v.style.transform="scale3d(1, 1, 1)",O.state=Fr.FADING_IN,i.persistent||(this._mostRecentTransientRipple=O);let R=null;return!F&&(p||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let A=()=>{R&&(R.fallbackTimer=null),clearTimeout(J),this._finishRippleTransition(O)},Z=()=>this._destroyRipple(O),J=setTimeout(Z,p+100);v.addEventListener("transitionend",A),v.addEventListener("transitioncancel",Z),R={onTransitionEnd:A,onTransitionCancel:Z,fallbackTimer:J}}),this._activeRipples.set(O,R),(F||!p)&&this._finishRippleTransition(O),O}fadeOutRipple(t){if(t.state===Fr.FADING_OUT||t.state===Fr.HIDDEN)return;let e=t.element,i=ds(ds({},W_),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=Fr.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=ls(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,X_.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{j_.forEach(e=>{this._triggerElement.addEventListener(e,this,H_)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Fr.FADING_IN?this._startFadeOutTransition(t):t.state===Fr.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Fr.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Fr.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=ml(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Vw;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!gl(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Fr.VISIBLE||t.config.terminateOnPointerUp&&t.state===Fr.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(X_.forEach(e=>n._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(j_.forEach(e=>t.removeEventListener(e,this,H_)),this._pointerUpEventsRegistered=!1))}};function Uw(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),s=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+s*s)}var Y_=new Fn("mat-ripple-global-options"),Eg=(()=>{class n{_elementRef=be(Dn);_animationMode=be(wo,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=be(Nn),i=be(ks),s=be(Y_,{optional:!0}),a=be(kr);this._globalOptions=s||{},this._rippleRenderer=new Pg(this,e,this._elementRef,i,a)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ds(ds(ds({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,s){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,ds(ds({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,ds(ds({},this.rippleConfig),e))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,s){i&2&&Bn("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})();var Ys=(()=>{class n{constructor(){be(Sg)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({imports:[Th,Th]})}return n})();var Rg=["*"];function Xw(n,t){n&1&&Po(0)}var jw=["tabListContainer"],Yw=["tabList"],Gw=["tabListInner"],qw=["nextPaginator"],Zw=["previousPaginator"],Kw=["content"];function $w(n,t){}var Jw=["tabBodyWrapper"],Qw=["tabHeader"];function tS(n,t){}function eS(n,t){if(n&1&&ji(0,tS,0,0,"ng-template",12),n&2){let e=$e().$implicit;qe("cdkPortalOutlet",e.templateLabel)}}function iS(n,t){if(n&1&&Ae(0),n&2){let e=$e().$implicit;us(e.textLabel)}}function nS(n,t){if(n&1){let e=cn();Xt(0,"div",7,2),ii("click",function(){let s=Ti(e),a=s.$implicit,h=s.$index,u=$e(),m=gh(1);return Ci(u._handleClick(a,m,h))})("cdkFocusChange",function(s){let a=Ti(e).$index,h=$e();return Ci(h._tabFocusChanged(s,a))}),Ue(2,"span",8)(3,"div",9),Xt(4,"span",10)(5,"span",11),ji(6,eS,1,1,null,12)(7,iS,1,1),Jt()()()}if(n&2){let e=t.$implicit,i=t.$index,s=gh(1),a=$e();fh(e.labelClass),Bn("mdc-tab--active",a.selectedIndex===i),qe("id",a._getTabLabelId(e,i))("disabled",e.disabled)("fitInkBarToContent",a.fitInkBarToContent),Jn("tabIndex",a._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",a._tabs.length)("aria-controls",a._getTabContentId(i))("aria-selected",a.selectedIndex===i)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),_e(3),qe("matRippleTrigger",s)("matRippleDisabled",e.disabled||a.disableRipple),_e(3),Qi(e.templateLabel?6:7)}}function sS(n,t){n&1&&Po(0)}function rS(n,t){if(n&1){let e=cn();Xt(0,"mat-tab-body",13),ii("_onCentered",function(){Ti(e);let s=$e();return Ci(s._removeTabBodyWrapperHeight())})("_onCentering",function(s){Ti(e);let a=$e();return Ci(a._setTabBodyWrapperHeight(s))})("_beforeCentering",function(s){Ti(e);let a=$e();return Ci(a._bodyCentered(s))}),Jt()}if(n&2){let e=t.$implicit,i=t.$index,s=$e();fh(e.bodyClass),qe("id",s._getTabContentId(i))("content",e.content)("position",e.position)("animationDuration",s.animationDuration)("preserveContent",s.preserveContent),Jn("tabindex",s.contentTabIndex!=null&&s.selectedIndex===i?s.contentTabIndex:null)("aria-labelledby",s._getTabLabelId(e,i))("aria-hidden",s.selectedIndex!==i)}}var aS=new Fn("MatTabContent"),oS=(()=>{class n{template=be(Mo);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","matTabContent",""]],features:[gr([{provide:aS,useExisting:n}])]})}return n})(),lS=new Fn("MatTabLabel"),K_=new Fn("MAT_TAB"),hS=(()=>{class n extends Tg{_closestTab=be(K_,{optional:!0});static \u0275fac=(()=>{let e;return function(s){return(e||(e=ph(n)))(s||n)}})();static \u0275dir=Rn({type:n,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[gr([{provide:lS,useExisting:n}]),ua]})}return n})(),$_=new Fn("MAT_TAB_GROUP"),Fg=(()=>{class n{_viewContainerRef=be(Co);_closestTabGroup=be($_,{optional:!0});disabled=!1;get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}_templateLabel;_explicitContent=void 0;_implicitContent;textLabel="";ariaLabel;ariaLabelledby;labelClass;bodyClass;id=null;_contentPortal=null;get content(){return this._contentPortal}_stateChanges=new pi;position=null;origin=null;isActive=!1;constructor(){be(vl).load(z_)}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new yl(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=li({type:n,selectors:[["mat-tab"]],contentQueries:function(i,s,a){if(i&1&&(mh(a,hS,5),mh(a,oS,7,Mo)),i&2){let h;as(h=os())&&(s.templateLabel=h.first),as(h=os())&&(s._explicitContent=h.first)}},viewQuery:function(i,s){if(i&1&&Ps(Mo,7),i&2){let a;as(a=os())&&(s._implicitContent=a.first)}},hostAttrs:["hidden",""],hostVars:1,hostBindings:function(i,s){i&2&&Jn("id",null)},inputs:{disabled:[2,"disabled","disabled",Yn],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass",id:"id"},exportAs:["matTab"],features:[gr([{provide:K_,useExisting:n}]),Oa],ngContentSelectors:Rg,decls:1,vars:0,template:function(i,s){i&1&&(Ao(),ji(0,Xw,1,0,"ng-template"))},encapsulation:2})}return n})(),kg="mdc-tab-indicator--active",G_="mdc-tab-indicator--no-transition",Ig=class{_items;_currentItem;constructor(t){this._items=t}hide(){this._items.forEach(t=>t.deactivateInkBar()),this._currentItem=void 0}alignToElement(t){let e=this._items.find(s=>s.elementRef.nativeElement===t),i=this._currentItem;if(e!==i&&(i?.deactivateInkBar(),e)){let s=i?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(s),this._currentItem=e}}},cS=(()=>{class n{_elementRef=be(Dn);_inkBarElement;_inkBarContentElement;_fitToContent=!1;get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let i=this._elementRef.nativeElement;if(!e||!i.getBoundingClientRect||!this._inkBarContentElement){i.classList.add(kg);return}let s=i.getBoundingClientRect(),a=e.width/s.width,h=e.left-s.left;i.classList.add(G_),this._inkBarContentElement.style.setProperty("transform",`translateX(${h}px) scaleX(${a})`),i.getBoundingClientRect(),i.classList.remove(G_),i.classList.add(kg),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(kg)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this._elementRef.nativeElement.ownerDocument||document,i=this._inkBarElement=e.createElement("span"),s=this._inkBarContentElement=e.createElement("span");i.className="mdc-tab-indicator",s.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",i.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;e.appendChild(this._inkBarElement)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Yn]}})}return n})();var J_=(()=>{class n extends cS{elementRef=be(Dn);disabled=!1;focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static \u0275fac=(()=>{let e;return function(s){return(e||(e=ph(n)))(s||n)}})();static \u0275dir=Rn({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(i,s){i&2&&(Jn("aria-disabled",!!s.disabled),Bn("mat-mdc-tab-disabled",s.disabled))},inputs:{disabled:[2,"disabled","disabled",Yn]},features:[ua]})}return n})(),q_={passive:!0},dS=650,uS=100,pS=(()=>{class n{_elementRef=be(Dn);_changeDetectorRef=be(Eo);_viewportRuler=be(Iu);_dir=be(Va,{optional:!0});_ngZone=be(Nn);_platform=be(ks);_sharedResizeObserver=be(V_);_injector=be(kr);_renderer=be(ul);_animationMode=be(wo,{optional:!0});_eventCleanups;_scrollDistance=0;_selectedIndexChanged=!1;_destroyed=new pi;_showPaginationControls=!1;_disableScrollAfter=!0;_disableScrollBefore=!0;_tabLabelCount;_scrollDistanceChanged;_keyManager;_currentTextContent;_stopScrolling=new pi;disablePagination=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){let i=isNaN(e)?0:e;this._selectedIndex!=i&&(this._selectedIndexChanged=!0,this._selectedIndex=i,this._keyManager&&this._keyManager.updateActiveItem(i))}_selectedIndex=0;selectFocusedIndex=new an;indexFocused=new an;constructor(){this._eventCleanups=this._ngZone.runOutsideAngular(()=>[this._renderer.listen(this._elementRef.nativeElement,"mouseleave",()=>this._stopInterval())])}ngAfterViewInit(){this._eventCleanups.push(Es(this._renderer,this._previousPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("before"),q_),Es(this._renderer,this._nextPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("after"),q_))}ngAfterContentInit(){let e=this._dir?this._dir.change:dh("ltr"),i=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(bo(32),Gi(this._destroyed)),s=this._viewportRuler.change(150).pipe(Gi(this._destroyed)),a=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new jc(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),So(a,{injector:this._injector}),_o(e,s,i,this._items.changes,this._itemsResized()).pipe(Gi(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),a()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(h=>{this.indexFocused.emit(h),this._setTabFocus(h)})}_itemsResized(){return typeof ResizeObserver!="function"?_v:this._items.changes.pipe(da(this._items),Fc(e=>new pr(i=>this._ngZone.runOutsideAngular(()=>{let s=new ResizeObserver(a=>i.next(a));return e.forEach(a=>s.observe(a.elementRef.nativeElement)),()=>{s.disconnect()}}))),uh(1),Er(e=>e.some(i=>i.contentRect.width>0&&i.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!Uu(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let i=this._items.get(this.focusIndex);i&&!i.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items?!!this._items.toArray()[e]:!0}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();let i=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?i.scrollLeft=0:i.scrollLeft=i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let e=this.scrollDistance,i=this._getLayoutDirection()==="ltr"?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let i=this._tabListContainer.nativeElement.offsetWidth,s=(e=="before"?-1:1)*i/3;return this._scrollTo(this._scrollDistance+s)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;let i=this._items?this._items.toArray()[e]:null;if(!i)return;let s=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:a,offsetWidth:h}=i.elementRef.nativeElement,u,m;this._getLayoutDirection()=="ltr"?(u=a,m=u+h):(m=this._tabListInner.nativeElement.offsetWidth-a,u=m-h);let p=this.scrollDistance,v=this.scrollDistance+s;u<p?this.scrollDistance-=p-u:m>v&&(this.scrollDistance+=Math.min(m-v,u-p))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let e=this._tabListInner.nativeElement.scrollWidth,i=this._elementRef.nativeElement.offsetWidth,s=e-i>=5;s||(this.scrollDistance=0),s!==this._showPaginationControls&&(this._showPaginationControls=s,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner.nativeElement.scrollWidth,i=this._tabListContainer.nativeElement.offsetWidth;return e-i||0}_alignInkBarToSelectedTab(){let e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=e?e.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,i){i&&i.button!=null&&i.button!==0||(this._stopInterval(),yv(dS,uS).pipe(Gi(_o(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:s,distance:a}=this._scrollHeader(e);(a===0||a>=s)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,inputs:{disablePagination:[2,"disablePagination","disablePagination",Yn],selectedIndex:[2,"selectedIndex","selectedIndex",pa]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}})}return n})(),fS=(()=>{class n extends pS{_items;_tabListContainer;_tabList;_tabListInner;_nextPaginator;_previousPaginator;_inkBar;ariaLabel;ariaLabelledby;disableRipple=!1;ngAfterContentInit(){this._inkBar=new Ig(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static \u0275fac=(()=>{let e;return function(s){return(e||(e=ph(n)))(s||n)}})();static \u0275cmp=li({type:n,selectors:[["mat-tab-header"]],contentQueries:function(i,s,a){if(i&1&&mh(a,J_,4),i&2){let h;as(h=os())&&(s._items=h)}},viewQuery:function(i,s){if(i&1&&(Ps(jw,7),Ps(Yw,7),Ps(Gw,7),Ps(qw,5),Ps(Zw,5)),i&2){let a;as(a=os())&&(s._tabListContainer=a.first),as(a=os())&&(s._tabList=a.first),as(a=os())&&(s._tabListInner=a.first),as(a=os())&&(s._nextPaginator=a.first),as(a=os())&&(s._previousPaginator=a.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(i,s){i&2&&Bn("mat-mdc-tab-header-pagination-controls-enabled",s._showPaginationControls)("mat-mdc-tab-header-rtl",s._getLayoutDirection()=="rtl")},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",Yn]},features:[ua],ngContentSelectors:Rg,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(i,s){if(i&1){let a=cn();Ao(),Xt(0,"div",5,0),ii("click",function(){return Ti(a),Ci(s._handlePaginatorClick("before"))})("mousedown",function(u){return Ti(a),Ci(s._handlePaginatorPress("before",u))})("touchend",function(){return Ti(a),Ci(s._stopInterval())}),Ue(2,"div",6),Jt(),Xt(3,"div",7,1),ii("keydown",function(u){return Ti(a),Ci(s._handleKeydown(u))}),Xt(5,"div",8,2),ii("cdkObserveContent",function(){return Ti(a),Ci(s._onContentChanges())}),Xt(7,"div",9,3),Po(9),Jt()()(),Xt(10,"div",10,4),ii("mousedown",function(u){return Ti(a),Ci(s._handlePaginatorPress("after",u))})("click",function(){return Ti(a),Ci(s._handlePaginatorClick("after"))})("touchend",function(){return Ti(a),Ci(s._stopInterval())}),Ue(12,"div",6),Jt()}i&2&&(Bn("mat-mdc-tab-header-pagination-disabled",s._disableScrollBefore),qe("matRippleDisabled",s._disableScrollBefore||s.disableRipple),_e(3),Bn("_mat-animation-noopable",s._animationMode==="NoopAnimations"),_e(2),Jn("aria-label",s.ariaLabel||null)("aria-labelledby",s.ariaLabelledby||null),_e(5),Bn("mat-mdc-tab-header-pagination-disabled",s._disableScrollAfter),qe("matRippleDisabled",s._disableScrollAfter||s.disableRipple))},dependencies:[Eg,yg],styles:[`.mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height, 1px);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height, 1px);border-top-color:var(--mat-tab-header-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height, 48px)}.mat-mdc-tab::before{margin:5px}@media(forced-colors: active){.mat-mdc-tab[aria-disabled=true]{color:GrayText}}
`],encapsulation:2})}return n})(),mS=new Fn("MAT_TABS_CONFIG"),Z_=(()=>{class n extends Yu{_host=be(Lg);_centeringSub=As.EMPTY;_leavingSub=As.EMPTY;constructor(){super()}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(da(this._host._isCenterPosition())).subscribe(e=>{this._host._content&&e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Rn({type:n,selectors:[["","matTabBodyHost",""]],features:[ua]})}return n})(),Lg=(()=>{class n{_elementRef=be(Dn);_dir=be(Va,{optional:!0});_ngZone=be(Nn);_injector=be(kr);_renderer=be(ul);_animationsModule=be(wo,{optional:!0});_eventCleanups;_initialized;_fallbackTimer;_positionIndex;_dirChangeSubscription=As.EMPTY;_position;_previousPosition;_onCentering=new an;_beforeCentering=new an;_afterLeavingCenter=new an;_onCentered=new an(!0);_portalHost;_contentElement;_content;animationDuration="500ms";preserveContent=!1;set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(){if(this._dir){let e=be(Eo);this._dirChangeSubscription=this._dir.change.subscribe(i=>{this._computePositionAnimationState(i),e.markForCheck()})}}ngOnInit(){this._bindTransitionEvents(),this._position==="center"&&(this._setActiveClass(!0),So(()=>this._onCentering.emit(this._elementRef.nativeElement.clientHeight),{injector:this._injector})),this._initialized=!0}ngOnDestroy(){clearTimeout(this._fallbackTimer),this._eventCleanups?.forEach(e=>e()),this._dirChangeSubscription.unsubscribe()}_bindTransitionEvents(){this._ngZone.runOutsideAngular(()=>{let e=this._elementRef.nativeElement,i=s=>{s.target===this._contentElement?.nativeElement&&(this._elementRef.nativeElement.classList.remove("mat-tab-body-animating"),s.type==="transitionend"&&this._transitionDone())};this._eventCleanups=[this._renderer.listen(e,"transitionstart",s=>{s.target===this._contentElement?.nativeElement&&(this._elementRef.nativeElement.classList.add("mat-tab-body-animating"),this._transitionStarted())}),this._renderer.listen(e,"transitionend",i),this._renderer.listen(e,"transitioncancel",i)]})}_transitionStarted(){clearTimeout(this._fallbackTimer);let e=this._position==="center";this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_transitionDone(){this._position==="center"?this._onCentered.emit():this._previousPosition==="center"&&this._afterLeavingCenter.emit()}_setActiveClass(e){this._elementRef.nativeElement.classList.toggle("mat-mdc-tab-body-active",e)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(){return this._positionIndex===0}_computePositionAnimationState(e=this._getLayoutDirection()){this._previousPosition=this._position,this._positionIndex<0?this._position=e=="ltr"?"left":"right":this._positionIndex>0?this._position=e=="ltr"?"right":"left":this._position="center",this._animationsDisabled()?this._simulateTransitionEvents():this._initialized&&(this._position==="center"||this._previousPosition==="center")&&(clearTimeout(this._fallbackTimer),this._fallbackTimer=this._ngZone.runOutsideAngular(()=>setTimeout(()=>this._simulateTransitionEvents(),100)))}_simulateTransitionEvents(){this._transitionStarted(),So(()=>this._transitionDone(),{injector:this._injector})}_animationsDisabled(){return this._animationsModule==="NoopAnimations"||this.animationDuration==="0ms"||this.animationDuration==="0s"}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=li({type:n,selectors:[["mat-tab-body"]],viewQuery:function(i,s){if(i&1&&(Ps(Z_,5),Ps(Kw,5)),i&2){let a;as(a=os())&&(s._portalHost=a.first),as(a=os())&&(s._contentElement=a.first)}},hostAttrs:[1,"mat-mdc-tab-body"],hostVars:1,hostBindings:function(i,s){i&2&&Jn("inert",s._position==="center"?null:"")},inputs:{_content:[0,"content","_content"],animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_onCentered:"_onCentered"},decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(i,s){i&1&&(Xt(0,"div",1,0),ji(2,$w,0,0,"ng-template",2),Jt()),i&2&&Bn("mat-tab-body-content-left",s._position==="left")("mat-tab-body-content-right",s._position==="right")("mat-tab-body-content-can-animate",s._position==="center"||s._previousPosition==="center")},dependencies:[Z_,Bc],styles:[`.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto;transform:none;visibility:hidden}.mat-tab-body-animating>.mat-mdc-tab-body-content,.mat-mdc-tab-body-active>.mat-mdc-tab-body-content{visibility:visible}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-tab-body-content-can-animate{transition:transform var(--mat-tab-animation-duration) 1ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable .mat-tab-body-content-can-animate{transition:none}.mat-tab-body-content-left{transform:translate3d(-100%, 0, 0)}.mat-tab-body-content-right{transform:translate3d(100%, 0, 0)}
`],encapsulation:2})}return n})(),Q_=(()=>{class n{_elementRef=be(Dn);_changeDetectorRef=be(Eo);_ngZone=be(Nn);_tabsSubscription=As.EMPTY;_tabLabelSubscription=As.EMPTY;_tabBodySubscription=As.EMPTY;_animationMode=be(wo,{optional:!0});_allTabs;_tabBodies;_tabBodyWrapper;_tabHeader;_tabs=new Nc;_indexToSelect=0;_lastFocusedTabIndex=null;_tabBodyWrapperHeight=0;color;get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}_fitInkBarToContent=!1;stretchTabs=!0;alignTabs=null;dynamicHeight=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}_selectedIndex=null;headerPosition="above";get animationDuration(){return this._animationDuration}set animationDuration(e){let i=e+"";this._animationDuration=/^\d+$/.test(i)?e+"ms":i}_animationDuration;get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}_contentTabIndex;disablePagination=!1;disableRipple=!1;preserveContent=!1;get backgroundColor(){return this._backgroundColor}set backgroundColor(e){let i=this._elementRef.nativeElement.classList;i.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&i.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}_backgroundColor;ariaLabel;ariaLabelledby;selectedIndexChange=new an;focusChange=new an;animationDone=new an;selectedTabChange=new an(!0);_groupId;_isServer=!be(ks).isBrowser;constructor(){let e=be(mS,{optional:!0});this._groupId=be(Oc).getId("mat-tab-group-"),this.animationDuration=e&&e.animationDuration?e.animationDuration:"500ms",this.disablePagination=e&&e.disablePagination!=null?e.disablePagination:!1,this.dynamicHeight=e&&e.dynamicHeight!=null?e.dynamicHeight:!1,e?.contentTabIndex!=null&&(this.contentTabIndex=e.contentTabIndex),this.preserveContent=!!e?.preserveContent,this.fitInkBarToContent=e&&e.fitInkBarToContent!=null?e.fitInkBarToContent:!1,this.stretchTabs=e&&e.stretchTabs!=null?e.stretchTabs:!0,this.alignTabs=e&&e.alignTabs!=null?e.alignTabs:null}ngAfterContentChecked(){let e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){let i=this._selectedIndex==null;if(!i){this.selectedTabChange.emit(this._createChangeEvent(e));let s=this._tabBodyWrapper.nativeElement;s.style.minHeight=s.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((s,a)=>s.isActive=a===e),i||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,s)=>{i.position=s-e,this._selectedIndex!=null&&i.position==0&&!i.origin&&(i.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){let i=this._tabs.toArray(),s;for(let a=0;a<i.length;a++)if(i[a].isActive){this._indexToSelect=this._selectedIndex=a,this._lastFocusedTabIndex=null,s=i[a];break}!s&&i[e]&&Promise.resolve().then(()=>{i[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._tabBodySubscription=this._tabBodies.changes.subscribe(()=>this._bodyCentered(!0))}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(da(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe(),this._tabBodySubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){let i=this._tabHeader;i&&(i.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){let i=new Dg;return i.index=e,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[e]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=_o(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e,i){return e.id||`${this._groupId}-label-${i}`}_getTabContentId(e){return`${this._groupId}-content-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight){this._tabBodyWrapperHeight=e;return}let i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=e+"px")}_removeTabBodyWrapperHeight(){let e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this._ngZone.run(()=>this.animationDone.emit())}_handleClick(e,i,s){i.focusIndex=s,e.disabled||(this.selectedIndex=s)}_getTabIndex(e){let i=this._lastFocusedTabIndex??this.selectedIndex;return e===i?0:-1}_tabFocusChanged(e,i){e&&e!=="mouse"&&e!=="touch"&&(this._tabHeader.focusIndex=i)}_bodyCentered(e){e&&this._tabBodies?.forEach((i,s)=>i._setActiveClass(s===this._selectedIndex))}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=li({type:n,selectors:[["mat-tab-group"]],contentQueries:function(i,s,a){if(i&1&&mh(a,Fg,5),i&2){let h;as(h=os())&&(s._allTabs=h)}},viewQuery:function(i,s){if(i&1&&(Ps(Jw,5),Ps(Qw,5),Ps(Lg,5)),i&2){let a;as(a=os())&&(s._tabBodyWrapper=a.first),as(a=os())&&(s._tabHeader=a.first),as(a=os())&&(s._tabBodies=a)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:11,hostBindings:function(i,s){i&2&&(Jn("mat-align-tabs",s.alignTabs),fh("mat-"+(s.color||"primary")),Wn("--mat-tab-animation-duration",s.animationDuration),Bn("mat-mdc-tab-group-dynamic-height",s.dynamicHeight)("mat-mdc-tab-group-inverted-header",s.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",s.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",Yn],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",Yn],alignTabs:[0,"mat-align-tabs","alignTabs"],dynamicHeight:[2,"dynamicHeight","dynamicHeight",Yn],selectedIndex:[2,"selectedIndex","selectedIndex",pa],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",pa],disablePagination:[2,"disablePagination","disablePagination",Yn],disableRipple:[2,"disableRipple","disableRipple",Yn],preserveContent:[2,"preserveContent","preserveContent",Yn],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],features:[gr([{provide:$_,useExisting:n}])],ngContentSelectors:Rg,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","class","content","position","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","_beforeCentering","id","content","position","animationDuration","preserveContent"]],template:function(i,s){if(i&1){let a=cn();Ao(),Xt(0,"mat-tab-header",3,0),ii("indexFocused",function(u){return Ti(a),Ci(s._focusChanged(u))})("selectFocusedIndex",function(u){return Ti(a),Ci(s.selectedIndex=u)}),fr(2,nS,8,17,"div",4,pl),Jt(),ji(4,sS,1,0),Xt(5,"div",5,1),fr(7,rS,1,10,"mat-tab-body",6,pl),Jt()}i&2&&(qe("selectedIndex",s.selectedIndex||0)("disableRipple",s.disableRipple)("disablePagination",s.disablePagination)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby),_e(2),mr(s._tabs),_e(2),Qi(s._isServer?4:-1),_e(),Bn("_mat-animation-noopable",s._animationMode==="NoopAnimations"),_e(2),mr(s._tabs))},dependencies:[fS,J_,bg,Eg,Yu,Lg],styles:[`.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height, 48px);font-family:var(--mat-tab-header-label-text-font, var(--mat-sys-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-sys-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-sys-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-sys-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-sys-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height, 2px);border-radius:var(--mdc-tab-indicator-active-indicator-shape, 0)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-sys-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}
`],encapsulation:2})}return n})(),Dg=class{index;tab};var tb=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({imports:[Ys,Ys]})}return n})();var eb=[{title:"Diploma - 3D Animation",date:"2010",institution:"CD-ED DArTT (Digital Arts & Technology Training Institute)",location:"Calgary, AB",description:"",comments:""},{title:"Diploma - PC Maintenance & Repair",date:"2011",institution:"CD-ED DArTT (Digital Arts & Technology Training Institute)",location:"Calgary, AB",description:"",comments:""},{title:"Certificate - ITIL v3 Foundations",date:"2013",institution:"CD-ED DArTT (Digital Arts & Technology Training Institute)",location:"Calgary, AB",description:"",comments:""},{title:"Certificate - Complete 2021 Flutter Development Bootcamp",date:"2021",institution:"Udemy",location:"GFW, Newfoundland",description:"Earned practical experience building cross-platform iOS and Android apps using Flutter and Dart. Developed over 15 real-world applications\u2014including clones of WhatsApp, QuizUp, and Yahoo Weather\u2014while mastering Flutter fundamentals, state management, UI/UX design, Firebase integration, and API networking. Built a strong portfolio demonstrating proficiency in widget architecture, animations, and reactive app development. Completed over 28 hours of project-based learning.",comments:""},{title:"Certificate - NestJS Modern Backend Development",date:"2022",institution:"Udemy",location:"GFW, Newfoundland",description:"Gained practical experience architecting and deploying scalable, secure RESTful APIs using NestJS. Built real-world backend features including user authentication (JWT), authorization guards, CRUD operations, and data persistence with PostgreSQL and MongoDB using TypeORM. Learned advanced patterns like DTOs, guards, pipes, and middleware. Covered cloud deployment via AWS, secure data handling, configuration management, and unit testing. Developed clean, maintainable code while leveraging the Nest CLI, Postman, and pgAdmin for API and DB workflows.",comments:""},{title:"Certificate - Complete Web Development Bootcamp",date:"2022",institution:"Udemy",location:"GFW, Newfoundland",description:"Completed an intensive 62-hour full-stack web development bootcamp covering modern front-end and back-end technologies. Gained hands-on experience building 32+ real-world projects using HTML5, CSS3, JavaScript (ES6), Node.js, Express, PostgreSQL, Git/GitHub, APIs, React, and authentication strategies. Developed a deep understanding of responsive design, version control, MVC architecture, RESTful routing, and modern deployment practices. This course equipped me with the full stack skill set to design, build, and deploy dynamic web applications from scratch.",comments:""},{title:"Certificate - Sensors & Sensor Circuit Design",date:"2022",institution:"Coursera/University of Colorado Boulder",location:"GFW, Newfoundland",description:"",comments:""},{title:"Certificate - Mobile E-Commerce with Flutter",date:"2023",institution:"Udemy",location:"GFW, Newfoundland",description:"Designed and developed a complete mobile e-commerce application using Flutter, Redux, and Strapi. Gained end-to-end experience with cart management, user authentication, and Stripe-powered checkout. Implemented global state handling with Redux and Redux Thunk, created custom APIs via Strapi, and managed data with MongoDB Atlas. Learned advanced Flutter UI design with Material widgets, shared theming, navigation, form handling, and persistent storage using SharedPreferences. Strengthened skills in full-stack mobile app architecture and secure client-server communication with JWT-based auth and async RESTful APIs.",comments:""},{title:"Certificate - Angular, The Complete Guide; Certificate - NestJS Ultimate Masterclass",date:"In Progress",institution:"Udemy",location:"GFW, Newfoundland",description:"",comments:""}],ib=[{title:"uPrint3D",description:"A full-stack, automated 3D printing platform where users select printable objects via a sleek e-commerce-style catalogue. On the backend, the system intelligently assigns print jobs to compatible machines and initiates printing autonomously.",stack:"Angular, NestJS, PostgreSQL, Klipper, websockets",thumbnails:["assets/images/projects/project1.png"],link:"https://example.com/project1"},{title:"RecipesAI",description:"A next-generation recipe platform combining web development with AI innovation. Users request new, personalized recipes, and the system dynamically generates both original recipes and images via OpenAI APIs, instantly updating their collection.",stack:"Angular, NestJS, PostgreSQL, Flutter, OpenAI API, Firebase",thumbnails:["assets/images/projects/project2.png"],link:"https://example.com/project2"},{title:"Forecast",description:"A Flutter-based weather app delivering dynamic, visually rich forecasts. Users can manage multiple locations, each with live background themes reflecting real-time weather conditions, and seamlessly switch between light and dark modes.",stack:"Flutter, Redux, Weather.com API, Google Places API, SQLite",thumbnails:["assets/images/projects/project3.png"],link:"https://example.com/project3"},{title:"Catalogify (Librarian)",description:"A streamlined book cataloguing platform designed for ease of use. Users scan ISBNs to instantly populate their personal library with cover images and metadata, while organizing collections by reading status, favorites, and wishlist categories.",stack:"Flutter, NestJS, PostgreSQL, Google Books API",thumbnails:["assets/images/projects/project4.png"],link:"https://example.com/project4"}];var Ng=[{title:"Back end development",value:8},{title:"Front end development",value:8},{title:"Mobile development (Flutter)",value:9},{title:"API Design & Integration",value:8},{title:"RESTful API Development",value:8},{title:"Database Development",value:6},{title:"Version Control ",value:7},{title:"Secure API Development",value:6},{title:"Microservices Architecture",value:6},{title:"Manual Feature Testing",value:5},{title:"Technical Support/Repair",value:9}],Bg=[{title:"Flutter",value:9},{title:"NestJS",value:8},{title:"Angular 2+",value:6},{title:"Bootstrap",value:8},{title:"Angular Material",value:5},{title:"Strapi",value:4},{title:"Svelte",value:2}],Og=[{title:"TypeScript",value:8},{title:"JavaScript (ES6+)",value:7},{title:"Dart",value:7},{title:"SQL (PostgreSQL)",value:6},{title:"CSS3",value:7},{title:"Python (Beginner)",value:3},{title:"C# (Basic)",value:2}],Vg=[{title:"Google Cloud/Firebase",value:6},{title:"AWS (EC2, S3 Basics)",value:3},{title:"OpenAI API/ChatGPT Integration",value:7},{title:"GitHub/Bitbucket",value:7}],zg=[{title:"Windows",value:9},{title:"Mac OS",value:8},{title:"Linux",value:6}];var xS=n=>({disabled:n}),rr=class n{label=Xs("");width=Xs("500px");disabled=Xs(!1);action;fireAction(){this.action?this.action:console.warn("No action defined for CvButtonComponent")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=li({type:n,selectors:[["cv-button"]],inputs:{label:[1,"label"],width:[1,"width"],disabled:[1,"disabled"],action:"action"},decls:2,vars:5,consts:[["id","cvButton","type","button",3,"click","disabled","ngClass"]],template:function(e,i){e&1&&(Xt(0,"button",0),ii("click",function(){return i.action&&i.action()}),Ae(1),Jt()),e&2&&(qe("disabled",i.disabled())("ngClass",Qn(3,xS,i.disabled())),_e(),Ss(" ",i.label(),`
`))},dependencies:[On,fa],styles:["#cvButton[_ngcontent-%COMP%]{padding:12px 18px;margin-top:16px;font-size:1.25rem;color:var(--cv-blue);background-color:var(--cv-white);border:1px solid var(--cv-blue);border-radius:10px;transition:.25s ease;cursor:pointer}#cvButton[_ngcontent-%COMP%]:hover{background-color:var(--cv-blue);color:var(--cv-white);box-shadow:0 0 50px #fff9,0 0 10px #ffffff4d;font-weight:700}#cvButton[_ngcontent-%COMP%]:active{transform:scale(.98)}.disabled[_ngcontent-%COMP%]{opacity:.5!important;color:var(--cv-blue)!important;cursor:not-allowed!important;font-weight:400!important;background-color:var(--cv-white)!important;transform:none!important}"]})};var Is=Uint8Array,xr=Uint16Array,qg=Int32Array,Gu=new Is([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qu=new Is([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xg=new Is([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ab=function(n,t){for(var e=new xr(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var s=new qg(e[30]),i=1;i<30;++i)for(var a=e[i];a<e[i+1];++a)s[a]=a-e[i]<<5|i;return{b:e,r:s}},ob=ab(Gu,2),lb=ob.b,jg=ob.r;lb[28]=258,jg[258]=28;var hb=ab(qu,0),vS=hb.b,nb=hb.r,Yg=new xr(32768);for(dn=0;dn<32768;++dn)Wa=(dn&43690)>>1|(dn&21845)<<1,Wa=(Wa&52428)>>2|(Wa&13107)<<2,Wa=(Wa&61680)>>4|(Wa&3855)<<4,Yg[dn]=((Wa&65280)>>8|(Wa&255)<<8)>>1;var Wa,dn,ga=function(n,t,e){for(var i=n.length,s=0,a=new xr(t);s<i;++s)n[s]&&++a[n[s]-1];var h=new xr(t);for(s=1;s<t;++s)h[s]=h[s-1]+a[s-1]<<1;var u;if(e){u=new xr(1<<t);var m=15-t;for(s=0;s<i;++s)if(n[s])for(var p=s<<4|n[s],v=t-n[s],T=h[n[s]-1]++<<v,C=T|(1<<v)-1;T<=C;++T)u[Yg[T]>>m]=p}else for(u=new xr(i),s=0;s<i;++s)n[s]&&(u[s]=Yg[h[n[s]-1]++]>>15-n[s]);return u},Io=new Is(288);for(dn=0;dn<144;++dn)Io[dn]=8;var dn;for(dn=144;dn<256;++dn)Io[dn]=9;var dn;for(dn=256;dn<280;++dn)Io[dn]=7;var dn;for(dn=280;dn<288;++dn)Io[dn]=8;var dn,qc=new Is(32);for(dn=0;dn<32;++dn)qc[dn]=5;var dn,_S=ga(Io,9,0),bS=ga(Io,9,1),yS=ga(qc,5,0),wS=ga(qc,5,1),Ug=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},Kr=function(n,t,e){var i=t/8|0;return(n[i]|n[i+1]<<8)>>(t&7)&e},Wg=function(n,t){var e=t/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(t&7)},Zg=function(n){return(n+7)/8|0},cb=function(n,t,e){return(t==null||t<0)&&(t=0),(e==null||e>n.length)&&(e=n.length),new Is(n.subarray(t,e))};var SS=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$r=function(n,t,e){var i=new Error(t||SS[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,$r),!e)throw i;return i},MS=function(n,t,e,i){var s=n.length,a=i?i.length:0;if(!s||t.f&&!t.l)return e||new Is(0);var h=!e,u=h||t.i!=2,m=t.i;h&&(e=new Is(s*3));var p=function(ue){var pe=e.length;if(ue>pe){var we=new Is(Math.max(pe*2,ue));we.set(e),e=we}},v=t.f||0,T=t.p||0,C=t.b||0,y=t.l,F=t.d,O=t.m,R=t.n,A=s*8;do{if(!y){v=Kr(n,T,1);var Z=Kr(n,T+1,3);if(T+=3,Z)if(Z==1)y=bS,F=wS,O=9,R=5;else if(Z==2){var St=Kr(n,T,31)+257,at=Kr(n,T+10,15)+4,ot=St+Kr(n,T+5,31)+1;T+=14;for(var Q=new Is(ot),tt=new Is(19),H=0;H<at;++H)tt[Xg[H]]=Kr(n,T+H*3,7);T+=at*3;for(var $=Ug(tt),ct=(1<<$)-1,yt=ga(tt,$,1),H=0;H<ot;){var Bt=yt[Kr(n,T,ct)];T+=Bt&15;var J=Bt>>4;if(J<16)Q[H++]=J;else{var kt=0,zt=0;for(J==16?(zt=3+Kr(n,T,3),T+=2,kt=Q[H-1]):J==17?(zt=3+Kr(n,T,7),T+=3):J==18&&(zt=11+Kr(n,T,127),T+=7);zt--;)Q[H++]=kt}}var Mt=Q.subarray(0,St),Yt=Q.subarray(St);O=Ug(Mt),R=Ug(Yt),y=ga(Mt,O,1),F=ga(Yt,R,1)}else $r(1);else{var J=Zg(T)+4,nt=n[J-4]|n[J-3]<<8,pt=J+nt;if(pt>s){m&&$r(0);break}u&&p(C+nt),e.set(n.subarray(J,pt),C),t.b=C+=nt,t.p=T=pt*8,t.f=v;continue}if(T>A){m&&$r(0);break}}u&&p(C+131072);for(var Zt=(1<<O)-1,ut=(1<<R)-1,K=T;;K=T){var kt=y[Wg(n,T)&Zt],X=kt>>4;if(T+=kt&15,T>A){m&&$r(0);break}if(kt||$r(2),X<256)e[C++]=X;else if(X==256){K=T,y=null;break}else{var z=X-254;if(X>264){var H=X-257,it=Gu[H];z=Kr(n,T,(1<<it)-1)+lb[H],T+=it}var mt=F[Wg(n,T)&ut],dt=mt>>4;mt||$r(3),T+=mt&15;var Yt=vS[dt];if(dt>3){var it=qu[dt];Yt+=Wg(n,T)&(1<<it)-1,T+=it}if(T>A){m&&$r(0);break}u&&p(C+131072);var Tt=C+z;if(C<Yt){var Dt=a-Yt,oe=Math.min(Yt,Tt);for(Dt+C<0&&$r(3);C<oe;++C)e[C]=i[Dt+C]}for(;C<Tt;++C)e[C]=e[C-Yt]}}t.l=y,t.p=K,t.b=C,t.f=v,y&&(v=1,t.m=O,t.d=F,t.n=R)}while(!v);return C!=e.length&&h?cb(e,0,C):e.subarray(0,C)},Ha=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8},Yc=function(n,t,e){e<<=t&7;var i=t/8|0;n[i]|=e,n[i+1]|=e>>8,n[i+2]|=e>>16},Hg=function(n,t){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var s=e.length,a=e.slice();if(!s)return{t:ub,l:0};if(s==1){var h=new Is(e[0].s+1);return h[e[0].s]=1,{t:h,l:1}}e.sort(function(pt,St){return pt.f-St.f}),e.push({s:-1,f:25001});var u=e[0],m=e[1],p=0,v=1,T=2;for(e[0]={s:-1,f:u.f+m.f,l:u,r:m};v!=s-1;)u=e[e[p].f<e[T].f?p++:T++],m=e[p!=v&&e[p].f<e[T].f?p++:T++],e[v++]={s:-1,f:u.f+m.f,l:u,r:m};for(var C=a[0].s,i=1;i<s;++i)a[i].s>C&&(C=a[i].s);var y=new xr(C+1),F=Gg(e[v-1],y,0);if(F>t){var i=0,O=0,R=F-t,A=1<<R;for(a.sort(function(St,at){return y[at.s]-y[St.s]||St.f-at.f});i<s;++i){var Z=a[i].s;if(y[Z]>t)O+=A-(1<<F-y[Z]),y[Z]=t;else break}for(O>>=R;O>0;){var J=a[i].s;y[J]<t?O-=1<<t-y[J]++-1:++i}for(;i>=0&&O;--i){var nt=a[i].s;y[nt]==t&&(--y[nt],++O)}F=t}return{t:new Is(y),l:F}},Gg=function(n,t,e){return n.s==-1?Math.max(Gg(n.l,t,e+1),Gg(n.r,t,e+1)):t[n.s]=e},sb=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new xr(++t),i=0,s=n[0],a=1,h=function(m){e[i++]=m},u=1;u<=t;++u)if(n[u]==s&&u!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)h(32754);a>2&&(h(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(h(s),--a;a>6;a-=6)h(8304);a>2&&(h(a-3<<5|8208),a=0)}for(;a--;)h(s);a=1,s=n[u]}return{c:e.subarray(0,i),n:t}},Gc=function(n,t){for(var e=0,i=0;i<t.length;++i)e+=n[i]*t[i];return e},db=function(n,t,e){var i=e.length,s=Zg(t+2);n[s]=i&255,n[s+1]=i>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var a=0;a<i;++a)n[s+a+4]=e[a];return(s+4+i)*8},rb=function(n,t,e,i,s,a,h,u,m,p,v){Ha(t,v++,e),++s[256];for(var T=Hg(s,15),C=T.t,y=T.l,F=Hg(a,15),O=F.t,R=F.l,A=sb(C),Z=A.c,J=A.n,nt=sb(O),pt=nt.c,St=nt.n,at=new xr(19),ot=0;ot<Z.length;++ot)++at[Z[ot]&31];for(var ot=0;ot<pt.length;++ot)++at[pt[ot]&31];for(var Q=Hg(at,7),tt=Q.t,H=Q.l,$=19;$>4&&!tt[Xg[$-1]];--$);var ct=p+5<<3,yt=Gc(s,Io)+Gc(a,qc)+h,Bt=Gc(s,C)+Gc(a,O)+h+14+3*$+Gc(at,tt)+2*at[16]+3*at[17]+7*at[18];if(m>=0&&ct<=yt&&ct<=Bt)return db(t,v,n.subarray(m,m+p));var kt,zt,Mt,Yt;if(Ha(t,v,1+(Bt<yt)),v+=2,Bt<yt){kt=ga(C,y,0),zt=C,Mt=ga(O,R,0),Yt=O;var Zt=ga(tt,H,0);Ha(t,v,J-257),Ha(t,v+5,St-1),Ha(t,v+10,$-4),v+=14;for(var ot=0;ot<$;++ot)Ha(t,v+3*ot,tt[Xg[ot]]);v+=3*$;for(var ut=[Z,pt],K=0;K<2;++K)for(var X=ut[K],ot=0;ot<X.length;++ot){var z=X[ot]&31;Ha(t,v,Zt[z]),v+=tt[z],z>15&&(Ha(t,v,X[ot]>>5&127),v+=X[ot]>>12)}}else kt=_S,zt=Io,Mt=yS,Yt=qc;for(var ot=0;ot<u;++ot){var it=i[ot];if(it>255){var z=it>>18&31;Yc(t,v,kt[z+257]),v+=zt[z+257],z>7&&(Ha(t,v,it>>23&31),v+=Gu[z]);var mt=it&31;Yc(t,v,Mt[mt]),v+=Yt[mt],mt>3&&(Yc(t,v,it>>5&8191),v+=qu[mt])}else Yc(t,v,kt[it]),v+=zt[it]}return Yc(t,v,kt[256]),v+zt[256]},TS=new qg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ub=new Is(0),CS=function(n,t,e,i,s,a){var h=a.z||n.length,u=new Is(i+h+5*(1+Math.ceil(h/7e3))+s),m=u.subarray(i,u.length-s),p=a.l,v=(a.r||0)&7;if(t){v&&(m[0]=a.r>>3);for(var T=TS[t-1],C=T>>13,y=T&8191,F=(1<<e)-1,O=a.p||new xr(32768),R=a.h||new xr(F+1),A=Math.ceil(e/3),Z=2*A,J=function(At){return(n[At]^n[At+1]<<A^n[At+2]<<Z)&F},nt=new qg(25e3),pt=new xr(288),St=new xr(32),at=0,ot=0,Q=a.i||0,tt=0,H=a.w||0,$=0;Q+2<h;++Q){var ct=J(Q),yt=Q&32767,Bt=R[ct];if(O[yt]=Bt,R[ct]=yt,H<=Q){var kt=h-Q;if((at>7e3||tt>24576)&&(kt>423||!p)){v=rb(n,m,0,nt,pt,St,ot,tt,$,Q-$,v),tt=at=ot=0,$=Q;for(var zt=0;zt<286;++zt)pt[zt]=0;for(var zt=0;zt<30;++zt)St[zt]=0}var Mt=2,Yt=0,Zt=y,ut=yt-Bt&32767;if(kt>2&&ct==J(Q-ut))for(var K=Math.min(C,kt)-1,X=Math.min(32767,Q),z=Math.min(258,kt);ut<=X&&--Zt&&yt!=Bt;){if(n[Q+Mt]==n[Q+Mt-ut]){for(var it=0;it<z&&n[Q+it]==n[Q+it-ut];++it);if(it>Mt){if(Mt=it,Yt=ut,it>K)break;for(var mt=Math.min(ut,it-2),dt=0,zt=0;zt<mt;++zt){var Tt=Q-ut+zt&32767,Dt=O[Tt],oe=Tt-Dt&32767;oe>dt&&(dt=oe,Bt=Tt)}}}yt=Bt,Bt=O[yt],ut+=yt-Bt&32767}if(Yt){nt[tt++]=268435456|jg[Mt]<<18|nb[Yt];var ue=jg[Mt]&31,pe=nb[Yt]&31;ot+=Gu[ue]+qu[pe],++pt[257+ue],++St[pe],H=Q+Mt,++at}else nt[tt++]=n[Q],++pt[n[Q]]}}for(Q=Math.max(Q,H);Q<h;++Q)nt[tt++]=n[Q],++pt[n[Q]];v=rb(n,m,p,nt,pt,St,ot,tt,$,Q-$,v),p||(a.r=v&7|m[v/8|0]<<3,v-=7,a.h=R,a.p=O,a.i=Q,a.w=H)}else{for(var Q=a.w||0;Q<h+p;Q+=65535){var we=Q+65535;we>=h&&(m[v/8|0]=p,we=h),v=db(m,v+1,n.subarray(Q,we))}a.i=h}return cb(u,0,i+Zg(v)+s)};var pb=function(){var n=1,t=0;return{p:function(e){for(var i=n,s=t,a=e.length|0,h=0;h!=a;){for(var u=Math.min(h+2655,a);h<u;++h)s+=i+=e[h];i=(i&65535)+15*(i>>16),s=(s&65535)+15*(s>>16)}n=i,t=s},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},AS=function(n,t,e,i,s){if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),h=new Is(a.length+n.length);h.set(a),h.set(n,a.length),n=h,s.w=a.length}return CS(n,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,e,i,s)};var fb=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8};var PS=function(n,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(n[0]=120,n[1]=i<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var s=pb();s.p(t.dictionary),fb(n,2,s.d())}},ES=function(n,t){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&$r(6,"invalid zlib data"),(n[1]>>5&1)==+!t&&$r(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Zu(n,t){t||(t={});var e=pb();e.p(n);var i=AS(n,t,t.dictionary?6:2,4);return PS(i,t),fb(i,i.length-4,e.d()),i}function mb(n,t){return MS(n.subarray(ES(n,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var kS=typeof TextDecoder<"u"&&new TextDecoder,IS=0;try{kS.decode(ub,{stream:!0}),IS=1}catch{}var Di=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Kg(){Di.console&&typeof Di.console.log=="function"&&Di.console.log.apply(Di.console,arguments)}var Cn={log:Kg,warn:function(n){Di.console&&(typeof Di.console.warn=="function"?Di.console.warn.apply(Di.console,arguments):Kg.call(null,arguments))},error:function(n){Di.console&&(typeof Di.console.error=="function"?Di.console.error.apply(Di.console,arguments):Kg(n))}};function $g(n,t,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){wl(i.response,t,e)},i.onerror=function(){Cn.error("could not download file")},i.send()}function gb(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ku(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var Zc,i0,wl=Di.saveAs||((typeof window>"u"?"undefined":yn(window))!=="object"||window!==Di?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var i=Di.URL||Di.webkitURL,s=document.createElement("a");t=t||n.name||"download",s.download=t,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?gb(s.href)?$g(n,t,e):Ku(s,s.target="_blank"):Ku(s)):(s.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){Ku(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(gb(n))$g(n,t,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){Ku(i)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:yn(a)!=="object"&&(Cn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,e),t)}:function(n,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return $g(n,t,e);var s=n.type==="application/octet-stream",a=/constructor/i.test(Di.HTMLElement)||Di.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||s&&a)&&(typeof FileReader>"u"?"undefined":yn(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var v=u.result;v=h?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=v:location=v,i=null},u.readAsDataURL(n)}else{var m=Di.URL||Di.webkitURL,p=m.createObjectURL(n);i?i.location=p:location.href=p,i=null,setTimeout(function(){m.revokeObjectURL(p)},4e4)}});function Db(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],i=0;i<e.length;i++){var s=e[i].re,a=e[i].process,h=s.exec(n);h&&(t=a(h),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),m=this.g.toString(16),p=this.b.toString(16);return u.length==1&&(u="0"+u),m.length==1&&(m="0"+m),p.length==1&&(p="0"+p),"#"+u+m+p}}function Jg(n,t){var e=n[0],i=n[1],s=n[2],a=n[3];e=Ls(e,i,s,a,t[0],7,-680876936),a=Ls(a,e,i,s,t[1],12,-389564586),s=Ls(s,a,e,i,t[2],17,606105819),i=Ls(i,s,a,e,t[3],22,-1044525330),e=Ls(e,i,s,a,t[4],7,-176418897),a=Ls(a,e,i,s,t[5],12,1200080426),s=Ls(s,a,e,i,t[6],17,-1473231341),i=Ls(i,s,a,e,t[7],22,-45705983),e=Ls(e,i,s,a,t[8],7,1770035416),a=Ls(a,e,i,s,t[9],12,-1958414417),s=Ls(s,a,e,i,t[10],17,-42063),i=Ls(i,s,a,e,t[11],22,-1990404162),e=Ls(e,i,s,a,t[12],7,1804603682),a=Ls(a,e,i,s,t[13],12,-40341101),s=Ls(s,a,e,i,t[14],17,-1502002290),e=Ds(e,i=Ls(i,s,a,e,t[15],22,1236535329),s,a,t[1],5,-165796510),a=Ds(a,e,i,s,t[6],9,-1069501632),s=Ds(s,a,e,i,t[11],14,643717713),i=Ds(i,s,a,e,t[0],20,-373897302),e=Ds(e,i,s,a,t[5],5,-701558691),a=Ds(a,e,i,s,t[10],9,38016083),s=Ds(s,a,e,i,t[15],14,-660478335),i=Ds(i,s,a,e,t[4],20,-405537848),e=Ds(e,i,s,a,t[9],5,568446438),a=Ds(a,e,i,s,t[14],9,-1019803690),s=Ds(s,a,e,i,t[3],14,-187363961),i=Ds(i,s,a,e,t[8],20,1163531501),e=Ds(e,i,s,a,t[13],5,-1444681467),a=Ds(a,e,i,s,t[2],9,-51403784),s=Ds(s,a,e,i,t[7],14,1735328473),e=Rs(e,i=Ds(i,s,a,e,t[12],20,-1926607734),s,a,t[5],4,-378558),a=Rs(a,e,i,s,t[8],11,-2022574463),s=Rs(s,a,e,i,t[11],16,1839030562),i=Rs(i,s,a,e,t[14],23,-35309556),e=Rs(e,i,s,a,t[1],4,-1530992060),a=Rs(a,e,i,s,t[4],11,1272893353),s=Rs(s,a,e,i,t[7],16,-155497632),i=Rs(i,s,a,e,t[10],23,-1094730640),e=Rs(e,i,s,a,t[13],4,681279174),a=Rs(a,e,i,s,t[0],11,-358537222),s=Rs(s,a,e,i,t[3],16,-722521979),i=Rs(i,s,a,e,t[6],23,76029189),e=Rs(e,i,s,a,t[9],4,-640364487),a=Rs(a,e,i,s,t[12],11,-421815835),s=Rs(s,a,e,i,t[15],16,530742520),e=Fs(e,i=Rs(i,s,a,e,t[2],23,-995338651),s,a,t[0],6,-198630844),a=Fs(a,e,i,s,t[7],10,1126891415),s=Fs(s,a,e,i,t[14],15,-1416354905),i=Fs(i,s,a,e,t[5],21,-57434055),e=Fs(e,i,s,a,t[12],6,1700485571),a=Fs(a,e,i,s,t[3],10,-1894986606),s=Fs(s,a,e,i,t[10],15,-1051523),i=Fs(i,s,a,e,t[1],21,-2054922799),e=Fs(e,i,s,a,t[8],6,1873313359),a=Fs(a,e,i,s,t[15],10,-30611744),s=Fs(s,a,e,i,t[6],15,-1560198380),i=Fs(i,s,a,e,t[13],21,1309151649),e=Fs(e,i,s,a,t[4],6,-145523070),a=Fs(a,e,i,s,t[11],10,-1120210379),s=Fs(s,a,e,i,t[2],15,718787259),i=Fs(i,s,a,e,t[9],21,-343485551),n[0]=Do(e,n[0]),n[1]=Do(i,n[1]),n[2]=Do(s,n[2]),n[3]=Do(a,n[3])}function ap(n,t,e,i,s,a){return t=Do(Do(t,n),Do(i,a)),Do(t<<s|t>>>32-s,e)}function Ls(n,t,e,i,s,a,h){return ap(t&e|~t&i,n,t,s,a,h)}function Ds(n,t,e,i,s,a,h){return ap(t&i|e&~i,n,t,s,a,h)}function Rs(n,t,e,i,s,a,h){return ap(t^e^i,n,t,s,a,h)}function Fs(n,t,e,i,s,a,h){return ap(e^(t|~i),n,t,s,a,h)}function Rb(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)Jg(i,LS(n.substring(t-64,t)));n=n.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)s[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Jg(i,s),t=0;t<16;t++)s[t]=0;return s[14]=8*e,Jg(i,s),i}function LS(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}Zc=Di.atob.bind(Di),i0=Di.btoa.bind(Di);var xb="0123456789abcdef".split("");function DS(n){for(var t="",e=0;e<4;e++)t+=xb[n>>8*e+4&15]+xb[n>>8*e&15];return t}function RS(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function n0(n){return Rb(n).map(RS).join("")}var FS=function(n){for(var t=0;t<n.length;t++)n[t]=DS(n[t]);return n.join("")}(Rb("hello"))!="5d41402abc4b2a76b9719d911017c592";function Do(n,t){if(FS){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}function s0(n,t){var e,i,s,a;if(n!==e){for(var h=(s=n,a=1+(256/n.length>>0),new Array(a+1).join(s)),u=[],m=0;m<256;m++)u[m]=m;var p=0;for(m=0;m<256;m++){var v=u[m];p=(p+v+h.charCodeAt(m))%256,u[m]=u[p],u[p]=v}e=n,i=u}else u=i;var T=t.length,C=0,y=0,F="";for(m=0;m<T;m++)y=(y+(v=u[C=(C+1)%256]))%256,u[C]=u[y],u[y]=v,h=u[(u[C]+u[y])%256],F+=String.fromCharCode(t.charCodeAt(m)^h);return F}var vb={print:4,modify:8,copy:16,"annot-forms":32};function Ih(n,t,e,i){this.v=1,this.r=2;var s=192;n.forEach(function(u){if(vb.perm!==void 0)throw new Error("Invalid permission: "+u);s+=vb[u]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var a=(t+this.padding).substr(0,32),h=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,h),this.P=-(1+(255^s)),this.encryptionKey=n0(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=s0(this.encryptionKey,this.padding)}function Lh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,i=0;i<e;i++){var s=n.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=n[i]}return t}function _b(n){if(yn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,s){if(s=s||!1,typeof e!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[i,!!s],a},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var a in t[e]){var h=t[e][a];try{h[0].apply(n,i)}catch(u){Di.console&&Cn.error("jsPDF PubSub Error",u.message,u)}h[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function sp(n){if(!(this instanceof sp))return new sp(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function Fb(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function Sl(n,t,e,i,s){if(!(this instanceof Sl))return new Sl(n,t,e,i,s);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,Fb.call(this,i,s)}function Dh(n,t,e,i,s){if(!(this instanceof Dh))return new Dh(n,t,e,i,s);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,Fb.call(this,i,s)}function Ei(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],a=arguments[3],h=[],u=1,m=16,p="S",v=null;yn(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,s=n.format||s,a=n.compress||n.compressPdf||a,(v=n.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),u=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(m=n.floatPrecision),p=n.defaultPathOperation||"S"),h=n.filters||(a===!0?["FlateEncode"]:h),i=i||"mm",e=(""+(e||"P")).toLowerCase();var T=n.putOnlyUsedFonts||!1,C={},y={internal:{},__private__:{}};y.__private__.PubSub=_b;var F="1.3",O=y.__private__.getPdfVersion=function(){return F};y.__private__.setPdfVersion=function(k){F=k};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return R};var A=y.__private__.getPageFormat=function(k){return R[k]};s=s||"a4";var Z={COMPAT:"compat",ADVANCED:"advanced"},J=Z.COMPAT;function nt(){this.saveGraphicsState(),Ct(new ze(ie,0,0,-ie,0,ao()*ie).toString()+" cm"),this.setFontSize(this.getFontSize()/ie),p="n",J=Z.ADVANCED}function pt(){this.restoreGraphicsState(),p="S",J=Z.COMPAT}var St=y.__private__.combineFontStyleAndFontWeight=function(k,rt){if(k=="bold"&&rt=="normal"||k=="bold"&&rt==400||k=="normal"&&rt=="italic"||k=="bold"&&rt=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return rt&&(k=rt==400||rt==="normal"?k==="italic"?"italic":"normal":rt!=700&&rt!=="bold"||k!=="normal"?(rt==700?"bold":rt)+""+k:"bold"),k};y.advancedAPI=function(k){var rt=J===Z.COMPAT;return rt&&nt.call(this),typeof k!="function"||(k(this),rt&&pt.call(this)),this},y.compatAPI=function(k){var rt=J===Z.ADVANCED;return rt&&pt.call(this),typeof k!="function"||(k(this),rt&&nt.call(this)),this},y.isAdvancedAPI=function(){return J===Z.ADVANCED};var at,ot=function(k){if(J!==Z.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=y.roundToPrecision=y.__private__.roundToPrecision=function(k,rt){var Lt=t||rt;if(isNaN(k)||isNaN(Lt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Lt).replace(/0+$/,"")};at=y.hpf=y.__private__.hpf=typeof m=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(k,m)}:m==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(k,16)};var tt=y.f2=y.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return Q(k,2)},H=y.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return Q(k,3)},$=y.scale=y.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return J===Z.COMPAT?k*ie:J===Z.ADVANCED?k:void 0},ct=function(k){return J===Z.COMPAT?ao()-k:J===Z.ADVANCED?k:void 0},yt=function(k){return $(ct(k))};y.__private__.setPrecision=y.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(t=parseInt(k,10))};var Bt,kt="00000000000000000000000000000000",zt=y.__private__.getFileId=function(){return kt},Mt=y.__private__.setFileId=function(k){return kt=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():kt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(Se=new Ih(v.userPermissions,v.userPassword,v.ownerPassword,kt)),kt};y.setFileId=function(k){return Mt(k),this},y.getFileId=function(){return zt()};var Yt=y.__private__.convertDateToPDFDate=function(k){var rt=k.getTimezoneOffset(),Lt=rt<0?"+":"-",Gt=Math.floor(Math.abs(rt/60)),ae=Math.abs(rt%60),Te=[Lt,z(Gt),"'",z(ae),"'"].join("");return["D:",k.getFullYear(),z(k.getMonth()+1),z(k.getDate()),z(k.getHours()),z(k.getMinutes()),z(k.getSeconds()),Te].join("")},Zt=y.__private__.convertPDFDateToDate=function(k){var rt=parseInt(k.substr(2,4),10),Lt=parseInt(k.substr(6,2),10)-1,Gt=parseInt(k.substr(8,2),10),ae=parseInt(k.substr(10,2),10),Te=parseInt(k.substr(12,2),10),Be=parseInt(k.substr(14,2),10);return new Date(rt,Lt,Gt,ae,Te,Be,0)},ut=y.__private__.setCreationDate=function(k){var rt;if(k===void 0&&(k=new Date),k instanceof Date)rt=Yt(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");rt=k}return Bt=rt},K=y.__private__.getCreationDate=function(k){var rt=Bt;return k==="jsDate"&&(rt=Zt(Bt)),rt};y.setCreationDate=function(k){return ut(k),this},y.getCreationDate=function(k){return K(k)};var X,z=y.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},it=y.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},mt=0,dt=[],Tt=[],Dt=0,oe=[],ue=[],pe=!1,we=Tt,At=function(){mt=0,Dt=0,Tt=[],dt=[],oe=[],o=r(),d=r()};y.__private__.setCustomOutputDestination=function(k){pe=!0,we=k};var Ut=function(k){pe||(we=k)};y.__private__.resetCustomOutputDestination=function(){pe=!1,we=Tt};var Ct=y.__private__.out=function(k){return k=k.toString(),Dt+=k.length+1,we.push(k),we},Pe=y.__private__.write=function(k){return Ct(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Ee=y.__private__.getArrayBuffer=function(k){for(var rt=k.length,Lt=new ArrayBuffer(rt),Gt=new Uint8Array(Lt);rt--;)Gt[rt]=k.charCodeAt(rt);return Lt},Ce=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return Ce};var ge=n.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(k){return ge=J===Z.ADVANCED?k/ie:k,this};var xt,et=y.__private__.getFontSize=y.getFontSize=function(){return J===Z.COMPAT?ge:ge*ie},qt=n.R2L||!1;y.__private__.setR2L=y.setR2L=function(k){return qt=k,this},y.__private__.getR2L=y.getR2L=function(){return qt};var ce,xe=y.__private__.setZoomMode=function(k){var rt=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))xt=k;else if(isNaN(k)){if(rt.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');xt=k}else xt=parseInt(k,10)};y.__private__.getZoomMode=function(){return xt};var ne,We=y.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');ce=k};y.__private__.getPageMode=function(){return ce};var Ne=y.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');ne=k};y.__private__.getLayoutMode=function(){return ne},y.__private__.setDisplayMode=y.setDisplayMode=function(k,rt,Lt){return xe(k),Ne(rt),We(Lt),this};var ke={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(k){if(Object.keys(ke).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ke[k]},y.__private__.getDocumentProperties=function(){return ke},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(k){for(var rt in ke)ke.hasOwnProperty(rt)&&k[rt]&&(ke[rt]=k[rt]);return this},y.__private__.setDocumentProperty=function(k,rt){if(Object.keys(ke).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ke[k]=rt};var Je,ie,Re,Oe,fi,Ye={},ci={},B=[],Y={},q={},It={},Rt={},jt=null,Ot=0,re=[],Ve=new _b(y),ui=n.hotfixes||[],yi={},oi={},Oi=[],ze=function k(rt,Lt,Gt,ae,Te,Be){if(!(this instanceof k))return new k(rt,Lt,Gt,ae,Te,Be);isNaN(rt)&&(rt=1),isNaN(Lt)&&(Lt=0),isNaN(Gt)&&(Gt=0),isNaN(ae)&&(ae=1),isNaN(Te)&&(Te=0),isNaN(Be)&&(Be=0),this._matrix=[rt,Lt,Gt,ae,Te,Be]};Object.defineProperty(ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ze.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(at).join(k)},ze.prototype.multiply=function(k){var rt=k.sx*this.sx+k.shy*this.shx,Lt=k.sx*this.shy+k.shy*this.sy,Gt=k.shx*this.sx+k.sy*this.shx,ae=k.shx*this.shy+k.sy*this.sy,Te=k.tx*this.sx+k.ty*this.shx+this.tx,Be=k.tx*this.shy+k.ty*this.sy+this.ty;return new ze(rt,Lt,Gt,ae,Te,Be)},ze.prototype.decompose=function(){var k=this.sx,rt=this.shy,Lt=this.shx,Gt=this.sy,ae=this.tx,Te=this.ty,Be=Math.sqrt(k*k+rt*rt),ri=(k/=Be)*Lt+(rt/=Be)*Gt;Lt-=k*ri,Gt-=rt*ri;var vi=Math.sqrt(Lt*Lt+Gt*Gt);return ri/=vi,k*(Gt/=vi)<rt*(Lt/=vi)&&(k=-k,rt=-rt,ri=-ri,Be=-Be),{scale:new ze(Be,0,0,vi,0,0),translate:new ze(1,0,0,1,ae,Te),rotate:new ze(k,rt,-rt,k,0,0),skew:new ze(1,0,ri,1,0,0)}},ze.prototype.toString=function(k){return this.join(" ")},ze.prototype.inversed=function(){var k=this.sx,rt=this.shy,Lt=this.shx,Gt=this.sy,ae=this.tx,Te=this.ty,Be=1/(k*Gt-rt*Lt),ri=Gt*Be,vi=-rt*Be,Vi=-Lt*Be,Ni=k*Be;return new ze(ri,vi,Vi,Ni,-ri*ae-Vi*Te,-vi*ae-Ni*Te)},ze.prototype.applyToPoint=function(k){var rt=k.x*this.sx+k.y*this.shx+this.tx,Lt=k.x*this.shy+k.y*this.sy+this.ty;return new Zl(rt,Lt)},ze.prototype.applyToRectangle=function(k){var rt=this.applyToPoint(k),Lt=this.applyToPoint(new Zl(k.x+k.w,k.y+k.h));return new mc(rt.x,rt.y,Lt.x-rt.x,Lt.y-rt.y)},ze.prototype.clone=function(){var k=this.sx,rt=this.shy,Lt=this.shx,Gt=this.sy,ae=this.tx,Te=this.ty;return new ze(k,rt,Lt,Gt,ae,Te)},y.Matrix=ze;var un=y.matrixMult=function(k,rt){return rt.multiply(k)},on=new ze(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=on;var Xe=function(k,rt){if(!q[k]){var Lt=(rt instanceof Sl?"Sh":"P")+(Object.keys(Y).length+1).toString(10);rt.id=Lt,q[k]=Lt,Y[Lt]=rt,Ve.publish("addPattern",rt)}};y.ShadingPattern=Sl,y.TilingPattern=Dh,y.addShadingPattern=function(k,rt){return ot("addShadingPattern()"),Xe(k,rt),this},y.beginTilingPattern=function(k){ot("beginTilingPattern()"),Vd(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},y.endTilingPattern=function(k,rt){ot("endTilingPattern()"),rt.stream=ue[X].join(`
`),Xe(k,rt),Ve.publish("endTilingPattern",rt),Oi.pop().restore()};var xi=y.__private__.newObject=function(){var k=r();return f(k,!0),k},r=y.__private__.newObjectDeferred=function(){return mt++,dt[mt]=function(){return Dt},mt},f=function(k,rt){return rt=typeof rt=="boolean"&&rt,dt[k]=Dt,rt&&Ct(k+" 0 obj"),k},l=y.__private__.newAdditionalObject=function(){var k={objId:r(),content:""};return oe.push(k),k},o=r(),d=r(),x=y.__private__.decodeColorString=function(k){var rt=k.split(" ");if(rt.length!==2||rt[1]!=="g"&&rt[1]!=="G")rt.length===5&&(rt[4]==="k"||rt[4]==="K")&&(rt=[(1-rt[0])*(1-rt[3]),(1-rt[1])*(1-rt[3]),(1-rt[2])*(1-rt[3]),"r"]);else{var Lt=parseFloat(rt[0]);rt=[Lt,Lt,Lt,"r"]}for(var Gt="#",ae=0;ae<3;ae++)Gt+=("0"+Math.floor(255*parseFloat(rt[ae])).toString(16)).slice(-2);return Gt},_=y.__private__.encodeColorString=function(k){var rt;typeof k=="string"&&(k={ch1:k});var Lt=k.ch1,Gt=k.ch2,ae=k.ch3,Te=k.ch4,Be=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Lt=="string"&&Lt.charAt(0)!=="#"){var ri=new Db(Lt);if(ri.ok)Lt=ri.toHex();else if(!/^\d*\.?\d*$/.test(Lt))throw new Error('Invalid color "'+Lt+'" passed to jsPDF.encodeColorString.')}if(typeof Lt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Lt)&&(Lt="#"+Lt[1]+Lt[1]+Lt[2]+Lt[2]+Lt[3]+Lt[3]),typeof Lt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Lt)){var vi=parseInt(Lt.substr(1),16);Lt=vi>>16&255,Gt=vi>>8&255,ae=255&vi}if(Gt===void 0||Te===void 0&&Lt===Gt&&Gt===ae)if(typeof Lt=="string")rt=Lt+" "+Be[0];else switch(k.precision){case 2:rt=tt(Lt/255)+" "+Be[0];break;case 3:default:rt=H(Lt/255)+" "+Be[0]}else if(Te===void 0||yn(Te)==="object"){if(Te&&!isNaN(Te.a)&&Te.a===0)return rt=["1.","1.","1.",Be[1]].join(" ");if(typeof Lt=="string")rt=[Lt,Gt,ae,Be[1]].join(" ");else switch(k.precision){case 2:rt=[tt(Lt/255),tt(Gt/255),tt(ae/255),Be[1]].join(" ");break;default:case 3:rt=[H(Lt/255),H(Gt/255),H(ae/255),Be[1]].join(" ")}}else if(typeof Lt=="string")rt=[Lt,Gt,ae,Te,Be[2]].join(" ");else switch(k.precision){case 2:rt=[tt(Lt),tt(Gt),tt(ae),tt(Te),Be[2]].join(" ");break;case 3:default:rt=[H(Lt),H(Gt),H(ae),H(Te),Be[2]].join(" ")}return rt},I=y.__private__.getFilters=function(){return h},N=y.__private__.putStream=function(k){var rt=(k=k||{}).data||"",Lt=k.filters||I(),Gt=k.alreadyAppliedFilters||[],ae=k.addLength1||!1,Te=rt.length,Be=k.objectId,ri=function(Cs){return Cs};if(v!==null&&Be===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(ri=Se.encryptor(Be,0));var vi={};Lt===!0&&(Lt=["FlateEncode"]);var Vi=k.additionalKeyValues||[],Ni=(vi=Ei.API.processDataByFilters!==void 0?Ei.API.processDataByFilters(rt,Lt):{data:rt,reverseChain:[]}).reverseChain+(Array.isArray(Gt)?Gt.join(" "):Gt.toString());if(vi.data.length!==0&&(Vi.push({key:"Length",value:vi.data.length}),ae===!0&&Vi.push({key:"Length1",value:Te})),Ni.length!=0)if(Ni.split("/").length-1==1)Vi.push({key:"Filter",value:Ni});else{Vi.push({key:"Filter",value:"["+Ni+"]"});for(var en=0;en<Vi.length;en+=1)if(Vi[en].key==="DecodeParms"){for(var Un=[],Xn=0;Xn<vi.reverseChain.split("/").length-1;Xn+=1)Un.push("null");Un.push(Vi[en].value),Vi[en].value="["+Un.join(" ")+"]"}}Ct("<<");for(var ns=0;ns<Vi.length;ns++)Ct("/"+Vi[ns].key+" "+Vi[ns].value);Ct(">>"),vi.data.length!==0&&(Ct("stream"),Ct(ri(vi.data)),Ct("endstream"))},M=y.__private__.putPage=function(k){var rt=k.number,Lt=k.data,Gt=k.objId,ae=k.contentsObjId;f(Gt,!0),Ct("<</Type /Page"),Ct("/Parent "+k.rootDictionaryObjId+" 0 R"),Ct("/Resources "+k.resourceDictionaryObjId+" 0 R"),Ct("/MediaBox ["+parseFloat(at(k.mediaBox.bottomLeftX))+" "+parseFloat(at(k.mediaBox.bottomLeftY))+" "+at(k.mediaBox.topRightX)+" "+at(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&Ct("/CropBox ["+at(k.cropBox.bottomLeftX)+" "+at(k.cropBox.bottomLeftY)+" "+at(k.cropBox.topRightX)+" "+at(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&Ct("/BleedBox ["+at(k.bleedBox.bottomLeftX)+" "+at(k.bleedBox.bottomLeftY)+" "+at(k.bleedBox.topRightX)+" "+at(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&Ct("/TrimBox ["+at(k.trimBox.bottomLeftX)+" "+at(k.trimBox.bottomLeftY)+" "+at(k.trimBox.topRightX)+" "+at(k.trimBox.topRightY)+"]"),k.artBox!==null&&Ct("/ArtBox ["+at(k.artBox.bottomLeftX)+" "+at(k.artBox.bottomLeftY)+" "+at(k.artBox.topRightX)+" "+at(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&Ct("/UserUnit "+k.userUnit),Ve.publish("putPage",{objId:Gt,pageContext:re[rt],pageNumber:rt,page:Lt}),Ct("/Contents "+ae+" 0 R"),Ct(">>"),Ct("endobj");var Te=Lt.join(`
`);return J===Z.ADVANCED&&(Te+=`
Q`),f(ae,!0),N({data:Te,filters:I(),objectId:ae}),Ct("endobj"),Gt},w=y.__private__.putPages=function(){var k,rt,Lt=[];for(k=1;k<=Ot;k++)re[k].objId=r(),re[k].contentsObjId=r();for(k=1;k<=Ot;k++)Lt.push(M({number:k,data:ue[k],objId:re[k].objId,contentsObjId:re[k].contentsObjId,mediaBox:re[k].mediaBox,cropBox:re[k].cropBox,bleedBox:re[k].bleedBox,trimBox:re[k].trimBox,artBox:re[k].artBox,userUnit:re[k].userUnit,rootDictionaryObjId:o,resourceDictionaryObjId:d}));f(o,!0),Ct("<</Type /Pages");var Gt="/Kids [";for(rt=0;rt<Ot;rt++)Gt+=Lt[rt]+" 0 R ";Ct(Gt+"]"),Ct("/Count "+Ot),Ct(">>"),Ct("endobj"),Ve.publish("postPutPages")},b=function(k){Ve.publish("putFont",{font:k,out:Ct,newObject:xi,putStream:N}),k.isAlreadyPutted!==!0&&(k.objectNumber=xi(),Ct("<<"),Ct("/Type /Font"),Ct("/BaseFont /"+Lh(k.postScriptName)),Ct("/Subtype /Type1"),typeof k.encoding=="string"&&Ct("/Encoding /"+k.encoding),Ct("/FirstChar 32"),Ct("/LastChar 255"),Ct(">>"),Ct("endobj"))},P=function(){for(var k in Ye)Ye.hasOwnProperty(k)&&(T===!1||T===!0&&C.hasOwnProperty(k))&&b(Ye[k])},c=function(k){k.objectNumber=xi();var rt=[];rt.push({key:"Type",value:"/XObject"}),rt.push({key:"Subtype",value:"/Form"}),rt.push({key:"BBox",value:"["+[at(k.x),at(k.y),at(k.x+k.width),at(k.y+k.height)].join(" ")+"]"}),rt.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Lt=k.pages[1].join(`
`);N({data:Lt,additionalKeyValues:rt,objectId:k.objectNumber}),Ct("endobj")},L=function(){for(var k in yi)yi.hasOwnProperty(k)&&c(yi[k])},V=function(k,rt){var Lt,Gt=[],ae=1/(rt-1);for(Lt=0;Lt<1;Lt+=ae)Gt.push(Lt);if(Gt.push(1),k[0].offset!=0){var Te={offset:0,color:k[0].color};k.unshift(Te)}if(k[k.length-1].offset!=1){var Be={offset:1,color:k[k.length-1].color};k.push(Be)}for(var ri="",vi=0,Vi=0;Vi<Gt.length;Vi++){for(Lt=Gt[Vi];Lt>k[vi+1].offset;)vi++;var Ni=k[vi].offset,en=(Lt-Ni)/(k[vi+1].offset-Ni),Un=k[vi].color,Xn=k[vi+1].color;ri+=it(Math.round((1-en)*Un[0]+en*Xn[0]).toString(16))+it(Math.round((1-en)*Un[1]+en*Xn[1]).toString(16))+it(Math.round((1-en)*Un[2]+en*Xn[2]).toString(16))}return ri.trim()},U=function(k,rt){rt||(rt=21);var Lt=xi(),Gt=V(k.colors,rt),ae=[];ae.push({key:"FunctionType",value:"0"}),ae.push({key:"Domain",value:"[0.0 1.0]"}),ae.push({key:"Size",value:"["+rt+"]"}),ae.push({key:"BitsPerSample",value:"8"}),ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),N({data:Gt,additionalKeyValues:ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Lt}),Ct("endobj"),k.objectNumber=xi(),Ct("<< /ShadingType "+k.type),Ct("/ColorSpace /DeviceRGB");var Te="/Coords ["+at(parseFloat(k.coords[0]))+" "+at(parseFloat(k.coords[1]))+" ";k.type===2?Te+=at(parseFloat(k.coords[2]))+" "+at(parseFloat(k.coords[3])):Te+=at(parseFloat(k.coords[2]))+" "+at(parseFloat(k.coords[3]))+" "+at(parseFloat(k.coords[4]))+" "+at(parseFloat(k.coords[5])),Ct(Te+="]"),k.matrix&&Ct("/Matrix ["+k.matrix.toString()+"]"),Ct("/Function "+Lt+" 0 R"),Ct("/Extend [true true]"),Ct(">>"),Ct("endobj")},E=function(k,rt){var Lt=r(),Gt=xi();rt.push({resourcesOid:Lt,objectOid:Gt}),k.objectNumber=Gt;var ae=[];ae.push({key:"Type",value:"/Pattern"}),ae.push({key:"PatternType",value:"1"}),ae.push({key:"PaintType",value:"1"}),ae.push({key:"TilingType",value:"1"}),ae.push({key:"BBox",value:"["+k.boundingBox.map(at).join(" ")+"]"}),ae.push({key:"XStep",value:at(k.xStep)}),ae.push({key:"YStep",value:at(k.yStep)}),ae.push({key:"Resources",value:Lt+" 0 R"}),k.matrix&&ae.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),N({data:k.stream,additionalKeyValues:ae,objectId:k.objectNumber}),Ct("endobj")},G=function(k){var rt;for(rt in Y)Y.hasOwnProperty(rt)&&(Y[rt]instanceof Sl?U(Y[rt]):Y[rt]instanceof Dh&&E(Y[rt],k))},j=function(k){for(var rt in k.objectNumber=xi(),Ct("<<"),k)switch(rt){case"opacity":Ct("/ca "+tt(k[rt]));break;case"stroke-opacity":Ct("/CA "+tt(k[rt]))}Ct(">>"),Ct("endobj")},wt=function(){var k;for(k in It)It.hasOwnProperty(k)&&j(It[k])},gt=function(){for(var k in Ct("/XObject <<"),yi)yi.hasOwnProperty(k)&&yi[k].objectNumber>=0&&Ct("/"+k+" "+yi[k].objectNumber+" 0 R");Ve.publish("putXobjectDict"),Ct(">>")},_t=function(){Se.oid=xi(),Ct("<<"),Ct("/Filter /Standard"),Ct("/V "+Se.v),Ct("/R "+Se.r),Ct("/U <"+Se.toHexString(Se.U)+">"),Ct("/O <"+Se.toHexString(Se.O)+">"),Ct("/P "+Se.P),Ct(">>"),Ct("endobj")},Qt=function(){for(var k in Ct("/Font <<"),Ye)Ye.hasOwnProperty(k)&&(T===!1||T===!0&&C.hasOwnProperty(k))&&Ct("/"+k+" "+Ye[k].objectNumber+" 0 R");Ct(">>")},se=function(){if(Object.keys(Y).length>0){for(var k in Ct("/Shading <<"),Y)Y.hasOwnProperty(k)&&Y[k]instanceof Sl&&Y[k].objectNumber>=0&&Ct("/"+k+" "+Y[k].objectNumber+" 0 R");Ve.publish("putShadingPatternDict"),Ct(">>")}},Vt=function(k){if(Object.keys(Y).length>0){for(var rt in Ct("/Pattern <<"),Y)Y.hasOwnProperty(rt)&&Y[rt]instanceof y.TilingPattern&&Y[rt].objectNumber>=0&&Y[rt].objectNumber<k&&Ct("/"+rt+" "+Y[rt].objectNumber+" 0 R");Ve.publish("putTilingPatternDict"),Ct(">>")}},Wt=function(){if(Object.keys(It).length>0){var k;for(k in Ct("/ExtGState <<"),It)It.hasOwnProperty(k)&&It[k].objectNumber>=0&&Ct("/"+k+" "+It[k].objectNumber+" 0 R");Ve.publish("putGStateDict"),Ct(">>")}},Nt=function(k){f(k.resourcesOid,!0),Ct("<<"),Ct("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Qt(),se(),Vt(k.objectOid),Wt(),gt(),Ct(">>"),Ct("endobj")},Ft=function(){var k=[];P(),wt(),L(),G(k),Ve.publish("putResources"),k.forEach(Nt),Nt({resourcesOid:d,objectOid:Number.MAX_SAFE_INTEGER}),Ve.publish("postPutResources")},vt=function(){Ve.publish("putAdditionalObjects");for(var k=0;k<oe.length;k++){var rt=oe[k];f(rt.objId,!0),Ct(rt.content),Ct("endobj")}Ve.publish("postPutAdditionalObjects")},Ht=function(k){ci[k.fontName]=ci[k.fontName]||{},ci[k.fontName][k.fontStyle]=k.id},me=function(k,rt,Lt,Gt,ae){var Te={id:"F"+(Object.keys(Ye).length+1).toString(10),postScriptName:k,fontName:rt,fontStyle:Lt,encoding:Gt,isStandardFont:ae||!1,metadata:{}};return Ve.publish("addFont",{font:Te,instance:this}),Ye[Te.id]=Te,Ht(Te),Te.id},Pt=function(k){for(var rt=0,Lt=Ce.length;rt<Lt;rt++){var Gt=me.call(this,k[rt][0],k[rt][1],k[rt][2],Ce[rt][3],!0);T===!1&&(C[Gt]=!0);var ae=k[rt][0].split("-");Ht({id:Gt,fontName:ae[0],fontStyle:ae[1]||""})}Ve.publish("addFonts",{fonts:Ye,dictionary:ci})},Qe=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(Gt){var rt=Gt.stack||"";~rt.indexOf(" at ")&&(rt=rt.split(" at ")[1]);var Lt="Error in function "+rt.split(`
`)[0].split("<")[0]+": "+Gt.message;if(!Di.console)throw new Error(Lt);Di.console.error(Lt,Gt),Di.alert&&alert(Lt)}},k.foo.bar=k,k.foo},Ai=function(k,rt){var Lt,Gt,ae,Te,Be,ri,vi,Vi,Ni;if(ae=(rt=rt||{}).sourceEncoding||"Unicode",Be=rt.outputEncoding,(rt.autoencode||Be)&&Ye[Je].metadata&&Ye[Je].metadata[ae]&&Ye[Je].metadata[ae].encoding&&(Te=Ye[Je].metadata[ae].encoding,!Be&&Ye[Je].encoding&&(Be=Ye[Je].encoding),!Be&&Te.codePages&&(Be=Te.codePages[0]),typeof Be=="string"&&(Be=Te[Be]),Be)){for(vi=!1,ri=[],Lt=0,Gt=k.length;Lt<Gt;Lt++)(Vi=Be[k.charCodeAt(Lt)])?ri.push(String.fromCharCode(Vi)):ri.push(k[Lt]),ri[Lt].charCodeAt(0)>>8&&(vi=!0);k=ri.join("")}for(Lt=k.length;vi===void 0&&Lt!==0;)k.charCodeAt(Lt-1)>>8&&(vi=!0),Lt--;if(!vi)return k;for(ri=rt.noBOM?[]:[254,255],Lt=0,Gt=k.length;Lt<Gt;Lt++){if((Ni=(Vi=k.charCodeAt(Lt))>>8)>>8)throw new Error("Character at position "+Lt+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ri.push(Ni),ri.push(Vi-(Ni<<8))}return String.fromCharCode.apply(void 0,ri)},hi=y.__private__.pdfEscape=y.pdfEscape=function(k,rt){return Ai(k,rt).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pi=y.__private__.beginPage=function(k){ue[++Ot]=[],re[Ot]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},mi(Ot),Ut(ue[X])},ti=function(k,rt){var Lt,Gt,ae;switch(e=rt||e,typeof k=="string"&&(Lt=A(k.toLowerCase()),Array.isArray(Lt)&&(Gt=Lt[0],ae=Lt[1])),Array.isArray(k)&&(Gt=k[0]*ie,ae=k[1]*ie),isNaN(Gt)&&(Gt=s[0],ae=s[1]),(Gt>14400||ae>14400)&&(Cn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Gt=Math.min(14400,Gt),ae=Math.min(14400,ae)),s=[Gt,ae],e.substr(0,1)){case"l":ae>Gt&&(s=[ae,Gt]);break;case"p":Gt>ae&&(s=[ae,Gt])}Pi(s),so(zs),Ct(Hr),pc!==0&&Ct(pc+" J"),fc!==0&&Ct(fc+" j"),Ve.publish("addPage",{pageNumber:Ot})},wi=function(k){k>0&&k<=Ot&&(ue.splice(k,1),re.splice(k,1),Ot--,X>Ot&&(X=Ot),this.setPage(X))},mi=function(k){k>0&&k<=Ot&&(X=k)},bi=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return ue.length-1},de=function(k,rt,Lt){var Gt,ae=void 0;return Lt=Lt||{},k=k!==void 0?k:Ye[Je].fontName,rt=rt!==void 0?rt:Ye[Je].fontStyle,Gt=k.toLowerCase(),ci[Gt]!==void 0&&ci[Gt][rt]!==void 0?ae=ci[Gt][rt]:ci[k]!==void 0&&ci[k][rt]!==void 0?ae=ci[k][rt]:Lt.disableWarning===!1&&Cn.warn("Unable to look up font label for font '"+k+"', '"+rt+"'. Refer to getFontList() for available fonts."),ae||Lt.noFallback||(ae=ci.times[rt])==null&&(ae=ci.times.normal),ae},An=y.__private__.putInfo=function(){var k=xi(),rt=function(Gt){return Gt};for(var Lt in v!==null&&(rt=Se.encryptor(k,0)),Ct("<<"),Ct("/Producer ("+hi(rt("jsPDF "+Ei.version))+")"),ke)ke.hasOwnProperty(Lt)&&ke[Lt]&&Ct("/"+Lt.substr(0,1).toUpperCase()+Lt.substr(1)+" ("+hi(rt(ke[Lt]))+")");Ct("/CreationDate ("+hi(rt(Bt))+")"),Ct(">>"),Ct("endobj")},xn=y.__private__.putCatalog=function(k){var rt=(k=k||{}).rootDictionaryObjId||o;switch(xi(),Ct("<<"),Ct("/Type /Catalog"),Ct("/Pages "+rt+" 0 R"),xt||(xt="fullwidth"),xt){case"fullwidth":Ct("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ct("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ct("/OpenAction [3 0 R /Fit]");break;case"original":Ct("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Lt=""+xt;Lt.substr(Lt.length-1)==="%"&&(xt=parseInt(xt)/100),typeof xt=="number"&&Ct("/OpenAction [3 0 R /XYZ null null "+tt(xt)+"]")}switch(ne||(ne="continuous"),ne){case"continuous":Ct("/PageLayout /OneColumn");break;case"single":Ct("/PageLayout /SinglePage");break;case"two":case"twoleft":Ct("/PageLayout /TwoColumnLeft");break;case"tworight":Ct("/PageLayout /TwoColumnRight")}ce&&Ct("/PageMode /"+ce),Ve.publish("putCatalog"),Ct(">>"),Ct("endobj")},In=y.__private__.putTrailer=function(){Ct("trailer"),Ct("<<"),Ct("/Size "+(mt+1)),Ct("/Root "+mt+" 0 R"),Ct("/Info "+(mt-1)+" 0 R"),v!==null&&Ct("/Encrypt "+Se.oid+" 0 R"),Ct("/ID [ <"+kt+"> <"+kt+"> ]"),Ct(">>")},Ks=y.__private__.putHeader=function(){Ct("%PDF-"+F),Ct("%\xBA\xDF\xAC\xE0")},$s=y.__private__.putXRef=function(){var k="0000000000";Ct("xref"),Ct("0 "+(mt+1)),Ct("0000000000 65535 f ");for(var rt=1;rt<=mt;rt++)typeof dt[rt]=="function"?Ct((k+dt[rt]()).slice(-10)+" 00000 n "):dt[rt]!==void 0?Ct((k+dt[rt]).slice(-10)+" 00000 n "):Ct("0000000000 00000 n ")},ve=y.__private__.buildDocument=function(){At(),Ut(Tt),Ve.publish("buildDocument"),Ks(),w(),vt(),Ft(),v!==null&&_t(),An(),xn();var k=Dt;return $s(),In(),Ct("startxref"),Ct(""+k),Ct("%%EOF"),Ut(ue[X]),Tt.join(`
`)},yr=y.__private__.getBlob=function(k){return new Blob([Ee(k)],{type:"application/pdf"})},vn=y.output=y.__private__.output=Qe(function(k,rt){switch(typeof(rt=rt||{})=="string"?rt={filename:rt}:rt.filename=rt.filename||"generated.pdf",k){case void 0:return ve();case"save":y.save(rt.filename);break;case"arraybuffer":return Ee(ve());case"blob":return yr(ve());case"bloburi":case"bloburl":if(Di.URL!==void 0&&typeof Di.URL.createObjectURL=="function")return Di.URL&&Di.URL.createObjectURL(yr(ve()))||void 0;Cn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Lt="",Gt=ve();try{Lt=i0(Gt)}catch{Lt=i0(unescape(encodeURIComponent(Gt)))}return"data:application/pdf;filename="+rt.filename+";base64,"+Lt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Di)==="[object Window]"){var ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Te=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';rt.pdfObjectUrl&&(ae=rt.pdfObjectUrl,Te="");var Be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ae+'"'+Te+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(rt)+");<\/script></body></html>",ri=Di.open();return ri!==null&&ri.document.write(Be),ri}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Di)==="[object Window]"){var vi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(rt.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+rt.filename+'" width="500px" height="400px" /></body></html>',Vi=Di.open();if(Vi!==null){Vi.document.write(vi);var Ni=this;Vi.document.documentElement.querySelector("#pdfViewer").onload=function(){Vi.document.title=rt.filename,Vi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ni.output("bloburl"))}}return Vi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Di)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var en='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",rt)+'"></iframe></body></html>',Un=Di.open();if(Un!==null&&(Un.document.write(en),Un.document.title=rt.filename),Un||typeof safari>"u")return Un;break;case"datauri":case"dataurl":return Di.document.location.href=this.output("datauristring",rt);default:return null}}),Wr=function(k){return Array.isArray(ui)===!0&&ui.indexOf(k)>-1};switch(i){case"pt":ie=1;break;case"mm":ie=72/25.4;break;case"cm":ie=72/2.54;break;case"in":ie=72;break;case"px":ie=Wr("px_scaling")==1?.75:96/72;break;case"pc":case"em":ie=12;break;case"ex":ie=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);ie=i}var Se=null;ut(),Mt();var Me=function(k){return v!==null?Se.encryptor(k,0):function(rt){return rt}},He=y.__private__.getPageInfo=y.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:re[k].objId,pageNumber:k,pageContext:re[k]}},je=y.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var rt in re)if(re[rt].objId===k)break;return He(rt)},Ze=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:re[X].objId,pageNumber:X,pageContext:re[X]}};y.addPage=function(){return ti.apply(this,arguments),this},y.setPage=function(){return mi.apply(this,arguments),Ut.call(this,ue[X]),this},y.insertPage=function(k){return this.addPage(),this.movePage(X,k),this},y.movePage=function(k,rt){var Lt,Gt;if(k>rt){Lt=ue[k],Gt=re[k];for(var ae=k;ae>rt;ae--)ue[ae]=ue[ae-1],re[ae]=re[ae-1];ue[rt]=Lt,re[rt]=Gt,this.setPage(rt)}else if(k<rt){Lt=ue[k],Gt=re[k];for(var Te=k;Te<rt;Te++)ue[Te]=ue[Te+1],re[Te]=re[Te+1];ue[rt]=Lt,re[rt]=Gt,this.setPage(rt)}return this},y.deletePage=function(){return wi.apply(this,arguments),this},y.__private__.text=y.text=function(k,rt,Lt,Gt,ae){var Te,Be,ri,vi,Vi,Ni,en,Un,Xn,ns=(Gt=Gt||{}).scope||this;if(typeof k=="number"&&typeof rt=="number"&&(typeof Lt=="string"||Array.isArray(Lt))){var Cs=Lt;Lt=rt,rt=k,k=Cs}if(arguments[3]instanceof ze?(ot("The transform parameter of text() with a Matrix value"),Xn=ae):(ri=arguments[4],vi=arguments[5],yn(en=arguments[3])==="object"&&en!==null||(typeof ri=="string"&&(vi=ri,ri=null),typeof en=="string"&&(vi=en,en=null),typeof en=="number"&&(ri=en,en=null),Gt={flags:en,angle:ri,align:vi})),isNaN(rt)||isNaN(Lt)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return ns;var gs="",Xr=!1,hr=typeof Gt.lineHeightFactor=="number"?Gt.lineHeightFactor:ln,ha=ns.internal.scaleFactor;function zd(En){return En=En.split("	").join(Array(Gt.TabLen||9).join(" ")),hi(En,en)}function _c(En){for(var kn,$n=En.concat(),cs=[],Da=$n.length;Da--;)typeof(kn=$n.shift())=="string"?cs.push(kn):Array.isArray(En)&&(kn.length===1||kn[1]===void 0&&kn[2]===void 0)?cs.push(kn[0]):cs.push([kn[0],kn[1],kn[2]]);return cs}function bc(En,kn){var $n;if(typeof En=="string")$n=kn(En)[0];else if(Array.isArray(En)){for(var cs,Da,Pc=En.concat(),ah=[],jd=Pc.length;jd--;)typeof(cs=Pc.shift())=="string"?ah.push(kn(cs)[0]):Array.isArray(cs)&&typeof cs[0]=="string"&&(Da=kn(cs[0],cs[1],cs[2]),ah.push([Da[0],Da[1],Da[2]]));$n=ah}return $n}var $l=!1,yc=!0;if(typeof k=="string")$l=!0;else if(Array.isArray(k)){var wc=k.concat();Be=[];for(var Jl,ys=wc.length;ys--;)(typeof(Jl=wc.shift())!="string"||Array.isArray(Jl)&&typeof Jl[0]!="string")&&(yc=!1);$l=yc}if($l===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var Ql=ge/ns.internal.scaleFactor,th=Ql*(hr-1);switch(Gt.baseline){case"bottom":Lt-=th;break;case"top":Lt+=Ql-th;break;case"hanging":Lt+=Ql-2*th;break;case"middle":Lt+=Ql/2-th}if((Ni=Gt.maxWidth||0)>0&&(typeof k=="string"?k=ns.splitTextToSize(k,Ni):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(En,kn){return En.concat(ns.splitTextToSize(kn,Ni))},[]))),Te={text:k,x:rt,y:Lt,options:Gt,mutex:{pdfEscape:hi,activeFontKey:Je,fonts:Ye,activeFontSize:ge}},Ve.publish("preProcessText",Te),k=Te.text,ri=(Gt=Te.options).angle,!(Xn instanceof ze)&&ri&&typeof ri=="number"){ri*=Math.PI/180,Gt.rotationDirection===0&&(ri=-ri),J===Z.ADVANCED&&(ri=-ri);var eh=Math.cos(ri),Sc=Math.sin(ri);Xn=new ze(eh,Sc,-Sc,eh,0,0)}else ri&&ri instanceof ze&&(Xn=ri);J!==Z.ADVANCED||Xn||(Xn=on),(Vi=Gt.charSpace||ql)!==void 0&&(gs+=at($(Vi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Un=Gt.horizontalScale)!==void 0&&(gs+=at(100*Un)+` Tz
`),Gt.lang;var Js=-1,Am=Gt.renderingMode!==void 0?Gt.renderingMode:Gt.stroke,Mc=ns.internal.getCurrentPageInfo().pageContext;switch(Am){case 0:case!1:case"fill":Js=0;break;case 1:case!0:case"stroke":Js=1;break;case 2:case"fillThenStroke":Js=2;break;case 3:case"invisible":Js=3;break;case 4:case"fillAndAddForClipping":Js=4;break;case 5:case"strokeAndAddPathForClipping":Js=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Js=6;break;case 7:case"addToPathForClipping":Js=7}var Ud=Mc.usedRenderingMode!==void 0?Mc.usedRenderingMode:-1;Js!==-1?gs+=Js+` Tr
`:Ud!==-1&&(gs+=`0 Tr
`),Js!==-1&&(Mc.usedRenderingMode=Js),vi=Gt.align||"left";var wr,ih=ge*hr,Wd=ns.internal.pageSize.getWidth(),Hd=Ye[Je];Vi=Gt.charSpace||ql,Ni=Gt.maxWidth||0,en=Object.assign({autoencode:!0,noBOM:!0},Gt.flags);var oo=[],rl=function(En){return ns.getStringUnitWidth(En,{font:Hd,charSpace:Vi,fontSize:ge,doKerning:!1})*ge/ha};if(Object.prototype.toString.call(k)==="[object Array]"){var Qs;Be=_c(k),vi!=="left"&&(wr=Be.map(rl));var Us,lo=0;if(vi==="right"){rt-=wr[0],k=[],ys=Be.length;for(var ka=0;ka<ys;ka++)ka===0?(Us=la(rt),Qs=Ea(Lt)):(Us=$(lo-wr[ka]),Qs=-ih),k.push([Be[ka],Us,Qs]),lo=wr[ka]}else if(vi==="center"){rt-=wr[0]/2,k=[],ys=Be.length;for(var Ia=0;Ia<ys;Ia++)Ia===0?(Us=la(rt),Qs=Ea(Lt)):(Us=$((lo-wr[Ia])/2),Qs=-ih),k.push([Be[Ia],Us,Qs]),lo=wr[Ia]}else if(vi==="left"){k=[],ys=Be.length;for(var nh=0;nh<ys;nh++)k.push(Be[nh])}else if(vi==="justify"&&Hd.encoding==="Identity-H"){k=[],ys=Be.length,Ni=Ni!==0?Ni:Wd;for(var La=0,Kn=0;Kn<ys;Kn++)if(Qs=Kn===0?Ea(Lt):-ih,Us=Kn===0?la(rt):La,Kn<ys-1){var Tc=$((Ni-wr[Kn])/(Be[Kn].split(" ").length-1)),Ws=Be[Kn].split(" ");k.push([Ws[0]+" ",Us,Qs]),La=0;for(var Sr=1;Sr<Ws.length;Sr++){var sh=(rl(Ws[Sr-1]+" "+Ws[Sr])-rl(Ws[Sr]))*ha+Tc;Sr==Ws.length-1?k.push([Ws[Sr],sh,0]):k.push([Ws[Sr]+" ",sh,0]),La-=sh}}else k.push([Be[Kn],Us,Qs]);k.push(["",La,0])}else{if(vi!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],ys=Be.length,Ni=Ni!==0?Ni:Wd,Kn=0;Kn<ys;Kn++)Qs=Kn===0?Ea(Lt):-ih,Us=Kn===0?la(rt):0,Kn<ys-1?oo.push(at($((Ni-wr[Kn])/(Be[Kn].split(" ").length-1)))):oo.push(0),k.push([Be[Kn],Us,Qs])}}var Xd=typeof Gt.R2L=="boolean"?Gt.R2L:qt;Xd===!0&&(k=bc(k,function(En,kn,$n){return[En.split("").reverse().join(""),kn,$n]})),Te={text:k,x:rt,y:Lt,options:Gt,mutex:{pdfEscape:hi,activeFontKey:Je,fonts:Ye,activeFontSize:ge}},Ve.publish("postProcessText",Te),k=Te.text,Xr=Te.mutex.isHex||!1;var Cc=Ye[Je].encoding;Cc!=="WinAnsiEncoding"&&Cc!=="StandardEncoding"||(k=bc(k,function(En,kn,$n){return[zd(En),kn,$n]})),Be=_c(k),k=[];for(var al,ol,ho,ll=0,rh=1,hl=Array.isArray(Be[0])?rh:ll,co="",Ac=function(En,kn,$n){var cs="";return $n instanceof ze?($n=typeof Gt.angle=="number"?un($n,new ze(1,0,0,1,En,kn)):un(new ze(1,0,0,1,En,kn),$n),J===Z.ADVANCED&&($n=un(new ze(1,0,0,-1,0,0),$n)),cs=$n.join(" ")+` Tm
`):cs=at(En)+" "+at(kn)+` Td
`,cs},Mr=0;Mr<Be.length;Mr++){switch(co="",hl){case rh:ho=(Xr?"<":"(")+Be[Mr][0]+(Xr?">":")"),al=parseFloat(Be[Mr][1]),ol=parseFloat(Be[Mr][2]);break;case ll:ho=(Xr?"<":"(")+Be[Mr]+(Xr?">":")"),al=la(rt),ol=Ea(Lt)}oo!==void 0&&oo[Mr]!==void 0&&(co=oo[Mr]+` Tw
`),Mr===0?k.push(co+Ac(al,ol,Xn)+ho):hl===ll?k.push(co+ho):hl===rh&&k.push(co+Ac(al,ol,Xn)+ho)}k=hl===ll?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var Tr=`BT
/`;return Tr+=Je+" "+ge+` Tf
`,Tr+=at(ge*hr)+` TL
`,Tr+=nl+`
`,Tr+=gs,Tr+=k,Ct(Tr+="ET"),C[Je]=!0,ns};var ki=y.__private__.clip=y.clip=function(k){return Ct(k==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return ki("evenodd")},y.__private__.discardPath=y.discardPath=function(){return Ct("n"),this};var Zi=y.__private__.isValidStyle=function(k){var rt=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(rt=!0),rt};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(k){return Zi(k)&&(p=k),this};var Ji=y.__private__.getStyle=y.getStyle=function(k){var rt=p;switch(k){case"D":case"S":rt="S";break;case"F":rt="f";break;case"FD":case"DF":rt="B";break;case"f":case"f*":case"B":case"B*":rt=k}return rt},Ge=y.close=function(){return Ct("h"),this};y.stroke=function(){return Ct("S"),this},y.fill=function(k){return tn("f",k),this},y.fillEvenOdd=function(k){return tn("f*",k),this},y.fillStroke=function(k){return tn("B",k),this},y.fillStrokeEvenOdd=function(k){return tn("B*",k),this};var tn=function(k,rt){yn(rt)==="object"?gi(rt,k):Ct(k)},_n=function(k){k===null||J===Z.ADVANCED&&k===void 0||(k=Ji(k),Ct(k))};function Ki(k,rt,Lt,Gt,ae){var Te=new Dh(rt||this.boundingBox,Lt||this.xStep,Gt||this.yStep,this.gState,ae||this.matrix);Te.stream=this.stream;var Be=k+"$$"+this.cloneIndex+++"$$";return Xe(Be,Te),Te}var gi=function(k,rt){var Lt=q[k.key],Gt=Y[Lt];if(Gt instanceof Sl)Ct("q"),Ct(Ii(rt)),Gt.gState&&y.setGState(Gt.gState),Ct(k.matrix.toString()+" cm"),Ct("/"+Lt+" sh"),Ct("Q");else if(Gt instanceof Dh){var ae=new ze(1,0,0,-1,0,ao());k.matrix&&(ae=ae.multiply(k.matrix||on),Lt=Ki.call(Gt,k.key,k.boundingBox,k.xStep,k.yStep,ae).id),Ct("q"),Ct("/Pattern cs"),Ct("/"+Lt+" scn"),Gt.gState&&y.setGState(Gt.gState),Ct(rt),Ct("Q")}},Ii=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},si=y.moveTo=function(k,rt){return Ct(at($(k))+" "+at(yt(rt))+" m"),this},Si=y.lineTo=function(k,rt){return Ct(at($(k))+" "+at(yt(rt))+" l"),this},Pn=y.curveTo=function(k,rt,Lt,Gt,ae,Te){return Ct([at($(k)),at(yt(rt)),at($(Lt)),at(yt(Gt)),at($(ae)),at(yt(Te)),"c"].join(" ")),this};y.__private__.line=y.line=function(k,rt,Lt,Gt,ae){if(isNaN(k)||isNaN(rt)||isNaN(Lt)||isNaN(Gt)||!Zi(ae))throw new Error("Invalid arguments passed to jsPDF.line");return J===Z.COMPAT?this.lines([[Lt-k,Gt-rt]],k,rt,[1,1],ae||"S"):this.lines([[Lt-k,Gt-rt]],k,rt,[1,1]).stroke()},y.__private__.lines=y.lines=function(k,rt,Lt,Gt,ae,Te){var Be,ri,vi,Vi,Ni,en,Un,Xn,ns,Cs,gs,Xr;if(typeof k=="number"&&(Xr=Lt,Lt=rt,rt=k,k=Xr),Gt=Gt||[1,1],Te=Te||!1,isNaN(rt)||isNaN(Lt)||!Array.isArray(k)||!Array.isArray(Gt)||!Zi(ae)||typeof Te!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(si(rt,Lt),Be=Gt[0],ri=Gt[1],Vi=k.length,Cs=rt,gs=Lt,vi=0;vi<Vi;vi++)(Ni=k[vi]).length===2?(Cs=Ni[0]*Be+Cs,gs=Ni[1]*ri+gs,Si(Cs,gs)):(en=Ni[0]*Be+Cs,Un=Ni[1]*ri+gs,Xn=Ni[2]*Be+Cs,ns=Ni[3]*ri+gs,Cs=Ni[4]*Be+Cs,gs=Ni[5]*ri+gs,Pn(en,Un,Xn,ns,Cs,gs));return Te&&Ge(),_n(ae),this},y.path=function(k){for(var rt=0;rt<k.length;rt++){var Lt=k[rt],Gt=Lt.c;switch(Lt.op){case"m":si(Gt[0],Gt[1]);break;case"l":Si(Gt[0],Gt[1]);break;case"c":Pn.apply(this,Gt);break;case"h":Ge()}}return this},y.__private__.rect=y.rect=function(k,rt,Lt,Gt,ae){if(isNaN(k)||isNaN(rt)||isNaN(Lt)||isNaN(Gt)||!Zi(ae))throw new Error("Invalid arguments passed to jsPDF.rect");return J===Z.COMPAT&&(Gt=-Gt),Ct([at($(k)),at(yt(rt)),at($(Lt)),at($(Gt)),"re"].join(" ")),_n(ae),this},y.__private__.triangle=y.triangle=function(k,rt,Lt,Gt,ae,Te,Be){if(isNaN(k)||isNaN(rt)||isNaN(Lt)||isNaN(Gt)||isNaN(ae)||isNaN(Te)||!Zi(Be))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Lt-k,Gt-rt],[ae-Lt,Te-Gt],[k-ae,rt-Te]],k,rt,[1,1],Be,!0),this},y.__private__.roundedRect=y.roundedRect=function(k,rt,Lt,Gt,ae,Te,Be){if(isNaN(k)||isNaN(rt)||isNaN(Lt)||isNaN(Gt)||isNaN(ae)||isNaN(Te)||!Zi(Be))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ri=4/3*(Math.SQRT2-1);return ae=Math.min(ae,.5*Lt),Te=Math.min(Te,.5*Gt),this.lines([[Lt-2*ae,0],[ae*ri,0,ae,Te-Te*ri,ae,Te],[0,Gt-2*Te],[0,Te*ri,-ae*ri,Te,-ae,Te],[2*ae-Lt,0],[-ae*ri,0,-ae,-Te*ri,-ae,-Te],[0,2*Te-Gt],[0,-Te*ri,ae*ri,-Te,ae,-Te]],k+ae,rt,[1,1],Be,!0),this},y.__private__.ellipse=y.ellipse=function(k,rt,Lt,Gt,ae){if(isNaN(k)||isNaN(rt)||isNaN(Lt)||isNaN(Gt)||!Zi(ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Te=4/3*(Math.SQRT2-1)*Lt,Be=4/3*(Math.SQRT2-1)*Gt;return si(k+Lt,rt),Pn(k+Lt,rt-Be,k+Te,rt-Gt,k,rt-Gt),Pn(k-Te,rt-Gt,k-Lt,rt-Be,k-Lt,rt),Pn(k-Lt,rt+Be,k-Te,rt+Gt,k,rt+Gt),Pn(k+Te,rt+Gt,k+Lt,rt+Be,k+Lt,rt),_n(ae),this},y.__private__.circle=y.circle=function(k,rt,Lt,Gt){if(isNaN(k)||isNaN(rt)||isNaN(Lt)||!Zi(Gt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,rt,Lt,Lt,Gt)},y.setFont=function(k,rt,Lt){return Lt&&(rt=St(rt,Lt)),Je=de(k,rt,{disableWarning:!1}),this};var pn=y.__private__.getFont=y.getFont=function(){return Ye[de.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var k,rt,Lt={};for(k in ci)if(ci.hasOwnProperty(k))for(rt in Lt[k]=[],ci[k])ci[k].hasOwnProperty(rt)&&Lt[k].push(rt);return Lt},y.addFont=function(k,rt,Lt,Gt,ae){var Te=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Te.indexOf(arguments[3])!==-1?ae=arguments[3]:arguments[3]&&Te.indexOf(arguments[3])==-1&&(Lt=St(Lt,Gt)),ae=ae||"Identity-H",me.call(this,k,rt,Lt,ae)};var ln,zs=n.lineWidth||.200025,Ln=y.__private__.getLineWidth=y.getLineWidth=function(){return zs},so=y.__private__.setLineWidth=y.setLineWidth=function(k){return zs=k,Ct(at($(k))+" w"),this};y.__private__.setLineDash=Ei.API.setLineDash=Ei.API.setLineDashPattern=function(k,rt){if(k=k||[],rt=rt||0,isNaN(rt)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Lt){return at($(Lt))}).join(" "),rt=at($(rt)),Ct("["+k+"] "+rt+" d"),this};var Ri=y.__private__.getLineHeight=y.getLineHeight=function(){return ge*ln};y.__private__.getLineHeight=y.getLineHeight=function(){return ge*ln};var Pa=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(ln=k),this},Bd=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return ln};Pa(n.lineHeight);var la=y.__private__.getHorizontalCoordinate=function(k){return $(k)},Ea=y.__private__.getVerticalCoordinate=function(k){return J===Z.ADVANCED?k:re[X].mediaBox.topRightY-re[X].mediaBox.bottomLeftY-$(k)},Sm=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(k){return at(la(k))},ro=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(k){return at(Ea(k))},Hr=n.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return x(Hr)},y.__private__.setStrokeColor=y.setDrawColor=function(k,rt,Lt,Gt){return Hr=_({ch1:k,ch2:rt,ch3:Lt,ch4:Gt,pdfColorType:"draw",precision:2}),Ct(Hr),this};var uc=n.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return x(uc)},y.__private__.setFillColor=y.setFillColor=function(k,rt,Lt,Gt){return uc=_({ch1:k,ch2:rt,ch3:Lt,ch4:Gt,pdfColorType:"fill",precision:2}),Ct(uc),this};var nl=n.textColor||"0 g",Mm=y.__private__.getTextColor=y.getTextColor=function(){return x(nl)};y.__private__.setTextColor=y.setTextColor=function(k,rt,Lt,Gt){return nl=_({ch1:k,ch2:rt,ch3:Lt,ch4:Gt,pdfColorType:"text",precision:3}),this};var ql=n.charSpace,Tm=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(ql||0)};y.__private__.setCharSpace=y.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ql=k,this};var pc=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(k){var rt=y.CapJoinStyles[k];if(rt===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pc=rt,Ct(rt+" J"),this};var fc=0;y.__private__.setLineJoin=y.setLineJoin=function(k){var rt=y.CapJoinStyles[k];if(rt===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fc=rt,Ct(rt+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ct(at($(k))+" M"),this},y.GState=sp,y.setGState=function(k){(k=typeof k=="string"?It[Rt[k]]:Od(null,k)).equals(jt)||(Ct("/"+k.id+" gs"),jt=k)};var Od=function(k,rt){if(!k||!Rt[k]){var Lt=!1;for(var Gt in It)if(It.hasOwnProperty(Gt)&&It[Gt].equals(rt)){Lt=!0;break}if(Lt)rt=It[Gt];else{var ae="GS"+(Object.keys(It).length+1).toString(10);It[ae]=rt,rt.id=ae}return k&&(Rt[k]=rt.id),Ve.publish("addGState",rt),rt}};y.addGState=function(k,rt){return Od(k,rt),this},y.saveGraphicsState=function(){return Ct("q"),B.push({key:Je,size:ge,color:nl}),this},y.restoreGraphicsState=function(){Ct("Q");var k=B.pop();return Je=k.key,ge=k.size,nl=k.color,jt=null,this},y.setCurrentTransformationMatrix=function(k){return Ct(k.toString()+" cm"),this},y.comment=function(k){return Ct("#"+k),this};var Zl=function(k,rt){var Lt=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Lt},set:function(Te){isNaN(Te)||(Lt=parseFloat(Te))}});var Gt=rt||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Gt},set:function(Te){isNaN(Te)||(Gt=parseFloat(Te))}});var ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ae},set:function(Te){ae=Te.toString()}}),this},mc=function(k,rt,Lt,Gt){Zl.call(this,k,rt),this.type="rect";var ae=Lt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ae},set:function(Be){isNaN(Be)||(ae=parseFloat(Be))}});var Te=Gt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Te},set:function(Be){isNaN(Be)||(Te=parseFloat(Be))}}),this},gc=function(){this.page=Ot,this.currentPage=X,this.pages=ue.slice(0),this.pagesContext=re.slice(0),this.x=Re,this.y=Oe,this.matrix=fi,this.width=sl(X),this.height=ao(X),this.outputDestination=we,this.id="",this.objectNumber=-1};gc.prototype.restore=function(){Ot=this.page,X=this.currentPage,re=this.pagesContext,ue=this.pages,Re=this.x,Oe=this.y,fi=this.matrix,xc(X,this.width),vc(X,this.height),we=this.outputDestination};var Vd=function(k,rt,Lt,Gt,ae){Oi.push(new gc),Ot=X=0,ue=[],Re=k,Oe=rt,fi=ae,Pi([Lt,Gt])},Cm=function(k){if(oi[k])Oi.pop().restore();else{var rt=new gc,Lt="Xo"+(Object.keys(yi).length+1).toString(10);rt.id=Lt,oi[k]=Lt,yi[Lt]=rt,Ve.publish("addFormObject",rt),Oi.pop().restore()}};for(var Kl in y.beginFormObject=function(k,rt,Lt,Gt,ae){return Vd(k,rt,Lt,Gt,ae),this},y.endFormObject=function(k){return Cm(k),this},y.doFormObject=function(k,rt){var Lt=yi[oi[k]];return Ct("q"),Ct(rt.toString()+" cm"),Ct("/"+Lt.id+" Do"),Ct("Q"),this},y.getFormObject=function(k){var rt=yi[oi[k]];return{x:rt.x,y:rt.y,width:rt.width,height:rt.height,matrix:rt.matrix}},y.save=function(k,rt){return k=k||"generated.pdf",(rt=rt||{}).returnPromise=rt.returnPromise||!1,rt.returnPromise===!1?(wl(yr(ve()),k),typeof wl.unload=="function"&&Di.setTimeout&&setTimeout(wl.unload,911),this):new Promise(function(Lt,Gt){try{var ae=wl(yr(ve()),k);typeof wl.unload=="function"&&Di.setTimeout&&setTimeout(wl.unload,911),Lt(ae)}catch(Te){Gt(Te.message)}})},Ei.API)Ei.API.hasOwnProperty(Kl)&&(Kl==="events"&&Ei.API.events.length?function(k,rt){var Lt,Gt,ae;for(ae=rt.length-1;ae!==-1;ae--)Lt=rt[ae][0],Gt=rt[ae][1],k.subscribe.apply(k,[Lt].concat(typeof Gt=="function"?[Gt]:Gt))}(Ve,Ei.API.events):y[Kl]=Ei.API[Kl]);var sl=y.getPageWidth=function(k){return(re[k=k||X].mediaBox.topRightX-re[k].mediaBox.bottomLeftX)/ie},xc=y.setPageWidth=function(k,rt){re[k].mediaBox.topRightX=rt*ie+re[k].mediaBox.bottomLeftX},ao=y.getPageHeight=function(k){return(re[k=k||X].mediaBox.topRightY-re[k].mediaBox.bottomLeftY)/ie},vc=y.setPageHeight=function(k,rt){re[k].mediaBox.topRightY=rt*ie+re[k].mediaBox.bottomLeftY};return y.internal={pdfEscape:hi,getStyle:Ji,getFont:pn,getFontSize:et,getCharSpace:Tm,getTextColor:Mm,getLineHeight:Ri,getLineHeightFactor:Bd,getLineWidth:Ln,write:Pe,getHorizontalCoordinate:la,getVerticalCoordinate:Ea,getCoordinateString:Sm,getVerticalCoordinateString:ro,collections:{},newObject:xi,newAdditionalObject:l,newObjectDeferred:r,newObjectDeferredBegin:f,getFilters:I,putStream:N,events:Ve,scaleFactor:ie,pageSize:{getWidth:function(){return sl(X)},setWidth:function(k){xc(X,k)},getHeight:function(){return ao(X)},setHeight:function(k){vc(X,k)}},encryptionOptions:v,encryption:Se,getEncryptor:Me,output:vn,getNumberOfPages:bi,pages:ue,out:Ct,f2:tt,f3:H,getPageInfo:He,getPageInfoByObjId:je,getCurrentPageInfo:Ze,getPDFVersion:O,Point:Zl,Rectangle:mc,Matrix:ze,hasHotfix:Wr},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return sl(X)},set:function(k){xc(X,k)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return ao(X)},set:function(k){vc(X,k)},enumerable:!0,configurable:!0}),Pt.call(y,Ce),Je="F1",ti(s,e),Ve.publish("initialized"),y}Ih.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Ih.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ih.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},Ih.prototype.processOwnerPassword=function(n,t){return s0(n0(t).substr(0,5),n)},Ih.prototype.encryptor=function(n,t){var e=n0(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return s0(e,i)}},sp.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||yn(n)!==yn(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},Ei.API={events:[]},Ei.version="3.0.1";var Gn=Ei.API,l0=1,Tl=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Eh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bi=function(n){return n.toFixed(2)},Lo=function(n){return n.toFixed(5)};Gn.__acroform__={};var ar=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},bb=function(n){return n*l0},xa=function(n){var t=new Bb,e=di.internal.getHeight(n)||0,i=di.internal.getWidth(n)||0;return t.BBox=[0,0,Number(Bi(i)),Number(Bi(e))],t},NS=Gn.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},BS=Gn.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},OS=Gn.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<t)==0?0:1},ts=Gn.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return OS(n,t-1)},es=Gn.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return NS(n,t-1)},is=Gn.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return BS(n,t-1)},VS=Gn.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,s=n[0],a=n[1],h=n[2],u=n[3],m={};return m.lowerLeft_X=e(s)||0,m.lowerLeft_Y=i(a+u)||0,m.upperRight_X=e(s+h)||0,m.upperRight_Y=i(a)||0,[Number(Bi(m.lowerLeft_X)),Number(Bi(m.lowerLeft_Y)),Number(Bi(m.upperRight_X)),Number(Bi(m.upperRight_Y))]},zS=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,i=r0(n,e),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+s+" "+Bi(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=xa(n);return a.scope=n.scope,a.stream=t.join(`
`),a}},r0=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=n.multiline?s.map(function(H){return H.split(`
`)}):s.map(function(H){return[H]});var a=e,h=di.internal.getHeight(n)||0;h=h<0?-h:h;var u=di.internal.getWidth(n)||0;u=u<0?-u:u;var m=function(H,$,ct){if(H+1<s.length){var yt=$+" "+s[H+1][0];return $u(yt,n,ct).width<=u-4}return!1};a++;t:for(;a>0;){t="",a--;var p,v,T=$u("3",n,a).height,C=n.multiline?h-a:(h-T)/2,y=C+=2,F=0,O=0,R=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+$u(t,n,a=12).width+", FieldWidth:"+u+`
`;break}for(var A="",Z=0,J=0;J<s.length;J++)if(s.hasOwnProperty(J)){var nt=!1;if(s[J].length!==1&&R!==s[J].length-1){if((T+2)*(Z+2)+2>h)continue t;A+=s[J][R],nt=!0,O=J,J--}else{A=(A+=s[J][R]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var pt=parseInt(J),St=m(pt,A,a),at=J>=s.length-1;if(St&&!at){A+=" ",R=0;continue}if(St||at){if(at)O=pt;else if(n.multiline&&(T+2)*(Z+2)+2>h)continue t}else{if(!n.multiline||(T+2)*(Z+2)+2>h)continue t;O=pt}}for(var ot="",Q=F;Q<=O;Q++){var tt=s[Q];if(n.multiline){if(Q===O){ot+=tt[R]+" ",R=(R+1)%tt.length;continue}if(Q===F){ot+=tt[tt.length-1]+" ";continue}}ot+=tt[0]+" "}switch(ot=ot.substr(ot.length-1)==" "?ot.substr(0,ot.length-1):ot,v=$u(ot,n,a).width,n.textAlign){case"right":p=u-v-2;break;case"center":p=(u-v)/2;break;case"left":default:p=2}t+=Bi(p)+" "+Bi(y)+` Td
`,t+="("+Tl(ot)+`) Tj
`,t+=-Bi(p)+` 0 Td
`,y=-(a+2),v=0,F=nt?O:O+1,Z++,A=""}break}return i.text=t,i.fontSize=a,i},$u=function(n,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:s}},US={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},WS=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},HS=function(n,t){for(var e in n)if(n.hasOwnProperty(e)){var i=e,s=n[e];t.internal.newObjectDeferredBegin(s.objId,!0),yn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[i]}},XS=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Qr.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(US)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");l0=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Ob,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];a.objId=void 0,a.hasAnnotation&&WS(a,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,s){var a=!i;for(var h in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(h)){var u=i[h],m=[],p=u.Rect;if(u.Rect&&(u.Rect=VS(u.Rect,s)),s.internal.newObjectDeferredBegin(u.objId,!0),u.DA=di.createDefaultAppearanceStream(u),yn(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(m=u.getKeyValueListForStream()),u.Rect=p,u.hasAppearanceStream&&!u.appearanceStreamContent){var v=zS(u);m.push({key:"AP",value:"<</N "+v+">>"}),s.internal.acroformPlugin.xForms.push(v)}if(u.appearanceStreamContent){var T="";for(var C in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(C)){var y=u.appearanceStreamContent[C];if(T+="/"+C+" ",T+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var h in y)if(y.hasOwnProperty(h)){var F=y[h];typeof F=="function"&&(F=F.call(s,u)),T+="/"+h+" "+F+" ",s.internal.acroformPlugin.xForms.indexOf(F)>=0||s.internal.acroformPlugin.xForms.push(F)}}else typeof(F=y)=="function"&&(F=F.call(s,u)),T+="/"+h+" "+F,s.internal.acroformPlugin.xForms.indexOf(F)>=0||s.internal.acroformPlugin.xForms.push(F);T+=">>"}m.push({key:"AP",value:`<<
`+T+">>"})}s.internal.putStream({additionalKeyValues:m,objectId:u.objId}),s.internal.out("endobj")}a&&HS(s.internal.acroformPlugin.xForms,s)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},Nb=Gn.__acroform__.arrayToPdfArray=function(n,t,e){var i=function(h){return h};if(Array.isArray(n)){for(var s="[",a=0;a<n.length;a++)switch(a!==0&&(s+=" "),yn(n[a])){case"boolean":case"number":case"object":s+=n[a].toString();break;case"string":n[a].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),s+="("+Tl(i(n[a].toString()))+")"):s+=n[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Qg=function(n,t,e){var i=function(s){return s};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(n=n||"").toString(),n="("+Tl(i(n))+")"},va=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};va.prototype.toString=function(){return this.objId+" 0 R"},va.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},va.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],s=this[i];s&&(Array.isArray(s)?n.push({key:i,value:Nb(s,this.objId,this.scope)}):s instanceof va?(s.scope=this.scope,n.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:i,value:s}))}return n};var Bb=function(){va.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};ar(Bb,va);var Ob=function(){va.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Tl(e(n))+")"}},set:function(e){n=e}})};ar(Ob,va);var Qr=function n(){va.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');t=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ts(t,3)},set:function(A){A?this.F=es(t,3):this.F=is(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');e=A}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(A){i=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(A){i[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(A){i[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(A){i[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(A){i[3]=A}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof rp)return;a="FieldObject"+n.FieldNum++}var A=function(Z){return Z};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Tl(A(a))+")"},set:function(A){a=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(A){a=A}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(A){h=A}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(A){m=A}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/l0:p},set:function(A){p=A}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(A){v=A}});var T="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!T||this instanceof rp||this instanceof Ml))return Qg(T,this.objId,this.scope)},set:function(A){A=A.toString(),T=A}});var C=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof _s?C:Qg(C,this.objId,this.scope)},set:function(A){A=A.toString(),C=this instanceof _s?A:A.substr(0,1)==="("?Eh(A.substr(1,A.length-2)):Eh(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _s?Eh(C.substr(1,C.length-1)):C},set:function(A){A=A.toString(),C=this instanceof _s?"/"+A:A}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof _s?y:Qg(y,this.objId,this.scope)},set:function(A){A=A.toString(),y=this instanceof _s?A:A.substr(0,1)==="("?Eh(A.substr(1,A.length-2)):Eh(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _s?Eh(y.substr(1,y.length-1)):y},set:function(A){A=A.toString(),y=this instanceof _s?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var F,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(A){A=!!A,O=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(F)return F},set:function(A){F=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,1)},set:function(A){A?this.Ff=es(this.Ff,1):this.Ff=is(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,2)},set:function(A){A?this.Ff=es(this.Ff,2):this.Ff=is(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,3)},set:function(A){A?this.Ff=es(this.Ff,3):this.Ff=is(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');R=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(R){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};ar(Qr,va);var Rh=function(){Qr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Nb(t,this.objId,this.scope)},set:function(e){var i,s;s=[],typeof(i=e)=="string"&&(s=function(a,h,u){u||(u=1);for(var m,p=[];m=h.exec(a);)p.push(m[u]);return p}(i,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,18)},set:function(e){e?this.Ff=es(this.Ff,18):this.Ff=is(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=es(this.Ff,19):this.Ff=is(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,20)},set:function(e){e?(this.Ff=es(this.Ff,20),t.sort()):this.Ff=is(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,22)},set:function(e){e?this.Ff=es(this.Ff,22):this.Ff=is(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,23)},set:function(e){e?this.Ff=es(this.Ff,23):this.Ff=is(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,27)},set:function(e){e?this.Ff=es(this.Ff,27):this.Ff=is(this.Ff,27)}}),this.hasAppearanceStream=!1};ar(Rh,Qr);var Fh=function(){Rh.call(this),this.fontName="helvetica",this.combo=!1};ar(Fh,Rh);var Nh=function(){Fh.call(this),this.combo=!0};ar(Nh,Fh);var tp=function(){Nh.call(this),this.edit=!0};ar(tp,Nh);var _s=function(){Qr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,15)},set:function(e){e?this.Ff=es(this.Ff,15):this.Ff=is(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,16)},set:function(e){e?this.Ff=es(this.Ff,16):this.Ff=is(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,17)},set:function(e){e?this.Ff=es(this.Ff,17):this.Ff=is(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,26)},set:function(e){e?this.Ff=es(this.Ff,26):this.Ff=is(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(a){return a};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,s=[];for(i in s.push("<<"),t)s.push("/"+i+" ("+Tl(e(t[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(e){yn(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};ar(_s,Qr);var ep=function(){_s.call(this),this.pushButton=!0};ar(ep,_s);var Bh=function(){_s.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};ar(Bh,_s);var rp=function(){var n,t;Qr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(u){return u};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,h=[];for(a in h.push("<<"),i)h.push("/"+a+" ("+Tl(s(i[a]))+")");return h.push(">>"),h.join(`
`)},set:function(s){yn(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(s){e="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=di.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ar(rp,Qr),Bh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},Bh.prototype.createOption=function(n){var t=new rp;return t.Parent=this,t.optionName=n,this.Kids.push(t),jS.call(this.scope,t),t};var ip=function(){_s.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=di.CheckBox.createAppearanceStream()};ar(ip,_s);var Ml=function(){Qr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,13)},set:function(t){t?this.Ff=es(this.Ff,13):this.Ff=is(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,21)},set:function(t){t?this.Ff=es(this.Ff,21):this.Ff=is(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,23)},set:function(t){t?this.Ff=es(this.Ff,23):this.Ff=is(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,24)},set:function(t){t?this.Ff=es(this.Ff,24):this.Ff=is(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,25)},set:function(t){t?this.Ff=es(this.Ff,25):this.Ff=is(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,26)},set:function(t){t?this.Ff=es(this.Ff,26):this.Ff=is(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ar(Ml,Qr);var np=function(){Ml.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,14)},set:function(n){n?this.Ff=es(this.Ff,14):this.Ff=is(this.Ff,14)}}),this.password=!0};ar(np,Ml);var di={CheckBox:{createAppearanceStream:function(){return{N:{On:di.CheckBox.YesNormal},D:{On:di.CheckBox.YesPushDown,Off:di.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=xa(n);t.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=r0(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+Bi(di.internal.getWidth(n))+" "+Bi(di.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+Bi(a.fontSize)+" Tf "+s),e.push("BT"),e.push(a.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=xa(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=[],a=di.internal.getHeight(n),h=di.internal.getWidth(n),u=r0(n,n.caption);return s.push("1 g"),s.push("0 0 "+Bi(h)+" "+Bi(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Bi(h-1)+" "+Bi(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+e+" "+Bi(u.fontSize)+" Tf "+i),s.push(u.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(n){var t=xa(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Bi(di.internal.getWidth(n))+" "+Bi(di.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:di.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=di.RadioButton.Circle.YesNormal,t.D[n]=di.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=xa(n);t.scope=n.scope;var e=[],i=di.internal.getWidth(n)<=di.internal.getHeight(n)?di.internal.getWidth(n)/4:di.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=di.internal.Bezier_C,a=Number((i*s).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+Lo(di.internal.getWidth(n)/2)+" "+Lo(di.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=xa(n);t.scope=n.scope;var e=[],i=di.internal.getWidth(n)<=di.internal.getHeight(n)?di.internal.getWidth(n)/4:di.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),a=Number((s*di.internal.Bezier_C).toFixed(5)),h=Number((i*di.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Lo(di.internal.getWidth(n)/2)+" "+Lo(di.internal.getHeight(n)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),e.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),e.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),e.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+Lo(di.internal.getWidth(n)/2)+" "+Lo(di.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+h+" "+h+" "+i+" 0 "+i+" c"),e.push("-"+h+" "+i+" -"+i+" "+h+" -"+i+" 0 c"),e.push("-"+i+" -"+h+" -"+h+" -"+i+" 0 -"+i+" c"),e.push(h+" -"+i+" "+i+" -"+h+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=xa(n);t.scope=n.scope;var e=[],i=di.internal.getWidth(n)<=di.internal.getHeight(n)?di.internal.getWidth(n)/4:di.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),a=Number((s*di.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+Lo(di.internal.getWidth(n)/2)+" "+Lo(di.internal.getHeight(n)/2)+" cm"),e.push(s+" 0 m"),e.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),e.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),e.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),e.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:di.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=di.RadioButton.Cross.YesNormal,t.D[n]=di.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=xa(n);t.scope=n.scope;var e=[],i=di.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+Bi(di.internal.getWidth(n)-2)+" "+Bi(di.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(Bi(i.x1.x)+" "+Bi(i.x1.y)+" m"),e.push(Bi(i.x2.x)+" "+Bi(i.x2.y)+" l"),e.push(Bi(i.x4.x)+" "+Bi(i.x4.y)+" m"),e.push(Bi(i.x3.x)+" "+Bi(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=xa(n);t.scope=n.scope;var e=di.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+Bi(di.internal.getWidth(n))+" "+Bi(di.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Bi(di.internal.getWidth(n)-2)+" "+Bi(di.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Bi(e.x1.x)+" "+Bi(e.x1.y)+" m"),i.push(Bi(e.x2.x)+" "+Bi(e.x2.y)+" l"),i.push(Bi(e.x4.x)+" "+Bi(e.x4.y)+" m"),i.push(Bi(e.x3.x)+" "+Bi(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=xa(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Bi(di.internal.getWidth(n))+" "+Bi(di.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};di.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=di.internal.getWidth(n),e=di.internal.getHeight(n),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},di.internal.getWidth=function(n){var t=0;return yn(n)==="object"&&(t=bb(n.Rect[2])),t},di.internal.getHeight=function(n){var t=0;return yn(n)==="object"&&(t=bb(n.Rect[3])),t};var jS=Gn.addField=function(n){if(XS(this,n),!(n instanceof Qr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Gn.AcroFormChoiceField=Rh,Gn.AcroFormListBox=Fh,Gn.AcroFormComboBox=Nh,Gn.AcroFormEditBox=tp,Gn.AcroFormButton=_s,Gn.AcroFormPushButton=ep,Gn.AcroFormRadioButton=Bh,Gn.AcroFormCheckBox=ip,Gn.AcroFormTextField=Ml,Gn.AcroFormPasswordField=np,Gn.AcroFormAppearance=di,Gn.AcroForm={ChoiceField:Rh,ListBox:Fh,ComboBox:Nh,EditBox:tp,Button:_s,PushButton:ep,RadioButton:Bh,CheckBox:ip,TextField:Ml,PasswordField:np,Appearance:di},Ei.AcroForm={ChoiceField:Rh,ListBox:Fh,ComboBox:Nh,EditBox:tp,Button:_s,PushButton:ep,RadioButton:Bh,CheckBox:ip,TextField:Ml,PasswordField:np,Appearance:di};var RR=Ei.AcroForm;function Vb(n){return n.reduce(function(t,e,i){return t[e]=i,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(H,$){var ct,yt,Bt,kt,zt,Mt=t;if(($=$||t)==="RGBA"||H.data!==void 0&&H.data instanceof Uint8ClampedArray&&"height"in H&&"width"in H)return"RGBA";if(St(H))for(zt in e)for(Bt=e[zt],ct=0;ct<Bt.length;ct+=1){for(kt=!0,yt=0;yt<Bt[ct].length;yt+=1)if(Bt[ct][yt]!==void 0&&Bt[ct][yt]!==H[yt]){kt=!1;break}if(kt===!0){Mt=zt;break}}else for(zt in e)for(Bt=e[zt],ct=0;ct<Bt.length;ct+=1){for(kt=!0,yt=0;yt<Bt[ct].length;yt+=1)if(Bt[ct][yt]!==void 0&&Bt[ct][yt]!==H.charCodeAt(yt)){kt=!1;break}if(kt===!0){Mt=zt;break}}return Mt===t&&$!==t&&(Mt=$),Mt},s=function H($){for(var ct=this.internal.write,yt=this.internal.putStream,Bt=(0,this.internal.getFilters)();Bt.indexOf("FlateEncode")!==-1;)Bt.splice(Bt.indexOf("FlateEncode"),1);$.objectId=this.internal.newObject();var kt=[];if(kt.push({key:"Type",value:"/XObject"}),kt.push({key:"Subtype",value:"/Image"}),kt.push({key:"Width",value:$.width}),kt.push({key:"Height",value:$.height}),$.colorSpace===R.INDEXED?kt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+($.palette.length/3-1)+" "+("sMask"in $&&$.sMask!==void 0?$.objectId+2:$.objectId+1)+" 0 R]"}):(kt.push({key:"ColorSpace",value:"/"+$.colorSpace}),$.colorSpace===R.DEVICE_CMYK&&kt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),kt.push({key:"BitsPerComponent",value:$.bitsPerComponent}),"decodeParameters"in $&&$.decodeParameters!==void 0&&kt.push({key:"DecodeParms",value:"<<"+$.decodeParameters+">>"}),"transparency"in $&&Array.isArray($.transparency)){for(var zt="",Mt=0,Yt=$.transparency.length;Mt<Yt;Mt++)zt+=$.transparency[Mt]+" "+$.transparency[Mt]+" ";kt.push({key:"Mask",value:"["+zt+"]"})}$.sMask!==void 0&&kt.push({key:"SMask",value:$.objectId+1+" 0 R"});var Zt=$.filter!==void 0?["/"+$.filter]:void 0;if(yt({data:$.data,additionalKeyValues:kt,alreadyAppliedFilters:Zt,objectId:$.objectId}),ct("endobj"),"sMask"in $&&$.sMask!==void 0){var ut="/Predictor "+$.predictor+" /Colors 1 /BitsPerComponent "+$.bitsPerComponent+" /Columns "+$.width,K={width:$.width,height:$.height,colorSpace:"DeviceGray",bitsPerComponent:$.bitsPerComponent,decodeParameters:ut,data:$.sMask};"filter"in $&&(K.filter=$.filter),H.call(this,K)}if($.colorSpace===R.INDEXED){var X=this.internal.newObject();yt({data:ot(new Uint8Array($.palette)),objectId:X}),ct("endobj")}},a=function(){var H=this.internal.collections.addImage_images;for(var $ in H)s.call(this,H[$])},h=function(){var H,$=this.internal.collections.addImage_images,ct=this.internal.write;for(var yt in $)ct("/I"+(H=$[yt]).index,H.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",h))},m=function(){var H=this.internal.collections.addImage_images;return u.call(this),H},p=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(H){return typeof n["process"+H.toUpperCase()]=="function"},T=function(H){return yn(H)==="object"&&H.nodeType===1},C=function(H,$){if(H.nodeName==="IMG"&&H.hasAttribute("src")){var ct=""+H.getAttribute("src");if(ct.indexOf("data:image/")===0)return Zc(unescape(ct).split("base64,").pop());var yt=n.loadFile(ct,!0);if(yt!==void 0)return yt}if(H.nodeName==="CANVAS"){if(H.width===0||H.height===0)throw new Error("Given canvas must have data. Canvas width: "+H.width+", height: "+H.height);var Bt;switch($){case"PNG":Bt="image/png";break;case"WEBP":Bt="image/webp";break;case"JPEG":case"JPG":default:Bt="image/jpeg"}return Zc(H.toDataURL(Bt,1).split("base64,").pop())}},y=function(H){var $=this.internal.collections.addImage_images;if($){for(var ct in $)if(H===$[ct].alias)return $[ct]}},F=function(H,$,ct){return H||$||(H=-96,$=-96),H<0&&(H=-1*ct.width*72/H/this.internal.scaleFactor),$<0&&($=-1*ct.height*72/$/this.internal.scaleFactor),H===0&&(H=$*ct.width/ct.height),$===0&&($=H*ct.height/ct.width),[H,$]},O=function(H,$,ct,yt,Bt,kt){var zt=F.call(this,ct,yt,Bt),Mt=this.internal.getCoordinateString,Yt=this.internal.getVerticalCoordinateString,Zt=m.call(this);if(ct=zt[0],yt=zt[1],Zt[Bt.index]=Bt,kt){kt*=Math.PI/180;var ut=Math.cos(kt),K=Math.sin(kt),X=function(it){return it.toFixed(4)},z=[X(ut),X(K),X(-1*K),X(ut),0,0,"cm"]}this.internal.write("q"),kt?(this.internal.write([1,"0","0",1,Mt(H),Yt($+yt),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([Mt(ct),"0","0",Mt(yt),"0","0","cm"].join(" "))):this.internal.write([Mt(ct),"0","0",Mt(yt),Mt(H),Yt($+yt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Bt.index+" Do"),this.internal.write("Q")},R=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Z=n.__addimage__.sHashCode=function(H){var $,ct,yt=0;if(typeof H=="string")for(ct=H.length,$=0;$<ct;$++)yt=(yt<<5)-yt+H.charCodeAt($),yt|=0;else if(St(H))for(ct=H.byteLength/2,$=0;$<ct;$++)yt=(yt<<5)-yt+H[$],yt|=0;return yt},J=n.__addimage__.validateStringAsBase64=function(H){(H=H||"").toString().trim();var $=!0;return H.length===0&&($=!1),H.length%4!=0&&($=!1),/^[A-Za-z0-9+/]+$/.test(H.substr(0,H.length-2))===!1&&($=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(H.substr(-2))===!1&&($=!1),$},nt=n.__addimage__.extractImageFromDataUrl=function(H){if(H==null||!(H=H.trim()).startsWith("data:"))return null;var $=H.indexOf(",");return $<0?null:H.substring(0,$).trim().endsWith("base64")?H.substring($+1):null},pt=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(H){return pt()&&H instanceof ArrayBuffer};var St=n.__addimage__.isArrayBufferView=function(H){return pt()&&typeof Uint32Array<"u"&&(H instanceof Int8Array||H instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&H instanceof Uint8ClampedArray||H instanceof Int16Array||H instanceof Uint16Array||H instanceof Int32Array||H instanceof Uint32Array||H instanceof Float32Array||H instanceof Float64Array)},at=n.__addimage__.binaryStringToUint8Array=function(H){for(var $=H.length,ct=new Uint8Array($),yt=0;yt<$;yt++)ct[yt]=H.charCodeAt(yt);return ct},ot=n.__addimage__.arrayBufferToBinaryString=function(H){for(var $="",ct=St(H)?H:new Uint8Array(H),yt=0;yt<ct.length;yt+=8192)$+=String.fromCharCode.apply(null,ct.subarray(yt,yt+8192));return $};n.addImage=function(){var H,$,ct,yt,Bt,kt,zt,Mt,Yt;if(typeof arguments[1]=="number"?($=t,ct=arguments[1],yt=arguments[2],Bt=arguments[3],kt=arguments[4],zt=arguments[5],Mt=arguments[6],Yt=arguments[7]):($=arguments[1],ct=arguments[2],yt=arguments[3],Bt=arguments[4],kt=arguments[5],zt=arguments[6],Mt=arguments[7],Yt=arguments[8]),yn(H=arguments[0])==="object"&&!T(H)&&"imageData"in H){var Zt=H;H=Zt.imageData,$=Zt.format||$||t,ct=Zt.x||ct||0,yt=Zt.y||yt||0,Bt=Zt.w||Zt.width||Bt,kt=Zt.h||Zt.height||kt,zt=Zt.alias||zt,Mt=Zt.compression||Mt,Yt=Zt.rotation||Zt.angle||Yt}var ut=this.internal.getFilters();if(Mt===void 0&&ut.indexOf("FlateEncode")!==-1&&(Mt="SLOW"),isNaN(ct)||isNaN(yt))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var K=Q.call(this,H,$,zt,Mt);return O.call(this,ct,yt,Bt,kt,K,Yt),this};var Q=function(H,$,ct,yt){var Bt,kt,zt;if(typeof H=="string"&&i(H)===t){H=unescape(H);var Mt=tt(H,!1);(Mt!==""||(Mt=n.loadFile(H,!0))!==void 0)&&(H=Mt)}if(T(H)&&(H=C(H,$)),$=i(H,$),!v($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(((zt=ct)==null||zt.length===0)&&(ct=function(Yt){return typeof Yt=="string"||St(Yt)?Z(Yt):St(Yt.data)?Z(Yt.data):null}(H)),(Bt=y.call(this,ct))||(pt()&&(H instanceof Uint8Array||$==="RGBA"||(kt=H,H=at(H))),Bt=this["process"+$.toUpperCase()](H,p.call(this),ct,function(Yt){return Yt&&typeof Yt=="string"&&(Yt=Yt.toUpperCase()),Yt in n.image_compression?Yt:A.NONE}(yt),kt)),!Bt)throw new Error("An unknown error occurred whilst processing the image.");return Bt},tt=n.__addimage__.convertBase64ToBinaryString=function(H,$){$=typeof $!="boolean"||$;var ct,yt="";if(typeof H=="string"){var Bt;ct=(Bt=nt(H))!==null&&Bt!==void 0?Bt:H;try{yt=Zc(ct)}catch(kt){if($)throw J(ct)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+kt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return yt};n.getImageProperties=function(H){var $,ct,yt="";if(T(H)&&(H=C(H)),typeof H=="string"&&i(H)===t&&((yt=tt(H,!1))===""&&(yt=n.loadFile(H)||""),H=yt),ct=i(H),!v(ct))throw new Error("addImage does not support files of type '"+ct+"', please ensure that a plugin for '"+ct+"' support is added.");if(!pt()||H instanceof Uint8Array||(H=at(H)),!($=this["process"+ct.toUpperCase()](H)))throw new Error("An unknown error occurred whilst processing the image");return $.fileType=ct,$}})(Ei.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};Ei.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,s,a,h=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(e.objId),p=e.pageContext.annotations,v=!1,T=0;T<p.length&&!v;T++)switch((i=p[T]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var C=0;C<p.length;C++){i=p[C];var y=this.internal.pdfEscape,F=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(O.objId),Z=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+h(i.bounds.x)+" "+u(i.bounds.y+i.bounds.h)+" "+h(i.bounds.x+i.bounds.w)+" "+u(i.bounds.y)+"] ")+"/Contents ("+y(A(i.contents))+")",a+=" /Popup "+R.objId+" 0 R",a+=" /P "+m.objId+" 0 R",a+=" /T ("+y(A(Z))+") >>",O.content=a;var J=O.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+h(i.bounds.x+30)+" "+u(i.bounds.y+i.bounds.h)+" "+h(i.bounds.x+i.bounds.w+30)+" "+u(i.bounds.y)+"] ")+" /Parent "+J,i.open&&(a+=" /Open true"),a+=" >>",R.content=a,this.internal.write(O.objId,"0 R",R.objId,"0 R");break;case"freetext":s="/Rect ["+h(i.bounds.x)+" "+u(i.bounds.y)+" "+h(i.bounds.x+i.bounds.w)+" "+u(i.bounds.y+i.bounds.h)+"] ";var nt=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+y(F(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+nt+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var pt=this.annotations._nameMap[i.options.name];i.options.pageNumber=pt.page,i.options.top=pt.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+y(F(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var St=u(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+St+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,s,a,h){var u=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:m(e),y:p(i),w:m(e+s),h:p(i+a)},options:h,type:"link"})},n.textWithLink=function(e,i,s,a){var h,u,m=this.getTextWidth(e),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){u=a.maxWidth;var v=this.splitTextToSize(e,u).length;h=Math.ceil(p*v)}else u=m,h=p;return this.text(e,i,s,a),s+=.2*p,a.align==="center"&&(i-=m/2),a.align==="right"&&(i-=m),this.link(i,s-p,u,h,a),m},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(Ei.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var a=n.__arabicParser__.isInArabicSubstitutionA=function(O){return t[O.charCodeAt(0)]!==void 0},h=n.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},u=n.__arabicParser__.isArabicEndLetter=function(O){return h(O)&&a(O)&&t[O.charCodeAt(0)].length<=2},m=n.__arabicParser__.isArabicAlfLetter=function(O){return h(O)&&s.indexOf(O.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return h(O)&&a(O)&&t[O.charCodeAt(0)].length>=1};var p=n.__arabicParser__.arabicLetterHasFinalForm=function(O){return h(O)&&a(O)&&t[O.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(O){return h(O)&&a(O)&&t[O.charCodeAt(0)].length>=3};var v=n.__arabicParser__.arabicLetterHasMedialForm=function(O){return h(O)&&a(O)&&t[O.charCodeAt(0)].length==4},T=n.__arabicParser__.resolveLigatures=function(O){var R=0,A=e,Z="",J=0;for(R=0;R<O.length;R+=1)A[O.charCodeAt(R)]!==void 0?(J++,typeof(A=A[O.charCodeAt(R)])=="number"&&(Z+=String.fromCharCode(A),A=e,J=0),R===O.length-1&&(A=e,Z+=O.charAt(R-(J-1)),R-=J-1,J=0)):(A=e,Z+=O.charAt(R-J),R-=J,J=0);return Z};n.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&i[O.charCodeAt(0)]!==void 0};var C=n.__arabicParser__.getCorrectForm=function(O,R,A){return h(O)?a(O)===!1?-1:!p(O)||!h(R)&&!h(A)||!h(A)&&u(R)||u(O)&&!h(R)||u(O)&&m(R)||u(O)&&u(R)?0:v(O)&&h(R)&&!u(R)&&h(A)&&p(A)?3:u(O)||!h(A)?1:2:-1},y=function(O){var R=0,A=0,Z=0,J="",nt="",pt="",St=(O=O||"").split("\\s+"),at=[];for(R=0;R<St.length;R+=1){for(at.push(""),A=0;A<St[R].length;A+=1)J=St[R][A],nt=St[R][A-1],pt=St[R][A+1],h(J)?(Z=C(J,nt,pt),at[R]+=Z!==-1?String.fromCharCode(t[J.charCodeAt(0)][Z]):J):at[R]+=J;at[R]=T(at[R])}return at.join(" ")},F=n.__arabicParser__.processArabic=n.processArabic=function(){var O,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(R)){var Z=0;for(A=[],Z=0;Z<R.length;Z+=1)Array.isArray(R[Z])?A.push([y(R[Z][0]),R[Z][1],R[Z][2]]):A.push([y(R[Z])]);O=A}else O=y(R);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};n.events.push(["preProcessText",F])}(Ei.API),Ei.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(u){e=u}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(u){s=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(u){a=u}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(u){h=u}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var s;if((e=e||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ei.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(O){m=O}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(O){p=O}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(O){v=O}});var T=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return T},set:function(O){T=O}});var C=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return C},set:function(O){C=O}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(O){y=O}});var F=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return F},set:function(O){F=O}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(m){return i.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},n.getTextDimensions=function(m,p){i.call(this);var v=(p=p||{}).fontSize||this.getFontSize(),T=p.font||this.getFont(),C=p.scaleFactor||this.internal.scaleFactor,y=0,F=0,O=0,R=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var A=p.maxWidth;A>0?typeof m=="string"?m=this.splitTextToSize(m,A):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(J,nt){return J.concat(R.splitTextToSize(nt,A))},[])):m=Array.isArray(m)?m:[m];for(var Z=0;Z<m.length;Z++)y<(O=this.getStringUnitWidth(m[Z],{font:T})*v)&&(y=O);return y!==0&&(F=m.length),{w:y/=C,h:Math.max((F*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/C,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var m=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=n.cell=function(){var m;m=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var p=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,T=this.internal.__cell__.margins||t,C=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===m.lineNumber?(m.x=(p.x||0)+(p.width||0),m.y=p.y||0):p.y+p.height+m.height+T.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=T.top,y&&C&&(this.printHeaderRow(m.lineNumber,!0),m.y+=C[0].height)):m.y=p.y+p.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,e===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-v,m.y+v,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+v,{align:"center",baseline:"top",maxWidth:m.width-v-v}):this.text(m.text,m.x+v,m.y+v,{align:"left",baseline:"top",maxWidth:m.width-v-v})),this.internal.__cell__.lastCell=m,this};n.table=function(m,p,v,T,C){if(i.call(this),!v)throw new Error("No data for PDF table.");var y,F,O,R,A=[],Z=[],J=[],nt={},pt={},St=[],at=[],ot=(C=C||{}).autoSize||!1,Q=C.printHeaders!==!1,tt=C.css&&C.css["font-size"]!==void 0?16*C.css["font-size"]:C.fontSize||12,H=C.margins||Object.assign({width:this.getPageWidth()},t),$=typeof C.padding=="number"?C.padding:3,ct=C.headerBackgroundColor||"#c8c8c8",yt=C.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=Q,this.internal.__cell__.margins=H,this.internal.__cell__.table_font_size=tt,this.internal.__cell__.padding=$,this.internal.__cell__.headerBackgroundColor=ct,this.internal.__cell__.headerTextColor=yt,this.setFontSize(tt),T==null)Z=A=Object.keys(v[0]),J=A.map(function(){return"left"});else if(Array.isArray(T)&&yn(T[0])==="object")for(A=T.map(function(Zt){return Zt.name}),Z=T.map(function(Zt){return Zt.prompt||Zt.name||""}),J=T.map(function(Zt){return Zt.align||"left"}),y=0;y<T.length;y+=1)pt[T[y].name]=T[y].width*(19.049976/25.4);else Array.isArray(T)&&typeof T[0]=="string"&&(Z=A=T,J=A.map(function(){return"left"}));if(ot||Array.isArray(T)&&typeof T[0]=="string")for(y=0;y<A.length;y+=1){for(nt[R=A[y]]=v.map(function(Zt){return Zt[R]}),this.setFont(void 0,"bold"),St.push(this.getTextDimensions(Z[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),F=nt[R],this.setFont(void 0,"normal"),O=0;O<F.length;O+=1)St.push(this.getTextDimensions(F[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);pt[R]=Math.max.apply(null,St)+$+$,St=[]}if(Q){var Bt={};for(y=0;y<A.length;y+=1)Bt[A[y]]={},Bt[A[y]].text=Z[y],Bt[A[y]].align=J[y];var kt=u.call(this,Bt,pt);at=A.map(function(Zt){return new a(m,p,pt[Zt],kt,Bt[Zt].text,void 0,Bt[Zt].align)}),this.setTableHeaderRow(at),this.printHeaderRow(1,!1)}var zt=T.reduce(function(Zt,ut){return Zt[ut.name]=ut.align,Zt},{});for(y=0;y<v.length;y+=1){"rowStart"in C&&C.rowStart instanceof Function&&C.rowStart({row:y,data:v[y]},this);var Mt=u.call(this,v[y],pt);for(O=0;O<A.length;O+=1){var Yt=v[y][A[O]];"cellStart"in C&&C.cellStart instanceof Function&&C.cellStart({row:y,col:O,data:Yt},this),h.call(this,new a(m,p,pt[A[O]],Mt,Yt,y+2,zt[A[O]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=p,this};var u=function(m,p){var v=this.internal.__cell__.padding,T=this.internal.__cell__.table_font_size,C=this.internal.scaleFactor;return Object.keys(m).map(function(y){var F=m[y];return this.splitTextToSize(F.hasOwnProperty("text")?F.text:F,p[y]-v-v)},this).map(function(y){return this.getLineHeightFactor()*y.length*T/C+v+v},this).reduce(function(y,F){return Math.max(y,F)},0)};n.setTableHeaderRow=function(m){i.call(this),this.internal.__cell__.tableHeaderRow=m},n.printHeaderRow=function(m,p){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var T=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(T[0],T[1],T[2],T[3],void 0,-1)}this.setFont(void 0,"bold");for(var C=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){v=this.internal.__cell__.tableHeaderRow[y].clone(),p&&(v.y=this.internal.__cell__.margins.top||0,C.push(v)),v.lineNumber=m;var F=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,v),this.setTextColor(F)}C.length>0&&this.setTableHeaderRow(C),this.setFont(void 0,"normal"),e=!1}}(Ei.API);var zb={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ub=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],a0=Vb(Ub),Wb=[100,200,300,400,500,600,700,800,900],YS=Vb(Wb);function o0(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(a){return zb[a=a||"normal"]?a:"normal"}(n.style),i=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(a){return typeof a0[a=a||"normal"]=="number"?a:"normal"}(n.stretch);return{family:t,style:e,weight:i,stretch:s,src:n.src||[],ref:n.ref||{name:t,style:[s,e,i].join(" ")}}}function yb(n,t,e,i){var s;for(s=e;s>=0&&s<t.length;s+=i)if(n[t[s]])return n[t[s]];for(s=e;s>=0&&s<t.length;s-=i)if(n[t[s]])return n[t[s]]}var GS={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Sb(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function qS(n,t,e){for(var i=(e=e||{}).defaultFontFamily||"times",s=Object.assign({},GS,e.genericFontFamilies||{}),a=null,h=null,u=0;u<t.length;++u)if(s[(a=o0(t[u])).family]&&(a.family=s[a.family]),n.hasOwnProperty(a.family)){h=n[a.family];break}if(!(h=h||n[i]))throw new Error("Could not find a font-family for the rule '"+Sb(a)+"' and default family '"+i+"'.");if(h=function(m,p){if(p[m])return p[m];var v=a0[m],T=v<=a0.normal?-1:1,C=yb(p,Ub,v,T);if(!C)throw new Error("Could not find a matching font-stretch value for "+m);return C}(a.stretch,h),h=function(m,p){if(p[m])return p[m];for(var v=zb[m],T=0;T<v.length;++T)if(p[v[T]])return p[v[T]];throw new Error("Could not find a matching font-style for "+m)}(a.style,h),!(h=function(m,p){if(p[m])return p[m];if(m===400&&p[500])return p[500];if(m===500&&p[400])return p[400];var v=YS[m],T=yb(p,Wb,v,m<400?-1:1);if(!T)throw new Error("Could not find a matching font-weight for value "+m);return T}(a.weight,h)))throw new Error("Failed to resolve a font for the rule '"+Sb(a)+"'.");return h}function Mb(n){return n.trimLeft()}function ZS(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function KS(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var Ju,Tb,Cb,t0=["times"];(function(n){var t,e,i,s,a,h,u,m,p,v=function(K){return K=K||{},this.isStrokeTransparent=K.isStrokeTransparent||!1,this.strokeOpacity=K.strokeOpacity||1,this.strokeStyle=K.strokeStyle||"#000000",this.fillStyle=K.fillStyle||"#000000",this.isFillTransparent=K.isFillTransparent||!1,this.fillOpacity=K.fillOpacity||1,this.font=K.font||"10px sans-serif",this.textBaseline=K.textBaseline||"alphabetic",this.textAlign=K.textAlign||"left",this.lineWidth=K.lineWidth||1,this.lineJoin=K.lineJoin||"miter",this.lineCap=K.lineCap||"butt",this.path=K.path||[],this.transform=K.transform!==void 0?K.transform.clone():new m,this.globalCompositeOperation=K.globalCompositeOperation||"normal",this.globalAlpha=K.globalAlpha||1,this.clip_path=K.clip_path||[],this.currentPoint=K.currentPoint||new h,this.miterLimit=K.miterLimit||10,this.lastPoint=K.lastPoint||new h,this.lineDashOffset=K.lineDashOffset||0,this.lineDash=K.lineDash||[],this.margin=K.margin||[0,0,0,0],this.prevPageLastElemOffset=K.prevPageLastElemOffset||0,this.ignoreClearRect=typeof K.ignoreClearRect!="boolean"||K.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new T(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,h=this.internal.Point,u=this.internal.Rectangle,m=this.internal.Matrix,p=new v}]);var T=function(K){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=K;Object.defineProperty(this,"pdf",{get:function(){return X}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(Ut){z=!!Ut}});var it=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return it},set:function(Ut){it=!!Ut}});var mt=0;Object.defineProperty(this,"posX",{get:function(){return mt},set:function(Ut){isNaN(Ut)||(mt=Ut)}});var dt=0;Object.defineProperty(this,"posY",{get:function(){return dt},set:function(Ut){isNaN(Ut)||(dt=Ut)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(Ut){var Ct;typeof Ut=="number"?Ct=[Ut,Ut,Ut,Ut]:((Ct=new Array(4))[0]=Ut[0],Ct[1]=Ut.length>=2?Ut[1]:Ct[0],Ct[2]=Ut.length>=3?Ut[2]:Ct[0],Ct[3]=Ut.length>=4?Ut[3]:Ct[1]),p.margin=Ct}});var Tt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Tt},set:function(Ut){Tt=Ut}});var Dt=0;Object.defineProperty(this,"lastBreak",{get:function(){return Dt},set:function(Ut){Dt=Ut}});var oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return oe},set:function(Ut){oe=Ut}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(Ut){Ut instanceof v&&(p=Ut)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(Ut){p.path=Ut}});var ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return ue},set:function(Ut){ue=Ut}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ut){var Ct;Ct=C(Ut),this.ctx.fillStyle=Ct.style,this.ctx.isFillTransparent=Ct.a===0,this.ctx.fillOpacity=Ct.a,this.pdf.setFillColor(Ct.r,Ct.g,Ct.b,{a:Ct.a}),this.pdf.setTextColor(Ct.r,Ct.g,Ct.b,{a:Ct.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ut){var Ct=C(Ut);this.ctx.strokeStyle=Ct.style,this.ctx.isStrokeTransparent=Ct.a===0,this.ctx.strokeOpacity=Ct.a,Ct.a===0?this.pdf.setDrawColor(255,255,255):(Ct.a,this.pdf.setDrawColor(Ct.r,Ct.g,Ct.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ut){["butt","round","square"].indexOf(Ut)!==-1&&(this.ctx.lineCap=Ut,this.pdf.setLineCap(Ut))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ut){isNaN(Ut)||(this.ctx.lineWidth=Ut,this.pdf.setLineWidth(Ut))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ut){["bevel","round","miter"].indexOf(Ut)!==-1&&(this.ctx.lineJoin=Ut,this.pdf.setLineJoin(Ut))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ut){isNaN(Ut)||(this.ctx.miterLimit=Ut,this.pdf.setMiterLimit(Ut))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ut){this.ctx.textBaseline=Ut}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ut){["right","end","center","left","start"].indexOf(Ut)!==-1&&(this.ctx.textAlign=Ut)}});var pe=null;function we(Ut,Ct){if(pe===null){var Pe=function(Ee){var Ce=[];return Object.keys(Ee).forEach(function(ge){Ee[ge].forEach(function(xt){var et=null;switch(xt){case"bold":et={family:ge,weight:"bold"};break;case"italic":et={family:ge,style:"italic"};break;case"bolditalic":et={family:ge,weight:"bold",style:"italic"};break;case"":case"normal":et={family:ge}}et!==null&&(et.ref={name:ge,style:xt},Ce.push(et))})}),Ce}(Ut.getFontList());pe=function(Ee){for(var Ce={},ge=0;ge<Ee.length;++ge){var xt=o0(Ee[ge]),et=xt.family,qt=xt.stretch,ce=xt.style,xe=xt.weight;Ce[et]=Ce[et]||{},Ce[et][qt]=Ce[et][qt]||{},Ce[et][qt][ce]=Ce[et][qt][ce]||{},Ce[et][qt][ce][xe]=xt}return Ce}(Pe.concat(Ct))}return pe}var At=null;Object.defineProperty(this,"fontFaces",{get:function(){return At},set:function(Ut){pe=null,At=Ut}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ut){var Ct;if(this.ctx.font=Ut,(Ct=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ut))!==null){var Pe=Ct[1];Ct[2];var Ee=Ct[3],Ce=Ct[4];Ct[5];var ge=Ct[6],xt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(xt==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:xt==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var et=function(ke){var Je,ie,Re=[],Oe=ke.trim();if(Oe==="")return t0;if(Oe in wb)return[wb[Oe]];for(;Oe!=="";){switch(ie=null,Je=(Oe=Mb(Oe)).charAt(0)){case'"':case"'":ie=ZS(Oe.substring(1),Je);break;default:ie=KS(Oe)}if(ie===null||(Re.push(ie[0]),(Oe=Mb(ie[1]))!==""&&Oe.charAt(0)!==","))return t0;Oe=Oe.replace(/^,/,"")}return Re}(ge);if(this.fontFaces){var qt=qS(we(this.pdf,this.fontFaces),et.map(function(ke){return{family:ke,stretch:"normal",weight:Ee,style:Pe}}));this.pdf.setFont(qt.ref.name,qt.ref.style)}else{var ce="";(Ee==="bold"||parseInt(Ee,10)>=700||Pe==="bold")&&(ce="bold"),Pe==="italic"&&(ce+="italic"),ce.length===0&&(ce="normal");for(var xe="",ne={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<et.length;We++){if(this.pdf.internal.getFont(et[We],ce,{noFallback:!0,disableWarning:!0})!==void 0){xe=et[We];break}if(ce==="bolditalic"&&this.pdf.internal.getFont(et[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xe=et[We],ce="bold";else if(this.pdf.internal.getFont(et[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xe=et[We],ce="normal";break}}if(xe===""){for(var Ne=0;Ne<et.length;Ne++)if(ne[et[Ne]]){xe=ne[et[Ne]];break}}xe=xe===""?"Times":xe,this.pdf.setFont(xe,ce)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ut){this.ctx.globalCompositeOperation=Ut}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ut){this.ctx.globalAlpha=Ut}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ut){this.ctx.lineDashOffset=Ut,ut.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ut){this.ctx.lineDash=Ut,ut.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ut){this.ctx.ignoreClearRect=!!Ut}})};T.prototype.setLineDash=function(K){this.lineDash=K},T.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},T.prototype.fill=function(){nt.call(this,"fill",!1)},T.prototype.stroke=function(){nt.call(this,"stroke",!1)},T.prototype.beginPath=function(){this.path=[{type:"begin"}]},T.prototype.moveTo=function(K,X){if(isNaN(K)||isNaN(X))throw Cn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new h(K,X));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new h(K,X)},T.prototype.closePath=function(){var K=new h(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&yn(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){K=new h(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(K.x,K.y)},T.prototype.lineTo=function(K,X){if(isNaN(K)||isNaN(X))throw Cn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new h(K,X));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new h(z.x,z.y)},T.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),nt.call(this,null,!0)},T.prototype.quadraticCurveTo=function(K,X,z,it){if(isNaN(z)||isNaN(it)||isNaN(K)||isNaN(X))throw Cn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var mt=this.ctx.transform.applyToPoint(new h(z,it)),dt=this.ctx.transform.applyToPoint(new h(K,X));this.path.push({type:"qct",x1:dt.x,y1:dt.y,x:mt.x,y:mt.y}),this.ctx.lastPoint=new h(mt.x,mt.y)},T.prototype.bezierCurveTo=function(K,X,z,it,mt,dt){if(isNaN(mt)||isNaN(dt)||isNaN(K)||isNaN(X)||isNaN(z)||isNaN(it))throw Cn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Tt=this.ctx.transform.applyToPoint(new h(mt,dt)),Dt=this.ctx.transform.applyToPoint(new h(K,X)),oe=this.ctx.transform.applyToPoint(new h(z,it));this.path.push({type:"bct",x1:Dt.x,y1:Dt.y,x2:oe.x,y2:oe.y,x:Tt.x,y:Tt.y}),this.ctx.lastPoint=new h(Tt.x,Tt.y)},T.prototype.arc=function(K,X,z,it,mt,dt){if(isNaN(K)||isNaN(X)||isNaN(z)||isNaN(it)||isNaN(mt))throw Cn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(dt=!!dt,!this.ctx.transform.isIdentity){var Tt=this.ctx.transform.applyToPoint(new h(K,X));K=Tt.x,X=Tt.y;var Dt=this.ctx.transform.applyToPoint(new h(0,z)),oe=this.ctx.transform.applyToPoint(new h(0,0));z=Math.sqrt(Math.pow(Dt.x-oe.x,2)+Math.pow(Dt.y-oe.y,2))}Math.abs(mt-it)>=2*Math.PI&&(it=0,mt=2*Math.PI),this.path.push({type:"arc",x:K,y:X,radius:z,startAngle:it,endAngle:mt,counterclockwise:dt})},T.prototype.arcTo=function(K,X,z,it,mt){throw new Error("arcTo not implemented.")},T.prototype.rect=function(K,X,z,it){if(isNaN(K)||isNaN(X)||isNaN(z)||isNaN(it))throw Cn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(K,X),this.lineTo(K+z,X),this.lineTo(K+z,X+it),this.lineTo(K,X+it),this.lineTo(K,X),this.lineTo(K+z,X),this.lineTo(K,X)},T.prototype.fillRect=function(K,X,z,it){if(isNaN(K)||isNaN(X)||isNaN(z)||isNaN(it))throw Cn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var mt={};this.lineCap!=="butt"&&(mt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(mt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(K,X,z,it),this.fill(),mt.hasOwnProperty("lineCap")&&(this.lineCap=mt.lineCap),mt.hasOwnProperty("lineJoin")&&(this.lineJoin=mt.lineJoin)}},T.prototype.strokeRect=function(K,X,z,it){if(isNaN(K)||isNaN(X)||isNaN(z)||isNaN(it))throw Cn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");F.call(this)||(this.beginPath(),this.rect(K,X,z,it),this.stroke())},T.prototype.clearRect=function(K,X,z,it){if(isNaN(K)||isNaN(X)||isNaN(z)||isNaN(it))throw Cn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(K,X,z,it))},T.prototype.save=function(K){K=typeof K!="boolean"||K;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),K){this.ctx.fontSize=this.pdf.internal.getFontSize();var it=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=it}},T.prototype.restore=function(K){K=typeof K!="boolean"||K;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(X),K&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},T.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var C=function(K){var X,z,it,mt;if(K.isCanvasGradient===!0&&(K=K.getColor()),!K)return{r:0,g:0,b:0,a:0,style:K};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(K))X=0,z=0,it=0,mt=0;else{var dt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(K);if(dt!==null)X=parseInt(dt[1]),z=parseInt(dt[2]),it=parseInt(dt[3]),mt=1;else if((dt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(K))!==null)X=parseInt(dt[1]),z=parseInt(dt[2]),it=parseInt(dt[3]),mt=parseFloat(dt[4]);else{if(mt=1,typeof K=="string"&&K.charAt(0)!=="#"){var Tt=new Db(K);K=Tt.ok?Tt.toHex():"#000000"}K.length===4?(X=K.substring(1,2),X+=X,z=K.substring(2,3),z+=z,it=K.substring(3,4),it+=it):(X=K.substring(1,3),z=K.substring(3,5),it=K.substring(5,7)),X=parseInt(X,16),z=parseInt(z,16),it=parseInt(it,16)}}return{r:X,g:z,b:it,a:mt,style:K}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},F=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};T.prototype.fillText=function(K,X,z,it){if(isNaN(X)||isNaN(z)||typeof K!="string")throw Cn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(it=isNaN(it)?void 0:it,!y.call(this)){var mt=Mt(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;$.call(this,{text:K,x:X,y:z,scale:dt,angle:mt,align:this.textAlign,maxWidth:it})}},T.prototype.strokeText=function(K,X,z,it){if(isNaN(X)||isNaN(z)||typeof K!="string")throw Cn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!F.call(this)){it=isNaN(it)?void 0:it;var mt=Mt(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;$.call(this,{text:K,x:X,y:z,scale:dt,renderingMode:"stroke",angle:mt,align:this.textAlign,maxWidth:it})}},T.prototype.measureText=function(K){if(typeof K!="string")throw Cn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,z=this.pdf.internal.scaleFactor,it=X.internal.getFontSize(),mt=X.getStringUnitWidth(K)*it/X.internal.scaleFactor,dt=function(Tt){var Dt=(Tt=Tt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Dt}}),this};return new dt({width:mt*=Math.round(96*z/72*1e4)/1e4})},T.prototype.scale=function(K,X){if(isNaN(K)||isNaN(X))throw Cn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new m(K,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},T.prototype.rotate=function(K){if(isNaN(K))throw Cn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new m(Math.cos(K),Math.sin(K),-Math.sin(K),Math.cos(K),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},T.prototype.translate=function(K,X){if(isNaN(K)||isNaN(X))throw Cn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new m(1,0,0,1,K,X);this.ctx.transform=this.ctx.transform.multiply(z)},T.prototype.transform=function(K,X,z,it,mt,dt){if(isNaN(K)||isNaN(X)||isNaN(z)||isNaN(it)||isNaN(mt)||isNaN(dt))throw Cn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Tt=new m(K,X,z,it,mt,dt);this.ctx.transform=this.ctx.transform.multiply(Tt)},T.prototype.setTransform=function(K,X,z,it,mt,dt){K=isNaN(K)?1:K,X=isNaN(X)?0:X,z=isNaN(z)?0:z,it=isNaN(it)?1:it,mt=isNaN(mt)?0:mt,dt=isNaN(dt)?0:dt,this.ctx.transform=new m(K,X,z,it,mt,dt)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};T.prototype.drawImage=function(K,X,z,it,mt,dt,Tt,Dt,oe){var ue=this.pdf.getImageProperties(K),pe=1,we=1,At=1,Ut=1;it!==void 0&&Dt!==void 0&&(At=Dt/it,Ut=oe/mt,pe=ue.width/it*Dt/it,we=ue.height/mt*oe/mt),dt===void 0&&(dt=X,Tt=z,X=0,z=0),it!==void 0&&Dt===void 0&&(Dt=it,oe=mt),it===void 0&&Dt===void 0&&(Dt=ue.width,oe=ue.height);for(var Ct,Pe=this.ctx.transform.decompose(),Ee=Mt(Pe.rotate.shx),Ce=new m,ge=(Ce=(Ce=(Ce=Ce.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale)).applyToRectangle(new u(dt-X*At,Tt-z*Ut,it*pe,mt*we)),xt=R.call(this,ge),et=[],qt=0;qt<xt.length;qt+=1)et.indexOf(xt[qt])===-1&&et.push(xt[qt]);if(J(et),this.autoPaging)for(var ce=et[0],xe=et[et.length-1],ne=ce;ne<xe+1;ne++){this.pdf.setPage(ne);var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ne=ne===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ie=ne===1?0:ke+(ne-2)*Je;if(this.ctx.clip_path.length!==0){var Re=this.path;Ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(Ct,this.posX+this.margin[3],-ie+Ne+this.ctx.prevPageLastElemOffset),pt.call(this,"fill",!0),this.path=Re}var Oe=JSON.parse(JSON.stringify(ge));Oe=Z([Oe],this.posX+this.margin[3],-ie+Ne+this.ctx.prevPageLastElemOffset)[0];var fi=(ne>ce||ne<xe)&&O.call(this);fi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,Je,null).clip().discardPath()),this.pdf.addImage(K,"JPEG",Oe.x,Oe.y,Oe.w,Oe.h,null,null,Ee),fi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(K,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,Ee)};var R=function(K,X,z){var it=[];X=X||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var mt=this.posY+this.ctx.prevPageLastElemOffset;switch(K.type){default:case"mt":case"lt":it.push(Math.floor((K.y+mt)/z)+1);break;case"arc":it.push(Math.floor((K.y+mt-K.radius)/z)+1),it.push(Math.floor((K.y+mt+K.radius)/z)+1);break;case"qct":var dt=Yt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,K.x1,K.y1,K.x,K.y);it.push(Math.floor((dt.y+mt)/z)+1),it.push(Math.floor((dt.y+dt.h+mt)/z)+1);break;case"bct":var Tt=Zt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,K.x1,K.y1,K.x2,K.y2,K.x,K.y);it.push(Math.floor((Tt.y+mt)/z)+1),it.push(Math.floor((Tt.y+Tt.h+mt)/z)+1);break;case"rect":it.push(Math.floor((K.y+mt)/z)+1),it.push(Math.floor((K.y+K.h+mt)/z)+1)}for(var Dt=0;Dt<it.length;Dt+=1)for(;this.pdf.internal.getNumberOfPages()<it[Dt];)A.call(this);return it},A=function(){var K=this.fillStyle,X=this.strokeStyle,z=this.font,it=this.lineCap,mt=this.lineWidth,dt=this.lineJoin;this.pdf.addPage(),this.fillStyle=K,this.strokeStyle=X,this.font=z,this.lineCap=it,this.lineWidth=mt,this.lineJoin=dt},Z=function(K,X,z){for(var it=0;it<K.length;it++)switch(K[it].type){case"bct":K[it].x2+=X,K[it].y2+=z;case"qct":K[it].x1+=X,K[it].y1+=z;case"mt":case"lt":case"arc":default:K[it].x+=X,K[it].y+=z}return K},J=function(K){return K.sort(function(X,z){return X-z})},nt=function(K,X){for(var z,it,mt=this.fillStyle,dt=this.strokeStyle,Tt=this.lineCap,Dt=this.lineWidth,oe=Math.abs(Dt*this.ctx.transform.scaleX),ue=this.lineJoin,pe=JSON.parse(JSON.stringify(this.path)),we=JSON.parse(JSON.stringify(this.path)),At=[],Ut=0;Ut<we.length;Ut++)if(we[Ut].x!==void 0)for(var Ct=R.call(this,we[Ut]),Pe=0;Pe<Ct.length;Pe+=1)At.indexOf(Ct[Pe])===-1&&At.push(Ct[Pe]);for(var Ee=0;Ee<At.length;Ee++)for(;this.pdf.internal.getNumberOfPages()<At[Ee];)A.call(this);if(J(At),this.autoPaging)for(var Ce=At[0],ge=At[At.length-1],xt=Ce;xt<ge+1;xt++){this.pdf.setPage(xt),this.fillStyle=mt,this.strokeStyle=dt,this.lineCap=Tt,this.lineWidth=oe,this.lineJoin=ue;var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qt=xt===1?this.posY+this.margin[0]:this.margin[0],ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ne=xt===1?0:ce+(xt-2)*xe;if(this.ctx.clip_path.length!==0){var We=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(z,this.posX+this.margin[3],-ne+qt+this.ctx.prevPageLastElemOffset),pt.call(this,K,!0),this.path=We}if(it=JSON.parse(JSON.stringify(pe)),this.path=Z(it,this.posX+this.margin[3],-ne+qt+this.ctx.prevPageLastElemOffset),X===!1||xt===0){var Ne=(xt>Ce||xt<ge)&&O.call(this);Ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,xe,null).clip().discardPath()),pt.call(this,K,X),Ne&&this.pdf.restoreGraphicsState()}this.lineWidth=Dt}else this.lineWidth=oe,pt.call(this,K,X),this.lineWidth=Dt;this.path=pe},pt=function(K,X){if((K!=="stroke"||X||!F.call(this))&&(K==="stroke"||X||!y.call(this))){for(var z,it,mt=[],dt=this.path,Tt=0;Tt<dt.length;Tt++){var Dt=dt[Tt];switch(Dt.type){case"begin":mt.push({begin:!0});break;case"close":mt.push({close:!0});break;case"mt":mt.push({start:Dt,deltas:[],abs:[]});break;case"lt":var oe=mt.length;if(dt[Tt-1]&&!isNaN(dt[Tt-1].x)&&(z=[Dt.x-dt[Tt-1].x,Dt.y-dt[Tt-1].y],oe>0)){for(;oe>=0;oe--)if(mt[oe-1].close!==!0&&mt[oe-1].begin!==!0){mt[oe-1].deltas.push(z),mt[oe-1].abs.push(Dt);break}}break;case"bct":z=[Dt.x1-dt[Tt-1].x,Dt.y1-dt[Tt-1].y,Dt.x2-dt[Tt-1].x,Dt.y2-dt[Tt-1].y,Dt.x-dt[Tt-1].x,Dt.y-dt[Tt-1].y],mt[mt.length-1].deltas.push(z);break;case"qct":var ue=dt[Tt-1].x+2/3*(Dt.x1-dt[Tt-1].x),pe=dt[Tt-1].y+2/3*(Dt.y1-dt[Tt-1].y),we=Dt.x+2/3*(Dt.x1-Dt.x),At=Dt.y+2/3*(Dt.y1-Dt.y),Ut=Dt.x,Ct=Dt.y;z=[ue-dt[Tt-1].x,pe-dt[Tt-1].y,we-dt[Tt-1].x,At-dt[Tt-1].y,Ut-dt[Tt-1].x,Ct-dt[Tt-1].y],mt[mt.length-1].deltas.push(z);break;case"arc":mt.push({deltas:[],abs:[],arc:!0}),Array.isArray(mt[mt.length-1].abs)&&mt[mt.length-1].abs.push(Dt)}}it=X?null:K==="stroke"?"stroke":"fill";for(var Pe=!1,Ee=0;Ee<mt.length;Ee++)if(mt[Ee].arc)for(var Ce=mt[Ee].abs,ge=0;ge<Ce.length;ge++){var xt=Ce[ge];xt.type==="arc"?ot.call(this,xt.x,xt.y,xt.radius,xt.startAngle,xt.endAngle,xt.counterclockwise,void 0,X,!Pe):ct.call(this,xt.x,xt.y),Pe=!0}else if(mt[Ee].close===!0)this.pdf.internal.out("h"),Pe=!1;else if(mt[Ee].begin!==!0){var et=mt[Ee].start.x,qt=mt[Ee].start.y;yt.call(this,mt[Ee].deltas,et,qt),Pe=!0}it&&Q.call(this,it),X&&tt.call(this)}},St=function(K){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return K-z;case"top":return K+X-z;case"hanging":return K+X-2*z;case"middle":return K+X/2-z;case"ideographic":return K;case"alphabetic":default:return K}},at=function(K){return K+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};T.prototype.createLinearGradient=function(){var K=function(){};return K.colorStops=[],K.addColorStop=function(X,z){this.colorStops.push([X,z])},K.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},K.isCanvasGradient=!0,K},T.prototype.createPattern=function(){return this.createLinearGradient()},T.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ot=function(K,X,z,it,mt,dt,Tt,Dt,oe){for(var ue=kt.call(this,z,it,mt,dt),pe=0;pe<ue.length;pe++){var we=ue[pe];pe===0&&(oe?H.call(this,we.x1+K,we.y1+X):ct.call(this,we.x1+K,we.y1+X)),Bt.call(this,K,X,we.x2,we.y2,we.x3,we.y3,we.x4,we.y4)}Dt?tt.call(this):Q.call(this,Tt)},Q=function(K){switch(K){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},tt=function(){this.pdf.clip(),this.pdf.discardPath()},H=function(K,X){this.pdf.internal.out(e(K)+" "+i(X)+" m")},$=function(K){var X;switch(K.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var z=this.pdf.getTextDimensions(K.text),it=St.call(this,K.y),mt=at.call(this,it)-z.h,dt=this.ctx.transform.applyToPoint(new h(K.x,it)),Tt=this.ctx.transform.decompose(),Dt=new m;Dt=(Dt=(Dt=Dt.multiply(Tt.translate)).multiply(Tt.skew)).multiply(Tt.scale);for(var oe,ue,pe,we=this.ctx.transform.applyToRectangle(new u(K.x,it,z.w,z.h)),At=Dt.applyToRectangle(new u(K.x,mt,z.w,z.h)),Ut=R.call(this,At),Ct=[],Pe=0;Pe<Ut.length;Pe+=1)Ct.indexOf(Ut[Pe])===-1&&Ct.push(Ut[Pe]);if(J(Ct),this.autoPaging)for(var Ee=Ct[0],Ce=Ct[Ct.length-1],ge=Ee;ge<Ce+1;ge++){this.pdf.setPage(ge);var xt=ge===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[2],ce=qt-this.margin[0],xe=this.pdf.internal.pageSize.width-this.margin[1],ne=xe-this.margin[3],We=ge===1?0:et+(ge-2)*ce;if(this.ctx.clip_path.length!==0){var Ne=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(oe,this.posX+this.margin[3],-1*We+xt),pt.call(this,"fill",!0),this.path=Ne}var ke=Z([JSON.parse(JSON.stringify(At))],this.posX+this.margin[3],-We+xt+this.ctx.prevPageLastElemOffset)[0];K.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*K.scale),pe=this.lineWidth,this.lineWidth=pe*K.scale);var Je=this.autoPaging!=="text";if(Je||ke.y+ke.h<=qt){if(Je||ke.y>=xt&&ke.x<=xe){var ie=Je?K.text:this.pdf.splitTextToSize(K.text,K.maxWidth||xe-ke.x)[0],Re=Z([JSON.parse(JSON.stringify(we))],this.posX+this.margin[3],-We+xt+this.ctx.prevPageLastElemOffset)[0],Oe=Je&&(ge>Ee||ge<Ce)&&O.call(this);Oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ne,ce,null).clip().discardPath()),this.pdf.text(ie,Re.x,Re.y,{angle:K.angle,align:X,renderingMode:K.renderingMode}),Oe&&this.pdf.restoreGraphicsState()}}else ke.y<qt&&(this.ctx.prevPageLastElemOffset+=qt-ke.y);K.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=pe)}else K.scale>=.01&&(ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ue*K.scale),pe=this.lineWidth,this.lineWidth=pe*K.scale),this.pdf.text(K.text,dt.x+this.posX,dt.y+this.posY,{angle:K.angle,align:X,renderingMode:K.renderingMode,maxWidth:K.maxWidth}),K.scale>=.01&&(this.pdf.setFontSize(ue),this.lineWidth=pe)},ct=function(K,X,z,it){z=z||0,it=it||0,this.pdf.internal.out(e(K+z)+" "+i(X+it)+" l")},yt=function(K,X,z){return this.pdf.lines(K,X,z,null,null)},Bt=function(K,X,z,it,mt,dt,Tt,Dt){this.pdf.internal.out([t(s(z+K)),t(a(it+X)),t(s(mt+K)),t(a(dt+X)),t(s(Tt+K)),t(a(Dt+X)),"c"].join(" "))},kt=function(K,X,z,it){for(var mt=2*Math.PI,dt=Math.PI/2;X>z;)X-=mt;var Tt=Math.abs(z-X);Tt<mt&&it&&(Tt=mt-Tt);for(var Dt=[],oe=it?-1:1,ue=X;Tt>1e-5;){var pe=ue+oe*Math.min(Tt,dt);Dt.push(zt.call(this,K,ue,pe)),Tt-=Math.abs(pe-ue),ue=pe}return Dt},zt=function(K,X,z){var it=(z-X)/2,mt=K*Math.cos(it),dt=K*Math.sin(it),Tt=mt,Dt=-dt,oe=Tt*Tt+Dt*Dt,ue=oe+Tt*mt+Dt*dt,pe=4/3*(Math.sqrt(2*oe*ue)-ue)/(Tt*dt-Dt*mt),we=Tt-pe*Dt,At=Dt+pe*Tt,Ut=we,Ct=-At,Pe=it+X,Ee=Math.cos(Pe),Ce=Math.sin(Pe);return{x1:K*Math.cos(X),y1:K*Math.sin(X),x2:we*Ee-At*Ce,y2:we*Ce+At*Ee,x3:Ut*Ee-Ct*Ce,y3:Ut*Ce+Ct*Ee,x4:K*Math.cos(z),y4:K*Math.sin(z)}},Mt=function(K){return 180*K/Math.PI},Yt=function(K,X,z,it,mt,dt){var Tt=K+.5*(z-K),Dt=X+.5*(it-X),oe=mt+.5*(z-mt),ue=dt+.5*(it-dt),pe=Math.min(K,mt,Tt,oe),we=Math.max(K,mt,Tt,oe),At=Math.min(X,dt,Dt,ue),Ut=Math.max(X,dt,Dt,ue);return new u(pe,At,we-pe,Ut-At)},Zt=function(K,X,z,it,mt,dt,Tt,Dt){var oe,ue,pe,we,At,Ut,Ct,Pe,Ee,Ce,ge,xt,et,qt,ce=z-K,xe=it-X,ne=mt-z,We=dt-it,Ne=Tt-mt,ke=Dt-dt;for(ue=0;ue<41;ue++)Ee=(Ct=(pe=K+(oe=ue/40)*ce)+oe*((At=z+oe*ne)-pe))+oe*(At+oe*(mt+oe*Ne-At)-Ct),Ce=(Pe=(we=X+oe*xe)+oe*((Ut=it+oe*We)-we))+oe*(Ut+oe*(dt+oe*ke-Ut)-Pe),ue==0?(ge=Ee,xt=Ce,et=Ee,qt=Ce):(ge=Math.min(ge,Ee),xt=Math.min(xt,Ce),et=Math.max(et,Ee),qt=Math.max(qt,Ce));return new u(Math.round(ge),Math.round(xt),Math.round(et-ge),Math.round(qt-xt))},ut=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var K,X,z=(K=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:K,lineDashOffset:X}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(Ei.API),function(n){var t=function(a){var h,u,m,p,v,T,C,y,F,O;for(/[^\x00-\xFF]/.test(a),u=[],m=0,p=(a+=h="\0\0\0\0".slice(a.length%4||4)).length;p>m;m+=4)(v=(a.charCodeAt(m)<<24)+(a.charCodeAt(m+1)<<16)+(a.charCodeAt(m+2)<<8)+a.charCodeAt(m+3))!==0?(T=(v=((v=((v=((v=(v-(O=v%85))/85)-(F=v%85))/85)-(y=v%85))/85)-(C=v%85))/85)%85,u.push(T+33,C+33,y+33,F+33,O+33)):u.push(122);return function(R,A){for(var Z=A;Z>0;Z--)R.pop()}(u,h.length),String.fromCharCode.apply(String,u)+"~>"},e=function(a){var h,u,m,p,v,T=String,C="length",y=255,F="charCodeAt",O="slice",R="replace";for(a[O](-2),a=a[O](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),m=[],p=0,v=(a+=h="uuuuu"[O](a[C]%5||5))[C];v>p;p+=5)u=52200625*(a[F](p)-33)+614125*(a[F](p+1)-33)+7225*(a[F](p+2)-33)+85*(a[F](p+3)-33)+(a[F](p+4)-33),m.push(y&u>>24,y&u>>16,y&u>>8,y&u);return function(A,Z){for(var J=Z;J>0;J--)A.pop()}(m,h[C]),T.fromCharCode.apply(T,m)},i=function(a){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),h.test(a)===!1)return"";for(var u="",m=0;m<a.length;m+=2)u+=String.fromCharCode("0x"+(a[m]+a[m+1]));return u},s=function(a){for(var h=new Uint8Array(a.length),u=a.length;u--;)h[u]=a.charCodeAt(u);return a=(h=Zu(h)).reduce(function(m,p){return m+String.fromCharCode(p)},"")};n.processDataByFilters=function(a,h){var u=0,m=a||"",p=[];for(typeof(h=h||[])=="string"&&(h=[h]),u=0;u<h.length;u+=1)switch(h[u]){case"ASCII85Decode":case"/ASCII85Decode":m=e(m),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=t(m),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=i(m),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)}).join("")+">",p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=s(m),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[u]+'" is not implemented')}return{data:m,reverseChain:p.reverse().join(" ")}}}(Ei.API),function(n){n.loadFile=function(t,e,i){return function(s,a,h){a=a!==!1,h=typeof h=="function"?h:function(){};var u=void 0;try{u=function(m,p,v){var T=new XMLHttpRequest,C=0,y=function(F){var O=F.length,R=[],A=String.fromCharCode;for(C=0;C<O;C+=1)R.push(A(255&F.charCodeAt(C)));return R.join("")};if(T.open("GET",m,!p),T.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(T.onload=function(){T.status===200?v(y(this.responseText)):v(void 0)}),T.send(null),p&&T.status===200)return y(T.responseText)}(s,a,h)}catch{}return u}(t,e,i)},n.loadImageFile=n.loadFile}(Ei.API),function(n){function t(){return(Di.html2canvas?Promise.resolve(Di.html2canvas):import("./chunk-SS3AZUBG.js")).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function e(){return(Di.DOMPurify?Promise.resolve(Di.DOMPurify):import("./chunk-M7UOSJNN.js")).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var i=function(h){var u=yn(h);return u==="undefined"?"undefined":u==="string"||h instanceof String?"string":u==="number"||h instanceof Number?"number":u==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":u==="object"?"object":"unknown"},s=function(h,u){var m=document.createElement(h);for(var p in u.className&&(m.className=u.className),u.innerHTML&&u.dompurify&&(m.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)m.style[p]=u.style[p];return m},a=function h(u){var m=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),p=h.convert(Promise.resolve(),m);return p=(p=p.setProgress(1,h,1,[h])).set(u)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(h,u){return h.__proto__=u||a.prototype,h},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(h,u){return this.then(function(){switch(u=u||function(m){switch(i(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(e).then(function(m){return this.set({src:s("div",{innerHTML:h,dompurify:m})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},a.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function m(p,v){for(var T=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),C=p.firstChild;C;C=C.nextSibling)v!==!0&&C.nodeType===1&&C.nodeName==="SCRIPT"||T.appendChild(m(C,v));return p.nodeType===1&&(p.nodeName==="CANVAS"?(T.width=p.width,T.height=p.height,T.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(T.value=p.value),T.addEventListener("load",function(){T.scrollTop=p.scrollTop,T.scrollLeft=p.scrollLeft},!0)),T}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(u){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,u(this.prop.container,m)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(u){var m=this.opt.jsPDF,p=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,T=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete T.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=p,p)for(var C=0;C<p.length;++C){var y=p[C],F=y.src.find(function(O){return O.format==="truetype"});F&&m.addFont(F.url,y.ref.name,y.ref.style)}return T.windowHeight=T.windowHeight||0,T.windowHeight=T.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):T.windowHeight,m.context2d.save(!0),u(this.prop.container,T)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(h,u,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(h,u):this.outputPdf(h,u)},a.prototype.outputPdf=function(h,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,u)})},a.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},a.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(h){if(i(h)!=="object")return this;var u=Object.keys(h||{}).map(function(m){if(m in a.template.prop)return function(){this.prop[m]=h[m]};switch(m){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[m]=h[m]}}},this);return this.then(function(){return this.thenList(u)})},a.prototype.get=function(h,u){return this.then(function(){var m=h in a.template.prop?this.prop[h]:this.opt[h];return u?u(m):m})},a.prototype.setMargin=function(h){return this.then(function(){switch(i(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},a.prototype.setPageSize=function(h){function u(m,p){return Math.floor(m*p/72*96)}return this.then(function(){(h=h||Ei.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:u(h.inner.width,h.k),height:u(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},a.prototype.setProgress=function(h,u,m,p){return h!=null&&(this.progress.val=h),u!=null&&(this.progress.state=u),m!=null&&(this.progress.n=m),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(h,u,m,p){return this.setProgress(h?this.progress.val+h:null,u||null,m?this.progress.n+m:null,p?this.progress.stack.concat(p):null)},a.prototype.then=function(h,u){var m=this;return this.thenCore(h,u,function(p,v){return m.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(T){return m.updateProgress(null,p),T}).then(p,v).then(function(T){return m.updateProgress(1),T})})},a.prototype.thenCore=function(h,u,m){m=m||Promise.prototype.then,h&&(h=h.bind(this)),u&&(u=u.bind(this));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),v=m.call(p,h,u);return a.convert(v,this.__proto__)},a.prototype.thenExternal=function(h,u){return Promise.prototype.then.call(this,h,u)},a.prototype.thenList=function(h){var u=this;return h.forEach(function(m){u=u.thenCore(m)}),u},a.prototype.catch=function(h){h&&(h=h.bind(this));var u=Promise.prototype.catch.call(this,h);return a.convert(u,this)},a.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},a.prototype.error=function(h){return this.then(function(){throw new Error(h)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Ei.getPageSize=function(h,u,m){if(yn(h)==="object"){var p=h;h=p.orientation,u=p.unit||u,m=p.format||m}u=u||"mm",m=m||"a4",h=(""+(h||"P")).toLowerCase();var v,T=(""+m).toLowerCase(),C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+u}var y,F=0,O=0;if(C.hasOwnProperty(T))F=C[T][1]/v,O=C[T][0]/v;else try{F=m[1],O=m[0]}catch{throw new Error("Invalid format: "+m)}if(h==="p"||h==="portrait")h="p",O>F&&(y=O,O=F,F=y);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",F>O&&(y=O,O=F,F=y)}return{width:O,height:F,unit:u,k:v,orientation:h}},n.html=function(h,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(o0):null;var m=new a(u);return u.worker?m:m.from(h).doCallback()}}(Ei.API),Ei.API.addJS=function(n){return Cb=n,this.internal.events.subscribe("postPutResources",function(){Ju=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ju+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Tb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Cb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ju!==void 0&&Tb!==void 0&&this.internal.out("/Names <</JavaScript "+Ju+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=e.outline.render().split(/\r\n/),a=0;a<s.length;a++){var h=s[a],u=i.exec(h);if(u!=null){var m=u[1];e.internal.newObjectDeferredBegin(m,!1)}e.internal.write(h)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,v=[];for(a=0;a<p;a++){var T=e.internal.newObject();v.push(T);var C=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+C.objId+" 0 R /XYZ null null null]>> endobj")}var y=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<v.length;a++)e.internal.write("(page_"+(a+1)+")"+v[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+y+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,s,a){var h={title:s,options:a,children:[]};return i==null&&(i=this.root),i.children.push(h),h},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var h=i.children[a];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var u=this.count=this.count_r({count:0},h);if(u>0&&this.line("/Count "+u),h.options&&h.options.pageNumber){var m=e.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var p=0;p<i.children.length;p++)this.renderItems(i.children[p])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,s){for(var a=0;a<s.children.length;a++)i.count++,this.count_r(i,s.children[a]);return i.count}}])}(Ei.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,s,a,h,u){var m,p=this.decode.DCT_DECODE,v=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=h||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(m=function(T){for(var C,y=256*T.charCodeAt(4)+T.charCodeAt(5),F=T.length,O={width:0,height:0,numcomponents:1},R=4;R<F;R+=2){if(R+=y,t.indexOf(T.charCodeAt(R+1))!==-1){C=256*T.charCodeAt(R+5)+T.charCodeAt(R+6),O={width:256*T.charCodeAt(R+7)+T.charCodeAt(R+8),height:C,numcomponents:T.charCodeAt(R+9)};break}y=256*T.charCodeAt(R+2)+T.charCodeAt(R+3)}return O}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}v={data:e,width:m.width,height:m.height,colorSpace:u,bitsPerComponent:8,filter:p,index:i,alias:s}}return v}}(Ei.API);var kh,Qu,Ab,Pb,Eb,$S=function(){var n,t,e;function i(a){var h,u,m,p,v,T,C,y,F,O,R,A,Z,J;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},T=null;;){switch(h=this.readUInt32(),F=function(){var nt,pt;for(pt=[],nt=0;nt<4;++nt)pt.push(String.fromCharCode(this.data[this.pos++]));return pt}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":T&&this.animation.frames.push(T),this.pos+=4,T={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),p=this.readUInt16()||100,T.delay=1e3*v/p,T.disposeOp=this.data[this.pos++],T.blendOp=this.data[this.pos++],T.data=[];break;case"IDAT":case"fdAT":for(F==="fdAT"&&(this.pos+=4,h-=4),a=T?.data||this.imgData,A=0;0<=h?A<h:A>h;0<=h?++A:--A)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((O=m-this.transparency.indexed.length)>0)for(Z=0;0<=O?Z<O:Z>O;0<=O?++Z:--Z)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":C=(R=this.read(h)).indexOf(0),y=String.fromCharCode.apply(String,R.slice(0,C)),this.text[y]=String.fromCharCode.apply(String,R.slice(C+1));break;case"IEND":return T&&this.animation.frames.push(T),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(J=this.colorType)===4||J===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(a){var h,u;for(u=[],h=0;0<=a?h<a:h>a;0<=a?++h:--h)u.push(this.data[this.pos++]);return u},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(a){var h=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*h),m=0,p=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function v(T,C,y,F){var O,R,A,Z,J,nt,pt,St,at,ot,Q,tt,H,$,ct,yt,Bt,kt,zt,Mt,Yt,Zt=Math.ceil((p.width-T)/y),ut=Math.ceil((p.height-C)/F),K=p.width==Zt&&p.height==ut;for($=h*Zt,tt=K?u:new Uint8Array($*ut),nt=a.length,H=0,R=0;H<ut&&m<nt;){switch(a[m++]){case 0:for(Z=Bt=0;Bt<$;Z=Bt+=1)tt[R++]=a[m++];break;case 1:for(Z=kt=0;kt<$;Z=kt+=1)O=a[m++],J=Z<h?0:tt[R-h],tt[R++]=(O+J)%256;break;case 2:for(Z=zt=0;zt<$;Z=zt+=1)O=a[m++],A=(Z-Z%h)/h,ct=H&&tt[(H-1)*$+A*h+Z%h],tt[R++]=(ct+O)%256;break;case 3:for(Z=Mt=0;Mt<$;Z=Mt+=1)O=a[m++],A=(Z-Z%h)/h,J=Z<h?0:tt[R-h],ct=H&&tt[(H-1)*$+A*h+Z%h],tt[R++]=(O+Math.floor((J+ct)/2))%256;break;case 4:for(Z=Yt=0;Yt<$;Z=Yt+=1)O=a[m++],A=(Z-Z%h)/h,J=Z<h?0:tt[R-h],H===0?ct=yt=0:(ct=tt[(H-1)*$+A*h+Z%h],yt=A&&tt[(H-1)*$+(A-1)*h+Z%h]),pt=J+ct-yt,St=Math.abs(pt-J),ot=Math.abs(pt-ct),Q=Math.abs(pt-yt),at=St<=ot&&St<=Q?J:ot<=Q?ct:yt,tt[R++]=(O+at)%256;break;default:throw new Error("Invalid filter algorithm: "+a[m-1])}if(!K){var X=((C+H*F)*p.width+T)*h,z=H*$;for(Z=0;Z<Zt;Z+=1){for(var it=0;it<h;it+=1)u[X++]=tt[z++];X+=(y-1)*h}}H++}}return a=mb(a),p.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),u},i.prototype.decodePalette=function(){var a,h,u,m,p,v,T,C,y;for(u=this.palette,v=this.transparency.indexed||[],p=new Uint8Array((v.length||0)+u.length),m=0,a=0,h=T=0,C=u.length;T<C;h=T+=3)p[m++]=u[h],p[m++]=u[h+1],p[m++]=u[h+2],p[m++]=(y=v[a++])!=null?y:255;return p},i.prototype.copyToImageData=function(a,h){var u,m,p,v,T,C,y,F,O,R,A;if(m=this.colors,O=null,u=this.hasAlphaChannel,this.palette.length&&(O=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),m=4,u=!0),F=(p=a.data||a).length,T=O||h,v=C=0,m===1)for(;v<F;)y=O?4*h[v/4]:C,R=T[y++],p[v++]=R,p[v++]=R,p[v++]=R,p[v++]=u?T[y++]:255,C=y;else for(;v<F;)y=O?4*h[v/4]:C,p[v++]=T[y++],p[v++]=T[y++],p[v++]=T[y++],p[v++]=u?T[y++]:255,C=y},i.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(Di)==="[object Window]"){try{t=Di.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(a){var h;if(s()===!0)return e.width=a.width,e.height=a.height,e.clearRect(0,0,a.width,a.height),e.putImageData(a,0,0),(h=new Image).src=t.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(a){var h,u,m,p,v,T,C,y;if(this.animation){for(y=[],u=v=0,T=(C=this.animation.frames).length;v<T;u=++v)h=C[u],m=a.createImageData(h.width,h.height),p=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(m,p),h.imageData=m,y.push(h.image=n(m));return y}},i.prototype.renderFrame=function(a,h){var u,m,p;return u=(m=this.animation.frames)[h],p=m[h-1],h===0&&a.clearRect(0,0,this.width,this.height),p?.disposeOp===1?a.clearRect(p.xOffset,p.yOffset,p.width,p.height):p?.disposeOp===2&&a.putImageData(p.imageData,p.xOffset,p.yOffset),u.blendOp===0&&a.clearRect(u.xOffset,u.yOffset,u.width,u.height),a.drawImage(u.image,u.xOffset,u.yOffset)},i.prototype.animate=function(a){var h,u,m,p,v,T,C=this;return u=0,T=this.animation,p=T.numFrames,m=T.frames,v=T.numPlays,(h=function(){var y,F;if(y=u++%p,F=m[y],C.renderFrame(a,y),p>1&&u/p<v)return C.animation._timeout=setTimeout(h,F.delay)})()},i.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},i.prototype.render=function(a){var h,u;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,h=a.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(u=h.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),h.putImageData(u,0,0))},i}();function JS(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,s=n[t++],a=s>>7,h=1<<(7&s)+1;n[t++],n[t++];var u=null,m=null;a&&(u=t,m=h,t+=3*h);var p=!0,v=[],T=0,C=null,y=0,F=null;for(this.width=e,this.height=i;p&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,F=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((H=n[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var O=n[t++];T=n[t++]|n[t++]<<8,C=n[t++],(1&O)==0&&(C=null),y=O>>2&7,t++;break;case 254:for(;;){if(!((H=n[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var R=n[t++]|n[t++]<<8,A=n[t++]|n[t++]<<8,Z=n[t++]|n[t++]<<8,J=n[t++]|n[t++]<<8,nt=n[t++],pt=nt>>6&1,St=1<<(7&nt)+1,at=u,ot=m,Q=!1;nt>>7&&(Q=!0,at=t,ot=St,t+=3*St);var tt=t;for(t++;;){var H;if(!((H=n[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}v.push({x:R,y:A,width:Z,height:J,has_local_palette:Q,palette_offset:at,palette_size:ot,data_offset:tt,data_length:t-tt,transparent_index:C,interlaced:!!pt,delay:T,disposal:y});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return F},this.frameInfo=function($){if($<0||$>=v.length)throw new Error("Frame index out of range.");return v[$]},this.decodeAndBlitFrameBGRA=function($,ct){var yt=this.frameInfo($),Bt=yt.width*yt.height,kt=new Uint8Array(Bt);kb(n,yt.data_offset,kt,Bt);var zt=yt.palette_offset,Mt=yt.transparent_index;Mt===null&&(Mt=256);var Yt=yt.width,Zt=e-Yt,ut=Yt,K=4*(yt.y*e+yt.x),X=4*((yt.y+yt.height)*e+yt.x),z=K,it=4*Zt;yt.interlaced===!0&&(it+=4*e*7);for(var mt=8,dt=0,Tt=kt.length;dt<Tt;++dt){var Dt=kt[dt];if(ut===0&&(ut=Yt,(z+=it)>=X&&(it=4*Zt+4*e*(mt-1),z=K+(Yt+Zt)*(mt<<1),mt>>=1)),Dt===Mt)z+=4;else{var oe=n[zt+3*Dt],ue=n[zt+3*Dt+1],pe=n[zt+3*Dt+2];ct[z++]=pe,ct[z++]=ue,ct[z++]=oe,ct[z++]=255}--ut}},this.decodeAndBlitFrameRGBA=function($,ct){var yt=this.frameInfo($),Bt=yt.width*yt.height,kt=new Uint8Array(Bt);kb(n,yt.data_offset,kt,Bt);var zt=yt.palette_offset,Mt=yt.transparent_index;Mt===null&&(Mt=256);var Yt=yt.width,Zt=e-Yt,ut=Yt,K=4*(yt.y*e+yt.x),X=4*((yt.y+yt.height)*e+yt.x),z=K,it=4*Zt;yt.interlaced===!0&&(it+=4*e*7);for(var mt=8,dt=0,Tt=kt.length;dt<Tt;++dt){var Dt=kt[dt];if(ut===0&&(ut=Yt,(z+=it)>=X&&(it=4*Zt+4*e*(mt-1),z=K+(Yt+Zt)*(mt<<1),mt>>=1)),Dt===Mt)z+=4;else{var oe=n[zt+3*Dt],ue=n[zt+3*Dt+1],pe=n[zt+3*Dt+2];ct[z++]=oe,ct[z++]=ue,ct[z++]=pe,ct[z++]=255}--ut}}}function kb(n,t,e,i){for(var s=n[t++],a=1<<s,h=a+1,u=h+1,m=s+1,p=(1<<m)-1,v=0,T=0,C=0,y=n[t++],F=new Int32Array(4096),O=null;;){for(;v<16&&y!==0;)T|=n[t++]<<v,v+=8,y===1?y=n[t++]:--y;if(v<m)break;var R=T&p;if(T>>=m,v-=m,R!==a){if(R===h)break;for(var A=R<u?R:O,Z=0,J=A;J>a;)J=F[J]>>8,++Z;var nt=J;if(C+Z+(A!==R?1:0)>i)return void Cn.log("Warning, gif stream longer than expected.");e[C++]=nt;var pt=C+=Z;for(A!==R&&(e[C++]=nt),J=A;Z--;)J=F[J],e[--pt]=255&J,J>>=8;O!==null&&u<4096&&(F[u++]=O<<8|nt,u>=p+1&&m<12&&(++m,p=p<<1|1)),O=R}else u=h+1,p=(1<<(m=s+1))-1,O=null}return C!==i&&Cn.log("Warning, gif stream shorter than expected."),e}function e0(n){var t,e,i,s,a,h=Math.floor,u=new Array(64),m=new Array(64),p=new Array(64),v=new Array(64),T=new Array(65535),C=new Array(65535),y=new Array(64),F=new Array(64),O=[],R=0,A=7,Z=new Array(64),J=new Array(64),nt=new Array(64),pt=new Array(256),St=new Array(2048),at=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ot=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],tt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],H=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ct=[0,1,2,3,4,5,6,7,8,9,10,11],yt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Bt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function kt(K,X){for(var z=0,it=0,mt=new Array,dt=1;dt<=16;dt++){for(var Tt=1;Tt<=K[dt];Tt++)mt[X[it]]=[],mt[X[it]][0]=z,mt[X[it]][1]=dt,it++,z++;z*=2}return mt}function zt(K){for(var X=K[0],z=K[1]-1;z>=0;)X&1<<z&&(R|=1<<A),z--,--A<0&&(R==255?(Mt(255),Mt(0)):Mt(R),A=7,R=0)}function Mt(K){O.push(K)}function Yt(K){Mt(K>>8&255),Mt(255&K)}function Zt(K,X,z,it,mt){for(var dt,Tt=mt[0],Dt=mt[240],oe=function(Ce,ge){var xt,et,qt,ce,xe,ne,We,Ne,ke,Je,ie=0;for(ke=0;ke<8;++ke){xt=Ce[ie],et=Ce[ie+1],qt=Ce[ie+2],ce=Ce[ie+3],xe=Ce[ie+4],ne=Ce[ie+5],We=Ce[ie+6];var Re=xt+(Ne=Ce[ie+7]),Oe=xt-Ne,fi=et+We,Ye=et-We,ci=qt+ne,B=qt-ne,Y=ce+xe,q=ce-xe,It=Re+Y,Rt=Re-Y,jt=fi+ci,Ot=fi-ci;Ce[ie]=It+jt,Ce[ie+4]=It-jt;var re=.707106781*(Ot+Rt);Ce[ie+2]=Rt+re,Ce[ie+6]=Rt-re;var Ve=.382683433*((It=q+B)-(Ot=Ye+Oe)),ui=.5411961*It+Ve,yi=1.306562965*Ot+Ve,oi=.707106781*(jt=B+Ye),Oi=Oe+oi,ze=Oe-oi;Ce[ie+5]=ze+ui,Ce[ie+3]=ze-ui,Ce[ie+1]=Oi+yi,Ce[ie+7]=Oi-yi,ie+=8}for(ie=0,ke=0;ke<8;++ke){xt=Ce[ie],et=Ce[ie+8],qt=Ce[ie+16],ce=Ce[ie+24],xe=Ce[ie+32],ne=Ce[ie+40],We=Ce[ie+48];var un=xt+(Ne=Ce[ie+56]),on=xt-Ne,Xe=et+We,xi=et-We,r=qt+ne,f=qt-ne,l=ce+xe,o=ce-xe,d=un+l,x=un-l,_=Xe+r,I=Xe-r;Ce[ie]=d+_,Ce[ie+32]=d-_;var N=.707106781*(I+x);Ce[ie+16]=x+N,Ce[ie+48]=x-N;var M=.382683433*((d=o+f)-(I=xi+on)),w=.5411961*d+M,b=1.306562965*I+M,P=.707106781*(_=f+xi),c=on+P,L=on-P;Ce[ie+40]=L+w,Ce[ie+24]=L-w,Ce[ie+8]=c+b,Ce[ie+56]=c-b,ie++}for(ke=0;ke<64;++ke)Je=Ce[ke]*ge[ke],y[ke]=Je>0?Je+.5|0:Je-.5|0;return y}(K,X),ue=0;ue<64;++ue)F[at[ue]]=oe[ue];var pe=F[0]-z;z=F[0],pe==0?zt(it[0]):(zt(it[C[dt=32767+pe]]),zt(T[dt]));for(var we=63;we>0&&F[we]==0;)we--;if(we==0)return zt(Tt),z;for(var At,Ut=1;Ut<=we;){for(var Ct=Ut;F[Ut]==0&&Ut<=we;)++Ut;var Pe=Ut-Ct;if(Pe>=16){At=Pe>>4;for(var Ee=1;Ee<=At;++Ee)zt(Dt);Pe&=15}dt=32767+F[Ut],zt(mt[(Pe<<4)+C[dt]]),zt(T[dt]),Ut++}return we!=63&&zt(Tt),z}function ut(K){K=Math.min(Math.max(K,1),100),a!=K&&(function(X){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],it=0;it<64;it++){var mt=h((z[it]*X+50)/100);mt=Math.min(Math.max(mt,1),255),u[at[it]]=mt}for(var dt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Tt=0;Tt<64;Tt++){var Dt=h((dt[Tt]*X+50)/100);Dt=Math.min(Math.max(Dt,1),255),m[at[Tt]]=Dt}for(var oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ue=0,pe=0;pe<8;pe++)for(var we=0;we<8;we++)p[ue]=1/(u[at[ue]]*oe[pe]*oe[we]*8),v[ue]=1/(m[at[ue]]*oe[pe]*oe[we]*8),ue++}(K<50?Math.floor(5e3/K):Math.floor(200-2*K)),a=K)}this.encode=function(K,X){X&&ut(X),O=new Array,R=0,A=7,Yt(65496),Yt(65504),Yt(16),Mt(74),Mt(70),Mt(73),Mt(70),Mt(0),Mt(1),Mt(1),Mt(0),Yt(1),Yt(1),Mt(0),Mt(0),function(){Yt(65499),Yt(132),Mt(0);for(var et=0;et<64;et++)Mt(u[et]);Mt(1);for(var qt=0;qt<64;qt++)Mt(m[qt])}(),function(et,qt){Yt(65472),Yt(17),Mt(8),Yt(qt),Yt(et),Mt(3),Mt(1),Mt(17),Mt(0),Mt(2),Mt(17),Mt(1),Mt(3),Mt(17),Mt(1)}(K.width,K.height),function(){Yt(65476),Yt(418),Mt(0);for(var et=0;et<16;et++)Mt(ot[et+1]);for(var qt=0;qt<=11;qt++)Mt(Q[qt]);Mt(16);for(var ce=0;ce<16;ce++)Mt(tt[ce+1]);for(var xe=0;xe<=161;xe++)Mt(H[xe]);Mt(1);for(var ne=0;ne<16;ne++)Mt($[ne+1]);for(var We=0;We<=11;We++)Mt(ct[We]);Mt(17);for(var Ne=0;Ne<16;Ne++)Mt(yt[Ne+1]);for(var ke=0;ke<=161;ke++)Mt(Bt[ke])}(),Yt(65498),Yt(12),Mt(3),Mt(1),Mt(0),Mt(2),Mt(17),Mt(3),Mt(17),Mt(0),Mt(63),Mt(0);var z=0,it=0,mt=0;R=0,A=7,this.encode.displayName="_encode_";for(var dt,Tt,Dt,oe,ue,pe,we,At,Ut,Ct=K.data,Pe=K.width,Ee=K.height,Ce=4*Pe,ge=0;ge<Ee;){for(dt=0;dt<Ce;){for(ue=Ce*ge+dt,we=-1,At=0,Ut=0;Ut<64;Ut++)pe=ue+(At=Ut>>3)*Ce+(we=4*(7&Ut)),ge+At>=Ee&&(pe-=Ce*(ge+1+At-Ee)),dt+we>=Ce&&(pe-=dt+we-Ce+4),Tt=Ct[pe++],Dt=Ct[pe++],oe=Ct[pe++],Z[Ut]=(St[Tt]+St[Dt+256>>0]+St[oe+512>>0]>>16)-128,J[Ut]=(St[Tt+768>>0]+St[Dt+1024>>0]+St[oe+1280>>0]>>16)-128,nt[Ut]=(St[Tt+1280>>0]+St[Dt+1536>>0]+St[oe+1792>>0]>>16)-128;z=Zt(Z,p,z,t,i),it=Zt(J,v,it,e,s),mt=Zt(nt,v,mt,e,s),dt+=32}ge+=8}if(A>=0){var xt=[];xt[1]=A+1,xt[0]=(1<<A+1)-1,zt(xt)}return Yt(65497),new Uint8Array(O)},n=n||50,function(){for(var K=String.fromCharCode,X=0;X<256;X++)pt[X]=K(X)}(),t=kt(ot,Q),e=kt($,ct),i=kt(tt,H),s=kt(yt,Bt),function(){for(var K=1,X=2,z=1;z<=15;z++){for(var it=K;it<X;it++)C[32767+it]=z,T[32767+it]=[],T[32767+it][1]=z,T[32767+it][0]=it;for(var mt=-(X-1);mt<=-K;mt++)C[32767+mt]=z,T[32767+mt]=[],T[32767+mt][1]=z,T[32767+mt][0]=X-1+mt;K<<=1,X<<=1}}(),function(){for(var K=0;K<256;K++)St[K]=19595*K,St[K+256>>0]=38470*K,St[K+512>>0]=7471*K+32768,St[K+768>>0]=-11059*K,St[K+1024>>0]=-21709*K,St[K+1280>>0]=32768*K+8421375,St[K+1536>>0]=-27439*K,St[K+1792>>0]=-5329*K}(),ut(n)}function Jr(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ib(n){function t(ot){if(!ot)throw Error("assert :P")}function e(ot,Q,tt){for(var H=0;4>H;H++)if(ot[Q+H]!=tt.charCodeAt(H))return!0;return!1}function i(ot,Q,tt,H,$){for(var ct=0;ct<$;ct++)ot[Q+ct]=tt[H+ct]}function s(ot,Q,tt,H){for(var $=0;$<H;$++)ot[Q+$]=tt}function a(ot){return new Int32Array(ot)}function h(ot,Q){for(var tt=[],H=0;H<ot;H++)tt.push(new Q);return tt}function u(ot,Q){var tt=[];return function H($,ct,yt){for(var Bt=yt[ct],kt=0;kt<Bt&&($.push(yt.length>ct+1?[]:new Q),!(yt.length<ct+1));kt++)H($[kt],ct+1,yt)}(tt,0,ot),tt}var m=function(){var ot=this;function Q(g,S){for(var D=1<<S-1>>>0;g&D;)D>>>=1;return D?(g&D-1)+D:g}function tt(g,S,D,W,st){t(!(W%D));do g[S+(W-=D)]=st;while(0<W)}function H(g,S,D,W,st){if(t(2328>=st),512>=st)var lt=a(512);else if((lt=a(st))==null)return 0;return function(ht,ft,bt,Et,Kt,le){var he,ee,De=ft,ye=1<<bt,$t=a(16),te=a(16);for(t(Kt!=0),t(Et!=null),t(ht!=null),t(0<bt),ee=0;ee<Kt;++ee){if(15<Et[ee])return 0;++$t[Et[ee]]}if($t[0]==Kt)return 0;for(te[1]=0,he=1;15>he;++he){if($t[he]>1<<he)return 0;te[he+1]=te[he]+$t[he]}for(ee=0;ee<Kt;++ee)he=Et[ee],0<Et[ee]&&(le[te[he]++]=ee);if(te[15]==1)return(Et=new $).g=0,Et.value=le[0],tt(ht,De,1,ye,Et),ye;var Ie,Fe=-1,Le=ye-1,ai=0,Ke=1,Mi=1,ei=1<<bt;for(ee=0,he=1,Kt=2;he<=bt;++he,Kt<<=1){if(Ke+=Mi<<=1,0>(Mi-=$t[he]))return 0;for(;0<$t[he];--$t[he])(Et=new $).g=he,Et.value=le[ee++],tt(ht,De+ai,Kt,ei,Et),ai=Q(ai,he)}for(he=bt+1,Kt=2;15>=he;++he,Kt<<=1){if(Ke+=Mi<<=1,0>(Mi-=$t[he]))return 0;for(;0<$t[he];--$t[he]){if(Et=new $,(ai&Le)!=Fe){for(De+=ei,Ie=1<<(Fe=he)-bt;15>Fe&&!(0>=(Ie-=$t[Fe]));)++Fe,Ie<<=1;ye+=ei=1<<(Ie=Fe-bt),ht[ft+(Fe=ai&Le)].g=Ie+bt,ht[ft+Fe].value=De-ft-Fe}Et.g=he-bt,Et.value=le[ee++],tt(ht,De+(ai>>bt),Kt,ei,Et),ai=Q(ai,he)}}return Ke!=2*te[15]-1?0:ye}(g,S,D,W,st,lt)}function $(){this.value=this.g=0}function ct(){this.value=this.g=0}function yt(){this.G=h(5,$),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(ys,ct)}function Bt(g,S,D,W){t(g!=null),t(S!=null),t(2147483648>W),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=S,g.pa=D,g.Jd=S,g.Yc=D+W,g.Zc=4<=W?D+W-4+1:D,dt(g)}function kt(g,S){for(var D=0;0<S--;)D|=Dt(g,128)<<S;return D}function zt(g,S){var D=kt(g,S);return Tt(g)?-D:D}function Mt(g,S,D,W){var st,lt=0;for(t(g!=null),t(S!=null),t(4294967288>W),g.Sb=W,g.Ra=0,g.u=0,g.h=0,4<W&&(W=4),st=0;st<W;++st)lt+=S[D+st]<<8*st;g.Ra=lt,g.bb=W,g.oa=S,g.pa=D}function Yt(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<eh-8>>>0,++g.bb,g.u-=8;z(g)&&(g.h=1,g.u=0)}function Zt(g,S){if(t(0<=S),!g.h&&S<=th){var D=X(g)&Ql[S];return g.u+=S,Yt(g),D}return g.h=1,g.u=0}function ut(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(g){return g.Ra>>>(g.u&eh-1)>>>0}function z(g){return t(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>eh}function it(g,S){g.u=S,g.h=z(g)}function mt(g){g.u>=Sc&&(t(g.u>=Sc),Yt(g))}function dt(g){t(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(t(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Tt(g){return kt(g,1)}function Dt(g,S){var D=g.Ca;0>g.b&&dt(g);var W=g.b,st=D*S>>>8,lt=(g.I>>>W>st)+0;for(lt?(D-=st,g.I-=st+1<<W>>>0):D=st+1,W=D,st=0;256<=W;)st+=8,W>>=8;return W=7^st+Js[W],g.b-=W,g.Ca=(D<<W)-1,lt}function oe(g,S,D){g[S+0]=D>>24&255,g[S+1]=D>>16&255,g[S+2]=D>>8&255,g[S+3]=D>>0&255}function ue(g,S){return g[S+0]<<0|g[S+1]<<8}function pe(g,S){return ue(g,S)|g[S+2]<<16}function we(g,S){return ue(g,S)|ue(g,S+2)<<16}function At(g,S){var D=1<<S;return t(g!=null),t(0<S),g.X=a(D),g.X==null?0:(g.Mb=32-S,g.Xa=S,1)}function Ut(g,S){t(g!=null),t(S!=null),t(g.Xa==S.Xa),i(S.X,0,g.X,0,1<<S.Xa)}function Ct(){this.X=[],this.Xa=this.Mb=0}function Pe(g,S,D,W){t(D!=null),t(W!=null);var st=D[0],lt=W[0];return st==0&&(st=(g*lt+S/2)/S),lt==0&&(lt=(S*st+g/2)/g),0>=st||0>=lt?0:(D[0]=st,W[0]=lt,1)}function Ee(g,S){return g+(1<<S)-1>>>S}function Ce(g,S){return((4278255360&g)+(4278255360&S)>>>0&4278255360)+((16711935&g)+(16711935&S)>>>0&16711935)>>>0}function ge(g,S){ot[S]=function(D,W,st,lt,ht,ft,bt){var Et;for(Et=0;Et<ht;++Et){var Kt=ot[g](ft[bt+Et-1],st,lt+Et);ft[bt+Et]=Ce(D[W+Et],Kt)}}}function xt(){this.ud=this.hd=this.jd=0}function et(g,S){return((4278124286&(g^S))>>>1)+(g&S)>>>0}function qt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function ce(g,S){return qt(g+(g-S+.5>>1))}function xe(g,S,D){return Math.abs(S-D)-Math.abs(g-D)}function ne(g,S,D,W,st,lt,ht){for(W=lt[ht-1],D=0;D<st;++D)lt[ht+D]=W=Ce(g[S+D],W)}function We(g,S,D,W,st){var lt;for(lt=0;lt<D;++lt){var ht=g[S+lt],ft=ht>>8&255,bt=16711935&(bt=(bt=16711935&ht)+((ft<<16)+ft));W[st+lt]=(4278255360&ht)+bt>>>0}}function Ne(g,S){S.jd=g>>0&255,S.hd=g>>8&255,S.ud=g>>16&255}function ke(g,S,D,W,st,lt){var ht;for(ht=0;ht<W;++ht){var ft=S[D+ht],bt=ft>>>8,Et=ft,Kt=255&(Kt=(Kt=ft>>>16)+((g.jd<<24>>24)*(bt<<24>>24)>>>5));Et=255&(Et=(Et=Et+((g.hd<<24>>24)*(bt<<24>>24)>>>5))+((g.ud<<24>>24)*(Kt<<24>>24)>>>5)),st[lt+ht]=(4278255360&ft)+(Kt<<16)+Et}}function Je(g,S,D,W,st){ot[S]=function(lt,ht,ft,bt,Et,Kt,le,he,ee){for(bt=le;bt<he;++bt)for(le=0;le<ee;++le)Et[Kt++]=st(ft[W(lt[ht++])])},ot[g]=function(lt,ht,ft,bt,Et,Kt,le){var he=8>>lt.b,ee=lt.Ea,De=lt.K[0],ye=lt.w;if(8>he)for(lt=(1<<lt.b)-1,ye=(1<<he)-1;ht<ft;++ht){var $t,te=0;for($t=0;$t<ee;++$t)$t&lt||(te=W(bt[Et++])),Kt[le++]=st(De[te&ye]),te>>=he}else ot["VP8LMapColor"+D](bt,Et,De,ye,Kt,le,ht,ft,ee)}}function ie(g,S,D,W,st){for(D=S+D;S<D;){var lt=g[S++];W[st++]=lt>>16&255,W[st++]=lt>>8&255,W[st++]=lt>>0&255}}function Re(g,S,D,W,st){for(D=S+D;S<D;){var lt=g[S++];W[st++]=lt>>16&255,W[st++]=lt>>8&255,W[st++]=lt>>0&255,W[st++]=lt>>24&255}}function Oe(g,S,D,W,st){for(D=S+D;S<D;){var lt=(ht=g[S++])>>16&240|ht>>12&15,ht=ht>>0&240|ht>>28&15;W[st++]=lt,W[st++]=ht}}function fi(g,S,D,W,st){for(D=S+D;S<D;){var lt=(ht=g[S++])>>16&248|ht>>13&7,ht=ht>>5&224|ht>>3&31;W[st++]=lt,W[st++]=ht}}function Ye(g,S,D,W,st){for(D=S+D;S<D;){var lt=g[S++];W[st++]=lt>>0&255,W[st++]=lt>>8&255,W[st++]=lt>>16&255}}function ci(g,S,D,W,st,lt){if(lt==0)for(D=S+D;S<D;)oe(W,((lt=g[S++])[0]>>24|lt[1]>>8&65280|lt[2]<<8&16711680|lt[3]<<24)>>>0),st+=32;else i(W,st,g,S,D)}function B(g,S){ot[S][0]=ot[g+"0"],ot[S][1]=ot[g+"1"],ot[S][2]=ot[g+"2"],ot[S][3]=ot[g+"3"],ot[S][4]=ot[g+"4"],ot[S][5]=ot[g+"5"],ot[S][6]=ot[g+"6"],ot[S][7]=ot[g+"7"],ot[S][8]=ot[g+"8"],ot[S][9]=ot[g+"9"],ot[S][10]=ot[g+"10"],ot[S][11]=ot[g+"11"],ot[S][12]=ot[g+"12"],ot[S][13]=ot[g+"13"],ot[S][14]=ot[g+"0"],ot[S][15]=ot[g+"0"]}function Y(g){return g==km||g==Im||g==$d||g==Lm}function q(){this.eb=[],this.size=this.A=this.fb=0}function It(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Rt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new q,this.f.kb=new It,this.sd=null}function jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ot(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function re(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Ve(g,S){var D=g.T,W=S.ba.f.RGBA,st=W.eb,lt=W.fb+g.ka*W.A,ht=Ar[S.ba.S],ft=g.y,bt=g.O,Et=g.f,Kt=g.N,le=g.ea,he=g.W,ee=S.cc,De=S.dc,ye=S.Mc,$t=S.Nc,te=g.ka,Ie=g.ka+g.T,Fe=g.U,Le=Fe+1>>1;for(te==0?ht(ft,bt,null,null,Et,Kt,le,he,Et,Kt,le,he,st,lt,null,null,Fe):(ht(S.ec,S.fc,ft,bt,ee,De,ye,$t,Et,Kt,le,he,st,lt-W.A,st,lt,Fe),++D);te+2<Ie;te+=2)ee=Et,De=Kt,ye=le,$t=he,Kt+=g.Rc,he+=g.Rc,lt+=2*W.A,ht(ft,(bt+=2*g.fa)-g.fa,ft,bt,ee,De,ye,$t,Et,Kt,le,he,st,lt-W.A,st,lt,Fe);return bt+=g.fa,g.j+Ie<g.o?(i(S.ec,S.fc,ft,bt,Fe),i(S.cc,S.dc,Et,Kt,Le),i(S.Mc,S.Nc,le,he,Le),D--):1&Ie||ht(ft,bt,null,null,Et,Kt,le,he,Et,Kt,le,he,st,lt+W.A,null,null,Fe),D}function ui(g,S,D){var W=g.F,st=[g.J];if(W!=null){var lt=g.U,ht=S.ba.S,ft=ht==Kd||ht==$d;S=S.ba.f.RGBA;var bt=[0],Et=g.ka;bt[0]=g.T,g.Kb&&(Et==0?--bt[0]:(--Et,st[0]-=g.width),g.j+g.ka+g.T==g.o&&(bt[0]=g.o-g.j-Et));var Kt=S.eb;Et=S.fb+Et*S.A,g=kn(W,st[0],g.width,lt,bt,Kt,Et+(ft?0:3),S.A),t(D==bt),g&&Y(ht)&&Tr(Kt,Et,ft,lt,bt,S.A)}return 0}function yi(g){var S=g.ma,D=S.ba.S,W=11>D,st=D==qd||D==Zd||D==Kd||D==Em||D==12||Y(D);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!yc(S.Oa,g,st?11:12))return 0;if(st&&Y(D)&&Be(),g.da)alert("todo:use_scaling");else{if(W){if(S.Ib=re,g.Kb){if(D=g.U+1>>1,S.memory=a(g.U+2*D),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+g.U,S.Mc=S.cc,S.Nc=S.dc+D,S.Ib=Ve,Be()}}else alert("todo:EmitYUV");st&&(S.Jb=ui,W&&ae())}if(W&&!ev){for(g=0;256>g;++g)G2[g]=89858*(g-128)+Qd>>Jd,K2[g]=-22014*(g-128)+Qd,Z2[g]=-45773*(g-128),q2[g]=113618*(g-128)+Qd>>Jd;for(g=kc;g<Fm;++g)S=76283*(g-16)+Qd>>Jd,$2[g-kc]=hr(S,255),J2[g-kc]=hr(S+8>>4,15);ev=1}return 1}function oi(g){var S=g.ma,D=g.U,W=g.T;return t(!(1&g.ka)),0>=D||0>=W?0:(D=S.Ib(g,S),S.Jb!=null&&S.Jb(g,S,D),S.Dc+=D,1)}function Oi(g){g.ma.memory=null}function ze(g,S,D,W){return Zt(g,8)!=47?0:(S[0]=Zt(g,14)+1,D[0]=Zt(g,14)+1,W[0]=Zt(g,1),Zt(g,3)!=0?0:!g.h)}function un(g,S){if(4>g)return g+1;var D=g-2>>1;return(2+(1&g)<<D)+Zt(S,D)+1}function on(g,S){return 120<S?S-120:1<=(D=((D=D2[S-1])>>4)*g+(8-(15&D)))?D:1;var D}function Xe(g,S,D){var W=X(D),st=g[S+=255&W].g-8;return 0<st&&(it(D,D.u+8),W=X(D),S+=g[S].value,S+=W&(1<<st)-1),it(D,D.u+g[S].g),g[S].value}function xi(g,S,D){return D.g+=g.g,D.value+=g.value<<S>>>0,t(8>=D.g),g.g}function r(g,S,D){var W=g.xc;return t((S=W==0?0:g.vc[g.md*(D>>W)+(S>>W)])<g.Wb),g.Ya[S]}function f(g,S,D,W){var st=g.ab,lt=g.c*S,ht=g.C;S=ht+S;var ft=D,bt=W;for(W=g.Ta,D=g.Ua;0<st--;){var Et=g.gc[st],Kt=ht,le=S,he=ft,ee=bt,De=(bt=W,ft=D,Et.Ea);switch(t(Kt<le),t(le<=Et.nc),Et.hc){case 2:Ud(he,ee,(le-Kt)*De,bt,ft);break;case 0:var ye=Kt,$t=le,te=bt,Ie=ft,Fe=(ei=Et).Ea;ye==0&&(Am(he,ee,null,null,1,te,Ie),ne(he,ee+1,0,0,Fe-1,te,Ie+1),ee+=Fe,Ie+=Fe,++ye);for(var Le=1<<ei.b,ai=Le-1,Ke=Ee(Fe,ei.b),Mi=ei.K,ei=ei.w+(ye>>ei.b)*Ke;ye<$t;){var hn=Mi,fn=ei,sn=1;for(Mc(he,ee,te,Ie-Fe,1,te,Ie);sn<Fe;){var $i=(sn&~ai)+Le;$i>Fe&&($i=Fe),(0,oo[hn[fn++]>>8&15])(he,ee+ +sn,te,Ie+sn-Fe,$i-sn,te,Ie+sn),sn=$i}ee+=Fe,Ie+=Fe,++ye&ai||(ei+=Ke)}le!=Et.nc&&i(bt,ft-De,bt,ft+(le-Kt-1)*De,De);break;case 1:for(De=he,$t=ee,Fe=(he=Et.Ea)-(Ie=he&~(te=(ee=1<<Et.b)-1)),ye=Ee(he,Et.b),Le=Et.K,Et=Et.w+(Kt>>Et.b)*ye;Kt<le;){for(ai=Le,Ke=Et,Mi=new xt,ei=$t+Ie,hn=$t+he;$t<ei;)Ne(ai[Ke++],Mi),rl(Mi,De,$t,ee,bt,ft),$t+=ee,ft+=ee;$t<hn&&(Ne(ai[Ke++],Mi),rl(Mi,De,$t,Fe,bt,ft),$t+=Fe,ft+=Fe),++Kt&te||(Et+=ye)}break;case 3:if(he==bt&&ee==ft&&0<Et.b){for($t=bt,he=De=ft+(le-Kt)*De-(Ie=(le-Kt)*Ee(Et.Ea,Et.b)),ee=bt,te=ft,ye=[],Ie=(Fe=Ie)-1;0<=Ie;--Ie)ye[Ie]=ee[te+Ie];for(Ie=Fe-1;0<=Ie;--Ie)$t[he+Ie]=ye[Ie];wr(Et,Kt,le,bt,De,bt,ft)}else wr(Et,Kt,le,he,ee,bt,ft)}ft=W,bt=D}bt!=D&&i(W,D,ft,bt,lt)}function l(g,S){var D=g.V,W=g.Ba+g.c*g.C,st=S-g.C;if(t(S<=g.l.o),t(16>=st),0<st){var lt=g.l,ht=g.Ta,ft=g.Ua,bt=lt.width;if(f(g,st,D,W),st=ft=[ft],t((D=g.C)<(W=S)),t(lt.v<lt.va),W>lt.o&&(W=lt.o),D<lt.j){var Et=lt.j-D;D=lt.j,st[0]+=Et*bt}if(D>=W?D=0:(st[0]+=4*lt.v,lt.ka=D-lt.j,lt.U=lt.va-lt.v,lt.T=W-D,D=1),D){if(ft=ft[0],11>(D=g.ca).S){var Kt=D.f.RGBA,le=(W=D.S,st=lt.U,lt=lt.T,Et=Kt.eb,Kt.A),he=lt;for(Kt=Kt.fb+g.Ma*Kt.A;0<he--;){var ee=ht,De=ft,ye=st,$t=Et,te=Kt;switch(W){case Gd:Qs(ee,De,ye,$t,te);break;case qd:Us(ee,De,ye,$t,te);break;case km:Us(ee,De,ye,$t,te),Tr($t,te,0,ye,1,0);break;case jx:Ia(ee,De,ye,$t,te);break;case Zd:ci(ee,De,ye,$t,te,1);break;case Im:ci(ee,De,ye,$t,te,1),Tr($t,te,0,ye,1,0);break;case Kd:ci(ee,De,ye,$t,te,0);break;case $d:ci(ee,De,ye,$t,te,0),Tr($t,te,1,ye,1,0);break;case Em:lo(ee,De,ye,$t,te);break;case Lm:lo(ee,De,ye,$t,te),En($t,te,ye,1,0);break;case Yx:ka(ee,De,ye,$t,te);break;default:t(0)}ft+=bt,Kt+=le}g.Ma+=lt}else alert("todo:EmitRescaledRowsYUVA");t(g.Ma<=D.height)}}g.C=S,t(g.C<=g.i)}function o(g){var S;if(0<g.ua)return 0;for(S=0;S<g.Wb;++S){var D=g.Ya[S].G,W=g.Ya[S].H;if(0<D[1][W[1]+0].g||0<D[2][W[2]+0].g||0<D[3][W[3]+0].g)return 0}return 1}function d(g,S,D,W,st,lt){if(g.Z!=0){var ht=g.qd,ft=g.rd;for(t(po[g.Z]!=null);S<D;++S)po[g.Z](ht,ft,W,st,W,st,lt),ht=W,ft=st,st+=lt;g.qd=ht,g.rd=ft}}function x(g,S){var D=g.l.ma,W=D.Z==0||D.Z==1?g.l.j:g.C;if(W=g.C<W?W:g.C,t(S<=g.l.o),S>W){var st=g.l.width,lt=D.ca,ht=D.tb+st*W,ft=g.V,bt=g.Ba+g.c*W,Et=g.gc;t(g.ab==1),t(Et[0].hc==3),Wd(Et[0],W,S,ft,bt,lt,ht),d(D,W,S,lt,ht,st)}g.C=g.Ma=S}function _(g,S,D,W,st,lt,ht){var ft=g.$/W,bt=g.$%W,Et=g.m,Kt=g.s,le=D+g.$,he=le;st=D+W*st;var ee=D+W*lt,De=280+Kt.ua,ye=g.Pb?ft:16777216,$t=0<Kt.ua?Kt.Wa:null,te=Kt.wc,Ie=le<ee?r(Kt,bt,ft):null;t(g.C<lt),t(ee<=st);var Fe=!1;t:for(;;){for(;Fe||le<ee;){var Le=0;if(ft>=ye){var ai=le-D;t((ye=g).Pb),ye.wd=ye.m,ye.xd=ai,0<ye.s.ua&&Ut(ye.s.Wa,ye.s.vb),ye=ft+F2}if(bt&te||(Ie=r(Kt,bt,ft)),t(Ie!=null),Ie.Qb&&(S[le]=Ie.qb,Fe=!0),!Fe)if(mt(Et),Ie.jc){Le=Et,ai=S;var Ke=le,Mi=Ie.pd[X(Le)&ys-1];t(Ie.jc),256>Mi.g?(it(Le,Le.u+Mi.g),ai[Ke]=Mi.value,Le=0):(it(Le,Le.u+Mi.g-256),t(256<=Mi.value),Le=Mi.value),Le==0&&(Fe=!0)}else Le=Xe(Ie.G[0],Ie.H[0],Et);if(Et.h)break;if(Fe||256>Le){if(!Fe)if(Ie.nd)S[le]=(Ie.qb|Le<<8)>>>0;else{if(mt(Et),Fe=Xe(Ie.G[1],Ie.H[1],Et),mt(Et),ai=Xe(Ie.G[2],Ie.H[2],Et),Ke=Xe(Ie.G[3],Ie.H[3],Et),Et.h)break;S[le]=(Ke<<24|Fe<<16|Le<<8|ai)>>>0}if(Fe=!1,++le,++bt>=W&&(bt=0,++ft,ht!=null&&ft<=lt&&!(ft%16)&&ht(g,ft),$t!=null))for(;he<le;)Le=S[he++],$t.X[(506832829*Le&4294967295)>>>$t.Mb]=Le}else if(280>Le){if(Le=un(Le-256,Et),ai=Xe(Ie.G[4],Ie.H[4],Et),mt(Et),ai=on(W,ai=un(ai,Et)),Et.h)break;if(le-D<ai||st-le<Le)break t;for(Ke=0;Ke<Le;++Ke)S[le+Ke]=S[le+Ke-ai];for(le+=Le,bt+=Le;bt>=W;)bt-=W,++ft,ht!=null&&ft<=lt&&!(ft%16)&&ht(g,ft);if(t(le<=st),bt&te&&(Ie=r(Kt,bt,ft)),$t!=null)for(;he<le;)Le=S[he++],$t.X[(506832829*Le&4294967295)>>>$t.Mb]=Le}else{if(!(Le<De))break t;for(Fe=Le-280,t($t!=null);he<le;)Le=S[he++],$t.X[(506832829*Le&4294967295)>>>$t.Mb]=Le;Le=le,t(!(Fe>>>(ai=$t).Xa)),S[Le]=ai.X[Fe],Fe=!0}Fe||t(Et.h==z(Et))}if(g.Pb&&Et.h&&le<st)t(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Ut(g.s.vb,g.s.Wa);else{if(Et.h)break t;ht?.(g,ft>lt?lt:ft),g.a=0,g.$=le-D}return 1}return g.a=3,0}function I(g){t(g!=null),g.vc=null,g.yc=null,g.Ya=null;var S=g.Wa;S!=null&&(S.X=null),g.vb=null,t(g!=null)}function N(){var g=new Cm;return g==null?null:(g.a=0,g.xb=Zx,B("Predictor","VP8LPredictors"),B("Predictor","VP8LPredictors_C"),B("PredictorAdd","VP8LPredictorsAdd"),B("PredictorAdd","VP8LPredictorsAdd_C"),Ud=We,rl=ke,Qs=ie,Us=Re,lo=Oe,ka=fi,Ia=Ye,ot.VP8LMapColor32b=ih,ot.VP8LMapColor8b=Hd,g)}function M(g,S,D,W,st){var lt=1,ht=[g],ft=[S],bt=W.m,Et=W.s,Kt=null,le=0;t:for(;;){if(D)for(;lt&&Zt(bt,1);){var he=ht,ee=ft,De=W,ye=1,$t=De.m,te=De.gc[De.ab],Ie=Zt($t,2);if(De.Oc&1<<Ie)lt=0;else{switch(De.Oc|=1<<Ie,te.hc=Ie,te.Ea=he[0],te.nc=ee[0],te.K=[null],++De.ab,t(4>=De.ab),Ie){case 0:case 1:te.b=Zt($t,3)+2,ye=M(Ee(te.Ea,te.b),Ee(te.nc,te.b),0,De,te.K),te.K=te.K[0];break;case 3:var Fe,Le=Zt($t,8)+1,ai=16<Le?0:4<Le?1:2<Le?2:3;if(he[0]=Ee(te.Ea,ai),te.b=ai,Fe=ye=M(Le,1,0,De,te.K)){var Ke,Mi=Le,ei=te,hn=1<<(8>>ei.b),fn=a(hn);if(fn==null)Fe=0;else{var sn=ei.K[0],$i=ei.w;for(fn[0]=ei.K[0][0],Ke=1;Ke<1*Mi;++Ke)fn[Ke]=Ce(sn[$i+Ke],fn[Ke-1]);for(;Ke<4*hn;++Ke)fn[Ke]=0;ei.K[0]=null,ei.K[0]=fn,Fe=1}}ye=Fe;break;case 2:break;default:t(0)}lt=ye}}if(ht=ht[0],ft=ft[0],lt&&Zt(bt,1)&&!(lt=1<=(le=Zt(bt,4))&&11>=le)){W.a=3;break t}var Sn;if(Sn=lt)e:{var bn,Ui,ss,tr=W,rs=ht,er=ft,mn=le,dr=D,ur=tr.m,xs=tr.s,ws=[null],Hs=1,Pr=0,ca=R2[mn];i:for(;;){if(dr&&Zt(ur,1)){var vs=Zt(ur,3)+2,Fa=Ee(rs,vs),cl=Ee(er,vs),oh=Fa*cl;if(!M(Fa,cl,0,tr,ws))break i;for(ws=ws[0],xs.xc=vs,bn=0;bn<oh;++bn){var fo=ws[bn]>>8&65535;ws[bn]=fo,fo>=Hs&&(Hs=fo+1)}}if(ur.h)break i;for(Ui=0;5>Ui;++Ui){var jn=Gx[Ui];!Ui&&0<mn&&(jn+=1<<mn),Pr<jn&&(Pr=jn)}var Nm=h(Hs*ca,$),sv=Hs,rv=h(sv,yt);if(rv==null)var eu=null;else t(65536>=sv),eu=rv;var Ic=a(Pr);if(eu==null||Ic==null||Nm==null){tr.a=1;break i}var iu=Nm;for(bn=ss=0;bn<Hs;++bn){var Yr=eu[bn],lh=Yr.G,hh=Yr.H,av=0,nu=1,ov=0;for(Ui=0;5>Ui;++Ui){jn=Gx[Ui],lh[Ui]=iu,hh[Ui]=ss,!Ui&&0<mn&&(jn+=1<<mn);s:{var su,Bm=jn,ru=tr,Lc=Ic,ew=iu,iw=ss,Om=0,mo=ru.m,nw=Zt(mo,1);if(s(Lc,0,0,Bm),nw){var sw=Zt(mo,1)+1,rw=Zt(mo,1),lv=Zt(mo,rw==0?1:8);Lc[lv]=1,sw==2&&(Lc[lv=Zt(mo,8)]=1);var au=1}else{var hv=a(19),cv=Zt(mo,4)+4;if(19<cv){ru.a=3;var ou=0;break s}for(su=0;su<cv;++su)hv[L2[su]]=Zt(mo,3);var Vm=void 0,Dc=void 0,dv=ru,aw=hv,lu=Bm,uv=Lc,zm=0,go=dv.m,pv=8,fv=h(128,$);n:for(;H(fv,0,7,aw,19);){if(Zt(go,1)){var ow=2+2*Zt(go,3);if((Vm=2+Zt(go,ow))>lu)break n}else Vm=lu;for(Dc=0;Dc<lu&&Vm--;){mt(go);var mv=fv[0+(127&X(go))];it(go,go.u+mv.g);var ch=mv.value;if(16>ch)uv[Dc++]=ch,ch!=0&&(pv=ch);else{var lw=ch==16,gv=ch-16,hw=k2[gv],xv=Zt(go,E2[gv])+hw;if(Dc+xv>lu)break n;for(var cw=lw?pv:0;0<xv--;)uv[Dc++]=cw}}zm=1;break n}zm||(dv.a=3),au=zm}(au=au&&!mo.h)&&(Om=H(ew,iw,8,Lc,Bm)),au&&Om!=0?ou=Om:(ru.a=3,ou=0)}if(ou==0)break i;if(nu&&I2[Ui]==1&&(nu=iu[ss].g==0),av+=iu[ss].g,ss+=ou,3>=Ui){var Rc,Um=Ic[0];for(Rc=1;Rc<jn;++Rc)Ic[Rc]>Um&&(Um=Ic[Rc]);ov+=Um}}if(Yr.nd=nu,Yr.Qb=0,nu&&(Yr.qb=(lh[3][hh[3]+0].value<<24|lh[1][hh[1]+0].value<<16|lh[2][hh[2]+0].value)>>>0,av==0&&256>lh[0][hh[0]+0].value&&(Yr.Qb=1,Yr.qb+=lh[0][hh[0]+0].value<<8)),Yr.jc=!Yr.Qb&&6>ov,Yr.jc){var hu,Na=Yr;for(hu=0;hu<ys;++hu){var xo=hu,vo=Na.pd[xo],cu=Na.G[0][Na.H[0]+xo];256<=cu.value?(vo.g=cu.g+256,vo.value=cu.value):(vo.g=0,vo.value=0,xo>>=xi(cu,8,vo),xo>>=xi(Na.G[1][Na.H[1]+xo],16,vo),xo>>=xi(Na.G[2][Na.H[2]+xo],0,vo),xi(Na.G[3][Na.H[3]+xo],24,vo))}}}xs.vc=ws,xs.Wb=Hs,xs.Ya=eu,xs.yc=Nm,Sn=1;break e}Sn=0}if(!(lt=Sn)){W.a=3;break t}if(0<le){if(Et.ua=1<<le,!At(Et.Wa,le)){W.a=1,lt=0;break t}}else Et.ua=0;var Wm=W,vv=ht,dw=ft,Hm=Wm.s,Xm=Hm.xc;if(Wm.c=vv,Wm.i=dw,Hm.md=Ee(vv,Xm),Hm.wc=Xm==0?-1:(1<<Xm)-1,D){W.xb=W2;break t}if((Kt=a(ht*ft))==null){W.a=1,lt=0;break t}lt=(lt=_(W,Kt,0,ht,ft,ft,null))&&!bt.h;break t}return lt?(st!=null?st[0]=Kt:(t(Kt==null),t(D)),W.$=0,D||I(Et)):I(Et),lt}function w(g,S){var D=g.c*g.i,W=D+S+16*S;return t(g.c<=S),g.V=a(W),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+D+S,1)}function b(g,S){var D=g.C,W=S-D,st=g.V,lt=g.Ba+g.c*D;for(t(S<=g.l.o);0<W;){var ht=16<W?16:W,ft=g.l.ma,bt=g.l.width,Et=bt*ht,Kt=ft.ca,le=ft.tb+bt*D,he=g.Ta,ee=g.Ua;f(g,ht,st,lt),$n(he,ee,Kt,le,Et),d(ft,D,D+ht,Kt,le,bt),W-=ht,st+=ht*g.c,D+=ht}t(D==S),g.C=g.Ma=S}function P(){this.ub=this.yd=this.td=this.Rb=0}function c(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function L(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function V(){this.Yb=function(){var g=[];return function S(D,W,st){for(var lt=st[W],ht=0;ht<lt&&(D.push(st.length>W+1?[]:0),!(st.length<W+1));ht++)S(D[ht],W+1,st)}(g,0,[3,11]),g}()}function U(){this.jb=a(3),this.Wc=u([4,8],V),this.Xc=u([4,17],V)}function E(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function G(){this.ld=this.La=this.dd=this.tc=0}function j(){this.Na=this.la=0}function wt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function gt(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _t(){this.uc=this.M=this.Nb=0,this.wa=Array(new G),this.Y=0,this.ya=Array(new gt),this.aa=0,this.l=new Vt}function Qt(){this.y=a(16),this.f=a(8),this.ea=a(8)}function se(){this.cb=this.a=0,this.sc="",this.m=new ut,this.Od=new P,this.Kc=new c,this.ed=new E,this.Qa=new L,this.Ic=this.$c=this.Aa=0,this.D=new _t,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,ut),this.ia=0,this.pb=h(4,wt),this.Pa=new U,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qt),this.Hd=0,this.rb=Array(new j),this.sb=0,this.wa=Array(new G),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new gt),this.L=this.aa=0,this.gd=u([4,2],G),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wt(){var g=new se;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,Ec||(Ec=Ht)),g}function Nt(g,S,D){return g.a==0&&(g.a=S,g.sc=D,g.cb=0),0}function Ft(g,S,D){return 3<=D&&g[S+0]==157&&g[S+1]==1&&g[S+2]==42}function vt(g,S){if(g==null)return 0;if(g.a=0,g.sc="OK",S==null)return Nt(g,2,"null VP8Io passed to VP8GetHeaders()");var D=S.data,W=S.w,st=S.ha;if(4>st)return Nt(g,7,"Truncated header.");var lt=D[W+0]|D[W+1]<<8|D[W+2]<<16,ht=g.Od;if(ht.Rb=!(1&lt),ht.td=lt>>1&7,ht.yd=lt>>4&1,ht.ub=lt>>5,3<ht.td)return Nt(g,3,"Incorrect keyframe parameters.");if(!ht.yd)return Nt(g,4,"Frame not displayable.");W+=3,st-=3;var ft=g.Kc;if(ht.Rb){if(7>st)return Nt(g,7,"cannot parse picture header");if(!Ft(D,W,st))return Nt(g,3,"Bad code word");ft.c=16383&(D[W+4]<<8|D[W+3]),ft.Td=D[W+4]>>6,ft.i=16383&(D[W+6]<<8|D[W+5]),ft.Ud=D[W+6]>>6,W+=7,st-=7,g.za=ft.c+15>>4,g.Ub=ft.i+15>>4,S.width=ft.c,S.height=ft.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,s((lt=g.Pa).jb,0,255,lt.jb.length),t((lt=g.Qa)!=null),lt.Cb=0,lt.Bb=0,lt.Fb=1,s(lt.Zb,0,0,lt.Zb.length),s(lt.Lb,0,0,lt.Lb)}if(ht.ub>st)return Nt(g,7,"bad partition length");Bt(lt=g.m,D,W,ht.ub),W+=ht.ub,st-=ht.ub,ht.Rb&&(ft.Ld=Tt(lt),ft.Kd=Tt(lt)),ft=g.Qa;var bt,Et=g.Pa;if(t(lt!=null),t(ft!=null),ft.Cb=Tt(lt),ft.Cb){if(ft.Bb=Tt(lt),Tt(lt)){for(ft.Fb=Tt(lt),bt=0;4>bt;++bt)ft.Zb[bt]=Tt(lt)?zt(lt,7):0;for(bt=0;4>bt;++bt)ft.Lb[bt]=Tt(lt)?zt(lt,6):0}if(ft.Bb)for(bt=0;3>bt;++bt)Et.jb[bt]=Tt(lt)?kt(lt,8):255}else ft.Bb=0;if(lt.Ka)return Nt(g,3,"cannot parse segment header");if((ft=g.ed).zd=Tt(lt),ft.Tb=kt(lt,6),ft.wb=kt(lt,3),ft.Pc=Tt(lt),ft.Pc&&Tt(lt)){for(Et=0;4>Et;++Et)Tt(lt)&&(ft.vd[Et]=zt(lt,6));for(Et=0;4>Et;++Et)Tt(lt)&&(ft.od[Et]=zt(lt,6))}if(g.L=ft.Tb==0?0:ft.zd?1:2,lt.Ka)return Nt(g,3,"cannot parse filter header");var Kt=st;if(st=bt=W,W=bt+Kt,ft=Kt,g.Xb=(1<<kt(g.m,2))-1,Kt<3*(Et=g.Xb))D=7;else{for(bt+=3*Et,ft-=3*Et,Kt=0;Kt<Et;++Kt){var le=D[st+0]|D[st+1]<<8|D[st+2]<<16;le>ft&&(le=ft),Bt(g.Jc[+Kt],D,bt,le),bt+=le,ft-=le,st+=3}Bt(g.Jc[+Et],D,bt,ft),D=bt<W?0:5}if(D!=0)return Nt(g,D,"cannot parse partitions");for(D=kt(bt=g.m,7),st=Tt(bt)?zt(bt,4):0,W=Tt(bt)?zt(bt,4):0,ft=Tt(bt)?zt(bt,4):0,Et=Tt(bt)?zt(bt,4):0,bt=Tt(bt)?zt(bt,4):0,Kt=g.Qa,le=0;4>le;++le){if(Kt.Cb){var he=Kt.Zb[le];Kt.Fb||(he+=D)}else{if(0<le){g.pb[le]=g.pb[0];continue}he=D}var ee=g.pb[le];ee.Sc[0]=Dm[hr(he+st,127)],ee.Sc[1]=Rm[hr(he+0,127)],ee.Eb[0]=2*Dm[hr(he+W,127)],ee.Eb[1]=101581*Rm[hr(he+ft,127)]>>16,8>ee.Eb[1]&&(ee.Eb[1]=8),ee.Qc[0]=Dm[hr(he+Et,117)],ee.Qc[1]=Rm[hr(he+bt,127)],ee.lc=he+bt}if(!ht.Rb)return Nt(g,4,"Not a key frame.");for(Tt(lt),ht=g.Pa,D=0;4>D;++D){for(st=0;8>st;++st)for(W=0;3>W;++W)for(ft=0;11>ft;++ft)Et=Dt(lt,z2[D][st][W][ft])?kt(lt,8):O2[D][st][W][ft],ht.Wc[D][st].Yb[W][ft]=Et;for(st=0;17>st;++st)ht.Xc[D][st]=ht.Wc[D][U2[st]]}return g.kc=Tt(lt),g.kc&&(g.Bd=kt(lt,8)),g.cb=1}function Ht(g,S,D,W,st,lt,ht){var ft=S[st].Yb[D];for(D=0;16>st;++st){if(!Dt(g,ft[D+0]))return st;for(;!Dt(g,ft[D+1]);)if(ft=S[++st].Yb[0],D=0,st==16)return 16;var bt=S[st+1].Yb;if(Dt(g,ft[D+2])){var Et=g,Kt=0;if(Dt(Et,(he=ft)[(le=D)+3]))if(Dt(Et,he[le+6])){for(ft=0,le=2*(Kt=Dt(Et,he[le+8]))+(he=Dt(Et,he[le+9+Kt])),Kt=0,he=N2[le];he[ft];++ft)Kt+=Kt+Dt(Et,he[ft]);Kt+=3+(8<<le)}else Dt(Et,he[le+7])?(Kt=7+2*Dt(Et,165),Kt+=Dt(Et,145)):Kt=5+Dt(Et,159);else Kt=Dt(Et,he[le+4])?3+Dt(Et,he[le+5]):2;ft=bt[2]}else Kt=1,ft=bt[1];bt=ht+B2[st],0>(Et=g).b&&dt(Et);var le,he=Et.b,ee=(le=Et.Ca>>1)-(Et.I>>he)>>31;--Et.b,Et.Ca+=ee,Et.Ca|=1,Et.I-=(le+1&ee)<<he,lt[bt]=((Kt^ee)-ee)*W[(0<st)+0]}return 16}function me(g){var S=g.rb[g.sb-1];S.la=0,S.Na=0,s(g.zc,0,0,g.zc.length),g.ja=0}function Pt(g,S){if(g==null)return 0;if(S==null)return Nt(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!vt(g,S))return 0;if(t(g.cb),S.ac==null||S.ac(S)){S.ob&&(g.L=0);var D=tu[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=S.v-D>>4,g.zb=S.j-D>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=S.o+15+D>>4,g.Hb=S.va+15+D>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var W=g.ed;for(D=0;4>D;++D){var st;if(g.Qa.Cb){var lt=g.Qa.Lb[D];g.Qa.Fb||(lt+=W.Tb)}else lt=W.Tb;for(st=0;1>=st;++st){var ht=g.gd[D][st],ft=lt;if(W.Pc&&(ft+=W.vd[0],st&&(ft+=W.od[0])),0<(ft=0>ft?0:63<ft?63:ft)){var bt=ft;0<W.wb&&(bt=4<W.wb?bt>>2:bt>>1)>9-W.wb&&(bt=9-W.wb),1>bt&&(bt=1),ht.dd=bt,ht.tc=2*ft+bt,ht.ld=40<=ft?2:15<=ft?1:0}else ht.tc=0;ht.La=st}}}D=0}else Nt(g,6,"Frame setup failed"),D=g.a;if(D=D==0){if(D){g.$c=0,0<g.Aa||(g.Ic=tw);t:{D=g.Ic,W=4*(bt=g.za);var Et=32*bt,Kt=bt+1,le=0<g.L?bt*(0<g.Aa?2:1):0,he=(g.Aa==2?2:1)*bt;if((ht=W+832+(st=3*(16*D+tu[g.L])/2*Et)+(lt=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=ht)D=0;else{if(ht>g.Vb){if(g.Vb=0,g.Ec=a(ht),g.Fc=0,g.Ec==null){D=Nt(g,1,"no memory during frame initialization.");break t}g.Vb=ht}ht=g.Ec,ft=g.Fc,g.Ac=ht,g.Bc=ft,ft+=W,g.Gd=h(Et,Qt),g.Hd=0,g.rb=h(Kt+1,j),g.sb=1,g.wa=le?h(le,G):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=bt),t(!0),g.oc=ht,g.pc=ft,ft+=832,g.ya=h(he,gt),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=bt),g.R=16*bt,g.B=8*bt,bt=(Et=tu[g.L])*g.R,Et=Et/2*g.B,g.sa=ht,g.ta=ft+bt,g.qa=g.sa,g.ra=g.ta+16*D*g.R+Et,g.Ha=g.qa,g.Ia=g.ra+8*D*g.B+Et,g.$c=0,ft+=st,g.mb=lt?ht:null,g.nb=lt?ft:null,t(ft+lt<=g.Fc+g.Vb),me(g),s(g.Ac,g.Bc,0,W),D=1}}if(D){if(S.ka=0,S.y=g.sa,S.O=g.ta,S.f=g.qa,S.N=g.ra,S.ea=g.Ha,S.Vd=g.Ia,S.fa=g.R,S.Rc=g.B,S.F=null,S.J=0,!jd){for(D=-255;255>=D;++D)cs[255+D]=0>D?-D:D;for(D=-1020;1020>=D;++D)Da[1020+D]=-128>D?-128:127<D?127:D;for(D=-112;112>=D;++D)Pc[112+D]=-16>D?-16:15<D?15:D;for(D=-255;510>=D;++D)ah[255+D]=0>D?0:255<D?255:D;jd=1}nh=An,La=wi,Tc=mi,Ws=bi,Sr=de,Kn=ti,sh=uc,Xd=nl,Cc=Tm,al=pc,ol=Mm,ho=ql,ll=fc,rh=Od,hl=Bd,co=la,Ac=Ea,Mr=Sm,jr[0]=Zi,jr[1]=In,jr[2]=Ze,jr[3]=ki,jr[4]=Ji,jr[5]=tn,jr[6]=Ge,jr[7]=_n,jr[8]=gi,jr[9]=Ki,uo[0]=Wr,uo[1]=$s,uo[2]=ve,uo[3]=yr,uo[4]=Se,uo[5]=Me,uo[6]=He,Ra[0]=Pn,Ra[1]=Ks,Ra[2]=Ii,Ra[3]=si,Ra[4]=ln,Ra[5]=pn,Ra[6]=zs,D=1}else D=0}D&&(D=function(ee,De){for(ee.M=0;ee.M<ee.Va;++ee.M){var ye,$t=ee.Jc[ee.M&ee.Xb],te=ee.m,Ie=ee;for(ye=0;ye<Ie.za;++ye){var Fe=te,Le=Ie,ai=Le.Ac,Ke=Le.Bc+4*ye,Mi=Le.zc,ei=Le.ya[Le.aa+ye];if(Le.Qa.Bb?ei.$b=Dt(Fe,Le.Pa.jb[0])?2+Dt(Fe,Le.Pa.jb[2]):Dt(Fe,Le.Pa.jb[1]):ei.$b=0,Le.kc&&(ei.Ad=Dt(Fe,Le.Bd)),ei.Za=!Dt(Fe,145)+0,ei.Za){var hn=ei.Ob,fn=0;for(Le=0;4>Le;++Le){var sn,$i=Mi[0+Le];for(sn=0;4>sn;++sn){$i=V2[ai[Ke+sn]][$i];for(var Sn=qx[Dt(Fe,$i[0])];0<Sn;)Sn=qx[2*Sn+Dt(Fe,$i[Sn])];$i=-Sn,ai[Ke+sn]=$i}i(hn,fn,ai,Ke,4),fn+=4,Mi[0+Le]=$i}}else $i=Dt(Fe,156)?Dt(Fe,128)?1:3:Dt(Fe,163)?2:0,ei.Ob[0]=$i,s(ai,Ke,$i,4),s(Mi,0,$i,4);ei.Dd=Dt(Fe,142)?Dt(Fe,114)?Dt(Fe,183)?1:3:2:0}if(Ie.m.Ka)return Nt(ee,7,"Premature end-of-partition0 encountered.");for(;ee.ja<ee.za;++ee.ja){if(Ie=$t,Fe=(te=ee).rb[te.sb-1],ai=te.rb[te.sb+te.ja],ye=te.ya[te.aa+te.ja],Ke=te.kc?ye.Ad:0)Fe.la=ai.la=0,ye.Za||(Fe.Na=ai.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var bn,Ui;if(Fe=ai,ai=Ie,Ke=te.Pa.Xc,Mi=te.ya[te.aa+te.ja],ei=te.pb[Mi.$b],Le=Mi.ad,hn=0,fn=te.rb[te.sb-1],$i=sn=0,s(Le,hn,0,384),Mi.Za)var ss=0,tr=Ke[3];else{Sn=a(16);var rs=Fe.Na+fn.Na;if(rs=Ec(ai,Ke[1],rs,ei.Eb,0,Sn,0),Fe.Na=fn.Na=(0<rs)+0,1<rs)nh(Sn,0,Le,hn);else{var er=Sn[0]+3>>3;for(Sn=0;256>Sn;Sn+=16)Le[hn+Sn]=er}ss=1,tr=Ke[0]}var mn=15&Fe.la,dr=15&fn.la;for(Sn=0;4>Sn;++Sn){var ur=1&dr;for(er=Ui=0;4>er;++er)mn=mn>>1|(ur=(rs=Ec(ai,tr,rs=ur+(1&mn),ei.Sc,ss,Le,hn))>ss)<<7,Ui=Ui<<2|(3<rs?3:1<rs?2:Le[hn+0]!=0),hn+=16;mn>>=4,dr=dr>>1|ur<<7,sn=(sn<<8|Ui)>>>0}for(tr=mn,ss=dr>>4,bn=0;4>bn;bn+=2){for(Ui=0,mn=Fe.la>>4+bn,dr=fn.la>>4+bn,Sn=0;2>Sn;++Sn){for(ur=1&dr,er=0;2>er;++er)rs=ur+(1&mn),mn=mn>>1|(ur=0<(rs=Ec(ai,Ke[2],rs,ei.Qc,0,Le,hn)))<<3,Ui=Ui<<2|(3<rs?3:1<rs?2:Le[hn+0]!=0),hn+=16;mn>>=2,dr=dr>>1|ur<<5}$i|=Ui<<4*bn,tr|=mn<<4<<bn,ss|=(240&dr)<<bn}Fe.la=tr,fn.la=ss,Mi.Hc=sn,Mi.Gc=$i,Mi.ia=43690&$i?0:ei.ia,Ke=!(sn|$i)}if(0<te.L&&(te.wa[te.Y+te.ja]=te.gd[ye.$b][ye.Za],te.wa[te.Y+te.ja].La|=!Ke),Ie.Ka)return Nt(ee,7,"Premature end-of-file encountered.")}if(me(ee),te=De,Ie=1,ye=($t=ee).D,Fe=0<$t.L&&$t.M>=$t.zb&&$t.M<=$t.Va,$t.Aa==0)t:{if(ye.M=$t.M,ye.uc=Fe,bc($t,ye),Ie=1,ye=(Ui=$t.D).Nb,Fe=($i=tu[$t.L])*$t.R,ai=$i/2*$t.B,Sn=16*ye*$t.R,er=8*ye*$t.B,Ke=$t.sa,Mi=$t.ta-Fe+Sn,ei=$t.qa,Le=$t.ra-ai+er,hn=$t.Ha,fn=$t.Ia-ai+er,dr=(mn=Ui.M)==0,sn=mn>=$t.Va-1,$t.Aa==2&&bc($t,Ui),Ui.uc)for(ur=(rs=$t).D.M,t(rs.D.uc),Ui=rs.yb;Ui<rs.Hb;++Ui){ss=Ui,tr=ur;var xs=(ws=(jn=rs).D).Nb;bn=jn.R;var ws=ws.wa[ws.Y+ss],Hs=jn.sa,Pr=jn.ta+16*xs*bn+16*ss,ca=ws.dd,vs=ws.tc;if(vs!=0)if(t(3<=vs),jn.L==1)0<ss&&co(Hs,Pr,bn,vs+4),ws.La&&Mr(Hs,Pr,bn,vs),0<tr&&hl(Hs,Pr,bn,vs+4),ws.La&&Ac(Hs,Pr,bn,vs);else{var Fa=jn.B,cl=jn.qa,oh=jn.ra+8*xs*Fa+8*ss,fo=jn.Ha,jn=jn.Ia+8*xs*Fa+8*ss;xs=ws.ld,0<ss&&(Xd(Hs,Pr,bn,vs+4,ca,xs),al(cl,oh,fo,jn,Fa,vs+4,ca,xs)),ws.La&&(ho(Hs,Pr,bn,vs,ca,xs),rh(cl,oh,fo,jn,Fa,vs,ca,xs)),0<tr&&(sh(Hs,Pr,bn,vs+4,ca,xs),Cc(cl,oh,fo,jn,Fa,vs+4,ca,xs)),ws.La&&(ol(Hs,Pr,bn,vs,ca,xs),ll(cl,oh,fo,jn,Fa,vs,ca,xs))}}if($t.ia&&alert("todo:DitherRow"),te.put!=null){if(Ui=16*mn,mn=16*(mn+1),dr?(te.y=$t.sa,te.O=$t.ta+Sn,te.f=$t.qa,te.N=$t.ra+er,te.ea=$t.Ha,te.W=$t.Ia+er):(Ui-=$i,te.y=Ke,te.O=Mi,te.f=ei,te.N=Le,te.ea=hn,te.W=fn),sn||(mn-=$i),mn>te.o&&(mn=te.o),te.F=null,te.J=null,$t.Fa!=null&&0<$t.Fa.length&&Ui<mn&&(te.J=vc($t,te,Ui,mn-Ui),te.F=$t.mb,te.F==null&&te.F.length==0)){Ie=Nt($t,3,"Could not decode alpha data.");break t}Ui<te.j&&($i=te.j-Ui,Ui=te.j,t(!(1&$i)),te.O+=$t.R*$i,te.N+=$t.B*($i>>1),te.W+=$t.B*($i>>1),te.F!=null&&(te.J+=te.width*$i)),Ui<mn&&(te.O+=te.v,te.N+=te.v>>1,te.W+=te.v>>1,te.F!=null&&(te.J+=te.v),te.ka=Ui-te.j,te.U=te.va-te.v,te.T=mn-Ui,Ie=te.put(te))}ye+1!=$t.Ic||sn||(i($t.sa,$t.ta-Fe,Ke,Mi+16*$t.R,Fe),i($t.qa,$t.ra-ai,ei,Le+8*$t.B,ai),i($t.Ha,$t.Ia-ai,hn,fn+8*$t.B,ai))}if(!Ie)return Nt(ee,6,"Output aborted.")}return 1}(g,S)),S.bc!=null&&S.bc(S),D&=1}return D?(g.cb=0,D):0}function Qe(g,S,D,W,st){st=g[S+D+32*W]+(st>>3),g[S+D+32*W]=-256&st?0>st?0:255:st}function Ai(g,S,D,W,st,lt){Qe(g,S,0,D,W+st),Qe(g,S,1,D,W+lt),Qe(g,S,2,D,W-lt),Qe(g,S,3,D,W-st)}function hi(g){return(20091*g>>16)+g}function Pi(g,S,D,W){var st,lt=0,ht=a(16);for(st=0;4>st;++st){var ft=g[S+0]+g[S+8],bt=g[S+0]-g[S+8],Et=(35468*g[S+4]>>16)-hi(g[S+12]),Kt=hi(g[S+4])+(35468*g[S+12]>>16);ht[lt+0]=ft+Kt,ht[lt+1]=bt+Et,ht[lt+2]=bt-Et,ht[lt+3]=ft-Kt,lt+=4,S++}for(st=lt=0;4>st;++st)ft=(g=ht[lt+0]+4)+ht[lt+8],bt=g-ht[lt+8],Et=(35468*ht[lt+4]>>16)-hi(ht[lt+12]),Qe(D,W,0,0,ft+(Kt=hi(ht[lt+4])+(35468*ht[lt+12]>>16))),Qe(D,W,1,0,bt+Et),Qe(D,W,2,0,bt-Et),Qe(D,W,3,0,ft-Kt),lt++,W+=32}function ti(g,S,D,W){var st=g[S+0]+4,lt=35468*g[S+4]>>16,ht=hi(g[S+4]),ft=35468*g[S+1]>>16;Ai(D,W,0,st+ht,g=hi(g[S+1]),ft),Ai(D,W,1,st+lt,g,ft),Ai(D,W,2,st-lt,g,ft),Ai(D,W,3,st-ht,g,ft)}function wi(g,S,D,W,st){Pi(g,S,D,W),st&&Pi(g,S+16,D,W+4)}function mi(g,S,D,W){La(g,S+0,D,W,1),La(g,S+32,D,W+128,1)}function bi(g,S,D,W){var st;for(g=g[S+0]+4,st=0;4>st;++st)for(S=0;4>S;++S)Qe(D,W,S,st,g)}function de(g,S,D,W){g[S+0]&&Ws(g,S+0,D,W),g[S+16]&&Ws(g,S+16,D,W+4),g[S+32]&&Ws(g,S+32,D,W+128),g[S+48]&&Ws(g,S+48,D,W+128+4)}function An(g,S,D,W){var st,lt=a(16);for(st=0;4>st;++st){var ht=g[S+0+st]+g[S+12+st],ft=g[S+4+st]+g[S+8+st],bt=g[S+4+st]-g[S+8+st],Et=g[S+0+st]-g[S+12+st];lt[0+st]=ht+ft,lt[8+st]=ht-ft,lt[4+st]=Et+bt,lt[12+st]=Et-bt}for(st=0;4>st;++st)ht=(g=lt[0+4*st]+3)+lt[3+4*st],ft=lt[1+4*st]+lt[2+4*st],bt=lt[1+4*st]-lt[2+4*st],Et=g-lt[3+4*st],D[W+0]=ht+ft>>3,D[W+16]=Et+bt>>3,D[W+32]=ht-ft>>3,D[W+48]=Et-bt>>3,W+=64}function xn(g,S,D){var W,st=S-32,lt=cr,ht=255-g[st-1];for(W=0;W<D;++W){var ft,bt=lt,Et=ht+g[S-1];for(ft=0;ft<D;++ft)g[S+ft]=bt[Et+g[st+ft]];S+=32}}function In(g,S){xn(g,S,4)}function Ks(g,S){xn(g,S,8)}function $s(g,S){xn(g,S,16)}function ve(g,S){var D;for(D=0;16>D;++D)i(g,S+32*D,g,S-32,16)}function yr(g,S){var D;for(D=16;0<D;--D)s(g,S,g[S-1],16),S+=32}function vn(g,S,D){var W;for(W=0;16>W;++W)s(S,D+32*W,g,16)}function Wr(g,S){var D,W=16;for(D=0;16>D;++D)W+=g[S-1+32*D]+g[S+D-32];vn(W>>5,g,S)}function Se(g,S){var D,W=8;for(D=0;16>D;++D)W+=g[S-1+32*D];vn(W>>4,g,S)}function Me(g,S){var D,W=8;for(D=0;16>D;++D)W+=g[S+D-32];vn(W>>4,g,S)}function He(g,S){vn(128,g,S)}function je(g,S,D){return g+2*S+D+2>>2}function Ze(g,S){var D,W=S-32;for(W=new Uint8Array([je(g[W-1],g[W+0],g[W+1]),je(g[W+0],g[W+1],g[W+2]),je(g[W+1],g[W+2],g[W+3]),je(g[W+2],g[W+3],g[W+4])]),D=0;4>D;++D)i(g,S+32*D,W,0,W.length)}function ki(g,S){var D=g[S-1],W=g[S-1+32],st=g[S-1+64],lt=g[S-1+96];oe(g,S+0,16843009*je(g[S-1-32],D,W)),oe(g,S+32,16843009*je(D,W,st)),oe(g,S+64,16843009*je(W,st,lt)),oe(g,S+96,16843009*je(st,lt,lt))}function Zi(g,S){var D,W=4;for(D=0;4>D;++D)W+=g[S+D-32]+g[S-1+32*D];for(W>>=3,D=0;4>D;++D)s(g,S+32*D,W,4)}function Ji(g,S){var D=g[S-1+0],W=g[S-1+32],st=g[S-1+64],lt=g[S-1-32],ht=g[S+0-32],ft=g[S+1-32],bt=g[S+2-32],Et=g[S+3-32];g[S+0+96]=je(W,st,g[S-1+96]),g[S+1+96]=g[S+0+64]=je(D,W,st),g[S+2+96]=g[S+1+64]=g[S+0+32]=je(lt,D,W),g[S+3+96]=g[S+2+64]=g[S+1+32]=g[S+0+0]=je(ht,lt,D),g[S+3+64]=g[S+2+32]=g[S+1+0]=je(ft,ht,lt),g[S+3+32]=g[S+2+0]=je(bt,ft,ht),g[S+3+0]=je(Et,bt,ft)}function Ge(g,S){var D=g[S+1-32],W=g[S+2-32],st=g[S+3-32],lt=g[S+4-32],ht=g[S+5-32],ft=g[S+6-32],bt=g[S+7-32];g[S+0+0]=je(g[S+0-32],D,W),g[S+1+0]=g[S+0+32]=je(D,W,st),g[S+2+0]=g[S+1+32]=g[S+0+64]=je(W,st,lt),g[S+3+0]=g[S+2+32]=g[S+1+64]=g[S+0+96]=je(st,lt,ht),g[S+3+32]=g[S+2+64]=g[S+1+96]=je(lt,ht,ft),g[S+3+64]=g[S+2+96]=je(ht,ft,bt),g[S+3+96]=je(ft,bt,bt)}function tn(g,S){var D=g[S-1+0],W=g[S-1+32],st=g[S-1+64],lt=g[S-1-32],ht=g[S+0-32],ft=g[S+1-32],bt=g[S+2-32],Et=g[S+3-32];g[S+0+0]=g[S+1+64]=lt+ht+1>>1,g[S+1+0]=g[S+2+64]=ht+ft+1>>1,g[S+2+0]=g[S+3+64]=ft+bt+1>>1,g[S+3+0]=bt+Et+1>>1,g[S+0+96]=je(st,W,D),g[S+0+64]=je(W,D,lt),g[S+0+32]=g[S+1+96]=je(D,lt,ht),g[S+1+32]=g[S+2+96]=je(lt,ht,ft),g[S+2+32]=g[S+3+96]=je(ht,ft,bt),g[S+3+32]=je(ft,bt,Et)}function _n(g,S){var D=g[S+0-32],W=g[S+1-32],st=g[S+2-32],lt=g[S+3-32],ht=g[S+4-32],ft=g[S+5-32],bt=g[S+6-32],Et=g[S+7-32];g[S+0+0]=D+W+1>>1,g[S+1+0]=g[S+0+64]=W+st+1>>1,g[S+2+0]=g[S+1+64]=st+lt+1>>1,g[S+3+0]=g[S+2+64]=lt+ht+1>>1,g[S+0+32]=je(D,W,st),g[S+1+32]=g[S+0+96]=je(W,st,lt),g[S+2+32]=g[S+1+96]=je(st,lt,ht),g[S+3+32]=g[S+2+96]=je(lt,ht,ft),g[S+3+64]=je(ht,ft,bt),g[S+3+96]=je(ft,bt,Et)}function Ki(g,S){var D=g[S-1+0],W=g[S-1+32],st=g[S-1+64],lt=g[S-1+96];g[S+0+0]=D+W+1>>1,g[S+2+0]=g[S+0+32]=W+st+1>>1,g[S+2+32]=g[S+0+64]=st+lt+1>>1,g[S+1+0]=je(D,W,st),g[S+3+0]=g[S+1+32]=je(W,st,lt),g[S+3+32]=g[S+1+64]=je(st,lt,lt),g[S+3+64]=g[S+2+64]=g[S+0+96]=g[S+1+96]=g[S+2+96]=g[S+3+96]=lt}function gi(g,S){var D=g[S-1+0],W=g[S-1+32],st=g[S-1+64],lt=g[S-1+96],ht=g[S-1-32],ft=g[S+0-32],bt=g[S+1-32],Et=g[S+2-32];g[S+0+0]=g[S+2+32]=D+ht+1>>1,g[S+0+32]=g[S+2+64]=W+D+1>>1,g[S+0+64]=g[S+2+96]=st+W+1>>1,g[S+0+96]=lt+st+1>>1,g[S+3+0]=je(ft,bt,Et),g[S+2+0]=je(ht,ft,bt),g[S+1+0]=g[S+3+32]=je(D,ht,ft),g[S+1+32]=g[S+3+64]=je(W,D,ht),g[S+1+64]=g[S+3+96]=je(st,W,D),g[S+1+96]=je(lt,st,W)}function Ii(g,S){var D;for(D=0;8>D;++D)i(g,S+32*D,g,S-32,8)}function si(g,S){var D;for(D=0;8>D;++D)s(g,S,g[S-1],8),S+=32}function Si(g,S,D){var W;for(W=0;8>W;++W)s(S,D+32*W,g,8)}function Pn(g,S){var D,W=8;for(D=0;8>D;++D)W+=g[S+D-32]+g[S-1+32*D];Si(W>>4,g,S)}function pn(g,S){var D,W=4;for(D=0;8>D;++D)W+=g[S+D-32];Si(W>>3,g,S)}function ln(g,S){var D,W=4;for(D=0;8>D;++D)W+=g[S-1+32*D];Si(W>>3,g,S)}function zs(g,S){Si(128,g,S)}function Ln(g,S,D){var W=g[S-D],st=g[S+0],lt=3*(st-W)+Pm[1020+g[S-2*D]-g[S+D]],ht=Yd[112+(lt+4>>3)];g[S-D]=cr[255+W+Yd[112+(lt+3>>3)]],g[S+0]=cr[255+st-ht]}function so(g,S,D,W){var st=g[S+0],lt=g[S+D];return Cr[255+g[S-2*D]-g[S-D]]>W||Cr[255+lt-st]>W}function Ri(g,S,D,W){return 4*Cr[255+g[S-D]-g[S+0]]+Cr[255+g[S-2*D]-g[S+D]]<=W}function Pa(g,S,D,W,st){var lt=g[S-3*D],ht=g[S-2*D],ft=g[S-D],bt=g[S+0],Et=g[S+D],Kt=g[S+2*D],le=g[S+3*D];return 4*Cr[255+ft-bt]+Cr[255+ht-Et]>W?0:Cr[255+g[S-4*D]-lt]<=st&&Cr[255+lt-ht]<=st&&Cr[255+ht-ft]<=st&&Cr[255+le-Kt]<=st&&Cr[255+Kt-Et]<=st&&Cr[255+Et-bt]<=st}function Bd(g,S,D,W){var st=2*W+1;for(W=0;16>W;++W)Ri(g,S+W,D,st)&&Ln(g,S+W,D)}function la(g,S,D,W){var st=2*W+1;for(W=0;16>W;++W)Ri(g,S+W*D,1,st)&&Ln(g,S+W*D,1)}function Ea(g,S,D,W){var st;for(st=3;0<st;--st)Bd(g,S+=4*D,D,W)}function Sm(g,S,D,W){var st;for(st=3;0<st;--st)la(g,S+=4,D,W)}function ro(g,S,D,W,st,lt,ht,ft){for(lt=2*lt+1;0<st--;){if(Pa(g,S,D,lt,ht))if(so(g,S,D,ft))Ln(g,S,D);else{var bt=g,Et=S,Kt=D,le=bt[Et-2*Kt],he=bt[Et-Kt],ee=bt[Et+0],De=bt[Et+Kt],ye=bt[Et+2*Kt],$t=27*(Ie=Pm[1020+3*(ee-he)+Pm[1020+le-De]])+63>>7,te=18*Ie+63>>7,Ie=9*Ie+63>>7;bt[Et-3*Kt]=cr[255+bt[Et-3*Kt]+Ie],bt[Et-2*Kt]=cr[255+le+te],bt[Et-Kt]=cr[255+he+$t],bt[Et+0]=cr[255+ee-$t],bt[Et+Kt]=cr[255+De-te],bt[Et+2*Kt]=cr[255+ye-Ie]}S+=W}}function Hr(g,S,D,W,st,lt,ht,ft){for(lt=2*lt+1;0<st--;){if(Pa(g,S,D,lt,ht))if(so(g,S,D,ft))Ln(g,S,D);else{var bt=g,Et=S,Kt=D,le=bt[Et-Kt],he=bt[Et+0],ee=bt[Et+Kt],De=Yd[112+((ye=3*(he-le))+4>>3)],ye=Yd[112+(ye+3>>3)],$t=De+1>>1;bt[Et-2*Kt]=cr[255+bt[Et-2*Kt]+$t],bt[Et-Kt]=cr[255+le+ye],bt[Et+0]=cr[255+he-De],bt[Et+Kt]=cr[255+ee-$t]}S+=W}}function uc(g,S,D,W,st,lt){ro(g,S,D,1,16,W,st,lt)}function nl(g,S,D,W,st,lt){ro(g,S,1,D,16,W,st,lt)}function Mm(g,S,D,W,st,lt){var ht;for(ht=3;0<ht;--ht)Hr(g,S+=4*D,D,1,16,W,st,lt)}function ql(g,S,D,W,st,lt){var ht;for(ht=3;0<ht;--ht)Hr(g,S+=4,1,D,16,W,st,lt)}function Tm(g,S,D,W,st,lt,ht,ft){ro(g,S,st,1,8,lt,ht,ft),ro(D,W,st,1,8,lt,ht,ft)}function pc(g,S,D,W,st,lt,ht,ft){ro(g,S,1,st,8,lt,ht,ft),ro(D,W,1,st,8,lt,ht,ft)}function fc(g,S,D,W,st,lt,ht,ft){Hr(g,S+4*st,st,1,8,lt,ht,ft),Hr(D,W+4*st,st,1,8,lt,ht,ft)}function Od(g,S,D,W,st,lt,ht,ft){Hr(g,S+4,1,st,8,lt,ht,ft),Hr(D,W+4,1,st,8,lt,ht,ft)}function Zl(){this.ba=new Rt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ot,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function mc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vd(){this.ua=0,this.Wa=new Ct,this.vb=new Ct,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new yt,this.yc=new $}function Cm(){this.xb=this.a=0,this.l=new Vt,this.ca=new Rt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vd,this.ab=0,this.gc=h(4,gc),this.Oc=0}function Kl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function sl(g,S,D,W,st,lt,ht){for(g=g==null?0:g[S+0],S=0;S<ht;++S)st[lt+S]=g+D[W+S]&255,g=st[lt+S]}function xc(g,S,D,W,st,lt,ht){var ft;if(g==null)sl(null,null,D,W,st,lt,ht);else for(ft=0;ft<ht;++ft)st[lt+ft]=g[S+ft]+D[W+ft]&255}function ao(g,S,D,W,st,lt,ht){if(g==null)sl(null,null,D,W,st,lt,ht);else{var ft,bt=g[S+0],Et=bt,Kt=bt;for(ft=0;ft<ht;++ft)Et=Kt+(bt=g[S+ft])-Et,Kt=D[W+ft]+(-256&Et?0>Et?0:255:Et)&255,Et=bt,st[lt+ft]=Kt}}function vc(g,S,D,W){var st=S.width,lt=S.o;if(t(g!=null&&S!=null),0>D||0>=W||D+W>lt)return null;if(!g.Cc){if(g.ga==null){var ht;if(g.ga=new Kl,(ht=g.ga==null)||(ht=S.width*S.o,t(g.Gb.length==0),g.Gb=a(ht),g.Uc=0,g.Gb==null?ht=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,ht=1),ht=!ht),!ht){ht=g.ga;var ft=g.Fa,bt=g.P,Et=g.qc,Kt=g.mb,le=g.nb,he=bt+1,ee=Et-1,De=ht.l;if(t(ft!=null&&Kt!=null&&S!=null),po[0]=null,po[1]=sl,po[2]=xc,po[3]=ao,ht.ca=Kt,ht.tb=le,ht.c=S.width,ht.i=S.height,t(0<ht.c&&0<ht.i),1>=Et)S=0;else if(ht.$a=ft[bt+0]>>0&3,ht.Z=ft[bt+0]>>2&3,ht.Lc=ft[bt+0]>>4&3,bt=ft[bt+0]>>6&3,0>ht.$a||1<ht.$a||4<=ht.Z||1<ht.Lc||bt)S=0;else if(De.put=oi,De.ac=yi,De.bc=Oi,De.ma=ht,De.width=S.width,De.height=S.height,De.Da=S.Da,De.v=S.v,De.va=S.va,De.j=S.j,De.o=S.o,ht.$a)t:{t(ht.$a==1),S=N();e:for(;;){if(S==null){S=0;break t}if(t(ht!=null),ht.mc=S,S.c=ht.c,S.i=ht.i,S.l=ht.l,S.l.ma=ht,S.l.width=ht.c,S.l.height=ht.i,S.a=0,Mt(S.m,ft,he,ee),!M(ht.c,ht.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&o(S.s)?(ht.ic=1,ft=S.c*S.i,S.Ta=null,S.Ua=0,S.V=a(ft),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(ht.ic=0,S=w(S,ht.c)),!S))break e;S=1;break t}ht.mc=null,S=0}else S=ee>=ht.c*ht.i;ht=!S}if(ht)return null;g.ga.Lc!=1?g.Ga=0:W=lt-D}t(g.ga!=null),t(D+W<=lt);t:{if(S=(ft=g.ga).c,lt=ft.l.o,ft.$a==0){if(he=g.rc,ee=g.Vc,De=g.Fa,bt=g.P+1+D*S,Et=g.mb,Kt=g.nb+D*S,t(bt<=g.P+g.qc),ft.Z!=0)for(t(po[ft.Z]!=null),ht=0;ht<W;++ht)po[ft.Z](he,ee,De,bt,Et,Kt,S),he=Et,ee=Kt,Kt+=S,bt+=S;else for(ht=0;ht<W;++ht)i(Et,Kt,De,bt,S),he=Et,ee=Kt,Kt+=S,bt+=S;g.rc=he,g.Vc=ee}else{if(t(ft.mc!=null),S=D+W,t((ht=ft.mc)!=null),t(S<=ht.i),ht.C>=S)S=1;else if(ft.ic||ae(),ft.ic){ft=ht.V,he=ht.Ba,ee=ht.c;var ye=ht.i,$t=(De=1,bt=ht.$/ee,Et=ht.$%ee,Kt=ht.m,le=ht.s,ht.$),te=ee*ye,Ie=ee*S,Fe=le.wc,Le=$t<Ie?r(le,Et,bt):null;t($t<=te),t(S<=ye),t(o(le));e:for(;;){for(;!Kt.h&&$t<Ie;){if(Et&Fe||(Le=r(le,Et,bt)),t(Le!=null),mt(Kt),256>(ye=Xe(Le.G[0],Le.H[0],Kt)))ft[he+$t]=ye,++$t,++Et>=ee&&(Et=0,++bt<=S&&!(bt%16)&&x(ht,bt));else{if(!(280>ye)){De=0;break e}ye=un(ye-256,Kt);var ai,Ke=Xe(Le.G[4],Le.H[4],Kt);if(mt(Kt),!($t>=(Ke=on(ee,Ke=un(Ke,Kt)))&&te-$t>=ye)){De=0;break e}for(ai=0;ai<ye;++ai)ft[he+$t+ai]=ft[he+$t+ai-Ke];for($t+=ye,Et+=ye;Et>=ee;)Et-=ee,++bt<=S&&!(bt%16)&&x(ht,bt);$t<Ie&&Et&Fe&&(Le=r(le,Et,bt))}t(Kt.h==z(Kt))}x(ht,bt>S?S:bt);break e}!De||Kt.h&&$t<te?(De=0,ht.a=Kt.h?5:3):ht.$=$t,S=De}else S=_(ht,ht.V,ht.Ba,ht.c,ht.i,S,b);if(!S){W=0;break t}}D+W>=lt&&(g.Cc=1),W=1}if(!W)return null;if(g.Cc&&((W=g.ga)!=null&&(W.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+D*st}function k(g,S,D,W,st,lt){for(;0<st--;){var ht,ft=g,bt=S+(D?1:0),Et=g,Kt=S+(D?0:3);for(ht=0;ht<W;++ht){var le=Et[Kt+4*ht];le!=255&&(le*=32897,ft[bt+4*ht+0]=ft[bt+4*ht+0]*le>>23,ft[bt+4*ht+1]=ft[bt+4*ht+1]*le>>23,ft[bt+4*ht+2]=ft[bt+4*ht+2]*le>>23)}S+=lt}}function rt(g,S,D,W,st){for(;0<W--;){var lt;for(lt=0;lt<D;++lt){var ht=g[S+2*lt+0],ft=15&(Et=g[S+2*lt+1]),bt=4369*ft,Et=(240&Et|Et>>4)*bt>>16;g[S+2*lt+0]=(240&ht|ht>>4)*bt>>16&240|(15&ht|ht<<4)*bt>>16>>4&15,g[S+2*lt+1]=240&Et|ft}S+=st}}function Lt(g,S,D,W,st,lt,ht,ft){var bt,Et,Kt=255;for(Et=0;Et<st;++Et){for(bt=0;bt<W;++bt){var le=g[S+bt];lt[ht+4*bt]=le,Kt&=le}S+=D,ht+=ft}return Kt!=255}function Gt(g,S,D,W,st){var lt;for(lt=0;lt<st;++lt)D[W+lt]=g[S+lt]>>8}function ae(){Tr=k,En=rt,kn=Lt,$n=Gt}function Te(g,S,D){ot[g]=function(W,st,lt,ht,ft,bt,Et,Kt,le,he,ee,De,ye,$t,te,Ie,Fe){var Le,ai=Fe-1>>1,Ke=ft[bt+0]|Et[Kt+0]<<16,Mi=le[he+0]|ee[De+0]<<16;t(W!=null);var ei=3*Ke+Mi+131074>>2;for(S(W[st+0],255&ei,ei>>16,ye,$t),lt!=null&&(ei=3*Mi+Ke+131074>>2,S(lt[ht+0],255&ei,ei>>16,te,Ie)),Le=1;Le<=ai;++Le){var hn=ft[bt+Le]|Et[Kt+Le]<<16,fn=le[he+Le]|ee[De+Le]<<16,sn=Ke+hn+Mi+fn+524296,$i=sn+2*(hn+Mi)>>3;ei=$i+Ke>>1,Ke=(sn=sn+2*(Ke+fn)>>3)+hn>>1,S(W[st+2*Le-1],255&ei,ei>>16,ye,$t+(2*Le-1)*D),S(W[st+2*Le-0],255&Ke,Ke>>16,ye,$t+(2*Le-0)*D),lt!=null&&(ei=sn+Mi>>1,Ke=$i+fn>>1,S(lt[ht+2*Le-1],255&ei,ei>>16,te,Ie+(2*Le-1)*D),S(lt[ht+2*Le+0],255&Ke,Ke>>16,te,Ie+(2*Le+0)*D)),Ke=hn,Mi=fn}1&Fe||(ei=3*Ke+Mi+131074>>2,S(W[st+Fe-1],255&ei,ei>>16,ye,$t+(Fe-1)*D),lt!=null&&(ei=3*Mi+Ke+131074>>2,S(lt[ht+Fe-1],255&ei,ei>>16,te,Ie+(Fe-1)*D)))}}function Be(){Ar[Gd]=H2,Ar[qd]=Kx,Ar[jx]=X2,Ar[Zd]=$x,Ar[Kd]=Jx,Ar[Em]=Qx,Ar[Yx]=j2,Ar[km]=Kx,Ar[Im]=$x,Ar[$d]=Jx,Ar[Lm]=Qx}function ri(g){return g&~Y2?0>g?0:255:g>>tv}function vi(g,S){return ri((19077*g>>8)+(26149*S>>8)-14234)}function Vi(g,S,D){return ri((19077*g>>8)-(6419*S>>8)-(13320*D>>8)+8708)}function Ni(g,S){return ri((19077*g>>8)+(33050*S>>8)-17685)}function en(g,S,D,W,st){W[st+0]=vi(g,D),W[st+1]=Vi(g,S,D),W[st+2]=Ni(g,S)}function Un(g,S,D,W,st){W[st+0]=Ni(g,S),W[st+1]=Vi(g,S,D),W[st+2]=vi(g,D)}function Xn(g,S,D,W,st){var lt=Vi(g,S,D);S=lt<<3&224|Ni(g,S)>>3,W[st+0]=248&vi(g,D)|lt>>5,W[st+1]=S}function ns(g,S,D,W,st){var lt=240&Ni(g,S)|15;W[st+0]=240&vi(g,D)|Vi(g,S,D)>>4,W[st+1]=lt}function Cs(g,S,D,W,st){W[st+0]=255,en(g,S,D,W,st+1)}function gs(g,S,D,W,st){Un(g,S,D,W,st),W[st+3]=255}function Xr(g,S,D,W,st){en(g,S,D,W,st),W[st+3]=255}function hr(g,S){return 0>g?0:g>S?S:g}function ha(g,S,D){ot[g]=function(W,st,lt,ht,ft,bt,Et,Kt,le){for(var he=Kt+(-2&le)*D;Kt!=he;)S(W[st+0],lt[ht+0],ft[bt+0],Et,Kt),S(W[st+1],lt[ht+0],ft[bt+0],Et,Kt+D),st+=2,++ht,++bt,Kt+=2*D;1&le&&S(W[st+0],lt[ht+0],ft[bt+0],Et,Kt)}}function zd(g,S,D){return D==0?g==0?S==0?6:5:S==0?4:0:D}function _c(g,S,D,W,st){switch(g>>>30){case 3:La(S,D,W,st,0);break;case 2:Kn(S,D,W,st);break;case 1:Ws(S,D,W,st)}}function bc(g,S){var D,W,st=S.M,lt=S.Nb,ht=g.oc,ft=g.pc+40,bt=g.oc,Et=g.pc+584,Kt=g.oc,le=g.pc+600;for(D=0;16>D;++D)ht[ft+32*D-1]=129;for(D=0;8>D;++D)bt[Et+32*D-1]=129,Kt[le+32*D-1]=129;for(0<st?ht[ft-1-32]=bt[Et-1-32]=Kt[le-1-32]=129:(s(ht,ft-32-1,127,21),s(bt,Et-32-1,127,9),s(Kt,le-32-1,127,9)),W=0;W<g.za;++W){var he=S.ya[S.aa+W];if(0<W){for(D=-1;16>D;++D)i(ht,ft+32*D-4,ht,ft+32*D+12,4);for(D=-1;8>D;++D)i(bt,Et+32*D-4,bt,Et+32*D+4,4),i(Kt,le+32*D-4,Kt,le+32*D+4,4)}var ee=g.Gd,De=g.Hd+W,ye=he.ad,$t=he.Hc;if(0<st&&(i(ht,ft-32,ee[De].y,0,16),i(bt,Et-32,ee[De].f,0,8),i(Kt,le-32,ee[De].ea,0,8)),he.Za){var te=ht,Ie=ft-32+16;for(0<st&&(W>=g.za-1?s(te,Ie,ee[De].y[15],4):i(te,Ie,ee[De+1].y,0,4)),D=0;4>D;D++)te[Ie+128+D]=te[Ie+256+D]=te[Ie+384+D]=te[Ie+0+D];for(D=0;16>D;++D,$t<<=2)te=ht,Ie=ft+iv[D],jr[he.Ob[D]](te,Ie),_c($t,ye,16*+D,te,Ie)}else if(te=zd(W,st,he.Ob[0]),uo[te](ht,ft),$t!=0)for(D=0;16>D;++D,$t<<=2)_c($t,ye,16*+D,ht,ft+iv[D]);for(D=he.Gc,te=zd(W,st,he.Dd),Ra[te](bt,Et),Ra[te](Kt,le),$t=ye,te=bt,Ie=Et,255&(he=D>>0)&&(170&he?Tc($t,256,te,Ie):Sr($t,256,te,Ie)),he=Kt,$t=le,255&(D>>=8)&&(170&D?Tc(ye,320,he,$t):Sr(ye,320,he,$t)),st<g.Ub-1&&(i(ee[De].y,0,ht,ft+480,16),i(ee[De].f,0,bt,Et+224,8),i(ee[De].ea,0,Kt,le+224,8)),D=8*lt*g.B,ee=g.sa,De=g.ta+16*W+16*lt*g.R,ye=g.qa,he=g.ra+8*W+D,$t=g.Ha,te=g.Ia+8*W+D,D=0;16>D;++D)i(ee,De+D*g.R,ht,ft+32*D,16);for(D=0;8>D;++D)i(ye,he+D*g.B,bt,Et+32*D,8),i($t,te+D*g.B,Kt,le+32*D,8)}}function $l(g,S,D,W,st,lt,ht,ft,bt){var Et=[0],Kt=[0],le=0,he=bt!=null?bt.kd:0,ee=bt??new mc;if(g==null||12>D)return 7;ee.data=g,ee.w=S,ee.ha=D,S=[S],D=[D],ee.gb=[ee.gb];t:{var De=S,ye=D,$t=ee.gb;if(t(g!=null),t(ye!=null),t($t!=null),$t[0]=0,12<=ye[0]&&!e(g,De[0],"RIFF")){if(e(g,De[0]+8,"WEBP")){$t=3;break t}var te=we(g,De[0]+4);if(12>te||4294967286<te){$t=3;break t}if(he&&te>ye[0]-8){$t=7;break t}$t[0]=te,De[0]+=12,ye[0]-=12}$t=0}if($t!=0)return $t;for(te=0<ee.gb[0],D=D[0];;){t:{var Ie=g;ye=S,$t=D;var Fe=Et,Le=Kt,ai=De=[0];if((ei=le=[le])[0]=0,8>$t[0])$t=7;else{if(!e(Ie,ye[0],"VP8X")){if(we(Ie,ye[0]+4)!=10){$t=3;break t}if(18>$t[0]){$t=7;break t}var Ke=we(Ie,ye[0]+8),Mi=1+pe(Ie,ye[0]+12);if(2147483648<=Mi*(Ie=1+pe(Ie,ye[0]+15))){$t=3;break t}ai!=null&&(ai[0]=Ke),Fe!=null&&(Fe[0]=Mi),Le!=null&&(Le[0]=Ie),ye[0]+=18,$t[0]-=18,ei[0]=1}$t=0}}if(le=le[0],De=De[0],$t!=0)return $t;if(ye=!!(2&De),!te&&le)return 3;if(lt!=null&&(lt[0]=!!(16&De)),ht!=null&&(ht[0]=ye),ft!=null&&(ft[0]=0),ht=Et[0],De=Kt[0],le&&ye&&bt==null){$t=0;break}if(4>D){$t=7;break}if(te&&le||!te&&!le&&!e(g,S[0],"ALPH")){D=[D],ee.na=[ee.na],ee.P=[ee.P],ee.Sa=[ee.Sa];t:{Ke=g,$t=S,te=D;var ei=ee.gb;Fe=ee.na,Le=ee.P,ai=ee.Sa,Mi=22,t(Ke!=null),t(te!=null),Ie=$t[0];var hn=te[0];for(t(Fe!=null),t(ai!=null),Fe[0]=null,Le[0]=null,ai[0]=0;;){if($t[0]=Ie,te[0]=hn,8>hn){$t=7;break t}var fn=we(Ke,Ie+4);if(4294967286<fn){$t=3;break t}var sn=8+fn+1&-2;if(Mi+=sn,0<ei&&Mi>ei){$t=3;break t}if(!e(Ke,Ie,"VP8 ")||!e(Ke,Ie,"VP8L")){$t=0;break t}if(hn[0]<sn){$t=7;break t}e(Ke,Ie,"ALPH")||(Fe[0]=Ke,Le[0]=Ie+8,ai[0]=fn),Ie+=sn,hn-=sn}}if(D=D[0],ee.na=ee.na[0],ee.P=ee.P[0],ee.Sa=ee.Sa[0],$t!=0)break}D=[D],ee.Ja=[ee.Ja],ee.xa=[ee.xa];t:if(ei=g,$t=S,te=D,Fe=ee.gb[0],Le=ee.Ja,ai=ee.xa,Ke=$t[0],Ie=!e(ei,Ke,"VP8 "),Mi=!e(ei,Ke,"VP8L"),t(ei!=null),t(te!=null),t(Le!=null),t(ai!=null),8>te[0])$t=7;else{if(Ie||Mi){if(ei=we(ei,Ke+4),12<=Fe&&ei>Fe-12){$t=3;break t}if(he&&ei>te[0]-8){$t=7;break t}Le[0]=ei,$t[0]+=8,te[0]-=8,ai[0]=Mi}else ai[0]=5<=te[0]&&ei[Ke+0]==47&&!(ei[Ke+4]>>5),Le[0]=te[0];$t=0}if(D=D[0],ee.Ja=ee.Ja[0],ee.xa=ee.xa[0],S=S[0],$t!=0)break;if(4294967286<ee.Ja)return 3;if(ft==null||ye||(ft[0]=ee.xa?2:1),ht=[ht],De=[De],ee.xa){if(5>D){$t=7;break}ft=ht,he=De,ye=lt,g==null||5>D?g=0:5<=D&&g[S+0]==47&&!(g[S+4]>>5)?(te=[0],ei=[0],Fe=[0],Mt(Le=new K,g,S,D),ze(Le,te,ei,Fe)?(ft!=null&&(ft[0]=te[0]),he!=null&&(he[0]=ei[0]),ye!=null&&(ye[0]=Fe[0]),g=1):g=0):g=0}else{if(10>D){$t=7;break}ft=De,g==null||10>D||!Ft(g,S+3,D-3)?g=0:(he=g[S+0]|g[S+1]<<8|g[S+2]<<16,ye=16383&(g[S+7]<<8|g[S+6]),g=16383&(g[S+9]<<8|g[S+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=ee.Ja||!ye||!g?g=0:(ht&&(ht[0]=ye),ft&&(ft[0]=g),g=1))}if(!g||(ht=ht[0],De=De[0],le&&(Et[0]!=ht||Kt[0]!=De)))return 3;bt!=null&&(bt[0]=ee,bt.offset=S-bt.w,t(4294967286>S-bt.w),t(bt.offset==bt.ha-D));break}return $t==0||$t==7&&le&&bt==null?(lt!=null&&(lt[0]|=ee.na!=null&&0<ee.na.length),W!=null&&(W[0]=ht),st!=null&&(st[0]=De),0):$t}function yc(g,S,D){var W=S.width,st=S.height,lt=0,ht=0,ft=W,bt=st;if(S.Da=g!=null&&0<g.Da,S.Da&&(ft=g.cd,bt=g.bd,lt=g.v,ht=g.j,11>D||(lt&=-2,ht&=-2),0>lt||0>ht||0>=ft||0>=bt||lt+ft>W||ht+bt>st))return 0;if(S.v=lt,S.j=ht,S.va=lt+ft,S.o=ht+bt,S.U=ft,S.T=bt,S.da=g!=null&&0<g.da,S.da){if(!Pe(ft,bt,D=[g.ib],lt=[g.hb]))return 0;S.ib=D[0],S.hb=lt[0]}return S.ob=g!=null&&g.ob,S.Kb=g==null||!g.Sd,S.da&&(S.ob=S.ib<3*W/4&&S.hb<3*st/4,S.Kb=0),1}function wc(g){if(g==null)return 2;if(11>g.S){var S=g.f.RGBA;S.fb+=(g.height-1)*S.A,S.A=-S.A}else S=g.f.kb,g=g.height,S.O+=(g-1)*S.fa,S.fa=-S.fa,S.N+=(g-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(g-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(g-1)*S.lb,S.lb=-S.lb);return 0}function Jl(g,S,D,W){if(W==null||0>=g||0>=S)return 2;if(D!=null){if(D.Da){var st=D.cd,lt=D.bd,ht=-2&D.v,ft=-2&D.j;if(0>ht||0>ft||0>=st||0>=lt||ht+st>g||ft+lt>S)return 2;g=st,S=lt}if(D.da){if(!Pe(g,S,st=[D.ib],lt=[D.hb]))return 2;g=st[0],S=lt[0]}}W.width=g,W.height=S;t:{var bt=W.width,Et=W.height;if(g=W.S,0>=bt||0>=Et||!(g>=Gd&&13>g))g=2;else{if(0>=W.Rd&&W.sd==null){ht=lt=st=S=0;var Kt=(ft=bt*nv[g])*Et;if(11>g||(lt=(Et+1)/2*(S=(bt+1)/2),g==12&&(ht=(st=bt)*Et)),(Et=a(Kt+2*lt+ht))==null){g=1;break t}W.sd=Et,11>g?((bt=W.f.RGBA).eb=Et,bt.fb=0,bt.A=ft,bt.size=Kt):((bt=W.f.kb).y=Et,bt.O=0,bt.fa=ft,bt.Fd=Kt,bt.f=Et,bt.N=0+Kt,bt.Ab=S,bt.Cd=lt,bt.ea=Et,bt.W=0+Kt+lt,bt.Db=S,bt.Ed=lt,g==12&&(bt.F=Et,bt.J=0+Kt+2*lt),bt.Tc=ht,bt.lb=st)}if(S=1,st=W.S,lt=W.width,ht=W.height,st>=Gd&&13>st)if(11>st)g=W.f.RGBA,S&=(ft=Math.abs(g.A))*(ht-1)+lt<=g.size,S&=ft>=lt*nv[st],S&=g.eb!=null;else{g=W.f.kb,ft=(lt+1)/2,Kt=(ht+1)/2,bt=Math.abs(g.fa),Et=Math.abs(g.Ab);var le=Math.abs(g.Db),he=Math.abs(g.lb),ee=he*(ht-1)+lt;S&=bt*(ht-1)+lt<=g.Fd,S&=Et*(Kt-1)+ft<=g.Cd,S=(S&=le*(Kt-1)+ft<=g.Ed)&bt>=lt&Et>=ft&le>=ft,S&=g.y!=null,S&=g.f!=null,S&=g.ea!=null,st==12&&(S&=he>=lt,S&=ee<=g.Tc,S&=g.F!=null)}else S=0;g=S?0:2}}return g!=0||D!=null&&D.fd&&(g=wc(W)),g}var ys=64,Ql=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],th=24,eh=32,Sc=8,Js=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),ot.Predictor0=function(){return 4278190080},ot.Predictor1=function(g){return g},ot.Predictor2=function(g,S,D){return S[D+0]},ot.Predictor3=function(g,S,D){return S[D+1]},ot.Predictor4=function(g,S,D){return S[D-1]},ot.Predictor5=function(g,S,D){return et(et(g,S[D+1]),S[D+0])},ot.Predictor6=function(g,S,D){return et(g,S[D-1])},ot.Predictor7=function(g,S,D){return et(g,S[D+0])},ot.Predictor8=function(g,S,D){return et(S[D-1],S[D+0])},ot.Predictor9=function(g,S,D){return et(S[D+0],S[D+1])},ot.Predictor10=function(g,S,D){return et(et(g,S[D-1]),et(S[D+0],S[D+1]))},ot.Predictor11=function(g,S,D){var W=S[D+0];return 0>=xe(W>>24&255,g>>24&255,(S=S[D-1])>>24&255)+xe(W>>16&255,g>>16&255,S>>16&255)+xe(W>>8&255,g>>8&255,S>>8&255)+xe(255&W,255&g,255&S)?W:g},ot.Predictor12=function(g,S,D){var W=S[D+0];return(qt((g>>24&255)+(W>>24&255)-((S=S[D-1])>>24&255))<<24|qt((g>>16&255)+(W>>16&255)-(S>>16&255))<<16|qt((g>>8&255)+(W>>8&255)-(S>>8&255))<<8|qt((255&g)+(255&W)-(255&S)))>>>0},ot.Predictor13=function(g,S,D){var W=S[D-1];return(ce((g=et(g,S[D+0]))>>24&255,W>>24&255)<<24|ce(g>>16&255,W>>16&255)<<16|ce(g>>8&255,W>>8&255)<<8|ce(g>>0&255,W>>0&255))>>>0};var Am=ot.PredictorAdd0;ot.PredictorAdd1=ne,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var Mc=ot.PredictorAdd2;Je("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),Je("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Ud,wr=ot.ColorIndexInverseTransform,ih=ot.MapARGB,Wd=ot.VP8LColorIndexInverseTransformAlpha,Hd=ot.MapAlpha,oo=ot.VP8LPredictorsAdd=[];oo.length=16,(ot.VP8LPredictors=[]).length=16,(ot.VP8LPredictorsAdd_C=[]).length=16,(ot.VP8LPredictors_C=[]).length=16;var rl,Qs,Us,lo,ka,Ia,nh,La,Kn,Tc,Ws,Sr,sh,Xd,Cc,al,ol,ho,ll,rh,hl,co,Ac,Mr,Tr,En,kn,$n,cs=a(511),Da=a(2041),Pc=a(225),ah=a(767),jd=0,Pm=Da,Yd=Pc,cr=ah,Cr=cs,Gd=0,qd=1,jx=2,Zd=3,Kd=4,Em=5,Yx=6,km=7,Im=8,$d=9,Lm=10,E2=[2,3,7],k2=[3,3,11],Gx=[280,256,256,256,40],I2=[0,1,1,1,0],L2=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],D2=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],R2=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],F2=8,Dm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Rm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ec=null,N2=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],B2=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],qx=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],O2=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],V2=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],z2=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],U2=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],uo=[],jr=[],Ra=[],W2=1,Zx=2,po=[],Ar=[];Te("UpsampleRgbLinePair",en,3),Te("UpsampleBgrLinePair",Un,3),Te("UpsampleRgbaLinePair",Xr,4),Te("UpsampleBgraLinePair",gs,4),Te("UpsampleArgbLinePair",Cs,4),Te("UpsampleRgba4444LinePair",ns,2),Te("UpsampleRgb565LinePair",Xn,2);var H2=ot.UpsampleRgbLinePair,X2=ot.UpsampleBgrLinePair,Kx=ot.UpsampleRgbaLinePair,$x=ot.UpsampleBgraLinePair,Jx=ot.UpsampleArgbLinePair,Qx=ot.UpsampleRgba4444LinePair,j2=ot.UpsampleRgb565LinePair,Jd=16,Qd=1<<Jd-1,kc=-227,Fm=482,tv=6,Y2=(256<<tv)-1,ev=0,G2=a(256),q2=a(256),Z2=a(256),K2=a(256),$2=a(Fm-kc),J2=a(Fm-kc);ha("YuvToRgbRow",en,3),ha("YuvToBgrRow",Un,3),ha("YuvToRgbaRow",Xr,4),ha("YuvToBgraRow",gs,4),ha("YuvToArgbRow",Cs,4),ha("YuvToRgba4444Row",ns,2),ha("YuvToRgb565Row",Xn,2);var iv=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tu=[0,2,8],Q2=[8,7,6,4,4,2,2,2,1,1,1,1],tw=1;this.WebPDecodeRGBA=function(g,S,D,W,st){var lt=qd,ht=new Zl,ft=new Rt;ht.ba=ft,ft.S=lt,ft.width=[ft.width],ft.height=[ft.height];var bt=ft.width,Et=ft.height,Kt=new jt;if(Kt==null||g==null)var le=2;else t(Kt!=null),le=$l(g,S,D,Kt.width,Kt.height,Kt.Pd,Kt.Qd,Kt.format,null);if(le!=0?bt=0:(bt!=null&&(bt[0]=Kt.width[0]),Et!=null&&(Et[0]=Kt.height[0]),bt=1),bt){ft.width=ft.width[0],ft.height=ft.height[0],W!=null&&(W[0]=ft.width),st!=null&&(st[0]=ft.height);t:{if(W=new Vt,(st=new mc).data=g,st.w=S,st.ha=D,st.kd=1,S=[0],t(st!=null),((g=$l(st.data,st.w,st.ha,null,null,null,S,null,st))==0||g==7)&&S[0]&&(g=4),(S=g)==0){if(t(ht!=null),W.data=st.data,W.w=st.w+st.offset,W.ha=st.ha-st.offset,W.put=oi,W.ac=yi,W.bc=Oi,W.ma=ht,st.xa){if((g=N())==null){ht=1;break t}if(function(he,ee){var De=[0],ye=[0],$t=[0];e:for(;;){if(he==null)return 0;if(ee==null)return he.a=2,0;if(he.l=ee,he.a=0,Mt(he.m,ee.data,ee.w,ee.ha),!ze(he.m,De,ye,$t)){he.a=3;break e}if(he.xb=Zx,ee.width=De[0],ee.height=ye[0],!M(De[0],ye[0],1,he,null))break e;return 1}return t(he.a!=0),0}(g,W)){if(W=(S=Jl(W.width,W.height,ht.Oa,ht.ba))==0){e:{W=g;i:for(;;){if(W==null){W=0;break e}if(t(W.s.yc!=null),t(W.s.Ya!=null),t(0<W.s.Wb),t((D=W.l)!=null),t((st=D.ma)!=null),W.xb!=0){if(W.ca=st.ba,W.tb=st.tb,t(W.ca!=null),!yc(st.Oa,D,Zd)){W.a=2;break i}if(!w(W,D.width)||D.da)break i;if((D.da||Y(W.ca.S))&&ae(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&ae()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!At(W.s.vb,W.s.Wa.Xa)){W.a=1;break i}W.xb=0}if(!_(W,W.V,W.Ba,W.c,W.i,D.o,l))break i;st.Dc=W.Ma,W=1;break e}t(W.a!=0),W=0}W=!W}W&&(S=g.a)}else S=g.a}else{if((g=new Wt)==null){ht=1;break t}if(g.Fa=st.na,g.P=st.P,g.qc=st.Sa,vt(g,W)){if((S=Jl(W.width,W.height,ht.Oa,ht.ba))==0){if(g.Aa=0,D=ht.Oa,t((st=g)!=null),D!=null){if(0<(bt=0>(bt=D.Md)?0:100<bt?255:255*bt/100)){for(Et=Kt=0;4>Et;++Et)12>(le=st.pb[Et]).lc&&(le.ia=bt*Q2[0>le.lc?0:le.lc]>>3),Kt|=le.ia;Kt&&(alert("todo:VP8InitRandom"),st.ia=1)}st.Ga=D.Id,100<st.Ga?st.Ga=100:0>st.Ga&&(st.Ga=0)}Pt(g,W)||(S=g.a)}}else S=g.a}S==0&&ht.Oa!=null&&ht.Oa.fd&&(S=wc(ht.ba))}ht=S}lt=ht!=0?null:11>lt?ft.f.RGBA.eb:ft.f.kb.y}else lt=null;return lt};var nv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(ot,Q){for(var tt="",H=0;H<4;H++)tt+=String.fromCharCode(ot[Q++]);return tt}function v(ot,Q){return(ot[Q+0]<<0|ot[Q+1]<<8|ot[Q+2]<<16)>>>0}function T(ot,Q){return(ot[Q+0]<<0|ot[Q+1]<<8|ot[Q+2]<<16|ot[Q+3]<<24)>>>0}new m;var C=[0],y=[0],F=[],O=new m,R=n,A=function(ot,Q){var tt={},H=0,$=!1,ct=0,yt=0;if(tt.frames=[],!function(X,z,it,mt){for(var dt=0;dt<mt;dt++)if(X[z+dt]!=it.charCodeAt(dt))return!0;return!1}(ot,Q,"RIFF",4)){for(T(ot,Q+=4),Q+=8;Q<ot.length;){var Bt=p(ot,Q),kt=T(ot,Q+=4);Q+=4;var zt=kt+(1&kt);switch(Bt){case"VP8 ":case"VP8L":tt.frames[H]===void 0&&(tt.frames[H]={}),(Zt=tt.frames[H]).src_off=$?yt:Q-8,Zt.src_size=ct+kt+8,H++,$&&($=!1,ct=0,yt=0);break;case"VP8X":(Zt=tt.header={}).feature_flags=ot[Q];var Mt=Q+4;Zt.canvas_width=1+v(ot,Mt),Mt+=3,Zt.canvas_height=1+v(ot,Mt),Mt+=3;break;case"ALPH":$=!0,ct=zt+8,yt=Q-8;break;case"ANIM":(Zt=tt.header).bgcolor=T(ot,Q),Mt=Q+4,Zt.loop_count=(ut=ot)[(K=Mt)+0]<<0|ut[K+1]<<8,Mt+=2;break;case"ANMF":var Yt,Zt;(Zt=tt.frames[H]={}).offset_x=2*v(ot,Q),Q+=3,Zt.offset_y=2*v(ot,Q),Q+=3,Zt.width=1+v(ot,Q),Q+=3,Zt.height=1+v(ot,Q),Q+=3,Zt.duration=v(ot,Q),Q+=3,Yt=ot[Q++],Zt.dispose=1&Yt,Zt.blend=Yt>>1&1}Bt!="ANMF"&&(Q+=zt)}var ut,K;return tt}}(R,0);A.response=R,A.rgbaoutput=!0,A.dataurl=!1;var Z=A.header?A.header:null,J=A.frames?A.frames:null;if(Z){Z.loop_counter=Z.loop_count,C=[Z.canvas_height],y=[Z.canvas_width];for(var nt=0;nt<J.length&&J[nt].blend!=0;nt++);}var pt=J[0],St=O.WebPDecodeRGBA(R,pt.src_off,pt.src_size,y,C);pt.rgba=St,pt.imgwidth=y[0],pt.imgheight=C[0];for(var at=0;at<y[0]*C[0]*4;at++)F[at]=St[at];return this.width=y,this.height=C,this.data=F,this}(function(n){var t=function(){return typeof Zu=="function"},e=function(C,y,F,O){var R=4,A=h;switch(O){case n.image_compression.FAST:R=1,A=a;break;case n.image_compression.MEDIUM:R=6,A=u;break;case n.image_compression.SLOW:R=9,A=m}C=i(C,y,F,A);var Z=Zu(C,{level:R});return n.__addimage__.arrayBufferToBinaryString(Z)},i=function(C,y,F,O){for(var R,A,Z,J=C.length/y,nt=new Uint8Array(C.length+J),pt=v(),St=0;St<J;St+=1){if(Z=St*y,R=C.subarray(Z,Z+y),O)nt.set(O(R,F,A),Z+St);else{for(var at,ot=pt.length,Q=[];at<ot;at+=1)Q[at]=pt[at](R,F,A);var tt=T(Q.concat());nt.set(Q[tt],Z+St)}A=R}return nt},s=function(C){var y=Array.apply([],C);return y.unshift(0),y},a=function(C,y){var F,O=[],R=C.length;O[0]=1;for(var A=0;A<R;A+=1)F=C[A-y]||0,O[A+1]=C[A]-F+256&255;return O},h=function(C,y,F){var O,R=[],A=C.length;R[0]=2;for(var Z=0;Z<A;Z+=1)O=F&&F[Z]||0,R[Z+1]=C[Z]-O+256&255;return R},u=function(C,y,F){var O,R,A=[],Z=C.length;A[0]=3;for(var J=0;J<Z;J+=1)O=C[J-y]||0,R=F&&F[J]||0,A[J+1]=C[J]+256-(O+R>>>1)&255;return A},m=function(C,y,F){var O,R,A,Z,J=[],nt=C.length;J[0]=4;for(var pt=0;pt<nt;pt+=1)O=C[pt-y]||0,R=F&&F[pt]||0,A=F&&F[pt-y]||0,Z=p(O,R,A),J[pt+1]=C[pt]-Z+256&255;return J},p=function(C,y,F){if(C===y&&y===F)return C;var O=Math.abs(y-F),R=Math.abs(C-F),A=Math.abs(C+y-F-F);return O<=R&&O<=A?C:R<=A?y:F},v=function(){return[s,a,h,u,m]},T=function(C){var y=C.map(function(F){return F.reduce(function(O,R){return O+Math.abs(R)},0)});return y.indexOf(Math.min.apply(null,y))};n.processPNG=function(C,y,F,O){var R,A,Z,J,nt,pt,St,at,ot,Q,tt,H,$,ct,yt,Bt=this.decode.FLATE_DECODE,kt="";if(this.__addimage__.isArrayBuffer(C)&&(C=new Uint8Array(C)),this.__addimage__.isArrayBufferView(C)){if(C=(Z=new $S(C)).imgData,A=Z.bits,R=Z.colorSpace,nt=Z.colors,[4,6].indexOf(Z.colorType)!==-1){if(Z.bits===8){ot=(at=Z.pixelBitlength==32?new Uint32Array(Z.decodePixels().buffer):Z.pixelBitlength==16?new Uint16Array(Z.decodePixels().buffer):new Uint8Array(Z.decodePixels().buffer)).length,tt=new Uint8Array(ot*Z.colors),Q=new Uint8Array(ot);var zt,Mt=Z.pixelBitlength-Z.bits;for(ct=0,yt=0;ct<ot;ct++){for($=at[ct],zt=0;zt<Mt;)tt[yt++]=$>>>zt&255,zt+=Z.bits;Q[ct]=$>>>zt&255}}if(Z.bits===16){ot=(at=new Uint32Array(Z.decodePixels().buffer)).length,tt=new Uint8Array(ot*(32/Z.pixelBitlength)*Z.colors),Q=new Uint8Array(ot*(32/Z.pixelBitlength)),H=Z.colors>1,ct=0,yt=0;for(var Yt=0;ct<ot;)$=at[ct++],tt[yt++]=$>>>0&255,H&&(tt[yt++]=$>>>16&255,$=at[ct++],tt[yt++]=$>>>0&255),Q[Yt++]=$>>>16&255;A=8}O!==n.image_compression.NONE&&t()?(C=e(tt,Z.width*Z.colors,Z.colors,O),St=e(Q,Z.width,1,O)):(C=tt,St=Q,Bt=void 0)}if(Z.colorType===3&&(R=this.color_spaces.INDEXED,pt=Z.palette,Z.transparency.indexed)){var Zt=Z.transparency.indexed,ut=0;for(ct=0,ot=Zt.length;ct<ot;++ct)ut+=Zt[ct];if((ut/=255)===ot-1&&Zt.indexOf(0)!==-1)J=[Zt.indexOf(0)];else if(ut!==ot){for(at=Z.decodePixels(),Q=new Uint8Array(at.length),ct=0,ot=at.length;ct<ot;ct++)Q[ct]=Zt[at[ct]];St=e(Q,Z.width,1)}}var K=function(X){var z;switch(X){case n.image_compression.FAST:z=11;break;case n.image_compression.MEDIUM:z=13;break;case n.image_compression.SLOW:z=14;break;default:z=12}return z}(O);return Bt===this.decode.FLATE_DECODE&&(kt="/Predictor "+K+" "),kt+="/Colors "+nt+" /BitsPerComponent "+A+" /Columns "+Z.width,(this.__addimage__.isArrayBuffer(C)||this.__addimage__.isArrayBufferView(C))&&(C=this.__addimage__.arrayBufferToBinaryString(C)),(St&&this.__addimage__.isArrayBuffer(St)||this.__addimage__.isArrayBufferView(St))&&(St=this.__addimage__.arrayBufferToBinaryString(St)),{alias:F,data:C,index:y,filter:Bt,decodeParameters:kt,transparency:J,palette:pt,sMask:St,predictor:K,width:Z.width,height:Z.height,bitsPerComponent:A,colorSpace:R}}}})(Ei.API),function(n){n.processGIF89A=function(t,e,i,s){var a=new JS(t),h=a.width,u=a.height,m=[];a.decodeAndBlitFrameRGBA(0,m);var p={data:m,width:h,height:u},v=new e0(100).encode(p,100);return n.processJPEG.call(this,v,e,i,s)},n.processGIF87A=n.processGIF89A}(Ei.API),Jr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:i,blue:e,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Jr.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){Cn.log("bit decode error:"+e)}},Jr.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<t;s++)for(var a=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+8*s*4,u=0;u<8&&8*s+u<this.width;u++){var m=this.palette[a>>7-u&1];this.data[h+4*u]=m.blue,this.data[h+4*u+1]=m.green,this.data[h+4*u+2]=m.red,this.data[h+4*u+3]=255}e!==0&&(this.pos+=4-e)}},Jr.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<n;s++){var a=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+2*s*4,u=a>>4,m=15&a,p=this.palette[u];if(this.data[h]=p.blue,this.data[h+1]=p.green,this.data[h+2]=p.red,this.data[h+3]=255,2*s+1>=this.width)break;p=this.palette[m],this.data[h+4]=p.blue,this.data[h+4+1]=p.green,this.data[h+4+2]=p.red,this.data[h+4+3]=255}t!==0&&(this.pos+=4-t)}},Jr.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*i;if(s<this.palette.length){var h=this.palette[s];this.data[a]=h.red,this.data[a+1]=h.green,this.data[a+2]=h.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}n!==0&&(this.pos+=4-n)}},Jr.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(a&t)/t*255|0,u=(a>>5&t)/t*255|0,m=(a>>10&t)/t*255|0,p=a>>15?255:0,v=i*this.width*4+4*s;this.data[v]=m,this.data[v+1]=u,this.data[v+2]=h,this.data[v+3]=p}this.pos+=n}},Jr.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(h&t)/t*255|0,m=(h>>5&e)/e*255|0,p=(h>>11)/t*255|0,v=s*this.width*4+4*a;this.data[v]=p,this.data[v+1]=m,this.data[v+2]=u,this.data[v+3]=255}this.pos+=n}},Jr.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*e;this.data[h]=a,this.data[h+1]=s,this.data[h+2]=i,this.data[h+3]=255}this.pos+=this.width%4}},Jr.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*e;this.data[u]=a,this.data[u+1]=s,this.data[u+2]=i,this.data[u+3]=h}},Jr.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,i,s){var a=new Jr(t,!1),h=a.width,u=a.height,m={data:a.getData(),width:h,height:u},p=new e0(100).encode(m,100);return n.processJPEG.call(this,p,e,i,s)}}(Ei.API),Ib.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,i,s){var a=new Ib(t),h=a.width,u=a.height,m={data:a.getData(),width:h,height:u},p=new e0(100).encode(m,100);return n.processJPEG.call(this,p,e,i,s)}}(Ei.API),Ei.API.processRGBA=function(n,t,e){for(var i=n.data,s=i.length,a=new Uint8Array(s/4*3),h=new Uint8Array(s/4),u=0,m=0,p=0;p<s;p+=4){var v=i[p],T=i[p+1],C=i[p+2],y=i[p+3];a[u++]=v,a[u++]=T,a[u++]=C,h[m++]=y}var F=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:F,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ei.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kh=Ei.API,Qu=kh.getCharWidthsArray=function(n,t){var e,i,s=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),h=t.charSpace||this.internal.getCharSpace(),u=t.widths?t.widths:s.metadata.Unicode.widths,m=u.fof?u.fof:1,p=t.kerning?t.kerning:s.metadata.Unicode.kerning,v=p.fof?p.fof:1,T=t.doKerning!==!1,C=0,y=n.length,F=0,O=u[0]||m,R=[];for(e=0;e<y;e++)i=n.charCodeAt(e),typeof s.metadata.widthOfString=="function"?R.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+h*(1e3/a)||0)/1e3):(C=T&&yn(p[i])==="object"&&!isNaN(parseInt(p[i][F],10))?p[i][F]/v:0,R.push((u[i]||O)/m+C)),F=i;return R},Ab=kh.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return kh.processArabic&&(n=kh.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,s)/e:Qu.apply(this,arguments).reduce(function(a,h){return a+h},0)},Pb=function(n,t,e,i){for(var s=[],a=0,h=n.length,u=0;a!==h&&u+t[a]<e;)u+=t[a],a++;s.push(n.slice(0,a));var m=a;for(u=0;a!==h;)u+t[a]>i&&(s.push(n.slice(m,a)),u=0,m=a),u+=t[a],a++;return m!==a&&s.push(n.slice(m,a)),s},Eb=function(n,t,e){e||(e={});var i,s,a,h,u,m,p,v=[],T=[v],C=e.textIndent||0,y=0,F=0,O=n.split(" "),R=Qu.apply(this,[" ",e])[0];if(m=e.lineIndent===-1?O[0].length+2:e.lineIndent||0){var A=Array(m).join(" "),Z=[];O.map(function(nt){(nt=nt.split(/\s*\n/)).length>1?Z=Z.concat(nt.map(function(pt,St){return(St&&pt.length?`
`:"")+pt})):Z.push(nt[0])}),O=Z,m=Ab.apply(this,[A,e])}for(a=0,h=O.length;a<h;a++){var J=0;if(i=O[a],m&&i[0]==`
`&&(i=i.substr(1),J=1),C+y+(F=(s=Qu.apply(this,[i,e])).reduce(function(nt,pt){return nt+pt},0))>t||J){if(F>t){for(u=Pb.apply(this,[i,s,t-(C+y),t]),v.push(u.shift()),v=[u.pop()];u.length;)T.push([u.shift()]);F=s.slice(i.length-(v[0]?v[0].length:0)).reduce(function(nt,pt){return nt+pt},0)}else v=[i];T.push(v),C=F+m,y=R}else v.push(i),C+=y+F,y=R}return p=m?function(nt,pt){return(pt?A:"")+nt.join(" ")}:function(nt){return nt.join(" ")},T.map(p)},kh.splitTextToSize=function(n,t,e){var i,s=(e=e||{}).fontSize||this.internal.getFontSize(),a=function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var T=this.internal.getFont(v.fontName,v.fontStyle);return T.metadata.Unicode?{widths:T.metadata.Unicode.widths||{0:1},kerning:T.metadata.Unicode.kerning||{}}:{font:T.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var h=1*this.internal.scaleFactor*t/s;a.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=e.lineIndent;var u,m,p=[];for(u=0,m=i.length;u<m;u++)p=p.concat(Eb.apply(this,[i[u],h,a]));return p},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},i={},s=0;s<t.length;s++)e[t[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=t[s];var a=function(T){return"0x"+parseInt(T,10).toString(16)},h=n.__fontmetrics__.compress=function(T){var C,y,F,O,R=["{"];for(var A in T){if(C=T[A],isNaN(parseInt(A,10))?y="'"+A+"'":(A=parseInt(A,10),y=(y=a(A).slice(2)).slice(0,-1)+i[y.slice(-1)]),typeof C=="number")C<0?(F=a(C).slice(3),O="-"):(F=a(C).slice(2),O=""),F=O+F.slice(0,-1)+i[F.slice(-1)];else{if(yn(C)!=="object")throw new Error("Don't know what to do with value type "+yn(C)+".");F=h(C)}R.push(y+F)}return R.push("}"),R.join("")},u=n.__fontmetrics__.uncompress=function(T){if(typeof T!="string")throw new Error("Invalid argument passed to uncompress.");for(var C,y,F,O,R={},A=1,Z=R,J=[],nt="",pt="",St=T.length-1,at=1;at<St;at+=1)(O=T[at])=="'"?C?(F=C.join(""),C=void 0):C=[]:C?C.push(O):O=="{"?(J.push([Z,F]),Z={},F=void 0):O=="}"?((y=J.pop())[0][y[1]]=Z,F=void 0,Z=y[0]):O=="-"?A=-1:F===void 0?e.hasOwnProperty(O)?(nt+=e[O],F=parseInt(nt,16)*A,A=1,nt=""):nt+=O:e.hasOwnProperty(O)?(pt+=e[O],Z[F]=parseInt(pt,16)*A,A=1,F=void 0,pt=""):pt+=O;return R},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},v={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(T){var C=T.font,y=v.Unicode[C.postScriptName];y&&(C.metadata.Unicode={},C.metadata.Unicode.widths=y.widths,C.metadata.Unicode.kerning=y.kerning);var F=p.Unicode[C.postScriptName];F&&(C.metadata.Unicode.encoding=F,C.encoding=F.codePages[0])}])}(Ei.API),function(n){var t=function(e){for(var i=e.length,s=new Uint8Array(i),a=0;a<i;a++)s[a]=e.charCodeAt(a);return s};n.API.events.push(["addFont",function(e){var i=void 0,s=e.font,a=e.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(h,u){u=/^\x00\x01\x00\x00/.test(u)?t(u):t(Zc(u)),h.metadata=n.API.TTFFont.open(u),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(s,i)}}])}(Ei),function(n){function t(){return(Di.canvg?Promise.resolve(Di.canvg):import("./chunk-E37T3TMY.js")).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Ei.API.addSvgAsImage=function(e,i,s,a,h,u,m,p){if(isNaN(i)||isNaN(s))throw Cn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(h))throw Cn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=a,v.height=h;var T=v.getContext("2d");T.fillStyle="#fff",T.fillRect(0,0,v.width,v.height);var C={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return t().then(function(F){return F.fromString(T,e,C)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(F){return F.render(C)}).then(function(){y.addImage(v.toDataURL("image/jpeg",1),i,s,a,h,m,p)})}}(),Ei.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(t,e);return this},Ei.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var i,s,a,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(h),m=[],p=0,v=0,T=0;function C(F,O){var R,A=!1;for(R=0;R<F.length;R+=1)F[R]===O&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var y=u.length;for(T=0;T<y;T+=1)e[u[T]].value=e[u[T]].defaultValue,e[u[T]].explicitSet=!1}if(yn(n)==="object"){for(s in n)if(a=n[s],C(u,s)&&a!==void 0){if(e[s].type==="boolean"&&typeof a=="boolean")e[s].value=a;else if(e[s].type==="name"&&C(e[s].valueSet,a))e[s].value=a;else if(e[s].type==="integer"&&Number.isInteger(a))e[s].value=a;else if(e[s].type==="array"){for(p=0;p<a.length;p+=1)if(i=!0,a[p].length===1&&typeof a[p][0]=="number")m.push(String(a[p]-1));else if(a[p].length>1){for(v=0;v<a[p].length;v+=1)typeof a[p][v]!="number"&&(i=!1);i===!0&&m.push([a[p][0]-1,a[p][1]-1].join(" "))}e[s].value="["+m.join(" ")+"]"}else e[s].value=e[s].defaultValue;e[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var F,O=[];for(F in e)e[F].explicitSet===!0&&(e[F].type==="name"?O.push("/"+F+" /"+e[F].value):O.push("/"+F+" "+e[F].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),p=a.length+h.length+u.length+s.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(s+a+h+u+m),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Ei.API),function(n){var t=n.API,e=t.pdfEscape16=function(a,h){for(var u,m=h.metadata.Unicode.widths,p=["","0","00","000","0000"],v=[""],T=0,C=a.length;T<C;++T){if(u=h.metadata.characterToGlyph(a.charCodeAt(T)),h.metadata.glyIdsUsed.push(u),h.metadata.toUnicode[u]=a.charCodeAt(T),m.indexOf(u)==-1&&(m.push(u),m.push([parseInt(h.metadata.widthOfGlyph(u),10)])),u=="0")return v.join("");u=u.toString(16),v.push(p[4-u.length],u)}return v.join("")},i=function(a){var h,u,m,p,v,T,C;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],T=0,C=(u=Object.keys(a).sort(function(y,F){return y-F})).length;T<C;T++)h=u[T],m.length>=100&&(v+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),a[h]!==void 0&&a[h]!==null&&typeof a[h].toString=="function"&&(p=("0000"+a[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),m.push("<"+h+"><"+p+">"));return m.length&&(v+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(h){var u=h.font,m=h.out,p=h.newObject,v=h.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="Identity-H"){for(var T=u.metadata.Unicode.widths,C=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),y="",F=0;F<C.length;F++)y+=String.fromCharCode(C[F]);var O=p();v({data:y,addLength1:!0,objectId:O}),m("endobj");var R=p();v({data:i(u.metadata.toUnicode),addLength1:!0,objectId:R}),m("endobj");var A=p();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+Lh(u.fontName)),m("/FontFile2 "+O+" 0 R"),m("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),m("/Flags "+u.metadata.flags),m("/StemV "+u.metadata.stemV),m("/ItalicAngle "+u.metadata.italicAngle),m("/Ascent "+u.metadata.ascender),m("/Descent "+u.metadata.decender),m("/CapHeight "+u.metadata.capHeight),m(">>"),m("endobj");var Z=p();m("<<"),m("/Type /Font"),m("/BaseFont /"+Lh(u.fontName)),m("/FontDescriptor "+A+" 0 R"),m("/W "+n.API.PDFObject.convert(T)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+u.encoding+")"),m(">>"),m(">>"),m("endobj"),u.objectNumber=p(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+R+" 0 R"),m("/BaseFont /"+Lh(u.fontName)),m("/Encoding /"+u.encoding),m("/DescendantFonts ["+Z+" 0 R]"),m(">>"),m("endobj"),u.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(h){var u=h.font,m=h.out,p=h.newObject,v=h.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var T=u.metadata.rawData,C="",y=0;y<T.length;y++)C+=String.fromCharCode(T[y]);var F=p();v({data:C,addLength1:!0,objectId:F}),m("endobj");var O=p();v({data:i(u.metadata.toUnicode),addLength1:!0,objectId:O}),m("endobj");var R=p();m("<<"),m("/Descent "+u.metadata.decender),m("/CapHeight "+u.metadata.capHeight),m("/StemV "+u.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+F+" 0 R"),m("/Flags 96"),m("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),m("/FontName /"+Lh(u.fontName)),m("/ItalicAngle "+u.metadata.italicAngle),m("/Ascent "+u.metadata.ascender),m(">>"),m("endobj"),u.objectNumber=p();for(var A=0;A<u.metadata.hmtx.widths.length;A++)u.metadata.hmtx.widths[A]=parseInt(u.metadata.hmtx.widths[A]*(1e3/u.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+Lh(u.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),m("endobj"),u.isAlreadyPutted=!0}})(a)}]);var s=function(a){var h,u=a.text||"",m=a.x,p=a.y,v=a.options||{},T=a.mutex||{},C=T.pdfEscape,y=T.activeFontKey,F=T.fonts,O=y,R="",A=0,Z="",J=F[O].encoding;if(F[O].encoding!=="Identity-H")return{text:u,x:m,y:p,options:v,mutex:T};for(Z=u,O=y,Array.isArray(u)&&(Z=u[0]),A=0;A<Z.length;A+=1)F[O].metadata.hasOwnProperty("cmap")&&(h=F[O].metadata.cmap.unicode.codeMap[Z[A].charCodeAt(0)]),h||Z[A].charCodeAt(0)<256&&F[O].metadata.hasOwnProperty("Unicode")?R+=Z[A]:R+="";var nt="";return parseInt(O.slice(1))<14||J==="WinAnsiEncoding"?nt=C(R,O).split("").map(function(pt){return pt.charCodeAt(0).toString(16)}).join(""):J==="Identity-H"&&(nt=e(R,F[O])),T.isHex=!0,{text:nt,x:m,y:p,options:v,mutex:T}};t.events.push(["postProcessText",function(a){var h=a.text||"",u=[],m={text:h,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(h)){var p=0;for(p=0;p<h.length;p+=1)Array.isArray(h[p])&&h[p].length===3?u.push([s(Object.assign({},m,{text:h[p][0]})).text,h[p][1],h[p][2]]):u.push(s(Object.assign({},m,{text:h[p]})).text);a.text=u}else a.text=s(Object.assign({},m,{text:h})).text}])}(Ei),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Ei.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var s,a,h,u,m,p,v,T=t,C=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Z=!1,J=0;this.__bidiEngine__={};var nt=function(H){var $=H.charCodeAt(),ct=$>>8,yt=O[ct];return yt!==void 0?T[256*yt+(255&$)]:ct===252||ct===253?"AL":A.test(ct)?"L":ct===8?"R":"N"},pt=function(H){for(var $,ct=0;ct<H.length;ct++){if(($=nt(H.charAt(ct)))==="L")return!1;if($==="R")return!0}return!1},St=function(H,$,ct,yt){var Bt,kt,zt,Mt,Yt=$[yt];switch(Yt){case"L":case"R":Z=!1;break;case"N":case"AN":break;case"EN":Z&&(Yt="AN");break;case"AL":Z=!0,Yt="R";break;case"WS":Yt="N";break;case"CS":yt<1||yt+1>=$.length||(Bt=ct[yt-1])!=="EN"&&Bt!=="AN"||(kt=$[yt+1])!=="EN"&&kt!=="AN"?Yt="N":Z&&(kt="AN"),Yt=kt===Bt?kt:"N";break;case"ES":Yt=(Bt=yt>0?ct[yt-1]:"B")==="EN"&&yt+1<$.length&&$[yt+1]==="EN"?"EN":"N";break;case"ET":if(yt>0&&ct[yt-1]==="EN"){Yt="EN";break}if(Z){Yt="N";break}for(zt=yt+1,Mt=$.length;zt<Mt&&$[zt]==="ET";)zt++;Yt=zt<Mt&&$[zt]==="EN"?"EN":"N";break;case"NSM":if(h&&!u){for(Mt=$.length,zt=yt+1;zt<Mt&&$[zt]==="NSM";)zt++;if(zt<Mt){var Zt=H[yt],ut=Zt>=1425&&Zt<=2303||Zt===64286;if(Bt=$[zt],ut&&(Bt==="R"||Bt==="AL")){Yt="R";break}}}Yt=yt<1||(Bt=$[yt-1])==="B"?"N":ct[yt-1];break;case"B":Z=!1,s=!0,Yt=J;break;case"S":a=!0,Yt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Z=!1;break;case"BN":Yt="N"}return Yt},at=function(H,$,ct){var yt=H.split("");return ct&&ot(yt,ct,{hiLevel:J}),yt.reverse(),$&&$.reverse(),yt.join("")},ot=function(H,$,ct){var yt,Bt,kt,zt,Mt,Yt=-1,Zt=H.length,ut=0,K=[],X=J?y:C,z=[];for(Z=!1,s=!1,a=!1,Bt=0;Bt<Zt;Bt++)z[Bt]=nt(H[Bt]);for(kt=0;kt<Zt;kt++){if(Mt=ut,K[kt]=St(H,z,K,kt),yt=240&(ut=X[Mt][F[K[kt]]]),ut&=15,$[kt]=zt=X[ut][5],yt>0)if(yt===16){for(Bt=Yt;Bt<kt;Bt++)$[Bt]=1;Yt=-1}else Yt=-1;if(X[ut][6])Yt===-1&&(Yt=kt);else if(Yt>-1){for(Bt=Yt;Bt<kt;Bt++)$[Bt]=zt;Yt=-1}z[kt]==="B"&&($[kt]=0),ct.hiLevel|=zt}a&&function(it,mt,dt){for(var Tt=0;Tt<dt;Tt++)if(it[Tt]==="S"){mt[Tt]=J;for(var Dt=Tt-1;Dt>=0&&it[Dt]==="WS";Dt--)mt[Dt]=J}}(z,$,Zt)},Q=function(H,$,ct,yt,Bt){if(!(Bt.hiLevel<H)){if(H===1&&J===1&&!s)return $.reverse(),void(ct&&ct.reverse());for(var kt,zt,Mt,Yt,Zt=$.length,ut=0;ut<Zt;){if(yt[ut]>=H){for(Mt=ut+1;Mt<Zt&&yt[Mt]>=H;)Mt++;for(Yt=ut,zt=Mt-1;Yt<zt;Yt++,zt--)kt=$[Yt],$[Yt]=$[zt],$[zt]=kt,ct&&(kt=ct[Yt],ct[Yt]=ct[zt],ct[zt]=kt);ut=Mt}ut++}}},tt=function(H,$,ct){var yt=H.split(""),Bt={hiLevel:J};return ct||(ct=[]),ot(yt,ct,Bt),function(kt,zt,Mt){if(Mt.hiLevel!==0&&v)for(var Yt,Zt=0;Zt<kt.length;Zt++)zt[Zt]===1&&(Yt=R.indexOf(kt[Zt]))>=0&&(kt[Zt]=R[Yt+1])}(yt,ct,Bt),Q(2,yt,$,ct,Bt),Q(1,yt,$,ct,Bt),yt.join("")};return this.__bidiEngine__.doBidiReorder=function(H,$,ct){if(function(Bt,kt){if(kt)for(var zt=0;zt<Bt.length;zt++)kt[zt]=zt;u===void 0&&(u=pt(Bt)),p===void 0&&(p=pt(Bt))}(H,$),h||!m||p)if(h&&m&&u^p)J=u?1:0,H=at(H,$,ct);else if(!h&&m&&p)J=u?1:0,H=tt(H,$,ct),H=at(H,$);else if(!h||u||m||p){if(h&&!m&&u^p)H=at(H,$),u?(J=0,H=tt(H,$,ct)):(J=1,H=tt(H,$,ct),H=at(H,$));else if(h&&u&&!m&&p)J=1,H=tt(H,$,ct),H=at(H,$);else if(!h&&!m&&u^p){var yt=v;u?(J=1,H=tt(H,$,ct),J=0,v=!1,H=tt(H,$,ct),v=yt):(J=0,H=tt(H,$,ct),H=at(H,$),J=1,v=!1,H=tt(H,$,ct),v=yt,H=at(H,$))}}else J=0,H=tt(H,$,ct);else J=u?1:0,H=tt(H,$,ct);return H},this.__bidiEngine__.setOptions=function(H){H&&(h=H.isInputVisual,m=H.isOutputVisual,u=H.isInputRtl,p=H.isOutputRtl,v=H.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var s=i.text;i.x,i.y;var a=i.options||{};i.mutex,a.lang;var h=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,e.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var u=0;for(h=[],u=0;u<s.length;u+=1)Object.prototype.toString.call(s[u])==="[object Array]"?h.push([e.doBidiReorder(s[u][0]),s[u][1],s[u][2]]):h.push([e.doBidiReorder(s[u])]);i.text=h}else i.text=e.doBidiReorder(s);e.setOptions({isInputVisual:!0})}])}(Ei),Ei.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new Ro(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new pM(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new QS(this.contents),this.head=new eM(this),this.name=new aM(this),this.cmap=new Hb(this),this.toUnicode={},this.hhea=new iM(this),this.maxp=new oM(this),this.hmtx=new lM(this),this.post=new sM(this),this.os2=new nM(this),this.loca=new uM(this),this.glyf=new hM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,i,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var h,u,m,p;for(p=[],h=0,u=(m=this.bbox).length;h<u;h++)t=m[h],p.push(Math.round(t*this.scaleFactor));return p}.call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),(32768&(e=s>>16))!=0&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,i){var s,a,h,u;for(h=0,a=0,u=(t=""+t).length;0<=u?a<u:a>u;a=0<=u?++a:--a)s=t.charCodeAt(a),h+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/e)||0;return h*(e/1e3)},n.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n}();var ta,Ro=function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var e,i,s;for(s=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)s.push(this.writeByte(t.charCodeAt(e)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,i,s,a,h,u,m;return t=this.readByte(),e=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),h=this.readByte(),u=this.readByte(),m=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^a)+65536*(255^h)+256*(255^u)+(255^m)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*s+16777216*a+65536*h+256*u+m},n.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(t){var e,i,s,a;for(a=[],i=0,s=t.length;i<s;i++)e=t[i],a.push(this.writeByte(e));return a},n}(),QS=function(){var n;function t(e){var i,s,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,s,a,h,u,m,p,v,T,C,y,F,O;for(O in y=Object.keys(e).length,m=Math.log(2),T=16*Math.floor(Math.log(y)/m),h=Math.floor(T/m),v=16*y-T,(s=new Ro).writeInt(this.scalarType),s.writeShort(y),s.writeShort(T),s.writeShort(h),s.writeShort(v),a=16*y,p=s.pos+a,u=null,F=[],e)for(C=e[O],s.writeString(O),s.writeInt(n(C)),s.writeInt(p),s.writeInt(C.length),F=F.concat(C),O==="head"&&(u=p),p+=C.length;p%4;)F.push(0),p++;return s.write(F),i=2981146554-n(s.data),s.pos=u+8,s.writeUInt32(i),s.data},n=function(e){var i,s,a,h;for(e=Xb.call(e);e.length%4;)e.push(0);for(a=new Ro(e),s=0,i=0,h=e.length;i<h;i=i+=4)s+=a.readUInt32();return 4294967295&s},t}(),tM={}.hasOwnProperty,_a=function(n,t){for(var e in t)tM.call(t,e)&&(n[e]=t[e]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};ta=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var eM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var i;return(i=new Ro).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},t}(),Lb=function(){function n(t,e){var i,s,a,h,u,m,p,v,T,C,y,F,O,R,A,Z,J;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),T=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=t.readByte();break;case 4:for(y=t.readUInt16(),C=y/2,t.pos+=6,a=function(){var nt,pt;for(pt=[],m=nt=0;0<=C?nt<C:nt>C;m=0<=C?++nt:--nt)pt.push(t.readUInt16());return pt}(),t.pos+=2,O=function(){var nt,pt;for(pt=[],m=nt=0;0<=C?nt<C:nt>C;m=0<=C?++nt:--nt)pt.push(t.readUInt16());return pt}(),p=function(){var nt,pt;for(pt=[],m=nt=0;0<=C?nt<C:nt>C;m=0<=C?++nt:--nt)pt.push(t.readUInt16());return pt}(),v=function(){var nt,pt;for(pt=[],m=nt=0;0<=C?nt<C:nt>C;m=0<=C?++nt:--nt)pt.push(t.readUInt16());return pt}(),s=(this.length-t.pos+this.offset)/2,u=function(){var nt,pt;for(pt=[],m=nt=0;0<=s?nt<s:nt>s;m=0<=s?++nt:--nt)pt.push(t.readUInt16());return pt}(),m=A=0,J=a.length;A<J;m=++A)for(R=a[m],i=Z=F=O[m];F<=R?Z<=R:Z>=R;i=F<=R?++Z:--Z)v[m]===0?h=i+p[m]:(h=u[v[m]/2+(i-F)-(C-m)]||0)!==0&&(h+=p[m]),this.codeMap[i]=65535&h}t.pos=T}return n.encode=function(t,e){var i,s,a,h,u,m,p,v,T,C,y,F,O,R,A,Z,J,nt,pt,St,at,ot,Q,tt,H,$,ct,yt,Bt,kt,zt,Mt,Yt,Zt,ut,K,X,z,it,mt,dt,Tt,Dt,oe,ue,pe;switch(yt=new Ro,h=Object.keys(t).sort(function(we,At){return we-At}),e){case"macroman":for(O=0,R=function(){var we=[];for(F=0;F<256;++F)we.push(0);return we}(),Z={0:0},a={},Bt=0,Yt=h.length;Bt<Yt;Bt++)Z[Dt=t[s=h[Bt]]]==null&&(Z[Dt]=++O),a[s]={old:t[s],new:Z[t[s]]},R[s]=Z[t[s]];return yt.writeUInt16(1),yt.writeUInt16(0),yt.writeUInt32(12),yt.writeUInt16(0),yt.writeUInt16(262),yt.writeUInt16(0),yt.write(R),{charMap:a,subtable:yt.data,maxGlyphID:O+1};case"unicode":for($=[],T=[],J=0,Z={},i={},A=p=null,kt=0,Zt=h.length;kt<Zt;kt++)Z[pt=t[s=h[kt]]]==null&&(Z[pt]=++J),i[s]={old:pt,new:Z[pt]},u=Z[pt]-s,A!=null&&u===p||(A&&T.push(A),$.push(s),p=u),A=s;for(A&&T.push(A),T.push(65535),$.push(65535),tt=2*(Q=$.length),ot=2*Math.pow(Math.log(Q)/Math.LN2,2),C=Math.log(ot/2)/Math.LN2,at=2*Q-ot,m=[],St=[],y=[],F=zt=0,ut=$.length;zt<ut;F=++zt){if(H=$[F],v=T[F],H===65535){m.push(0),St.push(0);break}if(H-(ct=i[H].new)>=32768)for(m.push(0),St.push(2*(y.length+Q-F)),s=Mt=H;H<=v?Mt<=v:Mt>=v;s=H<=v?++Mt:--Mt)y.push(i[s].new);else m.push(ct-H),St.push(0)}for(yt.writeUInt16(3),yt.writeUInt16(1),yt.writeUInt32(12),yt.writeUInt16(4),yt.writeUInt16(16+8*Q+2*y.length),yt.writeUInt16(0),yt.writeUInt16(tt),yt.writeUInt16(ot),yt.writeUInt16(C),yt.writeUInt16(at),dt=0,K=T.length;dt<K;dt++)s=T[dt],yt.writeUInt16(s);for(yt.writeUInt16(0),Tt=0,X=$.length;Tt<X;Tt++)s=$[Tt],yt.writeUInt16(s);for(oe=0,z=m.length;oe<z;oe++)u=m[oe],yt.writeUInt16(u);for(ue=0,it=St.length;ue<it;ue++)nt=St[ue],yt.writeUInt16(nt);for(pe=0,mt=y.length;pe<mt;pe++)O=y[pe],yt.writeUInt16(O);return{charMap:i,subtable:yt.data,maxGlyphID:J+1}}},n}(),Hb=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="cmap",t.prototype.parse=function(e){var i,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)i=new Lb(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(e,i){var s,a;return i==null&&(i="macroman"),s=Lb.encode(e,i),(a=new Ro).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},t}(),iM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),nM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,s;for(s=[],i=0;i<10;++i)s.push(e.readByte());return s}(),this.charRange=function(){var i,s;for(s=[],i=0;i<4;++i)s.push(e.readInt());return s}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(e.readInt());return s}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),sM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="post",t.prototype.parse=function(e){var i,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var h;for(s=e.readUInt16(),this.glyphNameIndex=[],h=0;0<=s?h<s:h>s;h=0<=s?++h:--h)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)i=e.readByte(),a.push(this.names.push(e.readString(i)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 196608:break;case 262144:return this.map=function(){var u,m,p;for(p=[],h=u=0,m=this.file.maxp.numGlyphs;0<=m?u<m:u>m;h=0<=m?++u:--u)p.push(e.readUInt32());return p}.call(this)}},t}(),rM=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},aM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="name",t.prototype.parse=function(e){var i,s,a,h,u,m,p,v,T,C,y;for(e.pos=this.offset,e.readShort(),i=e.readShort(),m=e.readShort(),s=[],h=0;0<=i?h<i:h>i;h=0<=i?++h:--h)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+m+e.readShort()});for(p={},h=T=0,C=s.length;T<C;h=++T)a=s[h],e.pos=a.offset,v=e.readString(a.length),u=new rM(v,a),p[y=a.nameID]==null&&(p[y]=[]),p[a.nameID].push(u);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},t}(),oM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),lM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="hmtx",t.prototype.parse=function(e){var i,s,a,h,u,m,p;for(e.pos=this.offset,this.metrics=[],i=0,m=this.file.hhea.numberOfMetrics;0<=m?i<m:i>m;i=0<=m?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,T;for(T=[],i=v=0;0<=a?v<a:v>a;i=0<=a?++v:--v)T.push(e.readInt16());return T}(),this.widths=function(){var v,T,C,y;for(y=[],v=0,T=(C=this.metrics).length;v<T;v++)h=C[v],y.push(h.advance);return y}.call(this),s=this.widths[this.widths.length-1],p=[],i=u=0;0<=a?u<a:u>a;i=0<=a?++u:--u)p.push(this.widths.push(s));return p},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Xb=[].slice,hM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var i,s,a,h,u,m,p,v,T,C;return e in this.cache?this.cache[e]:(h=this.file.loca,i=this.file.contents,s=h.indexOf(e),(a=h.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+s,u=(m=new Ro(i.read(a))).readShort(),v=m.readShort(),C=m.readShort(),p=m.readShort(),T=m.readShort(),this.cache[e]=u===-1?new dM(m,v,C,p,T):new cM(m,u,v,C,p,T),this.cache[e]))},t.prototype.encode=function(e,i,s){var a,h,u,m,p;for(u=[],h=[],m=0,p=i.length;m<p;m++)a=e[i[m]],h.push(u.length),a&&(u=u.concat(a.encode(s)));return h.push(u.length),{table:u,offsets:h}},t}(),cM=function(){function n(t,e,i,s,a,h){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=s,this.xMax=a,this.yMax=h,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),dM=function(){function n(t,e,i,s,a){var h,u;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;u=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&u;)h.pos+=1&u?4:2,128&u?h.pos+=8:64&u?h.pos+=4:8&u&&(h.pos+=2)}return n.prototype.encode=function(){var t,e,i;for(e=new Ro(Xb.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),uM=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return _a(t,ta),t.prototype.tag="loca",t.prototype.parse=function(e){var i,s;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?function(){var a,h;for(h=[],s=0,a=this.length;s<a;s+=2)h.push(2*e.readUInt16());return h}.call(this):function(){var a,h;for(h=[],s=0,a=this.length;s<a;s+=4)h.push(e.readUInt32());return h}.call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,i){for(var s=new Uint32Array(this.offsets.length),a=0,h=0,u=0;u<s.length;++u)if(s[u]=a,h<i.length&&i[h]==u){++h,s[u]=a;var m=this.offsets[u],p=this.offsets[u+1]-m;p>0&&(a+=p)}for(var v=new Array(4*s.length),T=0;T<s.length;++T)v[4*T+3]=255&s[T],v[4*T+2]=(65280&s[T])>>8,v[4*T+1]=(16711680&s[T])>>16,v[4*T]=(4278190080&s[T])>>24;return v},t}(),pM=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,i,s,a;for(e in s=this.font.cmap.tables[0].codeMap,t={},a=this.subset)i=a[e],t[e]=s[i];return t},n.prototype.glyphsFor=function(t){var e,i,s,a,h,u,m;for(s={},h=0,u=t.length;h<u;h++)s[a=t[h]]=this.font.glyf.glyphFor(a);for(a in e=[],s)(i=s[a])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(a in m=this.glyphsFor(e))i=m[a],s[a]=i;return s},n.prototype.encode=function(t,e){var i,s,a,h,u,m,p,v,T,C,y,F,O,R,A;for(s in i=Hb.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(t),y={0:0},A=i.charMap)y[(m=A[s]).old]=m.new;for(F in C=i.maxGlyphID,h)F in y||(y[F]=C++);return v=function(Z){var J,nt;for(J in nt={},Z)nt[Z[J]]=J;return nt}(y),T=Object.keys(v).sort(function(Z,J){return Z-J}),O=function(){var Z,J,nt;for(nt=[],Z=0,J=T.length;Z<J;Z++)u=T[Z],nt.push(v[u]);return nt}(),a=this.font.glyf.encode(h,O,y),p=this.font.loca.encode(a.offsets,O),R={cmap:this.font.cmap.raw(),glyf:a.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},n}();Ei.API.PDFObject=function(){var n;function t(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,s,a,h;if(Array.isArray(e))return"["+function(){var u,m,p;for(p=[],u=0,m=e.length;u<m;u++)i=e[u],p.push(t.convert(i));return p}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(s in a=["<<"],e)h=e[s],a.push("/"+s+" "+t.convert(h));return a.push(">>"),a.join(`
`)}return""+e},t}();function Kb(n,t,e,i,s){i=i||{};var a=1.15,h=s.internal.scaleFactor,u=s.internal.getFontSize()/h,m=s.getLineHeightFactor?s.getLineHeightFactor():a,p=u*m,v=/\r\n|\r|\n/g,T="",C=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(T=typeof n=="string"?n.split(v):n,C=T.length||1),e+=u*(2-a),i.valign==="middle"?e-=C/2*p:i.valign==="bottom"&&(e-=C*p),i.halign==="center"||i.halign==="right"){var y=u;if(i.halign==="center"&&(y*=.5),T&&C>=1){for(var F=0;F<T.length;F++)s.text(T[F],t-s.getStringUnitWidth(T[F])*y,e),e+=p;return s}t-=s.getStringUnitWidth(n)*y}return i.halign==="justify"?s.text(n,t,e,{maxWidth:i.maxWidth||100,align:"justify"}):s.text(n,t,e),s}var jb={},Oh=function(){function n(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(t,e){e===void 0&&(e=null),e?e.__autoTableDocumentDefaults=t:jb=t},n.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},n.prototype.applyStyles=function(t,e){var i,s,a;e===void 0&&(e=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var h=this.jsPDFDocument.internal.getFont(),u=h.fontStyle,m=h.fontName;if(t.font&&(m=t.font),t.fontStyle){u=t.fontStyle;var p=this.getFontList()[m];p&&p.indexOf(u)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(p[0]),u=p[0])}if(this.jsPDFDocument.setFont(m,u),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!e){var v=n.unifyColor(t.fillColor);v&&(i=this.jsPDFDocument).setFillColor.apply(i,v),v=n.unifyColor(t.textColor),v&&(s=this.jsPDFDocument).setTextColor.apply(s,v),v=n.unifyColor(t.lineColor),v&&(a=this.jsPDFDocument).setDrawColor.apply(a,v),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},n.prototype.splitTextToSize=function(t,e,i){return this.jsPDFDocument.splitTextToSize(t,e,i)},n.prototype.rect=function(t,e,i,s,a){return this.jsPDFDocument.rect(t,e,i,s,a)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return jb||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),m0=function(n,t){return m0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])},m0(n,t)};function $b(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");m0(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Jb=function(n){$b(t,n);function t(e){var i=n.call(this)||this;return i._element=e,i}return t}(Array);function fM(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function mM(n){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[n]}function op(n,t,e){e.applyStyles(t,!0);var i=Array.isArray(n)?n:[n],s=i.map(function(a){return e.getTextWidth(a)}).reduce(function(a,h){return Math.max(a,h)},0);return s}function Qb(n,t,e,i){var s=t.settings.tableLineWidth,a=t.settings.tableLineColor;n.applyStyles({lineWidth:s,lineColor:a});var h=ty(s,!1);h&&n.rect(e.x,e.y,t.getWidth(n.pageSize().width),i.y-e.y,h)}function ty(n,t){var e=n>0,i=t||t===0;return e&&i?"DF":e?"S":i?"F":null}function hp(n,t){var e,i,s,a;if(n=n||t,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=t}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(e=n.left)!==null&&e!==void 0?e:t,top:(i=n.top)!==null&&i!==void 0?i:t,right:(s=n.right)!==null&&s!==void 0?s:t,bottom:(a=n.bottom)!==null&&a!==void 0?a:t}):(typeof n!="number"&&(n=t),{top:n,right:n,bottom:n,left:n})}function ey(n,t){var e=hp(t.settings.margin,0);return n.pageSize().width-(e.left+e.right)}function gM(n,t,e,i,s){var a={},h=1.3333333333333333,u=h0(t,function(J){return s.getComputedStyle(J).backgroundColor});u!=null&&(a.fillColor=u);var m=h0(t,function(J){return s.getComputedStyle(J).color});m!=null&&(a.textColor=m);var p=vM(i,e);p&&(a.cellPadding=p);var v="borderTopColor",T=h*e,C=i.borderTopWidth;if(i.borderBottomWidth===C&&i.borderRightWidth===C&&i.borderLeftWidth===C){var y=(parseFloat(C)||0)/T;y&&(a.lineWidth=y)}else a.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/T,right:(parseFloat(i.borderRightWidth)||0)/T,bottom:(parseFloat(i.borderBottomWidth)||0)/T,left:(parseFloat(i.borderLeftWidth)||0)/T},a.lineWidth.top||(a.lineWidth.right?v="borderRightColor":a.lineWidth.bottom?v="borderBottomColor":a.lineWidth.left&&(v="borderLeftColor"));var F=h0(t,function(J){return s.getComputedStyle(J)[v]});F!=null&&(a.lineColor=F);var O=["left","right","center","justify"];O.indexOf(i.textAlign)!==-1&&(a.halign=i.textAlign),O=["middle","bottom","top"],O.indexOf(i.verticalAlign)!==-1&&(a.valign=i.verticalAlign);var R=parseInt(i.fontSize||"");isNaN(R)||(a.fontSize=R/h);var A=xM(i);A&&(a.fontStyle=A);var Z=(i.fontFamily||"").toLowerCase();return n.indexOf(Z)!==-1&&(a.font=Z),a}function xM(n){var t="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(t="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(t+="italic"),t}function h0(n,t){var e=iy(n,t);if(!e)return null;var i=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var s=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],a=parseInt(i[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function iy(n,t){var e=t(n);return e==="rgba(0, 0, 0, 0)"||e==="transparent"||e==="initial"||e==="inherit"?n.parentElement==null?null:iy(n.parentElement,t):e}function vM(n,t){var e=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],i=96/(72/t),s=(parseInt(n.lineHeight)-parseInt(n.fontSize))/t/2,a=e.map(function(u){return parseInt(u||"0")/i}),h=hp(a,0);return s>h.top&&(h.top=s),s>h.bottom&&(h.bottom=s),h}function ny(n,t,e,i,s){var a,h;i===void 0&&(i=!1),s===void 0&&(s=!1);var u;typeof t=="string"?u=e.document.querySelector(t):u=t;var m=Object.keys(n.getFontList()),p=n.scaleFactor(),v=[],T=[],C=[];if(!u)return console.error("Html table could not be found with input: ",t),{head:v,body:T,foot:C};for(var y=0;y<u.rows.length;y++){var F=u.rows[y],O=(h=(a=F?.parentElement)===null||a===void 0?void 0:a.tagName)===null||h===void 0?void 0:h.toLowerCase(),R=_M(m,p,e,F,i,s);R&&(O==="thead"?v.push(R):O==="tfoot"?C.push(R):T.push(R))}return{head:v,body:T,foot:C}}function _M(n,t,e,i,s,a){for(var h=new Jb(i),u=0;u<i.cells.length;u++){var m=i.cells[u],p=e.getComputedStyle(m);if(s||p.display!=="none"){var v=void 0;a&&(v=gM(n,m,t,p,e)),h.push({rowSpan:m.rowSpan,colSpan:m.colSpan,styles:v,_element:m,content:bM(m)})}}var T=e.getComputedStyle(i);if(h.length>0&&(s||T.display!=="none"))return h}function bM(n){var t=n.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join(`
`),t.innerText||t.textContent||""}function yM(n,t,e){for(var i=0,s=[n,t,e];i<s.length;i++){var a=s[i];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Xa(n,t,e,i,s){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(n),h=1;h<arguments.length;h++){var u=arguments[h];if(u!=null)for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(a[m]=u[m])}return a}function sy(n,t){var e=new Oh(n),i=e.getDocumentOptions(),s=e.getGlobalOptions();yM(s,i,t);var a=Xa({},s,i,t),h;typeof window<"u"&&(h=window);var u=wM(s,i,t),m=SM(s,i,t),p=MM(e,a),v=CM(e,a,h);return{id:t.tableId,content:v,hooks:m,styles:u,settings:p}}function wM(n,t,e){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(m){if(m==="columnStyles"){var p=n[m],v=t[m],T=e[m];i.columnStyles=Xa({},p,v,T)}else{var C=[n,t,e],y=C.map(function(F){return F[m]||{}});i[m]=Xa({},y[0],y[1],y[2])}},a=0,h=Object.keys(i);a<h.length;a++){var u=h[a];s(u)}return i}function SM(n,t,e){for(var i=[n,t,e],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,h=i;a<h.length;a++){var u=h[a];u.didParseCell&&s.didParseCell.push(u.didParseCell),u.willDrawCell&&s.willDrawCell.push(u.willDrawCell),u.didDrawCell&&s.didDrawCell.push(u.didDrawCell),u.willDrawPage&&s.willDrawPage.push(u.willDrawPage),u.didDrawPage&&s.didDrawPage.push(u.didDrawPage)}return s}function MM(n,t){var e,i,s,a,h,u,m,p,v,T,C,y,F=hp(t.margin,40/n.scaleFactor()),O=(e=TM(n,t.startY))!==null&&e!==void 0?e:F.top,R;t.showFoot===!0?R="everyPage":t.showFoot===!1?R="never":R=(i=t.showFoot)!==null&&i!==void 0?i:"everyPage";var A;t.showHead===!0?A="everyPage":t.showHead===!1?A="never":A=(s=t.showHead)!==null&&s!==void 0?s:"everyPage";var Z=(a=t.useCss)!==null&&a!==void 0?a:!1,J=t.theme||(Z?"plain":"striped"),nt=!!t.horizontalPageBreak,pt=(h=t.horizontalPageBreakRepeat)!==null&&h!==void 0?h:null;return{includeHiddenHtml:(u=t.includeHiddenHtml)!==null&&u!==void 0?u:!1,useCss:Z,theme:J,startY:O,margin:F,pageBreak:(m=t.pageBreak)!==null&&m!==void 0?m:"auto",rowPageBreak:(p=t.rowPageBreak)!==null&&p!==void 0?p:"auto",tableWidth:(v=t.tableWidth)!==null&&v!==void 0?v:"auto",showHead:A,showFoot:R,tableLineWidth:(T=t.tableLineWidth)!==null&&T!==void 0?T:0,tableLineColor:(C=t.tableLineColor)!==null&&C!==void 0?C:200,horizontalPageBreak:nt,horizontalPageBreakRepeat:pt,horizontalPageBreakBehaviour:(y=t.horizontalPageBreakBehaviour)!==null&&y!==void 0?y:"afterAllRows"}}function TM(n,t){var e=n.getLastAutoTable(),i=n.scaleFactor(),s=n.pageNumber(),a=!1;if(e&&e.startPageNumber){var h=e.startPageNumber+e.pageNumber-1;a=h===s}return typeof t=="number"?t:(t==null||t===!1)&&a&&e?.finalY!=null?e.finalY+20/i:null}function CM(n,t,e){var i=t.head||[],s=t.body||[],a=t.foot||[];if(t.html){var h=t.includeHiddenHtml;if(e){var u=ny(n,t.html,e,h,t.useCss)||{};i=u.head||i,s=u.body||i,a=u.foot||i}else console.error("Cannot parse html in non browser environment")}var m=t.columns||AM(i,s,a);return{columns:m,head:i,body:s,foot:a}}function AM(n,t,e){var i=n[0]||t[0]||e[0]||[],s=[];return Object.keys(i).filter(function(a){return a!=="_element"}).forEach(function(a){var h=1,u;Array.isArray(i)?u=i[parseInt(a)]:u=i[a],typeof u=="object"&&!Array.isArray(u)&&(h=u?.colSpan||1);for(var m=0;m<h;m++){var p=void 0;Array.isArray(i)?p=s.length:p=a+(m>0?"_".concat(m):"");var v={dataKey:p};s.push(v)}}),s}var g0=function(){function n(t,e,i){this.table=e,this.pageNumber=e.pageNumber,this.settings=e.settings,this.cursor=i,this.doc=t.getDocument()}return n}(),PM=function(n){$b(t,n);function t(e,i,s,a,h,u){var m=n.call(this,e,i,u)||this;return m.cell=s,m.row=a,m.column=h,m.section=a.section,m}return t}(g0),EM=function(){function n(t,e){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=e.columns,this.head=e.head,this.body=e.body,this.foot=e.foot}return n.prototype.getHeadHeight=function(t){return this.head.reduce(function(e,i){return e+i.getMaxCellHeight(t)},0)},n.prototype.getFootHeight=function(t){return this.foot.reduce(function(e,i){return e+i.getMaxCellHeight(t)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(t,e,i,s,a,h){for(var u=0,m=e;u<m.length;u++){var p=m[u],v=new PM(t,this,i,s,a,h),T=p(v)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],T)return!1}return!0},n.prototype.callEndPageHooks=function(t,e){t.applyStyles(t.userStyles);for(var i=0,s=this.hooks.didDrawPage;i<s.length;i++){var a=s[i];a(new g0(t,this,e))}},n.prototype.callWillDrawPageHooks=function(t,e){for(var i=0,s=this.hooks.willDrawPage;i<s.length;i++){var a=s[i];a(new g0(t,this,e))}},n.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var e=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return e}else{var i=this.settings.margin;return t-i.left-i.right}},n}(),ry=function(){function n(t,e,i,s,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof Jb&&(this.raw=t._element,this.element=t._element),this.index=e,this.section=i,this.cells=s,this.spansMultiplePages=a}return n.prototype.getMaxCellHeight=function(t){var e=this;return t.reduce(function(i,s){var a;return Math.max(i,((a=e.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},n.prototype.hasRowSpan=function(t){var e=this;return t.filter(function(i){var s=e.cells[i.index];return s?s.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(t,e){return this.getMaxCellHeight(e)<=t},n.prototype.getMinimumRowHeight=function(t,e){var i=this;return t.reduce(function(s,a){var h=i.cells[a.index];if(!h)return 0;var u=e.getLineHeight(h.styles.fontSize),m=h.padding("vertical"),p=m+u;return p>s?p:s},0)},n}(),ay=function(){function n(t,e,i){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=e,this.section=i,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(s=t.content)!==null&&s!==void 0?s:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var h=a!=null?""+a:"",u=/\r\n|\r|\n/g;this.text=h.split(u)}return n.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var e=this.height-this.padding("vertical");t=this.y+e/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");i=this.x+s/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:t}},n.prototype.getContentHeight=function(t,e){e===void 0&&(e=1.15);var i=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/t*e,a=i*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},n.prototype.padding=function(t){var e=hp(this.styles.cellPadding,0);return t==="vertical"?e.top+e.bottom:t==="horizontal"?e.left+e.right:e[t]},n}(),kM=function(){function n(t,e,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=e,this.index=i}return n.prototype.getMaxCustomCellWidth=function(t){for(var e=0,i=0,s=t.allRows();i<s.length;i++){var a=s[i],h=a.cells[this.index];h&&typeof h.styles.cellWidth=="number"&&(e=Math.max(e,h.styles.cellWidth))}return e},n}();function IM(n,t){LM(n,t);var e=[],i=0;t.columns.forEach(function(a){var h=a.getMaxCustomCellWidth(t);h?a.width=h:(a.width=a.wrappedWidth,e.push(a)),i+=a.width});var s=t.getWidth(n.pageSize().width)-i;s&&(s=x0(e,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=x0(e,s,function(a){return a.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/n.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),RM(t),FM(t,n),DM(t)}function LM(n,t){var e=n.scaleFactor(),i=t.settings.horizontalPageBreak,s=ey(n,t);t.allRows().forEach(function(a){for(var h=0,u=t.columns;h<u.length;h++){var m=u[h],p=a.cells[m.index];if(p){var v=t.hooks.didParseCell;t.callCellHooks(n,v,p,a,m,null);var T=p.padding("horizontal");p.contentWidth=op(p.text,p.styles,n)+T;var C=op(p.text.join(" ").split(/[^\S\u00A0]+/),p.styles,n);if(p.minReadableWidth=C+p.padding("horizontal"),typeof p.styles.cellWidth=="number")p.minWidth=p.styles.cellWidth,p.wrappedWidth=p.styles.cellWidth;else if(p.styles.cellWidth==="wrap"||i===!0)p.contentWidth>s?(p.minWidth=s,p.wrappedWidth=s):(p.minWidth=p.contentWidth,p.wrappedWidth=p.contentWidth);else{var y=10/e;p.minWidth=p.styles.minCellWidth||y,p.wrappedWidth=p.contentWidth,p.minWidth>p.wrappedWidth&&(p.wrappedWidth=p.minWidth)}}}}),t.allRows().forEach(function(a){for(var h=0,u=t.columns;h<u.length;h++){var m=u[h],p=a.cells[m.index];if(p&&p.colSpan===1)m.wrappedWidth=Math.max(m.wrappedWidth,p.wrappedWidth),m.minWidth=Math.max(m.minWidth,p.minWidth),m.minReadableWidth=Math.max(m.minReadableWidth,p.minReadableWidth);else{var v=t.styles.columnStyles[m.dataKey]||t.styles.columnStyles[m.index]||{},T=v.cellWidth||v.minCellWidth;T&&typeof T=="number"&&(m.minWidth=T,m.wrappedWidth=T)}p&&(p.colSpan>1&&!m.minWidth&&(m.minWidth=p.minWidth),p.colSpan>1&&!m.wrappedWidth&&(m.wrappedWidth=p.minWidth))}})}function x0(n,t,e){for(var i=t,s=n.reduce(function(y,F){return y+F.wrappedWidth},0),a=0;a<n.length;a++){var h=n[a],u=h.wrappedWidth/s,m=i*u,p=h.width+m,v=e(h),T=p<v?v:p;t-=T-h.width,h.width=T}if(t=Math.round(t*1e10)/1e10,t){var C=n.filter(function(y){return t<0?y.width>e(y):!0});C.length&&(t=x0(C,t,e))}return t}function DM(n){for(var t={},e=1,i=n.allRows(),s=0;s<i.length;s++)for(var a=i[s],h=0,u=n.columns;h<u.length;h++){var m=u[h],p=t[m.index];if(e>1)e--,delete a.cells[m.index];else if(p)p.cell.height+=a.height,e=p.cell.colSpan,delete a.cells[m.index],p.left--,p.left<=1&&delete t[m.index];else{var v=a.cells[m.index];if(!v)continue;if(v.height=a.height,v.rowSpan>1){var T=i.length-s,C=v.rowSpan>T?T:v.rowSpan;t[m.index]={cell:v,left:C,row:a}}}}}function RM(n){for(var t=n.allRows(),e=0;e<t.length;e++)for(var i=t[e],s=null,a=0,h=0,u=0;u<n.columns.length;u++){var m=n.columns[u];if(h-=1,h>1&&n.columns[u+1])a+=m.width,delete i.cells[m.index];else if(s){var p=s;delete i.cells[m.index],s=null,p.width=m.width+a}else{var p=i.cells[m.index];if(!p)continue;if(h=p.colSpan,a=0,p.colSpan>1){s=p,a+=m.width;continue}p.width=m.width+a}}}function FM(n,t){for(var e={count:0,height:0},i=0,s=n.allRows();i<s.length;i++){for(var a=s[i],h=0,u=n.columns;h<u.length;h++){var m=u[h],p=a.cells[m.index];if(p){t.applyStyles(p.styles,!0);var v=p.width-p.padding("horizontal");if(p.styles.overflow==="linebreak")p.text=t.splitTextToSize(p.text,v+1/t.scaleFactor(),{fontSize:p.styles.fontSize});else if(p.styles.overflow==="ellipsize")p.text=Yb(p.text,v,p.styles,t,"...");else if(p.styles.overflow==="hidden")p.text=Yb(p.text,v,p.styles,t,"");else if(typeof p.styles.overflow=="function"){var T=p.styles.overflow(p.text,v);typeof T=="string"?p.text=[T]:p.text=T}p.contentHeight=p.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var C=p.contentHeight/p.rowSpan;p.rowSpan>1&&e.count*e.height<C*p.rowSpan?e={height:C,count:p.rowSpan}:e&&e.count>0&&e.height>C&&(C=e.height),C>a.height&&(a.height=C)}}e.count--}}function Yb(n,t,e,i,s){return n.map(function(a){return NM(a,t,e,i,s)})}function NM(n,t,e,i,s){var a=1e4*i.scaleFactor();if(t=Math.ceil(t*a)/a,t>=op(n,e,i))return n;for(;t<op(n+s,e,i)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+s}function oy(n,t){var e=new Oh(n),i=BM(t,e.scaleFactor()),s=new EM(t,i);return IM(e,s),e.applyStyles(e.userStyles),s}function BM(n,t){var e=n.content,i=VM(e.columns);if(e.head.length===0){var s=Gb(i,"head");s&&e.head.push(s)}if(e.foot.length===0){var s=Gb(i,"foot");s&&e.foot.push(s)}var a=n.settings.theme,h=n.styles;return{columns:i,head:c0("head",e.head,i,h,a,t),body:c0("body",e.body,i,h,a,t),foot:c0("foot",e.foot,i,h,a,t)}}function c0(n,t,e,i,s,a){var h={},u=t.map(function(m,p){for(var v=0,T={},C=0,y=0,F=0,O=e;F<O.length;F++){var R=O[F];if(h[R.index]==null||h[R.index].left===0)if(y===0){var A=void 0;Array.isArray(m)?A=m[R.index-C-v]:A=m[R.dataKey];var Z={};typeof A=="object"&&!Array.isArray(A)&&(Z=A?.styles||{});var J=zM(n,R,p,s,i,a,Z),nt=new ay(A,J,n);T[R.dataKey]=nt,T[R.index]=nt,y=nt.colSpan-1,h[R.index]={left:nt.rowSpan-1,times:y}}else y--,C++;else h[R.index].left--,y=h[R.index].times,v++}return new ry(m,p,n,T)});return u}function Gb(n,t){var e={};return n.forEach(function(i){if(i.raw!=null){var s=OM(t,i.raw);s!=null&&(e[i.dataKey]=s)}}),Object.keys(e).length>0?e:null}function OM(n,t){if(n==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(n==="foot"&&typeof t=="object")return t.footer;return null}function VM(n){return n.map(function(t,e){var i,s;return typeof t=="object"?s=(i=t.dataKey)!==null&&i!==void 0?i:e:s=e,new kM(s,t,e)})}function zM(n,t,e,i,s,a,h){var u=mM(i),m;n==="head"?m=s.headStyles:n==="body"?m=s.bodyStyles:n==="foot"&&(m=s.footStyles);var p=Xa({},u.table,u[n],s.styles,m),v=s.columnStyles[t.dataKey]||s.columnStyles[t.index]||{},T=n==="body"?v:{},C=n==="body"&&e%2===0?Xa({},u.alternateRow,s.alternateRowStyles):{},y=fM(a),F=Xa({},y,p,C,T);return Xa(F,h)}function UM(n,t,e){var i;e===void 0&&(e={});var s=ey(n,t),a=new Map,h=[],u=[],m=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?m=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(m=[t.settings.horizontalPageBreakRepeat]),m.forEach(function(C){var y=t.columns.find(function(F){return F.dataKey===C||F.index===C});y&&!a.has(y.index)&&(a.set(y.index,!0),h.push(y.index),u.push(t.columns[y.index]),s-=y.wrappedWidth)});for(var p=!0,v=(i=e?.start)!==null&&i!==void 0?i:0;v<t.columns.length;){if(a.has(v)){v++;continue}var T=t.columns[v].wrappedWidth;if(p||s>=T)p=!1,h.push(v),u.push(t.columns[v]),s-=T;else break;v++}return{colIndexes:h,columns:u,lastIndex:v-1}}function WM(n,t){for(var e=[],i=0;i<t.columns.length;i++){var s=UM(n,t,{start:i});s.columns.length&&(e.push(s),i=s.lastIndex)}return e}function ly(n,t){var e=t.settings,i=e.startY,s=e.margin,a={x:s.left,y:i},h=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),u=i+s.bottom+h;if(e.pageBreak==="avoid"){var m=t.body,p=m.reduce(function(C,y){return C+y.height},0);u+=p}var v=new Oh(n);(e.pageBreak==="always"||e.startY!=null&&u>v.pageSize().height)&&(cy(v),a.y=s.top),t.callWillDrawPageHooks(v,a);var T=Xa({},a);t.startPageNumber=v.pageNumber(),e.horizontalPageBreak?HM(v,t,T,a):(v.applyStyles(v.userStyles),(e.showHead==="firstPage"||e.showHead==="everyPage")&&t.head.forEach(function(C){return ja(v,t,C,a,t.columns)}),v.applyStyles(v.userStyles),t.body.forEach(function(C,y){var F=y===t.body.length-1;lp(v,t,C,F,T,a,t.columns)}),v.applyStyles(v.userStyles),(e.showFoot==="lastPage"||e.showFoot==="everyPage")&&t.foot.forEach(function(C){return ja(v,t,C,a,t.columns)})),Qb(v,t,T,a),t.callEndPageHooks(v,a),t.finalY=a.y,n.lastAutoTable=t,v.applyStyles(v.userStyles)}function HM(n,t,e,i){var s=WM(n,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(p,v){n.applyStyles(n.userStyles),v>0?Kc(n,t,e,i,p.columns,!0):qb(n,t,i,p.columns),XM(n,t,e,i,p.columns),d0(n,t,i,p.columns)});else for(var h=-1,u=s[0],m=function(){var p=h;if(u){n.applyStyles(n.userStyles);var v=u.columns;h>=0?Kc(n,t,e,i,v,!0):qb(n,t,i,v),p=Zb(n,t,h+1,i,v),d0(n,t,i,v)}var T=p-h;s.slice(1).forEach(function(C){n.applyStyles(n.userStyles),Kc(n,t,e,i,C.columns,!0),Zb(n,t,h+1,i,C.columns,T),d0(n,t,i,C.columns)}),h=p};h<t.body.length-1;)m()}function qb(n,t,e,i){var s=t.settings;n.applyStyles(n.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(a){return ja(n,t,a,e,i)})}function XM(n,t,e,i,s){n.applyStyles(n.userStyles),t.body.forEach(function(a,h){var u=h===t.body.length-1;lp(n,t,a,u,e,i,s)})}function Zb(n,t,e,i,s,a){n.applyStyles(n.userStyles),a=a??t.body.length;var h=Math.min(e+a,t.body.length),u=-1;return t.body.slice(e,h).forEach(function(m,p){var v=e+p===t.body.length-1,T=hy(n,t,v,i);m.canEntireRowFit(T,s)&&(ja(n,t,m,i,s),u=e+p)}),u}function d0(n,t,e,i){var s=t.settings;n.applyStyles(n.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(a){return ja(n,t,a,e,i)})}function jM(n,t,e){var i=e.getLineHeight(n.styles.fontSize),s=n.padding("vertical"),a=Math.floor((t-s)/i);return Math.max(0,a)}function YM(n,t,e,i){var s={};n.spansMultiplePages=!0,n.height=0;for(var a=0,h=0,u=e.columns;h<u.length;h++){var m=u[h],p=n.cells[m.index];if(p){Array.isArray(p.text)||(p.text=[p.text]);var v=new ay(p.raw,p.styles,p.section);v=Xa(v,p),v.text=[];var T=jM(p,t,i);p.text.length>T&&(v.text=p.text.splice(T,p.text.length));var C=i.scaleFactor(),y=i.getLineHeightFactor();p.contentHeight=p.getContentHeight(C,y),p.contentHeight>=t&&(p.contentHeight=t,v.styles.minCellHeight-=t),p.contentHeight>n.height&&(n.height=p.contentHeight),v.contentHeight=v.getContentHeight(C,y),v.contentHeight>a&&(a=v.contentHeight),s[m.index]=v}}var F=new ry(n.raw,-1,n.section,s,!0);F.height=a;for(var O=0,R=e.columns;O<R.length;O++){var m=R[O],v=F.cells[m.index];v&&(v.height=F.height);var p=n.cells[m.index];p&&(p.height=n.height)}return F}function GM(n,t,e,i){var s=n.pageSize().height,a=i.settings.margin,h=a.top+a.bottom,u=s-h;t.section==="body"&&(u-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var m=t.getMinimumRowHeight(i.columns,n),p=m<e;if(m>u)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!p)return!1;var v=t.hasRowSpan(i.columns),T=t.getMaxCellHeight(i.columns)>u;return T?(v&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(v||i.settings.rowPageBreak==="avoid")}function lp(n,t,e,i,s,a,h){var u=hy(n,t,i,a);if(e.canEntireRowFit(u,h))ja(n,t,e,a,h);else if(GM(n,e,u,t)){var m=YM(e,u,t,n);ja(n,t,e,a,h),Kc(n,t,s,a,h),lp(n,t,m,i,s,a,h)}else Kc(n,t,s,a,h),lp(n,t,e,i,s,a,h)}function ja(n,t,e,i,s){i.x=t.settings.margin.left;for(var a=0,h=s;a<h.length;a++){var u=h[a],m=e.cells[u.index];if(!m){i.x+=u.width;continue}n.applyStyles(m.styles),m.x=i.x,m.y=i.y;var p=t.callCellHooks(n,t.hooks.willDrawCell,m,e,u,i);if(p===!1){i.x+=u.width;continue}qM(n,m,i);var v=m.getTextPos();Kb(m.text,v.x,v.y,{halign:m.styles.halign,valign:m.styles.valign,maxWidth:Math.ceil(m.width-m.padding("left")-m.padding("right"))},n.getDocument()),t.callCellHooks(n,t.hooks.didDrawCell,m,e,u,i),i.x+=u.width}i.y+=e.height}function qM(n,t,e){var i=t.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof i.lineWidth=="number"){var s=ty(i.lineWidth,i.fillColor);s&&n.rect(t.x,e.y,t.width,t.height,s)}else typeof i.lineWidth=="object"&&(i.fillColor&&n.rect(t.x,e.y,t.width,t.height,"F"),ZM(n,t,e,i.lineWidth))}function ZM(n,t,e,i){var s,a,h,u;i.top&&(s=e.x,a=e.y,h=e.x+t.width,u=e.y,i.right&&(h+=.5*i.right),i.left&&(s-=.5*i.left),m(i.top,s,a,h,u)),i.bottom&&(s=e.x,a=e.y+t.height,h=e.x+t.width,u=e.y+t.height,i.right&&(h+=.5*i.right),i.left&&(s-=.5*i.left),m(i.bottom,s,a,h,u)),i.left&&(s=e.x,a=e.y,h=e.x,u=e.y+t.height,i.top&&(a-=.5*i.top),i.bottom&&(u+=.5*i.bottom),m(i.left,s,a,h,u)),i.right&&(s=e.x+t.width,a=e.y,h=e.x+t.width,u=e.y+t.height,i.top&&(a-=.5*i.top),i.bottom&&(u+=.5*i.bottom),m(i.right,s,a,h,u));function m(p,v,T,C,y){n.getDocument().setLineWidth(p),n.getDocument().line(v,T,C,y,"S")}}function hy(n,t,e,i){var s=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&e)&&(s+=t.getFootHeight(t.columns)),n.pageSize().height-i.y-s}function Kc(n,t,e,i,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),n.applyStyles(n.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(u){return ja(n,t,u,i,s)}),t.callEndPageHooks(n,i);var h=t.settings.margin;Qb(n,t,e,i),cy(n),t.pageNumber++,i.x=h.left,i.y=h.top,e.y=h.top,t.callWillDrawPageHooks(n,i),t.settings.showHead==="everyPage"&&(t.head.forEach(function(u){return ja(n,t,u,i,s)}),n.applyStyles(n.userStyles))}function cy(n){var t=n.pageNumber();n.setPage(t+1);var e=n.pageNumber();return e===t?(n.addPage(),!0):!1}function KM(n){n.API.autoTable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],s=sy(this,i),a=oy(this,s);return ly(this,a),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(t,e,i,s){Kb(t,e,i,s,this)},n.API.autoTableSetDefaults=function(t){return Oh.setDefaults(t,this),this},n.autoTableSetDefaults=function(t,e){Oh.setDefaults(t,e)},n.API.autoTableHtmlToJson=function(t,e){var i;if(e===void 0&&(e=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Oh(this),a=ny(s,t,window,e,!1),h=a.head,u=a.body,m=((i=h[0])===null||i===void 0?void 0:i.map(function(p){return p.content}))||[];return{columns:m,rows:u,data:u}}}var u0;function dy(n,t){var e=sy(n,t),i=oy(n,e);ly(n,i)}try{typeof window<"u"&&window&&(p0=window,f0=p0.jsPDF||((u0=p0.jspdf)===null||u0===void 0?void 0:u0.jsPDF),f0&&KM(f0))}catch(n){console.error("Could not apply autoTable plugin",n)}var p0,f0;var uy=du(Mu());var cp=class n{constructor(t){this.http=t}getIPAddress(){return this.http.get("http://api.ipify.org/?format=json")}static \u0275fac=function(e){return new(e||n)(yo(Bv))};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})};var dp=class n{constructor(t){this.ipService=t}destroy$=new pi;ipAddress=Li("");downloadSkillsPdf(t,e){this.ipService.getIPAddress().pipe(Gi(this.destroy$)).subscribe(i=>{this.ipAddress=i.ip;let s=new Ei;s.setFontSize(22),s.text("Rob Vandelinder Skills Summary",14,16),s.setFontSize(12),s.text(e,10,28,{maxWidth:190}),Object.entries(t).forEach(([h,u],m)=>{let p=s.lastAutoTable?s.lastAutoTable.finalY+10:124;s.setFontSize(16),s.text(h,10,p),dy(s,{pageBreak:"auto",startY:p+5,head:[["Skill","Value"]],body:u.map(v=>[v.title,`${v.value}/10`])})}),s.setFontSize(12);let a="Generated "+(0,uy.default)().format("MMMM Do YYYY, h:mm:ss a")+" | IP: "+this.ipAddress;s.text(a,10,s.internal.pageSize.getHeight()-10),s.output("dataurlnewwindow")})}static \u0275fac=function(e){return new(e||n)(yo(cp))};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})};function QM(n,t){if(n&1&&Ue(0,"canvasjs-chart",17),n&2){let e=$e();qe("options",e.getChartOptions("skills"))}}function tT(n,t){if(n&1&&Ue(0,"canvasjs-chart",18),n&2){let e=$e();qe("options",e.getChartOptions("languages"))}}function eT(n,t){if(n&1&&Ue(0,"canvasjs-chart",19),n&2){let e=$e();qe("options",e.getChartOptions("frameworks"))}}function iT(n,t){if(n&1&&Ue(0,"canvasjs-chart",20),n&2){let e=$e();qe("options",e.getChartOptions("cloudPlatforms"))}}function nT(n,t){if(n&1&&Ue(0,"canvasjs-chart",21),n&2){let e=$e();qe("options",e.getChartOptions("operatingSystems"))}}var up=class n{constructor(t){this.printService=t}ngOnInit(){this.activeTabIndex=0,Object.keys(this.chartVisible).forEach(t=>this.chartVisible[t]=!1),setTimeout(()=>this.chartVisible.skills=!0,50)}activeTabIndex=0;chartVisible={skills:!0,languages:!1,frameworks:!1,cloudPlatforms:!1,operatingSystems:!1};onTabChange(t){this.activeTabIndex=t.index,Object.keys(this.chartVisible).forEach(e=>this.chartVisible[e]=!1),setTimeout(()=>{switch(t.index){case 0:this.chartVisible.skills=!0;break;case 1:this.chartVisible.languages=!0,this.chartVisible.frameworks=!0;break;case 2:this.chartVisible.cloudPlatforms=!0,this.chartVisible.operatingSystems=!0;break}},50)}skillsMap={skillsData:Ng,languages:Og,frameworks:Bg,cloudPlatforms:Vg,operatingSystems:zg};chartOptionsMap={skills:{title:{text:"Skills"},axisY:{includeZero:!0,maximum:10},backgroundColor:"#fff",borderWidth:2,data:[{type:"column",dataPoints:this.skillsMap.skillsData.map(t=>({label:t.title,y:t.value}))}]},languages:{title:{text:"Languages"},axisY:{includeZero:!0,maximum:10},backgroundColor:"#fff",data:[{type:"column",dataPoints:this.skillsMap.languages.map(t=>({label:t.title,y:t.value}))}]},frameworks:{title:{text:"Frameworks"},axisY:{includeZero:!0,maximum:10},backgroundColor:"#fff",color:"red",data:[{type:"column",dataPoints:this.skillsMap.frameworks.map(t=>({label:t.title,y:t.value}))}]},cloudPlatforms:{title:{text:"Cloud Platforms"},axisY:{includeZero:!0,maximum:10},backgroundColor:"#fff",data:[{type:"column",dataPoints:this.skillsMap.cloudPlatforms.map(t=>({label:t.title,y:t.value}))}]},operatingSystems:{title:{text:"Operating Systems"},axisY:{includeZero:!0,maximum:10},backgroundColor:"#fff",data:[{type:"column",dataPoints:this.skillsMap.operatingSystems.map(t=>({label:t.title,y:t.value}))}]}};getChartOptions(t){return this.chartOptionsMap[t]}printSkills=()=>{let t=`I bring a broad, practical skill set in full-stack and mobile development, with a strong foundation in support, diagnostics, and embedded integration. 

 On the frontend, I work confidently with Flutter, Angular, Bootstrap, and responsive UI frameworks. On the backend, I\u2019ve built secure REST APIs using NestJS, Node.js, PostgreSQL, and MongoDB, often integrating third-party services like Stripe, OpenAI, and Firebase. 

 I have used Redux (and Thunk) for state management in both mobile and web contexts. My projects have included a Flutter-based e-commerce app with cloud backend, a barcode/ISBN scanning app using the Google Books API, and a 3D printing service built on microservices. 

 Other skills include Git workflows, 3D modeling, barcode scanning, camera-based input, and cross-platform deployment. 

 I\u2019m equally comfortable in Windows, macOS, and Linux environments. 

 I\u2019m a quick learner and enjoy tackling new challenges. I\u2019m always looking for opportunities to expand my skill set and take on new projects.`,e={"Core Skills":Ng,Languages:Og,Frameworks:Bg,"Cloud Platforms":Vg,"Operating Systems":zg};this.printService.downloadSkillsPdf(e,t)};static \u0275fac=function(e){return new(e||n)(Fi(dp))};static \u0275cmp=li({type:n,selectors:[["skills-dialog"]],decls:41,vars:6,consts:[["title","Skills","type","skills",1,"pane"],[1,"d-flex","align-items-center","flex-column"],[1,"display-6"],[1,"mt-3"],[1,"fw-bold"],["label","\u{1F4BE} Download Skills Summary",1,"mb-3",3,"action"],[1,"w-100",3,"selectedTabChange"],["label","Skills"],[1,"mx-1","mt-2"],["class","","id","skills-chart",3,"options",4,"ngIf"],["label","Languages & Frameworks"],[1,"row","h-stack","gap-3","mx-1","mt-3"],["class","col","id","languages-chart",3,"options",4,"ngIf"],["class","col","id","frameworks-chart",3,"options",4,"ngIf"],["label","Cloud & OS"],["class","col","id","cloudPlatforms-chart",3,"options",4,"ngIf"],["class","col","id","operatingSystems-chart",3,"options",4,"ngIf"],["id","skills-chart",1,"",3,"options"],["id","languages-chart",1,"col",3,"options"],["id","frameworks-chart",1,"col",3,"options"],["id","cloudPlatforms-chart",1,"col",3,"options"],["id","operatingSystems-chart",1,"col",3,"options"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"div",1)(2,"span",2),Ae(3,"Skills"),Jt(),Xt(4,"p",3),Ae(5," I bring a broad, practical skill set in "),Xt(6,"span",4),Ae(7,"full-stack and mobile development"),Jt(),Ae(8,", with a strong foundation in support, diagnostics, and embedded integration. "),Jt(),Xt(9,"p"),Ae(10," On the "),Xt(11,"span",4),Ae(12,"frontend"),Jt(),Ae(13,", I work confidently with Flutter, Angular, Bootstrap, and responsive UI frameworks. On the "),Xt(14,"span",4),Ae(15,"backend"),Jt(),Ae(16,", I\u2019ve built secure REST APIs using NestJS, Node.js, PostgreSQL, and MongoDB, often integrating third-party services like Stripe, OpenAI, and Firebase. "),Jt(),Xt(17,"p"),Ae(18," I have used Redux (and Thunk) for "),Xt(19,"span",4),Ae(20,"state management"),Jt(),Ae(21," in both mobile and web contexts. My projects have included a Flutter-based e-commerce app with cloud backend, a barcode/ISBN scanning app using the Google Books API, and a 3D printing service built on microservices. "),Jt(),Xt(22,"p"),Ae(23," Other skills include Git workflows, 3D modeling, barcode scanning, camera-based input, and cross-platform deployment. "),Jt(),Xt(24,"p"),Ae(25,"I\u2019m equally comfortable in Windows, macOS, and Linux environments."),Jt(),Xt(26,"p"),Ae(27," I\u2019m always eager to learn new technologies and frameworks, and I\u2019m currently exploring the world of AI and machine learning. "),Jt(),Ue(28,"cv-button",5),Xt(29,"mat-tab-group",6),ii("selectedTabChange",function(a){return i.onTabChange(a)}),Xt(30,"mat-tab",7)(31,"div",8),ji(32,QM,1,1,"canvasjs-chart",9),Jt()(),Xt(33,"mat-tab",10)(34,"div",11),ji(35,tT,1,1,"canvasjs-chart",12)(36,eT,1,1,"canvasjs-chart",13),Jt()(),Xt(37,"mat-tab",14)(38,"div",11),ji(39,iT,1,1,"canvasjs-chart",15)(40,nT,1,1,"canvasjs-chart",16),Jt()()()()()),e&2&&(_e(28),qe("action",i.printSkills),_e(4),qe("ngIf",i.chartVisible.skills),_e(3),qe("ngIf",i.chartVisible.languages),_e(),qe("ngIf",i.chartVisible.frameworks),_e(3),qe("ngIf",i.chartVisible.cloudPlatforms),_e(),qe("ngIf",i.chartVisible.operatingSystems))},dependencies:[nn,T_,M_,tb,Fg,Q_,On,ma,rr],styles:[".size-wrapper[_ngcontent-%COMP%]{min-width:1000px;overflow:visible!important;height:auto}#skills-chart[_ngcontent-%COMP%], #operatingSystems-chart[_ngcontent-%COMP%], #cloudPlatforms-chart[_ngcontent-%COMP%], #frameworks-chart[_ngcontent-%COMP%], #languages-chart[_ngcontent-%COMP%]{border:1px solid var(--cv-lightgrey);box-shadow:0 0 5px var(--cv-grey);border-radius:10px;background-color:#fff}canvasjs-chart[_ngcontent-%COMP%]{display:block;height:420px;width:100%;overflow:hidden}"]})};function sT(n,t){if(n&1&&Ue(0,"img",5),n&2){let e=t.$implicit,i=$e();kv("alt","",i.project().title," thumbnail"),qe("src",e,dl)}}var pp=class n{project=Xs.required();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=li({type:n,selectors:[["project-card"]],inputs:{project:[1,"project"]},decls:12,vars:5,consts:[[1,"d-flex","flex-column","text-center",2,"height","300px"],[1,"description-wrapper","mb-1"],["id","description"],[1,"fst-italic","my-1","text-muted"],[3,"href"],[1,"d-block","w-100",2,"max-height","300px","object-fit","cover",3,"src","alt"]],template:function(e,i){e&1&&(Xt(0,"div",0)(1,"h3"),Ae(2),Jt(),Xt(3,"div",1)(4,"span",2),Ae(5),Jt()(),Xt(6,"span",3),Ae(7),Jt(),Xt(8,"a",4),Ae(9),Jt(),fr(10,sT,1,3,"img",5,pl),Jt()),e&2&&(_e(2),us(i.project().title),_e(3),us(i.project().description),_e(2),Ss("Stack: ",i.project().stack," "),_e(),qe("href",i.project().link,dl),_e(),us(i.project().link),_e(),mr(i.project().thumbnails))},styles:[".description-wrapper[_ngcontent-%COMP%]{max-width:70%;text-align:justify;transform:translate(-50%);left:50%;position:relative}"]})};var rT=(n,t)=>t.title;function aT(n,t){if(n&1&&Ue(0,"project-card",6),n&2){let e=$e().$implicit;qe("project",e)}}function oT(n,t){n&1&&ji(0,aT,1,1,"ng-template",5)}var fp=class n{projectList=Li([]);ngOnInit(){this.projectList.set(ib)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=li({type:n,selectors:[["projects-dialog"]],decls:9,vars:1,consts:[["projectsCarousel",""],["title","Projects","type","projects",1,"pane"],[1,"display-6"],[1,"mt-3"],["id","projectsCarousel",1,"carousel","carousel-dark","slide","mt-4",3,"interval"],["ngbSlide","",1,"active"],[3,"project"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",1)(1,"span",2),Ae(2,"Projects"),Jt(),Xt(3,"p",3),Ae(4," Browse through a curated set of full-stack applications, each demonstrating practical skills in frontend, backend, AI integration, and real-time system control, complete with project summaries and technology stacks. "),Jt(),Xt(5,"ngb-carousel",4,0),fr(7,oT,1,0,null,5,rT),Jt()()),e&2&&(_e(5),qe("interval",0),_e(2),mr(i.projectList()))},dependencies:[nn,jv,Xv,Hv,pp],styles:["img[_ngcontent-%COMP%]{opacity:0}#projectsCarousel[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#fff;border-radius:10px;padding:20px;box-shadow:0 0 3px var(--cv-darkgrey)}#projectsCarousel[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}#projectsCarousel[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;object-fit:cover;border-radius:8px;transition:opacity .3s ease-in-out}"]})};function lT(n,t){if(n&1&&(Xt(0,"div",11),Ae(1),Jt()),n&2){let e=$e().$implicit;_e(),us(e.date)}}function hT(n,t){if(n&1&&(Xt(0,"div",12),Ae(1),Jt()),n&2){let e=$e().$implicit;_e(),us(e.title)}}function cT(n,t){if(n&1&&(Xt(0,"div",13),Ae(1),Jt()),n&2){let e=$e().$implicit;_e(),Ss(" ",e.title," ")}}function dT(n,t){if(n&1&&(Xt(0,"div",14),Ae(1),Jt()),n&2){let e=$e().$implicit;_e(),us(e.date)}}function uT(n,t){if(n&1&&(Xt(0,"div",5),ji(1,lT,2,1,"div",6)(2,hT,2,1,"div",7),Ue(3,"div",8),ji(4,cT,2,1,"div",9)(5,dT,2,1,"div",10),Jt()),n&2){let e=t.index;_e(),qe("ngIf",e%2===0),_e(),qe("ngIf",e%2!==0),_e(2),qe("ngIf",e%2===0),_e(),qe("ngIf",e%2!==0)}}var mp=class n{constructor(t){this.launcherService=t}educationEvents=eb;static \u0275fac=function(e){return new(e||n)(Fi(Vn))};static \u0275cmp=li({type:n,selectors:[["education-dialog"]],decls:7,vars:1,consts:[["title","Education","type","education",1,"pane"],["id","size-wrapper"],["id","header-row",1,"d-flex","flex-row","align-items-center"],[1,"timeline"],["class","event",4,"ngFor","ngForOf"],[1,"event"],["class","date top",4,"ngIf"],["class","desc top",4,"ngIf"],[1,"dot"],["class","desc bottom",4,"ngIf"],["class","date bottom",4,"ngIf"],[1,"date","top"],[1,"desc","top"],[1,"desc","bottom"],[1,"date","bottom"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"div",1)(2,"div",2)(3,"p"),Ae(4," A visual timeline highlighting my academic achievements and certifications, with interactive event markers providing details on each major milestone in my development journey. "),Jt()(),Xt(5,"div",3),ji(6,uT,6,4,"div",4),Jt()()()),e&2&&(_e(6),qe("ngForOf",i.educationEvents))},dependencies:[nn,On,Su,ma],styles:['#size-wrapper[_ngcontent-%COMP%]{max-width:1000px;width:1000px}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;padding:30px}.timeline-container[_ngcontent-%COMP%]{padding:20px;border-radius:10px;box-shadow:0 0 15px #00000026}.timeline[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-around;align-items:center;margin-top:40px;margin-bottom:32px;padding:60px 0}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;height:4px;width:100%;background-color:var(--cv-blue);transform:translateY(-50%);z-index:1}.event[_ngcontent-%COMP%]{position:relative;width:120px;display:flex;flex-direction:column;align-items:center;z-index:2}.event[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:16px;height:16px;background-color:#fff;border:3px solid var(--cv-blue);border-radius:50%;z-index:3}.date[_ngcontent-%COMP%], .desc[_ngcontent-%COMP%]{text-align:center;max-width:140px;font-size:13px;color:#333;position:absolute;width:max-content}.date[_ngcontent-%COMP%]{font-weight:700;font-size:1.25rem}.top[_ngcontent-%COMP%]{bottom:calc(50% + 16px)}.bottom[_ngcontent-%COMP%]{top:calc(50% + 16px)}.event[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:hover{background-color:var(--cv-blue);box-shadow:0 0 1px 1px #6494ed50,0 0 3px 3px var(--white80);cursor:pointer}']})};var py=n=>({active:n}),gp=class n{constructor(t,e){this.launcherService=t;this.settingsService=e}destroy$=new pi;showSeconds=Li(!1);useDynamicBg=Li(!1);showWeather=Li(!1);closeDialog(){this.launcherService.closeDialog(13)}get secondsBtnLabel(){return this.showSeconds()===!0?"ON":"OFF"}get showWeatherBtnLabel(){return this.showWeather()===!0?"ON":"OFF"}ngOnInit(){this.settingsService.showSeconds$.pipe(Gi(this.destroy$)).subscribe({next:t=>{let e=document.querySelector("#secondsBtn");t?e?.classList.add("active"):e?.classList.remove("active"),this.showSeconds.set(t)},error:t=>console.log(t.message)}),this.settingsService.showWeather$.pipe(Gi(this.destroy$)).subscribe({next:t=>{let e=document.querySelector("#showWeatherBtn");t?e?.classList.add("active"):e?.classList.remove("active"),this.showWeather.set(t)},error:t=>console.log(t.message)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}toggleSeconds(){this.settingsService.toggleSeconds()}toggleWeather(){this.settingsService.toggleShowWeather()}static \u0275fac=function(e){return new(e||n)(Fi(Vn),Fi(Tu))};static \u0275cmp=li({type:n,selectors:[["settings-dialog"]],decls:19,vars:8,consts:[["title","Settings","type","settings",1,"pane"],["id","size-wrapper"],[1,"display-6"],[1,"d-flex","flex-row"],[1,"align-content-center"],[1,"control-label"],[1,"flex-fill"],["type","button","id","secondsBtn",1,"btn","btn-outline-dark",3,"click","ngClass"],[1,"mx-3"],[1,"d-flex","flex-row","mt-2"],["type","button","id","showWeatherBtn",1,"btn","btn-outline-dark",3,"click","ngClass"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0),Ue(1,"div",1),Xt(2,"h1",2),Ae(3,"Site Settings"),Jt(),Xt(4,"div",3)(5,"div",4)(6,"span",5),Ae(7,"Show seconds in clock"),Jt()(),Ue(8,"div",6),Xt(9,"button",7),ii("click",function(){return i.toggleSeconds()}),Ae(10),Jt()(),Ue(11,"hr",8),Xt(12,"div",9)(13,"div",4)(14,"span",5),Ae(15,"Show weather in top bar"),Jt()(),Ue(16,"div",6),Xt(17,"button",10),ii("click",function(){return i.toggleWeather()}),Ae(18),Jt()()()),e&2&&(_e(9),qe("ngClass",Qn(4,py,i.showSeconds())),_e(),Ss(" ",i.secondsBtnLabel," "),_e(7),qe("ngClass",Qn(6,py,i.showWeather())),_e(),Ss(" ",i.showWeatherBtnLabel," "))},dependencies:[nn,On,fa],styles:["dialog-window[_ngcontent-%COMP%]{max-width:1240px;background-color:#202020;color:var(--cv-lightgrey)}h1[_ngcontent-%COMP%]{margin-bottom:24px}#size-wrapper[_ngcontent-%COMP%]{min-width:400px}.btn[_ngcontent-%COMP%]{border:1px solid var(--cv-blue);background-color:var(--cv-white);color:var(--cv-blue);border-radius:10px;padding:8px 16px;cursor:pointer}.btn[_ngcontent-%COMP%]:hover, .active[_ngcontent-%COMP%]{background-color:var(--cv-blue);color:var(--cv-white);border:1px solid var(--cv-blue)}.control-label[_ngcontent-%COMP%]{font-size:1.2rem}"]})};var xp=class n{provider=new ir(1);setProvider(t){this.provider.next(t)}searchUrlMap={1:t=>`https://www.google.com/search?q=${t}`,0:t=>`https://www.amazon.ca/s?k=${t}`,2:t=>`https://stackoverflow.com/search?q${t}`,4:t=>`https://www.youtube.com/results?search_query=${t}`,3:t=>`https://en.wikipedia.org/wiki/${t}`};launchSearch(t,e){let i=this.searchUrlMap[t];if(i){let s=encodeURIComponent(e);window.open(i(s),"_blank")}}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})};var vp=class n{constructor(t){this.searchService=t}searchTerm=Li("");selectedProvider=Li(1);ngAfterViewInit(){setTimeout(()=>this.selectProvider("google"),0)}searchProviderMap={google:{provider:1,querySelector:"#google-btn"},amazon:{provider:0,querySelector:"#amazon-btn"},youtube:{provider:4,querySelector:"#youtube-btn"},stack_overflow:{provider:2,querySelector:"#stack-btn"},wikipedia:{provider:3,querySelector:"#wikipedia-btn"}};selectProvider(t){document.querySelectorAll(".provider-btn").forEach(s=>s.classList.remove("active")),document.querySelector(this.searchProviderMap[t].querySelector)?.classList.add("active"),this.selectedProvider.set(this.searchProviderMap[t].provider)}launchSearch=()=>{this.searchTerm()!==""&&this.searchService.launchSearch(this.selectedProvider(),this.searchTerm())};clearSearchTerm(){this.searchTerm()!==""&&this.searchTerm.set("")}static \u0275fac=function(e){return new(e||n)(Fi(xp))};static \u0275cmp=li({type:n,selectors:[["search-dialog"]],decls:42,vars:2,consts:[["title","MultiSearch","type","search",1,"pane"],["id","size-wrapper"],[3,"ngSubmit"],["for","query",1,"form-label","center"],[1,"d-flex","flex-row"],[1,"flex-fill"],["type","text","name","query","id","query",1,"form-control","center",3,"ngModelChange","ngModel"],["id","clear-btn",1,"bi","bi-x",3,"click"],[1,"my-3"],["for","provider-picker",1,"form-label","center"],["id","amazon-btn",1,"vstack","col","provider-btn",3,"click"],["src","/images/logos/amazon.svg","alt","Google logo"],[1,"btn-label"],["id","google-btn",1,"vstack","col","provider-btn",3,"click"],["src","/images/logos/google_g.svg","alt","Google logo"],["id","youtube-btn",1,"vstack","col","provider-btn",3,"click"],["src","/images/logos/youtube.svg","alt","Youtube logo"],["id","stack-btn",1,"vstack","col","provider-btn",3,"click"],["src","/images/logos/stack_overflow.svg","alt","Stack Overflow logo"],["id","wikipedia-btn",1,"vstack","col","provider-btn",3,"click"],["src","/images/logos/wikipedia.svg","alt","Wikipedia logo"],[1,"d-flex","flex-row","justify-content-center","mt-3"],["label","\u{1F50D} Search",3,"action"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0),Ue(1,"div",1),Xt(2,"form",2),ii("ngSubmit",function(){return i.launchSearch()}),Xt(3,"label",3)(4,"span"),Ae(5,"Enter search term:"),Jt()(),Xt(6,"div",4),Ue(7,"div",5),Xt(8,"div")(9,"input",6),Dr("ngModelChange",function(a){return Lr(i.searchTerm,a)||(i.searchTerm=a),a}),Jt()(),Xt(10,"i",7),ii("click",function(){return i.clearSearchTerm()}),Jt(),Ue(11,"div",5),Jt(),Ue(12,"div",8),Xt(13,"label",9)(14,"span"),Ae(15,"Choose search provider:"),Jt()(),Ue(16,"div",8),Xt(17,"div",4),Ue(18,"div",5),Xt(19,"div",10),ii("click",function(){return i.selectProvider("amazon")}),Ue(20,"img",11),Xt(21,"span",12),Ae(22,"Amazon"),Jt()(),Xt(23,"div",13),ii("click",function(){return i.selectProvider("google")}),Ue(24,"img",14),Xt(25,"span",12),Ae(26,"Google"),Jt()(),Xt(27,"div",15),ii("click",function(){return i.selectProvider("youtube")}),Ue(28,"img",16),Xt(29,"span",12),Ae(30,"Youtube"),Jt()(),Xt(31,"div",17),ii("click",function(){return i.selectProvider("stack_overflow")}),Ue(32,"img",18),Xt(33,"span",12),Ae(34,"Stack Overflow"),Jt()(),Xt(35,"div",19),ii("click",function(){return i.selectProvider("wikipedia")}),Ue(36,"img",20),Xt(37,"span",12),Ae(38,"Wikipedia"),Jt()(),Ue(39,"div",5),Jt(),Xt(40,"div",21),Ue(41,"cv-button",22),Jt()()()),e&2&&(_e(9),Ir("ngModel",i.searchTerm),_e(32),qe("action",i.launchSearch))},dependencies:[nn,On,Sh,wh,xh,vh,_h,yh,bh,rr],styles:[".provider-btn[_ngcontent-%COMP%]{text-align:center}.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:saturate(1)!important;transition:all .15s ease-in-out;height:56px}.active[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%]{font-weight:700;transition:all .15s ease-in-out}img[_ngcontent-%COMP%]{height:32px;margin-bottom:8px;filter:saturate(0);transition:all .15s ease-in-out}#clear-btn[_ngcontent-%COMP%]{margin:auto auto auto 8px;border:1px solid var(--cv-grey);color:var(--cv-grey);border-radius:50%;padding:0 4px}#clear-btn[_ngcontent-%COMP%]:hover{background-color:var(--cv-grey);border:none;color:var(--cv-white)}#size-wrapper[_ngcontent-%COMP%]{width:600px;max-width:600px}"]})};var gy=du(Mu());var Ms=[];for(let n=0;n<256;++n)Ms.push((n+256).toString(16).slice(1));function my(n,t=0){return(Ms[n[t+0]]+Ms[n[t+1]]+Ms[n[t+2]]+Ms[n[t+3]]+"-"+Ms[n[t+4]]+Ms[n[t+5]]+"-"+Ms[n[t+6]]+Ms[n[t+7]]+"-"+Ms[n[t+8]]+Ms[n[t+9]]+"-"+Ms[n[t+10]]+Ms[n[t+11]]+Ms[n[t+12]]+Ms[n[t+13]]+Ms[n[t+14]]+Ms[n[t+15]]).toLowerCase()}var v0,gT=new Uint8Array(16);function _0(){if(!v0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");v0=crypto.getRandomValues.bind(crypto)}return v0(gT)}var xT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),b0={randomUUID:xT};function vT(n,t,e){if(b0.randomUUID&&!t&&!n)return b0.randomUUID();n=n||{};let i=n.random??n.rng?.()??_0();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){if(e=e||0,e<0||e+16>t.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let s=0;s<16;++s)t[e+s]=i[s];return t}return my(i)}var $c=vT;var Fo=class n{constructor(){}loadFromStorage(t){try{let e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return console.error(`Failed to load "${t}" from localStorage`,e.message),[]}}saveToStorage(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(i){console.error(`Failed to save "${t}" to localStorage`,i.message)}}loadNotes(){return this.loadFromStorage("notes")}saveNotes(t){this.saveToStorage("notes",t)}loadTodos(){return this.loadFromStorage("todos")}saveTodos(t){this.saveToStorage("todos",t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})};var No=class n{constructor(t){this.storageService=t}todos$=new ir([]);reloadTodos(){this.todos$.next(this.storageService.loadTodos())}createTodo(t){try{let e={id:$c(),dueDate:t.dueDate,status:t.status??void 0,description:t.description??"",title:t.title??"",archived:!1};this.todos$.pipe(Gr(1)).subscribe({next:i=>{let s=[...i,e];this.storageService.saveTodos(s),this.reloadTodos()},error:i=>console.log(i.message)})}catch(e){console.log("Failed to add new todo",e.message)}}updateTodo(t,e){try{this.todos$.pipe(Gr(1)).subscribe({next:i=>{let s=i.map(a=>a.id===t?ds(ds({},a),e):a);this.storageService.saveTodos(s),this.reloadTodos()},error:i=>console.log(i.message)})}catch(i){console.log(`Failed to update todo with id: ${t}`,i.message)}}deleteTodo(t){try{this.todos$.pipe(Gr(1)).subscribe({next:e=>{this.storageService.saveTodos(e.filter(i=>i.id!=t))},error:e=>console.log(e.message)}),this.reloadTodos()}catch(e){console.log(`Failed to delete todo with id: ${t}`,e.message)}}static \u0275fac=function(e){return new(e||n)(yo(Fo))};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})};var bT=n=>({"bg-faded":n}),yT=n=>({archived:n}),wT=n=>({disabled:n});function ST(n,t){if(n&1){let e=cn();Xt(0,"div",5)(1,"button",14)(2,"div",12)(3,"span",15),Ae(4),Jt()()(),Xt(5,"ul",16)(6,"li")(7,"a",17),ii("click",function(){Ti(e);let s=$e();return Ci(s.updateStatus("new"))}),Xt(8,"span",18),Ae(9," New "),Jt()()(),Xt(10,"li")(11,"a",17),ii("click",function(){Ti(e);let s=$e();return Ci(s.updateStatus("inprogress"))}),Xt(12,"span",19),Ae(13," In Progress "),Jt()()(),Xt(14,"li")(15,"a",17),ii("click",function(){Ti(e);let s=$e();return Ci(s.updateStatus("cancelled"))}),Xt(16,"span",20),Ae(17," Cancelled "),Jt()()(),Xt(18,"li")(19,"a",17),ii("click",function(){Ti(e);let s=$e();return Ci(s.updateStatus("onhold"))}),Xt(20,"span",21),Ae(21," On Hold "),Jt()()(),Xt(22,"li")(23,"a",17),ii("click",function(){Ti(e);let s=$e();return Ci(s.updateStatus("complete"))}),Xt(24,"span",22),Ae(25," Complete "),Jt()()()()()}if(n&2){let e=$e();_e(),qe("disabled",e.archived),_e(2),qe("ngClass",e.getColorClass),_e(),Ss(" ",e.status," ")}}function MT(n,t){if(n&1&&(Xt(0,"div",13),Ae(1),Jt()),n&2){let e=$e();_e(),Ss("Due ",e.dueDate,"")}}var _p=class n{constructor(t){this.todosService=t}todo=Xs(void 0);editTodo(){}deleteTodo(){this.todo()?.archived||this.todosService.deleteTodo(this.todo().id)}statusMap={0:{status:"NEW",colorClass:"new"},4:{status:"ON HOLD",colorClass:"onhold"},3:{status:"CANCELLED",colorClass:"cancelled"},2:{status:"COMPLETE",colorClass:"complete"},1:{status:"IN PROGRESS",colorClass:"inprogress"}};statusStringMap={new:0,onhold:4,cancelled:3,complete:2,inprogress:1};get status(){if(this.todo().status!==void 0)return this.statusMap[this.todo().status].status}get dueDate(){return this.todo()?.dueDate?(0,gy.default)(this.todo()?.dueDate).format("dddd MMMM Do"):null}get getColorClass(){return this.todo()?.archived?"disabled-badge":this.statusMap[this.todo().status].colorClass}updateStatus(t){this.todo()?.archived||this.todosService.updateTodo(this.todo()?.id,{status:this.statusStringMap[t]})}toggleArchivedStatus(){this.todo()?.archived?this.todosService.updateTodo(this.todo()?.id,{archived:!1}):this.todosService.updateTodo(this.todo()?.id,{archived:!0})}get archived(){return this.todo()?.archived}static \u0275fac=function(e){return new(e||n)(Fi(No))};static \u0275cmp=li({type:n,selectors:[["todo-card"]],inputs:{todo:[1,"todo"]},decls:16,vars:14,consts:[[1,"card","my-1",3,"ngClass"],[1,"card-body"],[1,"d-flex","flex-row","align-items-start"],["id","todo-title",1,"card-title","fw-bold"],[1,"flex-fill"],[1,"dropdown","ms-3"],["aria-label","Edit todo button","title","Edit todo",1,"blank","mx-2"],["id","edit-btn",1,"bi","bi-pencil","control-btn","disabled"],["aria-label","Edit todo button",1,"blank","me-2",3,"title"],["id","archive-btn",1,"bi","bi-archive","control-btn",3,"click","ngClass"],["aria-label","Delete todo button","title","Delete todo",1,"blank"],["id","delete-btn",1,"bi","bi-trash","control-btn",3,"click","ngClass"],[1,"card-text"],[1,"card-text","fst-italic","text-muted"],["type","button","data-bs-toggle","dropdown",1,"btn","dropdown-toggle",3,"disabled"],[1,"badge",3,"ngClass"],[1,"dropdown-menu"],["href","#",1,"dropdown-item",3,"click"],[1,"badge","new"],[1,"badge","inprogress"],[1,"badge","cancelled"],[1,"badge","onhold"],[1,"badge","complete"]],template:function(e,i){e&1&&(Xt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Ae(4),Jt(),Ue(5,"div",4),ji(6,ST,26,3,"div",5),Xt(7,"button",6),Ue(8,"i",7),Jt(),Xt(9,"button",8)(10,"i",9),ii("click",function(){return i.toggleArchivedStatus()}),Jt()(),Xt(11,"button",10)(12,"i",11),ii("click",function(){return i.deleteTodo()}),Jt()()(),Xt(13,"div",12),Ae(14),Jt(),ji(15,MT,2,1,"div",13),Jt()()),e&2&&(qe("ngClass",Qn(8,bT,i.archived)),_e(4),Ss(" ",i.todo().title," "),_e(2),Qi(i.status!==void 0?6:-1),_e(3),qe("title",i.archived?"Unarchive todo":"Archive todo"),_e(),qe("ngClass",Qn(10,yT,i.archived)),_e(2),qe("ngClass",Qn(12,wT,i.archived)),_e(2),us(i.todo().description),_e(),Qi(i.dueDate?15:-1))},dependencies:[On,fa],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 2px var(--cv-darkgrey);margin:0 4px}.card-title[_ngcontent-%COMP%]{margin-top:2px}.new[_ngcontent-%COMP%]{background-color:var(--cv-purple)}.inprogress[_ngcontent-%COMP%]{background-color:var(--cv-blue)}.onhold[_ngcontent-%COMP%]{background-color:var(--cv-orange)}.cancelled[_ngcontent-%COMP%]{background-color:var(--cv-red)}.complete[_ngcontent-%COMP%]{background-color:var(--cv-green)}.blank[_ngcontent-%COMP%]{border:none;outline:none;background-color:transparent}.control-btn[_ngcontent-%COMP%]{color:var(--cv-grey);border:1px solid transparent;border-radius:50%;padding:8px;transition:all .1s ease-in-out}#edit-btn[_ngcontent-%COMP%]:hover{color:var(--cv-green);border:1px solid var(--cv-green)}#delete-btn[_ngcontent-%COMP%]:hover{color:var(--cv-red);border:1px solid var(--cv-red)}.dropdown[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{outline:none;border:none;padding:0;margin:0}#archive-btn[_ngcontent-%COMP%]:hover{color:var(--cv-blue);border:1px solid var(--cv-blue)}.archived[_ngcontent-%COMP%]{color:var(--cv-blue)}.bg-faded[_ngcontent-%COMP%]{background-color:var(--cv-lightgrey);color:var(--cv-grey);border:none}.disabled[_ngcontent-%COMP%]{color:var(--cv-grey)!important;border:none!important;outline:non!important}.disabled[_ngcontent-%COMP%]{color:var(--cv-grey)!important}.disabled-badge[_ngcontent-%COMP%]{background-color:var(--cv-grey);color:var(--cv-lightgrey)}#todo-title[_ngcontent-%COMP%]{width:250px}"]})};var S0=n=>({disabled:n}),bp=class n{constructor(t,e){this.todosService=t;this.launcherService=e}title=Li("");description=Li("");dueDate=Li("");status=Li("");hasDueDate=Li(!1);trackStatus=Li(!1);statusMap={NEW:0,IN_PROGRESS:1,ON_HOLD:4};saveTodo=()=>{try{(this.title()!==""||this.description()!=="")&&(this.todosService.createTodo({title:this.title(),description:this.description(),dueDate:this.dueDate()=="mm/dd/yyyy"||this.dueDate()==""?"":this.dueDate(),status:this.statusMap[this.status()]}),this.clearForm(),this.launcherService.closeDialog(9))}catch(t){console.log("Failed to save new todo",t.message)}};clearForm(){this.title.set(""),this.description.set(""),this.dueDate.set(""),this.status.set("")}handleStatusChecked(){this.trackStatus()||this.status.set("")}handleDueDateChecked(){this.hasDueDate()||this.dueDate.set("mm/dd/yyyy")}isValidTodo(){return this.title()!==""||this.description()!==""}static \u0275fac=function(e){return new(e||n)(Fi(No),Fi(Vn))};static \u0275cmp=li({type:n,selectors:[["new-todo-dialog"]],decls:39,vars:20,consts:[["title","Add New Todo","type","new-todo",1,"pane"],["id","size-wrapper"],[3,"ngSubmit"],["for","title",1,"form-label","fs-4"],["type","text","name","title","id","title",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label","fs-4","mt-3"],["name","description","id","description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"my-3"],[1,"d-flex","flex-row","align-items-center"],["for","dueDateToggle",1,"form-label","fs-5"],[1,"flex-fill"],["type","checkbox","name","statusToggle","id","statusToggle",1,"form-check-input","fs-4",3,"ngModelChange","change","ngModel"],[1,"me-3"],[1,"d-flex","flex-row","align-items-center","mt-1"],["for","statusToggle",1,"form-check-label","fs-5"],["for","dueDate",1,"form-label","fs-4"],[3,"ngClass"],["name","dueDate","id","dueDate","type","date",1,"form-control",3,"ngModelChange","disabled","ngModel","ngClass"],["for","status",1,"form-label","fs-4","mt-3"],["name","status","id","status",1,"form-select",3,"ngModelChange","ngModel","disabled","value"],["value","NEW"],["value","IN_PROGRESS"],["value","ON_HOLD"],[1,"mt-2","d-flex","flex-row","justify-content-center"],["label","\u{1F4BE} Save",3,"action","disabled"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"div",1)(2,"form",2),ii("ngSubmit",function(){return null}),Xt(3,"label",3),Ae(4,"Enter title:"),Jt(),Xt(5,"input",4),Dr("ngModelChange",function(a){return Lr(i.title,a)||(i.title=a),a}),Jt(),Xt(6,"label",5),Ae(7,"Enter description:"),Jt(),Xt(8,"textarea",6),Dr("ngModelChange",function(a){return Lr(i.description,a)||(i.description=a),a}),Jt(),Ue(9,"hr",7),Xt(10,"div",8)(11,"label",9),Ae(12," Choose a due date? "),Jt(),Ue(13,"div",10),Xt(14,"input",11),Dr("ngModelChange",function(a){return Lr(i.hasDueDate,a)||(i.hasDueDate=a),a}),ii("change",function(){return i.handleDueDateChecked()}),Jt(),Ue(15,"div",12),Jt(),Xt(16,"div",13)(17,"label",14),Ae(18,"Track status?"),Jt(),Ue(19,"div",10),Xt(20,"input",11),Dr("ngModelChange",function(a){return Lr(i.trackStatus,a)||(i.trackStatus=a),a}),ii("change",function(){return i.handleStatusChecked()}),Jt(),Ue(21,"div",12),Jt(),Ue(22,"hr",7),Xt(23,"label",15)(24,"span",16),Ae(25,"Enter due date:"),Jt()(),Xt(26,"input",17),Dr("ngModelChange",function(a){return Lr(i.dueDate,a)||(i.dueDate=a),a}),Jt(),Xt(27,"label",18)(28,"span",16),Ae(29," Select status: "),Jt()(),Xt(30,"select",19),Dr("ngModelChange",function(a){return Lr(i.status,a)||(i.status=a),a}),Xt(31,"option",20),Ae(32,"New"),Jt(),Xt(33,"option",21),Ae(34,"In Progress"),Jt(),Xt(35,"option",22),Ae(36,"On Hold"),Jt()(),Xt(37,"div",23),Ue(38,"cv-button",24),Jt()()()()),e&2&&(_e(5),Ir("ngModel",i.title),_e(3),Ir("ngModel",i.description),_e(6),Ir("ngModel",i.hasDueDate),_e(6),Ir("ngModel",i.trackStatus),_e(4),qe("ngClass",Qn(14,S0,!i.hasDueDate())),_e(2),qe("disabled",!i.hasDueDate()),Ir("ngModel",i.dueDate),qe("ngClass",Qn(16,S0,!i.hasDueDate())),_e(2),qe("ngClass",Qn(18,S0,!i.trackStatus())),_e(2),Ir("ngModel",i.status),qe("disabled",!i.trackStatus())("value",i.status()),_e(8),qe("action",i.saveTodo)("disabled",!i.isValidTodo()))},dependencies:[nn,Sh,wh,Uv,Wv,xh,Vv,zv,vh,_h,yh,bh,On,fa,rr],styles:["#save-btn[_ngcontent-%COMP%]{color:var(--cv-white);border:none;outline:none;border-radius:10px;cursor:pointer;background-color:var(--cv-blue)}#save-btn[_ngcontent-%COMP%]:hover{background-color:var(--cv-darkgrey)}.disabled[_ngcontent-%COMP%]{color:var(--cv-lightgrey)}hr[_ngcontent-%COMP%]{margin:16px 32px;color:var(--cv-grey)}#size-wrapper[_ngcontent-%COMP%]{min-width:400px}.form-check-input[_ngcontent-%COMP%]{border-radius:50%;background-color:#fff;border:1px solid var(--cv-lightgrey);color:var(--cv-blue)}.form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--cv-blue);border:1px solid var(--cv-blue)}"]})};var yp=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=li({type:n,selectors:[["edit-todo-dialog"]],decls:2,vars:0,template:function(e,i){e&1&&(Xt(0,"p"),Ae(1,"edit-todo-dialog works!"),Jt())},encapsulation:2})};var wp=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=li({type:n,selectors:[["delete-todo-dialog"]],decls:2,vars:0,template:function(e,i){e&1&&(Xt(0,"p"),Ae(1,"delete-todo-dialog works!"),Jt())},encapsulation:2})};var xy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({imports:[Ys,Ys]})}return n})();var vy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({imports:[Ys,Ys]})}return n})();var _y=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({imports:[Ys]})}return n})();var by=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({imports:[N_,Ys,vy,_y,xy]})}return n})();function TT(n,t){if(n&1&&(Xt(0,"div",11),Ue(1,"todo-card",12),Jt()),n&2){let e=t.$implicit;_e(),qe("todo",e)}}function CT(n,t){if(n&1){let e=cn();Pv(0),Xt(1,"div",10),ii("cdkDropListDropped",function(s){Ti(e);let a=$e();return Ci(a.drop(s))}),fr(2,TT,2,1,"div",11,pl),Jt(),Ev()}if(n&2){let e=t.ngIf;_e(2),mr(e)}}function AT(n,t){n&1&&Ue(0,"new-todo-dialog")}function PT(n,t){n&1&&Ue(0,"edit-todo-dialog")}function ET(n,t){n&1&&Ue(0,"delete-todo-dialog")}var Sp=class n{constructor(t,e,i){this.launcherService=t;this.todosService=e;this.storageService=i}destroy$=new pi;todos=Li([]);showArchived=Li(!1);initialState={showNewTodoDialog:!1,showEditTodoDialog:!1,showDeleteTodoDialog:!1};dialogMap={newTodo:9,editTodo:6,deleteTodo:3};openDialogs=Li(this.initialState);ngOnInit(){this.todosService.reloadTodos(),this.todosService.todos$.pipe(Gi(this.destroy$)).subscribe({next:t=>{this.showArchived()?this.todos.set(t):this.todos.set(t.filter(e=>!e.archived))},error:t=>console.error("[TodosDialogComponent] Todos error:",t.message)}),this.launcherService.openApps$.pipe(Gi(this.destroy$)).subscribe({next:t=>{this.openDialogs.set(t)},error:t=>console.error("[TodosDialogComponent] Dialog state error:",t.message)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openDialog(t){this.launcherService.showDialog(this.dialogMap[t])}getDialogState(t){return this.openDialogs()[t]??!1}toggleShowArchived(){let t=document.querySelector("#show-archived-btn");this.showArchived()?(t?.classList.remove("show-archived"),this.showArchived.set(!1)):(t?.classList.add("show-archived"),this.showArchived.set(!0)),this.todosService.reloadTodos()}drop(t){Nu(this.todos(),t.previousIndex,t.currentIndex),this.storageService.saveTodos(this.todos()),this.todosService.reloadTodos()}static \u0275fac=function(e){return new(e||n)(Fi(Vn),Fi(No),Fi(Fo))};static \u0275cmp=li({type:n,selectors:[["todos-dialog"]],decls:15,vars:6,consts:[["title","To Do","type","todos",1,"pane"],["id","size-wrapper"],["id","header-row",1,"d-flex","flex-row","align-items-center"],[1,"display-6"],[1,"flex-fill"],["for","show-archived-btn","id","show-archived-label"],["type","checkbox","name","show-archived-btn","id","show-archived-btn",1,"form-check-input","fs-4","me-3","ms-2",3,"change","checked"],["id","new-todo-btn",1,"btn","btn-outline-dark",3,"click"],[1,"bi","bi-plus","fs-2"],[4,"ngIf"],["cdkDropList","",1,"todos-viewport",3,"cdkDropListDropped"],["cdkDrag",""],[3,"todo"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"div",1)(2,"div",2)(3,"div",3),Ae(4,"To Do"),Jt(),Ue(5,"div",4),Xt(6,"label",5),Ae(7,"Show archived"),Jt(),Xt(8,"input",6),ii("change",function(){return i.toggleShowArchived()}),Jt(),Xt(9,"button",7),ii("click",function(){return i.openDialog("newTodo")}),Ue(10,"i",8),Jt()(),ji(11,CT,4,0,"ng-container",9),Jt()(),ji(12,AT,1,0,"new-todo-dialog")(13,PT,1,0,"edit-todo-dialog")(14,ET,1,0,"delete-todo-dialog")),e&2&&(_e(8),qe("checked",i.showArchived()),Jn("aria-checked",i.showArchived()?"true":"false"),_e(3),qe("ngIf",i.todos()),_e(),Qi(i.getDialogState("showNewTodoDialog")?12:-1),_e(),Qi(i.getDialogState("showEditTodoDialog")?13:-1),_e(),Qi(i.getDialogState("showDeleteTodoDialog")?14:-1))},dependencies:[nn,_p,bp,yp,wp,Kv,by,On,ma,b_,Bu],styles:["#new-todo-btn[_ngcontent-%COMP%]{color:var(--cv-white);border:none;outline:none;padding:0 16px;border-radius:10px;cursor:pointer;background-color:var(--cv-blue)}#new-todo-btn[_ngcontent-%COMP%]:hover{background-color:var(--cv-darkgrey)}new-todo-dialog[_ngcontent-%COMP%]{z-index:1000}#header-row[_ngcontent-%COMP%]{margin-bottom:16px}#size-wrapper[_ngcontent-%COMP%]{width:500px;max-width:500px}.todos-viewport[_ngcontent-%COMP%]{height:400px;overflow-y:auto;display:flex;flex-direction:column;border-radius:6px}.show-archived[_ngcontent-%COMP%]{background-color:var(--cv-blue);color:#fff!important}#show-archived-label[_ngcontent-%COMP%]{padding-top:6px}#show-archived-btn[_ngcontent-%COMP%]{border:1px solid var(--cv-lightgrey);background-color:#fff;color:var(--cv-blue);transition:all .05s ease-in-out}#show-archived-btn[_ngcontent-%COMP%]:checked{fill:var(--cv-blue)!important;background-color:var(--cv-blue)!important;border:1px solid var(--cv-blue)!important}"]})};var wy=du(Mu());var yy=du(Mu());var Bo=class n{constructor(t){this.storageService=t}notes$=new ir([]);reloadNotes(){this.notes$.next(this.storageService.loadNotes())}createNote(t,e){let i={id:$c(),description:e??"",title:t??"",archived:!1,createdAt:(0,yy.default)().format()};this.notes$.pipe(Gr(1)).subscribe({next:s=>{let a=[...s,i];this.storageService.saveNotes(a),this.reloadNotes()},error:s=>console.log(s.message)})}deleteNote(t){try{this.notes$.pipe(Gr(1)).subscribe({next:e=>{this.storageService.saveNotes(e.filter(i=>i.id!=t))},error:e=>console.log(e.message)}),this.reloadNotes()}catch(e){console.log(`Failed to delete note with id ${t}`,e.message)}}updateNote(t,e,i){}archiveNote(t){}static \u0275fac=function(e){return new(e||n)(yo(Fo))};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})};var Mp=class n{constructor(t){this.notesService=t}note=Xs(void 0);createdTime(t){return(0,wy.default)(t).format("MMM D h:mm A")}editNote(){}deleteNote(){this.notesService.deleteNote(this.note().id)}static \u0275fac=function(e){return new(e||n)(Fi(Bo))};static \u0275cmp=li({type:n,selectors:[["note-card"]],inputs:{note:[1,"note"]},decls:13,vars:2,consts:[[1,"card","my-1"],[1,"card-body"],[1,"d-flex","flex-row"],[1,"card-title","fw-bold"],[1,"flex-fill"],["aria-label","Edit note button",1,"blank"],["id","edit-btn",1,"bi","bi-pencil","control-btn"],[1,"mx-1"],["aria-label","Delete note button",1,"blank"],["id","delete-btn",1,"bi","bi-trash","control-btn",3,"click"],[1,"card-text"]],template:function(e,i){e&1&&(Xt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Ae(4),Jt(),Ue(5,"div",4),Xt(6,"button",5),Ue(7,"i",6),Jt(),Ue(8,"div",7),Xt(9,"button",8)(10,"i",9),ii("click",function(){return i.deleteNote()}),Jt()()(),Xt(11,"div",10),Ae(12),Jt()()()),e&2&&(_e(4),us(i.note().title),_e(8),us(i.note().description))},styles:[".blank[_ngcontent-%COMP%]{border:none;outline:none;background-color:transparent}.control-btn[_ngcontent-%COMP%]{color:var(--cv-grey);border:1px solid transparent;border-radius:50%;padding:8px;transition:all .1s ease-in-out}#edit-btn[_ngcontent-%COMP%]:hover{color:var(--cv-blue);border:1px solid var(--cv-blue)}#delete-btn[_ngcontent-%COMP%]:hover{color:var(--cv-red);border:1px solid var(--cv-red)}"]})};var Tp=class n{constructor(t,e){this.notesService=t;this.launcherService=e}title=Li("");body=Li("");saveNote(){try{(this.title()!==""||this.body()!=="")&&(this.notesService.createNote(this.title(),this.body()),this.title.set(""),this.body.set(""),this.launcherService.closeDialog(8))}catch(t){console.log("Failed to save new note",t.message)}}static \u0275fac=function(e){return new(e||n)(Fi(Bo),Fi(Vn))};static \u0275cmp=li({type:n,selectors:[["new-note-dialog"]],decls:11,vars:2,consts:[["title","Add New Note","type","new-note",1,"pane"],[3,"ngSubmit"],["for","noteInput",1,"form-label","fs-4"],["type","text","name","noteInput","id","noteInput",1,"form-control",3,"ngModelChange","ngModel"],[1,"div","my-3"],["type","submit","id","save-btn",1,"btn","btn-outline-dark","center","fs-4","px-4"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"form",1),ii("ngSubmit",function(){return i.saveNote()}),Xt(2,"label",2),Ae(3,"Enter new note title:"),Jt(),Xt(4,"input",3),Dr("ngModelChange",function(a){return Lr(i.title,a)||(i.title=a),a}),Jt(),Xt(5,"label",2),Ae(6,"Enter new note body:"),Jt(),Xt(7,"input",3),Dr("ngModelChange",function(a){return Lr(i.body,a)||(i.body=a),a}),Jt(),Ue(8,"div",4),Xt(9,"button",5),Ae(10," Save "),Jt()()()),e&2&&(_e(4),Ir("ngModel",i.title),_e(3),Ir("ngModel",i.body))},dependencies:[nn,Sh,wh,xh,vh,_h,yh,bh],styles:["#save-btn[_ngcontent-%COMP%]{color:var(--cv-white);border:none;outline:none;border-radius:10px;cursor:pointer;background-color:var(--cv-blue)}#save-btn[_ngcontent-%COMP%]:hover{background-color:var(--cv-darkgrey)}"]})};var Cp=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=li({type:n,selectors:[["edit-note-dialog"]],decls:2,vars:0,template:function(e,i){e&1&&(Xt(0,"p"),Ae(1,"edit-note-dialog works!"),Jt())},encapsulation:2})};var Ap=class n{note=Xs();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=li({type:n,selectors:[["delete-note-dialog"]],inputs:{note:[1,"note"]},decls:2,vars:0,consts:[["title","Add New Note","type","new-note",1,"pane"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0),Ae(1," Delete "),Jt())},dependencies:[nn],encapsulation:2})};var kT=(n,t)=>t.id;function IT(n,t){if(n&1&&Ue(0,"note-card",7),n&2){let e=t.$implicit;qe("note",e)}}function LT(n,t){n&1&&Ue(0,"new-note-dialog")}function DT(n,t){n&1&&Ue(0,"edit-note-dialog")}function RT(n,t){n&1&&Ue(0,"delete-note-dialog")}var Pp=class n{constructor(t,e){this.launcherService=t;this.notesService=e}destroy$=new pi;initialState={showNewNoteDialog:!1,showEditNoteDialog:!1,showDeleteNoteDialog:!1};notes=Li([]);openApps=Li(this.initialState);ngOnInit(){this.notesService.reloadNotes(),this.notesService.notes$.pipe(Gi(this.destroy$)).subscribe({next:t=>{this.notes.set(t)},error:t=>console.log(t.message)}),this.launcherService.openApps$.pipe(Gi(this.destroy$)).subscribe({next:t=>{this.openApps.set(t),console.log(t)},error:t=>console.log(t.message)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openDialog(t){let e={newNote:8,editNote:5,deleteNote:2};this.launcherService.showDialog(e[t])}getDialogState(t){return this.openApps()[t]??!1}static \u0275fac=function(e){return new(e||n)(Fi(Vn),Fi(Bo))};static \u0275cmp=li({type:n,selectors:[["notes-dialog"]],decls:13,vars:3,consts:[["title","Notes","type","notes",1,"pane"],["id","size-wrapper"],["id","header-row",1,"d-flex","flex-row"],[1,"display-6"],[1,"flex-fill"],["id","new-note-btn",1,"btn","btn-outline-dark",3,"click"],[1,"bi","bi-plus","fs-2"],[3,"note"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0),Ue(1,"div",1),Xt(2,"div",2)(3,"div",3),Ae(4,"Notes"),Jt(),Ue(5,"div",4),Xt(6,"button",5),ii("click",function(){return i.openDialog("newNote")}),Ue(7,"i",6),Jt()(),fr(8,IT,1,1,"note-card",7,kT),Jt(),ji(10,LT,1,0,"new-note-dialog")(11,DT,1,0,"edit-note-dialog")(12,RT,1,0,"delete-note-dialog")),e&2&&(_e(8),mr(i.notes()),_e(2),Qi(i.getDialogState("showNewNoteDialog")?10:-1),_e(),Qi(i.getDialogState("showEditNoteDialog")?11:-1),_e(),Qi(i.getDialogState("showDeleteNoteDialog")?12:-1))},dependencies:[nn,Mp,Tp,Cp,Ap],styles:["#new-note-btn[_ngcontent-%COMP%]{color:var(--cv-white);border:none;outline:none;padding:0 16px;border-radius:10px;cursor:pointer;background-color:var(--cv-blue)}#new-note-btn[_ngcontent-%COMP%]:hover{background-color:var(--cv-darkgrey)}new-note-dialog[_ngcontent-%COMP%]{z-index:1000}#header-row[_ngcontent-%COMP%]{margin-bottom:16px}#size-wrapper[_ngcontent-%COMP%]{width:500px}"]})};var gf="172",Jo={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Qo={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Hy=0,nx=1,Xy=2;var sx=1,jy=2,Sa=3,Qa=0,Zs=1,Ma=2,eo=0,Ll=1,rx=2,ax=3,ox=4,Yy=5,Yo=100,Gy=101,qy=102,Zy=103,Ky=104,$y=200,Jy=201,Qy=202,t1=203,qp=204,Zp=205,e1=206,i1=207,n1=208,s1=209,r1=210,a1=211,o1=212,l1=213,h1=214,xf=0,vf=1,_f=2,Dl=3,bf=4,yf=5,wf=6,Sf=7,Mf=0,c1=1,d1=2,io=0,u1=1,p1=2,f1=3,m1=4,g1=5,x1=6,v1=7;var Y0=300,Ol=301,Vl=302,Tf=303,Cf=304,Ad=306,Kp=1e3,jo=1001,$p=1002,Or=1003,_1=1004;var Pd=1005;var sa=1006,Af=1007;var tl=1008;var Ta=1009,lx=1010,hx=1011,rc=1012,Pf=1013,el=1014,Ca=1015,ac=1016,Ef=1017,kf=1018,zl=1020,cx=35902,dx=1021,ux=1022,Ur=1023,px=1024,fx=1025,Il=1026,Rl=1027,mx=1028,If=1029,gx=1030,Lf=1031;var Df=1033,Ed=33776,kd=33777,Id=33778,Ld=33779,Rf=35840,Ff=35841,Nf=35842,Bf=35843,Of=36196,Vf=37492,zf=37496,Uf=37808,Wf=37809,Hf=37810,Xf=37811,jf=37812,Yf=37813,Gf=37814,qf=37815,Zf=37816,Kf=37817,$f=37818,Jf=37819,Qf=37820,tm=37821,Dd=36492,em=36494,im=36495,xx=36283,nm=36284,sm=36285,rm=36286;var sd=2300,Jp=2301,Gp=2302,G0=2400,q0=2401,Z0=2402;var b1=3200,y1=3201;var vx=0,w1=1,no="",qs="srgb",Fl="srgb-linear",rd="linear",gn="srgb";var kl=7680;var K0=519,S1=512,M1=513,T1=514,_x=515,C1=516,A1=517,P1=518,E1=519,$0=35044;var bx="300 es",ba=2e3,ad=2001,ya=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let s=this._listeners[t];if(s!==void 0){let a=s.indexOf(e);a!==-1&&s.splice(a,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let i=this._listeners[t.type];if(i!==void 0){t.target=this;let s=i.slice(0);for(let a=0,h=s.length;a<h;a++)s[a].call(this,t);t.target=null}}},Ns=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Sy=1234567,id=Math.PI/180,Qh=180/Math.PI;function oc(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ns[n&255]+Ns[n>>8&255]+Ns[n>>16&255]+Ns[n>>24&255]+"-"+Ns[t&255]+Ns[t>>8&255]+"-"+Ns[t>>16&15|64]+Ns[t>>24&255]+"-"+Ns[e&63|128]+Ns[e>>8&255]+"-"+Ns[e>>16&255]+Ns[e>>24&255]+Ns[i&255]+Ns[i>>8&255]+Ns[i>>16&255]+Ns[i>>24&255]).toLowerCase()}function qi(n,t,e){return Math.max(t,Math.min(e,n))}function yx(n,t){return(n%t+t)%t}function FT(n,t,e,i,s){return i+(n-t)*(s-i)/(e-t)}function NT(n,t,e){return n!==t?(e-n)/(t-n):0}function nd(n,t,e){return(1-e)*n+e*t}function BT(n,t,e,i){return nd(n,t,1-Math.exp(-e*i))}function OT(n,t=1){return t-Math.abs(yx(n,t*2)-t)}function VT(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function zT(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function UT(n,t){return n+Math.floor(Math.random()*(t-n+1))}function WT(n,t){return n+Math.random()*(t-n)}function HT(n){return n*(.5-Math.random())}function XT(n){n!==void 0&&(Sy=n);let t=Sy+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function jT(n){return n*id}function YT(n){return n*Qh}function GT(n){return(n&n-1)===0&&n!==0}function qT(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ZT(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function KT(n,t,e,i,s){let a=Math.cos,h=Math.sin,u=a(e/2),m=h(e/2),p=a((t+i)/2),v=h((t+i)/2),T=a((t-i)/2),C=h((t-i)/2),y=a((i-t)/2),F=h((i-t)/2);switch(s){case"XYX":n.set(u*v,m*T,m*C,u*p);break;case"YZY":n.set(m*C,u*v,m*T,u*p);break;case"ZXZ":n.set(m*T,m*C,u*v,u*p);break;case"XZX":n.set(u*v,m*F,m*y,u*p);break;case"YXY":n.set(m*y,u*v,m*F,u*p);break;case"ZYZ":n.set(m*F,m*y,u*v,u*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function $h(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Gs(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var wx={DEG2RAD:id,RAD2DEG:Qh,generateUUID:oc,clamp:qi,euclideanModulo:yx,mapLinear:FT,inverseLerp:NT,lerp:nd,damp:BT,pingpong:OT,smoothstep:VT,smootherstep:zT,randInt:UT,randFloat:WT,randFloatSpread:HT,seededRandom:XT,degToRad:jT,radToDeg:YT,isPowerOfTwo:GT,ceilPowerOfTwo:qT,floorPowerOfTwo:ZT,setQuaternionFromProperEuler:KT,normalize:Gs,denormalize:$h},zi=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=qi(this.x,t.x,e.x),this.y=qi(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=qi(this.x,t,e),this.y=qi(this.y,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(qi(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(qi(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),s=Math.sin(e),a=this.x-t.x,h=this.y-t.y;return this.x=a*i-h*s+t.x,this.y=a*s+h*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Wi=class n{constructor(t,e,i,s,a,h,u,m,p){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,s,a,h,u,m,p)}set(t,e,i,s,a,h,u,m,p){let v=this.elements;return v[0]=t,v[1]=s,v[2]=u,v[3]=e,v[4]=a,v[5]=m,v[6]=i,v[7]=h,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,s=e.elements,a=this.elements,h=i[0],u=i[3],m=i[6],p=i[1],v=i[4],T=i[7],C=i[2],y=i[5],F=i[8],O=s[0],R=s[3],A=s[6],Z=s[1],J=s[4],nt=s[7],pt=s[2],St=s[5],at=s[8];return a[0]=h*O+u*Z+m*pt,a[3]=h*R+u*J+m*St,a[6]=h*A+u*nt+m*at,a[1]=p*O+v*Z+T*pt,a[4]=p*R+v*J+T*St,a[7]=p*A+v*nt+T*at,a[2]=C*O+y*Z+F*pt,a[5]=C*R+y*J+F*St,a[8]=C*A+y*nt+F*at,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],s=t[2],a=t[3],h=t[4],u=t[5],m=t[6],p=t[7],v=t[8];return e*h*v-e*u*p-i*a*v+i*u*m+s*a*p-s*h*m}invert(){let t=this.elements,e=t[0],i=t[1],s=t[2],a=t[3],h=t[4],u=t[5],m=t[6],p=t[7],v=t[8],T=v*h-u*p,C=u*m-v*a,y=p*a-h*m,F=e*T+i*C+s*y;if(F===0)return this.set(0,0,0,0,0,0,0,0,0);let O=1/F;return t[0]=T*O,t[1]=(s*p-v*i)*O,t[2]=(u*i-s*h)*O,t[3]=C*O,t[4]=(v*e-s*m)*O,t[5]=(s*a-u*e)*O,t[6]=y*O,t[7]=(i*m-p*e)*O,t[8]=(h*e-i*a)*O,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,a,h,u){let m=Math.cos(a),p=Math.sin(a);return this.set(i*m,i*p,-i*(m*h+p*u)+h+t,-s*p,s*m,-s*(-p*h+m*u)+u+e,0,0,1),this}scale(t,e){return this.premultiply(T0.makeScale(t,e)),this}rotate(t){return this.premultiply(T0.makeRotation(-t)),this}translate(t,e){return this.premultiply(T0.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},T0=new Wi;function Sx(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function od(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function k1(){let n=od("canvas");return n.style.display="block",n}var My={};function Ul(n){n in My||(My[n]=!0,console.warn(n))}function I1(n,t,e){return new Promise(function(i,s){function a(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(a,e);break;default:i()}}setTimeout(a,e)})}function L1(n){let t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function D1(n){let t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}var Ty=new Wi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Cy=new Wi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function $T(){let n={enabled:!0,workingColorSpace:Fl,spaces:{},convert:function(s,a,h){return this.enabled===!1||a===h||!a||!h||(this.spaces[a].transfer===gn&&(s.r=Ja(s.r),s.g=Ja(s.g),s.b=Ja(s.b)),this.spaces[a].primaries!==this.spaces[h].primaries&&(s.applyMatrix3(this.spaces[a].toXYZ),s.applyMatrix3(this.spaces[h].fromXYZ)),this.spaces[h].transfer===gn&&(s.r=Jh(s.r),s.g=Jh(s.g),s.b=Jh(s.b))),s},fromWorkingColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},toWorkingColorSpace:function(s,a){return this.convert(s,a,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===no?rd:this.spaces[s].transfer},getLuminanceCoefficients:function(s,a=this.workingColorSpace){return s.fromArray(this.spaces[a].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,a,h){return s.copy(this.spaces[a].toXYZ).multiply(this.spaces[h].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Fl]:{primaries:t,whitePoint:i,transfer:rd,toXYZ:Ty,fromXYZ:Cy,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:qs},outputColorSpaceConfig:{drawingBufferColorSpace:qs}},[qs]:{primaries:t,whitePoint:i,transfer:gn,toXYZ:Ty,fromXYZ:Cy,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:qs}}}),n}var rn=$T();function Ja(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Jh(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var Vh,Qp=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Vh===void 0&&(Vh=od("canvas")),Vh.width=t.width,Vh.height=t.height;let i=Vh.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Vh}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=od("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let s=i.getImageData(0,0,t.width,t.height),a=s.data;for(let h=0;h<a.length;h++)a[h]=Ja(a[h]/255)*255;return i.putImageData(s,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Ja(e[i]/255)*255):e[i]=Ja(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},JT=0,ld=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:JT++}),this.uuid=oc(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let h=0,u=s.length;h<u;h++)s[h].isDataTexture?a.push(C0(s[h].image)):a.push(C0(s[h]))}else a=C0(s);i.url=a}return e||(t.images[this.uuid]=i),i}};function C0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Qp.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var QT=0,il=(()=>{class n extends ya{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,s=jo,a=jo,h=sa,u=tl,m=Ur,p=Ta,v=n.DEFAULT_ANISOTROPY,T=no){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:QT++}),this.uuid=oc(),this.name="",this.source=new ld(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=s,this.wrapT=a,this.magFilter=h,this.minFilter=u,this.anisotropy=v,this.format=m,this.internalFormat=null,this.type=p,this.offset=new zi(0,0),this.repeat=new zi(1,1),this.center=new zi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=T,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let s={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),i||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Y0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kp:e.x=e.x-Math.floor(e.x);break;case jo:e.x=e.x<0?0:1;break;case $p:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Kp:e.y=e.y-Math.floor(e.y);break;case jo:e.y=e.y<0?0:1;break;case $p:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=Y0,n.DEFAULT_ANISOTROPY=1,n})(),Hn=class n{constructor(t=0,e=0,i=0,s=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,s=this.z,a=this.w,h=t.elements;return this.x=h[0]*e+h[4]*i+h[8]*s+h[12]*a,this.y=h[1]*e+h[5]*i+h[9]*s+h[13]*a,this.z=h[2]*e+h[6]*i+h[10]*s+h[14]*a,this.w=h[3]*e+h[7]*i+h[11]*s+h[15]*a,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,s,a,m=t.elements,p=m[0],v=m[4],T=m[8],C=m[1],y=m[5],F=m[9],O=m[2],R=m[6],A=m[10];if(Math.abs(v-C)<.01&&Math.abs(T-O)<.01&&Math.abs(F-R)<.01){if(Math.abs(v+C)<.1&&Math.abs(T+O)<.1&&Math.abs(F+R)<.1&&Math.abs(p+y+A-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let J=(p+1)/2,nt=(y+1)/2,pt=(A+1)/2,St=(v+C)/4,at=(T+O)/4,ot=(F+R)/4;return J>nt&&J>pt?J<.01?(i=0,s=.707106781,a=.707106781):(i=Math.sqrt(J),s=St/i,a=at/i):nt>pt?nt<.01?(i=.707106781,s=0,a=.707106781):(s=Math.sqrt(nt),i=St/s,a=ot/s):pt<.01?(i=.707106781,s=.707106781,a=0):(a=Math.sqrt(pt),i=at/a,s=ot/a),this.set(i,s,a,e),this}let Z=Math.sqrt((R-F)*(R-F)+(T-O)*(T-O)+(C-v)*(C-v));return Math.abs(Z)<.001&&(Z=1),this.x=(R-F)/Z,this.y=(T-O)/Z,this.z=(C-v)/Z,this.w=Math.acos((p+y+A-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=qi(this.x,t.x,e.x),this.y=qi(this.y,t.y,e.y),this.z=qi(this.z,t.z,e.z),this.w=qi(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=qi(this.x,t,e),this.y=qi(this.y,t,e),this.z=qi(this.z,t,e),this.w=qi(this.w,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(qi(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},tf=class extends ya{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Hn(0,0,t,e),this.scissorTest=!1,this.viewport=new Hn(0,0,t,e);let s={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sa,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let a=new il(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);a.flipY=!1,a.generateMipmaps=i.generateMipmaps,a.internalFormat=i.internalFormat,this.textures=[];let h=i.count;for(let u=0;u<h;u++)this.textures[u]=a.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,s=t.textures.length;i<s;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;let e=Object.assign({},t.texture.image);return this.texture.source=new ld(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},wa=class extends tf{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},hd=class extends il{constructor(t=null,e=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:s},this.magFilter=Or,this.minFilter=Or,this.wrapR=jo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var ef=class extends il{constructor(t=null,e=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:s},this.magFilter=Or,this.minFilter=Or,this.wrapR=jo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Vr=class{constructor(t=0,e=0,i=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=s}static slerpFlat(t,e,i,s,a,h,u){let m=i[s+0],p=i[s+1],v=i[s+2],T=i[s+3],C=a[h+0],y=a[h+1],F=a[h+2],O=a[h+3];if(u===0){t[e+0]=m,t[e+1]=p,t[e+2]=v,t[e+3]=T;return}if(u===1){t[e+0]=C,t[e+1]=y,t[e+2]=F,t[e+3]=O;return}if(T!==O||m!==C||p!==y||v!==F){let R=1-u,A=m*C+p*y+v*F+T*O,Z=A>=0?1:-1,J=1-A*A;if(J>Number.EPSILON){let pt=Math.sqrt(J),St=Math.atan2(pt,A*Z);R=Math.sin(R*St)/pt,u=Math.sin(u*St)/pt}let nt=u*Z;if(m=m*R+C*nt,p=p*R+y*nt,v=v*R+F*nt,T=T*R+O*nt,R===1-u){let pt=1/Math.sqrt(m*m+p*p+v*v+T*T);m*=pt,p*=pt,v*=pt,T*=pt}}t[e]=m,t[e+1]=p,t[e+2]=v,t[e+3]=T}static multiplyQuaternionsFlat(t,e,i,s,a,h){let u=i[s],m=i[s+1],p=i[s+2],v=i[s+3],T=a[h],C=a[h+1],y=a[h+2],F=a[h+3];return t[e]=u*F+v*T+m*y-p*C,t[e+1]=m*F+v*C+p*T-u*y,t[e+2]=p*F+v*y+u*C-m*T,t[e+3]=v*F-u*T-m*C-p*y,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,s=t._y,a=t._z,h=t._order,u=Math.cos,m=Math.sin,p=u(i/2),v=u(s/2),T=u(a/2),C=m(i/2),y=m(s/2),F=m(a/2);switch(h){case"XYZ":this._x=C*v*T+p*y*F,this._y=p*y*T-C*v*F,this._z=p*v*F+C*y*T,this._w=p*v*T-C*y*F;break;case"YXZ":this._x=C*v*T+p*y*F,this._y=p*y*T-C*v*F,this._z=p*v*F-C*y*T,this._w=p*v*T+C*y*F;break;case"ZXY":this._x=C*v*T-p*y*F,this._y=p*y*T+C*v*F,this._z=p*v*F+C*y*T,this._w=p*v*T-C*y*F;break;case"ZYX":this._x=C*v*T-p*y*F,this._y=p*y*T+C*v*F,this._z=p*v*F-C*y*T,this._w=p*v*T+C*y*F;break;case"YZX":this._x=C*v*T+p*y*F,this._y=p*y*T+C*v*F,this._z=p*v*F-C*y*T,this._w=p*v*T-C*y*F;break;case"XZY":this._x=C*v*T-p*y*F,this._y=p*y*T-C*v*F,this._z=p*v*F+C*y*T,this._w=p*v*T+C*y*F;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],s=e[4],a=e[8],h=e[1],u=e[5],m=e[9],p=e[2],v=e[6],T=e[10],C=i+u+T;if(C>0){let y=.5/Math.sqrt(C+1);this._w=.25/y,this._x=(v-m)*y,this._y=(a-p)*y,this._z=(h-s)*y}else if(i>u&&i>T){let y=2*Math.sqrt(1+i-u-T);this._w=(v-m)/y,this._x=.25*y,this._y=(s+h)/y,this._z=(a+p)/y}else if(u>T){let y=2*Math.sqrt(1+u-i-T);this._w=(a-p)/y,this._x=(s+h)/y,this._y=.25*y,this._z=(m+v)/y}else{let y=2*Math.sqrt(1+T-i-u);this._w=(h-s)/y,this._x=(a+p)/y,this._y=(m+v)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(qi(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,s=t._y,a=t._z,h=t._w,u=e._x,m=e._y,p=e._z,v=e._w;return this._x=i*v+h*u+s*p-a*m,this._y=s*v+h*m+a*u-i*p,this._z=a*v+h*p+i*m-s*u,this._w=h*v-i*u-s*m-a*p,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,s=this._y,a=this._z,h=this._w,u=h*t._w+i*t._x+s*t._y+a*t._z;if(u<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,u=-u):this.copy(t),u>=1)return this._w=h,this._x=i,this._y=s,this._z=a,this;let m=1-u*u;if(m<=Number.EPSILON){let y=1-e;return this._w=y*h+e*this._w,this._x=y*i+e*this._x,this._y=y*s+e*this._y,this._z=y*a+e*this._z,this.normalize(),this}let p=Math.sqrt(m),v=Math.atan2(p,u),T=Math.sin((1-e)*v)/p,C=Math.sin(e*v)/p;return this._w=h*T+this._w*C,this._x=i*T+this._x*C,this._y=s*T+this._y*C,this._z=a*T+this._z*C,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(s*Math.sin(t),s*Math.cos(t),a*Math.sin(e),a*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},fe=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Ay.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Ay.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,s=this.z,a=t.elements;return this.x=a[0]*e+a[3]*i+a[6]*s,this.y=a[1]*e+a[4]*i+a[7]*s,this.z=a[2]*e+a[5]*i+a[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,s=this.z,a=t.elements,h=1/(a[3]*e+a[7]*i+a[11]*s+a[15]);return this.x=(a[0]*e+a[4]*i+a[8]*s+a[12])*h,this.y=(a[1]*e+a[5]*i+a[9]*s+a[13])*h,this.z=(a[2]*e+a[6]*i+a[10]*s+a[14])*h,this}applyQuaternion(t){let e=this.x,i=this.y,s=this.z,a=t.x,h=t.y,u=t.z,m=t.w,p=2*(h*s-u*i),v=2*(u*e-a*s),T=2*(a*i-h*e);return this.x=e+m*p+h*T-u*v,this.y=i+m*v+u*p-a*T,this.z=s+m*T+a*v-h*p,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,s=this.z,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*s,this.y=a[1]*e+a[5]*i+a[9]*s,this.z=a[2]*e+a[6]*i+a[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=qi(this.x,t.x,e.x),this.y=qi(this.y,t.y,e.y),this.z=qi(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=qi(this.x,t,e),this.y=qi(this.y,t,e),this.z=qi(this.z,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(qi(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,s=t.y,a=t.z,h=e.x,u=e.y,m=e.z;return this.x=s*m-a*u,this.y=a*h-i*m,this.z=i*u-s*h,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return A0.copy(this).projectOnVector(t),this.sub(A0)}reflect(t){return this.sub(A0.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(qi(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},A0=new fe,Ay=new Vr,Go=class{constructor(t=new fe(1/0,1/0,1/0),e=new fe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(ea.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(ea.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=ea.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let a=i.getAttribute("position");if(e===!0&&a!==void 0&&t.isInstancedMesh!==!0)for(let h=0,u=a.count;h<u;h++)t.isMesh===!0?t.getVertexPosition(h,ea):ea.fromBufferAttribute(a,h),ea.applyMatrix4(t.matrixWorld),this.expandByPoint(ea);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Ep.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Ep.copy(i.boundingBox)),Ep.applyMatrix4(t.matrixWorld),this.union(Ep)}let s=t.children;for(let a=0,h=s.length;a<h;a++)this.expandByObject(s[a],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ea),ea.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Jc),kp.subVectors(this.max,Jc),zh.subVectors(t.a,Jc),Uh.subVectors(t.b,Jc),Wh.subVectors(t.c,Jc),Oo.subVectors(Uh,zh),Vo.subVectors(Wh,Uh),Cl.subVectors(zh,Wh);let e=[0,-Oo.z,Oo.y,0,-Vo.z,Vo.y,0,-Cl.z,Cl.y,Oo.z,0,-Oo.x,Vo.z,0,-Vo.x,Cl.z,0,-Cl.x,-Oo.y,Oo.x,0,-Vo.y,Vo.x,0,-Cl.y,Cl.x,0];return!P0(e,zh,Uh,Wh,kp)||(e=[1,0,0,0,1,0,0,0,1],!P0(e,zh,Uh,Wh,kp))?!1:(Ip.crossVectors(Oo,Vo),e=[Ip.x,Ip.y,Ip.z],P0(e,zh,Uh,Wh,kp))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ea).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(ea).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Ya[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ya[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ya[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ya[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ya[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ya[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ya[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ya[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ya),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Ya=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe],ea=new fe,Ep=new Go,zh=new fe,Uh=new fe,Wh=new fe,Oo=new fe,Vo=new fe,Cl=new fe,Jc=new fe,kp=new fe,Ip=new fe,Al=new fe;function P0(n,t,e,i,s){for(let a=0,h=n.length-3;a<=h;a+=3){Al.fromArray(n,a);let u=s.x*Math.abs(Al.x)+s.y*Math.abs(Al.y)+s.z*Math.abs(Al.z),m=t.dot(Al),p=e.dot(Al),v=i.dot(Al);if(Math.max(-Math.max(m,p,v),Math.min(m,p,v))>u)return!1}return!0}var tC=new Go,Qc=new fe,E0=new fe,tc=class{constructor(t=new fe,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):tC.setFromPoints(t).getCenter(i);let s=0;for(let a=0,h=t.length;a<h;a++)s=Math.max(s,i.distanceToSquared(t[a]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Qc.subVectors(t,this.center);let e=Qc.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),s=(i-this.radius)*.5;this.center.addScaledVector(Qc,s/i),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(E0.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Qc.copy(t.center).add(E0)),this.expandByPoint(Qc.copy(t.center).sub(E0))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ga=new fe,k0=new fe,Lp=new fe,zo=new fe,I0=new fe,Dp=new fe,L0=new fe,ec=class{constructor(t=new fe,e=new fe(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ga)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Ga.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Ga.copy(this.origin).addScaledVector(this.direction,e),Ga.distanceToSquared(t))}distanceSqToSegment(t,e,i,s){k0.copy(t).add(e).multiplyScalar(.5),Lp.copy(e).sub(t).normalize(),zo.copy(this.origin).sub(k0);let a=t.distanceTo(e)*.5,h=-this.direction.dot(Lp),u=zo.dot(this.direction),m=-zo.dot(Lp),p=zo.lengthSq(),v=Math.abs(1-h*h),T,C,y,F;if(v>0)if(T=h*m-u,C=h*u-m,F=a*v,T>=0)if(C>=-F)if(C<=F){let O=1/v;T*=O,C*=O,y=T*(T+h*C+2*u)+C*(h*T+C+2*m)+p}else C=a,T=Math.max(0,-(h*C+u)),y=-T*T+C*(C+2*m)+p;else C=-a,T=Math.max(0,-(h*C+u)),y=-T*T+C*(C+2*m)+p;else C<=-F?(T=Math.max(0,-(-h*a+u)),C=T>0?-a:Math.min(Math.max(-a,-m),a),y=-T*T+C*(C+2*m)+p):C<=F?(T=0,C=Math.min(Math.max(-a,-m),a),y=C*(C+2*m)+p):(T=Math.max(0,-(h*a+u)),C=T>0?a:Math.min(Math.max(-a,-m),a),y=-T*T+C*(C+2*m)+p);else C=h>0?-a:a,T=Math.max(0,-(h*C+u)),y=-T*T+C*(C+2*m)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,T),s&&s.copy(k0).addScaledVector(Lp,C),y}intersectSphere(t,e){Ga.subVectors(t.center,this.origin);let i=Ga.dot(this.direction),s=Ga.dot(Ga)-i*i,a=t.radius*t.radius;if(s>a)return null;let h=Math.sqrt(a-s),u=i-h,m=i+h;return m<0?null:u<0?this.at(m,e):this.at(u,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,s,a,h,u,m,p=1/this.direction.x,v=1/this.direction.y,T=1/this.direction.z,C=this.origin;return p>=0?(i=(t.min.x-C.x)*p,s=(t.max.x-C.x)*p):(i=(t.max.x-C.x)*p,s=(t.min.x-C.x)*p),v>=0?(a=(t.min.y-C.y)*v,h=(t.max.y-C.y)*v):(a=(t.max.y-C.y)*v,h=(t.min.y-C.y)*v),i>h||a>s||((a>i||isNaN(i))&&(i=a),(h<s||isNaN(s))&&(s=h),T>=0?(u=(t.min.z-C.z)*T,m=(t.max.z-C.z)*T):(u=(t.max.z-C.z)*T,m=(t.min.z-C.z)*T),i>m||u>s)||((u>i||i!==i)&&(i=u),(m<s||s!==s)&&(s=m),s<0)?null:this.at(i>=0?i:s,e)}intersectsBox(t){return this.intersectBox(t,Ga)!==null}intersectTriangle(t,e,i,s,a){I0.subVectors(e,t),Dp.subVectors(i,t),L0.crossVectors(I0,Dp);let h=this.direction.dot(L0),u;if(h>0){if(s)return null;u=1}else if(h<0)u=-1,h=-h;else return null;zo.subVectors(this.origin,t);let m=u*this.direction.dot(Dp.crossVectors(zo,Dp));if(m<0)return null;let p=u*this.direction.dot(I0.cross(zo));if(p<0||m+p>h)return null;let v=-u*zo.dot(L0);return v<0?null:this.at(v/h,a)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Zn=class n{constructor(t,e,i,s,a,h,u,m,p,v,T,C,y,F,O,R){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,s,a,h,u,m,p,v,T,C,y,F,O,R)}set(t,e,i,s,a,h,u,m,p,v,T,C,y,F,O,R){let A=this.elements;return A[0]=t,A[4]=e,A[8]=i,A[12]=s,A[1]=a,A[5]=h,A[9]=u,A[13]=m,A[2]=p,A[6]=v,A[10]=T,A[14]=C,A[3]=y,A[7]=F,A[11]=O,A[15]=R,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,s=1/Hh.setFromMatrixColumn(t,0).length(),a=1/Hh.setFromMatrixColumn(t,1).length(),h=1/Hh.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*a,e[5]=i[5]*a,e[6]=i[6]*a,e[7]=0,e[8]=i[8]*h,e[9]=i[9]*h,e[10]=i[10]*h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,s=t.y,a=t.z,h=Math.cos(i),u=Math.sin(i),m=Math.cos(s),p=Math.sin(s),v=Math.cos(a),T=Math.sin(a);if(t.order==="XYZ"){let C=h*v,y=h*T,F=u*v,O=u*T;e[0]=m*v,e[4]=-m*T,e[8]=p,e[1]=y+F*p,e[5]=C-O*p,e[9]=-u*m,e[2]=O-C*p,e[6]=F+y*p,e[10]=h*m}else if(t.order==="YXZ"){let C=m*v,y=m*T,F=p*v,O=p*T;e[0]=C+O*u,e[4]=F*u-y,e[8]=h*p,e[1]=h*T,e[5]=h*v,e[9]=-u,e[2]=y*u-F,e[6]=O+C*u,e[10]=h*m}else if(t.order==="ZXY"){let C=m*v,y=m*T,F=p*v,O=p*T;e[0]=C-O*u,e[4]=-h*T,e[8]=F+y*u,e[1]=y+F*u,e[5]=h*v,e[9]=O-C*u,e[2]=-h*p,e[6]=u,e[10]=h*m}else if(t.order==="ZYX"){let C=h*v,y=h*T,F=u*v,O=u*T;e[0]=m*v,e[4]=F*p-y,e[8]=C*p+O,e[1]=m*T,e[5]=O*p+C,e[9]=y*p-F,e[2]=-p,e[6]=u*m,e[10]=h*m}else if(t.order==="YZX"){let C=h*m,y=h*p,F=u*m,O=u*p;e[0]=m*v,e[4]=O-C*T,e[8]=F*T+y,e[1]=T,e[5]=h*v,e[9]=-u*v,e[2]=-p*v,e[6]=y*T+F,e[10]=C-O*T}else if(t.order==="XZY"){let C=h*m,y=h*p,F=u*m,O=u*p;e[0]=m*v,e[4]=-T,e[8]=p*v,e[1]=C*T+O,e[5]=h*v,e[9]=y*T-F,e[2]=F*T-y,e[6]=u*v,e[10]=O*T+C}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(eC,t,iC)}lookAt(t,e,i){let s=this.elements;return vr.subVectors(t,e),vr.lengthSq()===0&&(vr.z=1),vr.normalize(),Uo.crossVectors(i,vr),Uo.lengthSq()===0&&(Math.abs(i.z)===1?vr.x+=1e-4:vr.z+=1e-4,vr.normalize(),Uo.crossVectors(i,vr)),Uo.normalize(),Rp.crossVectors(vr,Uo),s[0]=Uo.x,s[4]=Rp.x,s[8]=vr.x,s[1]=Uo.y,s[5]=Rp.y,s[9]=vr.y,s[2]=Uo.z,s[6]=Rp.z,s[10]=vr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,s=e.elements,a=this.elements,h=i[0],u=i[4],m=i[8],p=i[12],v=i[1],T=i[5],C=i[9],y=i[13],F=i[2],O=i[6],R=i[10],A=i[14],Z=i[3],J=i[7],nt=i[11],pt=i[15],St=s[0],at=s[4],ot=s[8],Q=s[12],tt=s[1],H=s[5],$=s[9],ct=s[13],yt=s[2],Bt=s[6],kt=s[10],zt=s[14],Mt=s[3],Yt=s[7],Zt=s[11],ut=s[15];return a[0]=h*St+u*tt+m*yt+p*Mt,a[4]=h*at+u*H+m*Bt+p*Yt,a[8]=h*ot+u*$+m*kt+p*Zt,a[12]=h*Q+u*ct+m*zt+p*ut,a[1]=v*St+T*tt+C*yt+y*Mt,a[5]=v*at+T*H+C*Bt+y*Yt,a[9]=v*ot+T*$+C*kt+y*Zt,a[13]=v*Q+T*ct+C*zt+y*ut,a[2]=F*St+O*tt+R*yt+A*Mt,a[6]=F*at+O*H+R*Bt+A*Yt,a[10]=F*ot+O*$+R*kt+A*Zt,a[14]=F*Q+O*ct+R*zt+A*ut,a[3]=Z*St+J*tt+nt*yt+pt*Mt,a[7]=Z*at+J*H+nt*Bt+pt*Yt,a[11]=Z*ot+J*$+nt*kt+pt*Zt,a[15]=Z*Q+J*ct+nt*zt+pt*ut,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],s=t[8],a=t[12],h=t[1],u=t[5],m=t[9],p=t[13],v=t[2],T=t[6],C=t[10],y=t[14],F=t[3],O=t[7],R=t[11],A=t[15];return F*(+a*m*T-s*p*T-a*u*C+i*p*C+s*u*y-i*m*y)+O*(+e*m*y-e*p*C+a*h*C-s*h*y+s*p*v-a*m*v)+R*(+e*p*T-e*u*y-a*h*T+i*h*y+a*u*v-i*p*v)+A*(-s*u*v-e*m*T+e*u*C+s*h*T-i*h*C+i*m*v)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],s=t[2],a=t[3],h=t[4],u=t[5],m=t[6],p=t[7],v=t[8],T=t[9],C=t[10],y=t[11],F=t[12],O=t[13],R=t[14],A=t[15],Z=T*R*p-O*C*p+O*m*y-u*R*y-T*m*A+u*C*A,J=F*C*p-v*R*p-F*m*y+h*R*y+v*m*A-h*C*A,nt=v*O*p-F*T*p+F*u*y-h*O*y-v*u*A+h*T*A,pt=F*T*m-v*O*m-F*u*C+h*O*C+v*u*R-h*T*R,St=e*Z+i*J+s*nt+a*pt;if(St===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let at=1/St;return t[0]=Z*at,t[1]=(O*C*a-T*R*a-O*s*y+i*R*y+T*s*A-i*C*A)*at,t[2]=(u*R*a-O*m*a+O*s*p-i*R*p-u*s*A+i*m*A)*at,t[3]=(T*m*a-u*C*a-T*s*p+i*C*p+u*s*y-i*m*y)*at,t[4]=J*at,t[5]=(v*R*a-F*C*a+F*s*y-e*R*y-v*s*A+e*C*A)*at,t[6]=(F*m*a-h*R*a-F*s*p+e*R*p+h*s*A-e*m*A)*at,t[7]=(h*C*a-v*m*a+v*s*p-e*C*p-h*s*y+e*m*y)*at,t[8]=nt*at,t[9]=(F*T*a-v*O*a-F*i*y+e*O*y+v*i*A-e*T*A)*at,t[10]=(h*O*a-F*u*a+F*i*p-e*O*p-h*i*A+e*u*A)*at,t[11]=(v*u*a-h*T*a-v*i*p+e*T*p+h*i*y-e*u*y)*at,t[12]=pt*at,t[13]=(v*O*s-F*T*s+F*i*C-e*O*C-v*i*R+e*T*R)*at,t[14]=(F*u*s-h*O*s-F*i*m+e*O*m+h*i*R-e*u*R)*at,t[15]=(h*T*s-v*u*s+v*i*m-e*T*m-h*i*C+e*u*C)*at,this}scale(t){let e=this.elements,i=t.x,s=t.y,a=t.z;return e[0]*=i,e[4]*=s,e[8]*=a,e[1]*=i,e[5]*=s,e[9]*=a,e[2]*=i,e[6]*=s,e[10]*=a,e[3]*=i,e[7]*=s,e[11]*=a,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),s=Math.sin(e),a=1-i,h=t.x,u=t.y,m=t.z,p=a*h,v=a*u;return this.set(p*h+i,p*u-s*m,p*m+s*u,0,p*u+s*m,v*u+i,v*m-s*h,0,p*m-s*u,v*m+s*h,a*m*m+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,s,a,h){return this.set(1,i,a,0,t,1,h,0,e,s,1,0,0,0,0,1),this}compose(t,e,i){let s=this.elements,a=e._x,h=e._y,u=e._z,m=e._w,p=a+a,v=h+h,T=u+u,C=a*p,y=a*v,F=a*T,O=h*v,R=h*T,A=u*T,Z=m*p,J=m*v,nt=m*T,pt=i.x,St=i.y,at=i.z;return s[0]=(1-(O+A))*pt,s[1]=(y+nt)*pt,s[2]=(F-J)*pt,s[3]=0,s[4]=(y-nt)*St,s[5]=(1-(C+A))*St,s[6]=(R+Z)*St,s[7]=0,s[8]=(F+J)*at,s[9]=(R-Z)*at,s[10]=(1-(C+O))*at,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){let s=this.elements,a=Hh.set(s[0],s[1],s[2]).length(),h=Hh.set(s[4],s[5],s[6]).length(),u=Hh.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),t.x=s[12],t.y=s[13],t.z=s[14],ia.copy(this);let p=1/a,v=1/h,T=1/u;return ia.elements[0]*=p,ia.elements[1]*=p,ia.elements[2]*=p,ia.elements[4]*=v,ia.elements[5]*=v,ia.elements[6]*=v,ia.elements[8]*=T,ia.elements[9]*=T,ia.elements[10]*=T,e.setFromRotationMatrix(ia),i.x=a,i.y=h,i.z=u,this}makePerspective(t,e,i,s,a,h,u=ba){let m=this.elements,p=2*a/(e-t),v=2*a/(i-s),T=(e+t)/(e-t),C=(i+s)/(i-s),y,F;if(u===ba)y=-(h+a)/(h-a),F=-2*h*a/(h-a);else if(u===ad)y=-h/(h-a),F=-h*a/(h-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return m[0]=p,m[4]=0,m[8]=T,m[12]=0,m[1]=0,m[5]=v,m[9]=C,m[13]=0,m[2]=0,m[6]=0,m[10]=y,m[14]=F,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(t,e,i,s,a,h,u=ba){let m=this.elements,p=1/(e-t),v=1/(i-s),T=1/(h-a),C=(e+t)*p,y=(i+s)*v,F,O;if(u===ba)F=(h+a)*T,O=-2*T;else if(u===ad)F=a*T,O=-1*T;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return m[0]=2*p,m[4]=0,m[8]=0,m[12]=-C,m[1]=0,m[5]=2*v,m[9]=0,m[13]=-y,m[2]=0,m[6]=0,m[10]=O,m[14]=-F,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},Hh=new fe,ia=new Zn,eC=new fe(0,0,0),iC=new fe(1,1,1),Uo=new fe,Rp=new fe,vr=new fe,Py=new Zn,Ey=new Vr,qo=(()=>{class n{constructor(e=0,i=0,s=0,a=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=s,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,s,a=this._order){return this._x=e,this._y=i,this._z=s,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,s=!0){let a=e.elements,h=a[0],u=a[4],m=a[8],p=a[1],v=a[5],T=a[9],C=a[2],y=a[6],F=a[10];switch(i){case"XYZ":this._y=Math.asin(qi(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-T,F),this._z=Math.atan2(-u,h)):(this._x=Math.atan2(y,v),this._z=0);break;case"YXZ":this._x=Math.asin(-qi(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(m,F),this._z=Math.atan2(p,v)):(this._y=Math.atan2(-C,h),this._z=0);break;case"ZXY":this._x=Math.asin(qi(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-C,F),this._z=Math.atan2(-u,v)):(this._y=0,this._z=Math.atan2(p,h));break;case"ZYX":this._y=Math.asin(-qi(C,-1,1)),Math.abs(C)<.9999999?(this._x=Math.atan2(y,F),this._z=Math.atan2(p,h)):(this._x=0,this._z=Math.atan2(-u,v));break;case"YZX":this._z=Math.asin(qi(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-T,v),this._y=Math.atan2(-C,h)):(this._x=0,this._y=Math.atan2(m,F));break;case"XZY":this._z=Math.asin(-qi(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(y,v),this._y=Math.atan2(m,h)):(this._x=Math.atan2(-T,F),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,s===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,s){return Py.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Py,i,s)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return Ey.setFromEuler(this),this.setFromQuaternion(Ey,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),cd=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},nC=0,ky=new fe,Xh=new Vr,qa=new Zn,Fp=new fe,td=new fe,sC=new fe,rC=new Vr,Iy=new fe(1,0,0),Ly=new fe(0,1,0),Dy=new fe(0,0,1),Ry={type:"added"},aC={type:"removed"},jh={type:"childadded",child:null},D0={type:"childremoved",child:null},ra=(()=>{class n extends ya{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nC++}),this.uuid=oc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new fe,i=new qo,s=new Vr,a=new fe(1,1,1);function h(){s.setFromEuler(i,!1)}function u(){i.setFromQuaternion(s,void 0,!1)}i._onChange(h),s._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Zn},normalMatrix:{value:new Wi}}),this.matrix=new Zn,this.matrixWorld=new Zn,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new cd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Xh.setFromAxisAngle(e,i),this.quaternion.multiply(Xh),this}rotateOnWorldAxis(e,i){return Xh.setFromAxisAngle(e,i),this.quaternion.premultiply(Xh),this}rotateX(e){return this.rotateOnAxis(Iy,e)}rotateY(e){return this.rotateOnAxis(Ly,e)}rotateZ(e){return this.rotateOnAxis(Dy,e)}translateOnAxis(e,i){return ky.copy(e).applyQuaternion(this.quaternion),this.position.add(ky.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(Iy,e)}translateY(e){return this.translateOnAxis(Ly,e)}translateZ(e){return this.translateOnAxis(Dy,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(qa.copy(this.matrixWorld).invert())}lookAt(e,i,s){e.isVector3?Fp.copy(e):Fp.set(e,i,s);let a=this.parent;this.updateWorldMatrix(!0,!1),td.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qa.lookAt(td,Fp,this.up):qa.lookAt(Fp,td,this.up),this.quaternion.setFromRotationMatrix(qa),a&&(qa.extractRotation(a.matrixWorld),Xh.setFromRotationMatrix(qa),this.quaternion.premultiply(Xh.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Ry),jh.child=e,this.dispatchEvent(jh),jh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(aC),D0.child=e,this.dispatchEvent(D0),D0.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),qa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),qa.multiply(e.parent.matrixWorld)),e.applyMatrix4(qa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Ry),jh.child=e,this.dispatchEvent(jh),jh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let s=0,a=this.children.length;s<a;s++){let u=this.children[s].getObjectByProperty(e,i);if(u!==void 0)return u}}getObjectsByProperty(e,i,s=[]){this[e]===i&&s.push(this);let a=this.children;for(let h=0,u=a.length;h<u;h++)a[h].getObjectsByProperty(e,i,s);return s}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(td,e,sC),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(td,rC,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateMatrixWorld(e)}updateWorldMatrix(e,i){let s=this.parent;if(e===!0&&s!==null&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let a=this.children;for(let h=0,u=a.length;h<u;h++)a[h].updateWorldMatrix(!1,!0)}}toJSON(e){let i=e===void 0||typeof e=="string",s={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.visibility=this._visibility,a.active=this._active,a.bounds=this._bounds.map(m=>({boxInitialized:m.boxInitialized,boxMin:m.box.min.toArray(),boxMax:m.box.max.toArray(),sphereInitialized:m.sphereInitialized,sphereRadius:m.sphere.radius,sphereCenter:m.sphere.center.toArray()})),a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.geometryCount=this._geometryCount,a.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere={center:a.boundingSphere.center.toArray(),radius:a.boundingSphere.radius}),this.boundingBox!==null&&(a.boundingBox={min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}));function h(m,p){return m[p.uuid]===void 0&&(m[p.uuid]=p.toJSON(e)),p.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=h(e.geometries,this.geometry);let m=this.geometry.parameters;if(m!==void 0&&m.shapes!==void 0){let p=m.shapes;if(Array.isArray(p))for(let v=0,T=p.length;v<T;v++){let C=p[v];h(e.shapes,C)}else h(e.shapes,p)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(h(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let m=[];for(let p=0,v=this.material.length;p<v;p++)m.push(h(e.materials,this.material[p]));a.material=m}else a.material=h(e.materials,this.material);if(this.children.length>0){a.children=[];for(let m=0;m<this.children.length;m++)a.children.push(this.children[m].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let m=0;m<this.animations.length;m++){let p=this.animations[m];a.animations.push(h(e.animations,p))}}if(i){let m=u(e.geometries),p=u(e.materials),v=u(e.textures),T=u(e.images),C=u(e.shapes),y=u(e.skeletons),F=u(e.animations),O=u(e.nodes);m.length>0&&(s.geometries=m),p.length>0&&(s.materials=p),v.length>0&&(s.textures=v),T.length>0&&(s.images=T),C.length>0&&(s.shapes=C),y.length>0&&(s.skeletons=y),F.length>0&&(s.animations=F),O.length>0&&(s.nodes=O)}return s.object=a,s;function u(m){let p=[];for(let v in m){let T=m[v];delete T.metadata,p.push(T)}return p}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let s=0;s<e.children.length;s++){let a=e.children[s];this.add(a.clone())}return this}}return n.DEFAULT_UP=new fe(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),na=new fe,Za=new fe,R0=new fe,Ka=new fe,Yh=new fe,Gh=new fe,Fy=new fe,F0=new fe,N0=new fe,B0=new fe,O0=new Hn,V0=new Hn,z0=new Hn,Xo=class n{constructor(t=new fe,e=new fe,i=new fe){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,s){s.subVectors(i,e),na.subVectors(t,e),s.cross(na);let a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(t,e,i,s,a){na.subVectors(s,e),Za.subVectors(i,e),R0.subVectors(t,e);let h=na.dot(na),u=na.dot(Za),m=na.dot(R0),p=Za.dot(Za),v=Za.dot(R0),T=h*p-u*u;if(T===0)return a.set(0,0,0),null;let C=1/T,y=(p*m-u*v)*C,F=(h*v-u*m)*C;return a.set(1-y-F,F,y)}static containsPoint(t,e,i,s){return this.getBarycoord(t,e,i,s,Ka)===null?!1:Ka.x>=0&&Ka.y>=0&&Ka.x+Ka.y<=1}static getInterpolation(t,e,i,s,a,h,u,m){return this.getBarycoord(t,e,i,s,Ka)===null?(m.x=0,m.y=0,"z"in m&&(m.z=0),"w"in m&&(m.w=0),null):(m.setScalar(0),m.addScaledVector(a,Ka.x),m.addScaledVector(h,Ka.y),m.addScaledVector(u,Ka.z),m)}static getInterpolatedAttribute(t,e,i,s,a,h){return O0.setScalar(0),V0.setScalar(0),z0.setScalar(0),O0.fromBufferAttribute(t,e),V0.fromBufferAttribute(t,i),z0.fromBufferAttribute(t,s),h.setScalar(0),h.addScaledVector(O0,a.x),h.addScaledVector(V0,a.y),h.addScaledVector(z0,a.z),h}static isFrontFacing(t,e,i,s){return na.subVectors(i,e),Za.subVectors(t,e),na.cross(Za).dot(s)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,i,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return na.subVectors(this.c,this.b),Za.subVectors(this.a,this.b),na.cross(Za).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,s,a){return n.getInterpolation(t,this.a,this.b,this.c,e,i,s,a)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,s=this.b,a=this.c,h,u;Yh.subVectors(s,i),Gh.subVectors(a,i),F0.subVectors(t,i);let m=Yh.dot(F0),p=Gh.dot(F0);if(m<=0&&p<=0)return e.copy(i);N0.subVectors(t,s);let v=Yh.dot(N0),T=Gh.dot(N0);if(v>=0&&T<=v)return e.copy(s);let C=m*T-v*p;if(C<=0&&m>=0&&v<=0)return h=m/(m-v),e.copy(i).addScaledVector(Yh,h);B0.subVectors(t,a);let y=Yh.dot(B0),F=Gh.dot(B0);if(F>=0&&y<=F)return e.copy(a);let O=y*p-m*F;if(O<=0&&p>=0&&F<=0)return u=p/(p-F),e.copy(i).addScaledVector(Gh,u);let R=v*F-y*T;if(R<=0&&T-v>=0&&y-F>=0)return Fy.subVectors(a,s),u=(T-v)/(T-v+(y-F)),e.copy(s).addScaledVector(Fy,u);let A=1/(R+O+C);return h=O*A,u=C*A,e.copy(i).addScaledVector(Yh,h).addScaledVector(Gh,u)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},R1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wo={h:0,s:0,l:0},Np={h:0,s:0,l:0};function U0(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var Xi=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=qs){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,rn.toWorkingColorSpace(this,e),this}setRGB(t,e,i,s=rn.workingColorSpace){return this.r=t,this.g=e,this.b=i,rn.toWorkingColorSpace(this,s),this}setHSL(t,e,i,s=rn.workingColorSpace){if(t=yx(t,1),e=qi(e,0,1),i=qi(i,0,1),e===0)this.r=this.g=this.b=i;else{let a=i<=.5?i*(1+e):i+e-i*e,h=2*i-a;this.r=U0(h,a,t+1/3),this.g=U0(h,a,t),this.b=U0(h,a,t-1/3)}return rn.toWorkingColorSpace(this,s),this}setStyle(t,e=qs){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let a,h=s[1],u=s[2];switch(h){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,e);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,e);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){let a=s[1],h=a.length;if(h===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,e);if(h===6)return this.setHex(parseInt(a,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=qs){let i=R1[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ja(t.r),this.g=Ja(t.g),this.b=Ja(t.b),this}copyLinearToSRGB(t){return this.r=Jh(t.r),this.g=Jh(t.g),this.b=Jh(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=qs){return rn.fromWorkingColorSpace(Bs.copy(this),t),Math.round(qi(Bs.r*255,0,255))*65536+Math.round(qi(Bs.g*255,0,255))*256+Math.round(qi(Bs.b*255,0,255))}getHexString(t=qs){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=rn.workingColorSpace){rn.fromWorkingColorSpace(Bs.copy(this),e);let i=Bs.r,s=Bs.g,a=Bs.b,h=Math.max(i,s,a),u=Math.min(i,s,a),m,p,v=(u+h)/2;if(u===h)m=0,p=0;else{let T=h-u;switch(p=v<=.5?T/(h+u):T/(2-h-u),h){case i:m=(s-a)/T+(s<a?6:0);break;case s:m=(a-i)/T+2;break;case a:m=(i-s)/T+4;break}m/=6}return t.h=m,t.s=p,t.l=v,t}getRGB(t,e=rn.workingColorSpace){return rn.fromWorkingColorSpace(Bs.copy(this),e),t.r=Bs.r,t.g=Bs.g,t.b=Bs.b,t}getStyle(t=qs){rn.fromWorkingColorSpace(Bs.copy(this),t);let e=Bs.r,i=Bs.g,s=Bs.b;return t!==qs?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(t,e,i){return this.getHSL(Wo),this.setHSL(Wo.h+t,Wo.s+e,Wo.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Wo),t.getHSL(Np);let i=nd(Wo.h,Np.h,e),s=nd(Wo.s,Np.s,e),a=nd(Wo.l,Np.l,e);return this.setHSL(i,s,a),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,s=this.b,a=t.elements;return this.r=a[0]*e+a[3]*i+a[6]*s,this.g=a[1]*e+a[4]*i+a[7]*s,this.b=a[2]*e+a[5]*i+a[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Bs=new Xi;Xi.NAMES=R1;var oC=0,Zo=class extends ya{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:oC++}),this.uuid=oc(),this.name="",this.type="Material",this.blending=Ll,this.side=Qa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qp,this.blendDst=Zp,this.blendEquation=Yo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Xi(0,0,0),this.blendAlpha=0,this.depthFunc=Dl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=K0,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=kl,this.stencilZFail=kl,this.stencilZPass=kl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ll&&(i.blending=this.blending),this.side!==Qa&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==qp&&(i.blendSrc=this.blendSrc),this.blendDst!==Zp&&(i.blendDst=this.blendDst),this.blendEquation!==Yo&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Dl&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==K0&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==kl&&(i.stencilFail=this.stencilFail),this.stencilZFail!==kl&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==kl&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(a){let h=[];for(let u in a){let m=a[u];delete m.metadata,h.push(m)}return h}if(e){let a=s(t.textures),h=s(t.images);a.length>0&&(i.textures=a),h.length>0&&(i.images=h)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let s=e.length;i=new Array(s);for(let a=0;a!==s;++a)i[a]=e[a].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},dd=class extends Zo{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Xi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qo,this.combine=Mf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var hs=new fe,Bp=new zi,Ts=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=$0,this.updateRanges=[],this.gpuType=Ca,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[t+s]=e.array[i+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Bp.fromBufferAttribute(this,e),Bp.applyMatrix3(t),this.setXY(e,Bp.x,Bp.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)hs.fromBufferAttribute(this,e),hs.applyMatrix3(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)hs.fromBufferAttribute(this,e),hs.applyMatrix4(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)hs.fromBufferAttribute(this,e),hs.applyNormalMatrix(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)hs.fromBufferAttribute(this,e),hs.transformDirection(t),this.setXYZ(e,hs.x,hs.y,hs.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=$h(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Gs(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=$h(e,this.array)),e}setX(t,e){return this.normalized&&(e=Gs(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=$h(e,this.array)),e}setY(t,e){return this.normalized&&(e=Gs(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=$h(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Gs(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=$h(e,this.array)),e}setW(t,e){return this.normalized&&(e=Gs(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Gs(e,this.array),i=Gs(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,s){return t*=this.itemSize,this.normalized&&(e=Gs(e,this.array),i=Gs(i,this.array),s=Gs(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,e,i,s,a){return t*=this.itemSize,this.normalized&&(e=Gs(e,this.array),i=Gs(i,this.array),s=Gs(s,this.array),a=Gs(a,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=a,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==$0&&(t.usage=this.usage),t}};var ud=class extends Ts{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var pd=class extends Ts{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var br=class extends Ts{constructor(t,e,i){super(new Float32Array(t),e,i)}},lC=0,Nr=new Zn,W0=new ra,qh=new fe,_r=new Go,ed=new Go,bs=new fe,aa=class n extends ya{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:lC++}),this.uuid=oc(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Sx(t)?pd:ud)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let a=new Wi().getNormalMatrix(t);i.applyNormalMatrix(a),i.needsUpdate=!0}let s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Nr.makeRotationFromQuaternion(t),this.applyMatrix4(Nr),this}rotateX(t){return Nr.makeRotationX(t),this.applyMatrix4(Nr),this}rotateY(t){return Nr.makeRotationY(t),this.applyMatrix4(Nr),this}rotateZ(t){return Nr.makeRotationZ(t),this.applyMatrix4(Nr),this}translate(t,e,i){return Nr.makeTranslation(t,e,i),this.applyMatrix4(Nr),this}scale(t,e,i){return Nr.makeScale(t,e,i),this.applyMatrix4(Nr),this}lookAt(t){return W0.lookAt(t),W0.updateMatrix(),this.applyMatrix4(W0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(qh).negate(),this.translate(qh.x,qh.y,qh.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let i=[];for(let s=0,a=t.length;s<a;s++){let h=t[s];i.push(h.x,h.y,h.z||0)}this.setAttribute("position",new br(i,3))}else{let i=Math.min(t.length,e.count);for(let s=0;s<i;s++){let a=t[s];e.setXYZ(s,a.x,a.y,a.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Go);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new fe(-1/0,-1/0,-1/0),new fe(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,s=e.length;i<s;i++){let a=e[i];_r.setFromBufferAttribute(a),this.morphTargetsRelative?(bs.addVectors(this.boundingBox.min,_r.min),this.boundingBox.expandByPoint(bs),bs.addVectors(this.boundingBox.max,_r.max),this.boundingBox.expandByPoint(bs)):(this.boundingBox.expandByPoint(_r.min),this.boundingBox.expandByPoint(_r.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new tc);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new fe,1/0);return}if(t){let i=this.boundingSphere.center;if(_r.setFromBufferAttribute(t),e)for(let a=0,h=e.length;a<h;a++){let u=e[a];ed.setFromBufferAttribute(u),this.morphTargetsRelative?(bs.addVectors(_r.min,ed.min),_r.expandByPoint(bs),bs.addVectors(_r.max,ed.max),_r.expandByPoint(bs)):(_r.expandByPoint(ed.min),_r.expandByPoint(ed.max))}_r.getCenter(i);let s=0;for(let a=0,h=t.count;a<h;a++)bs.fromBufferAttribute(t,a),s=Math.max(s,i.distanceToSquared(bs));if(e)for(let a=0,h=e.length;a<h;a++){let u=e[a],m=this.morphTargetsRelative;for(let p=0,v=u.count;p<v;p++)bs.fromBufferAttribute(u,p),m&&(qh.fromBufferAttribute(t,p),bs.add(qh)),s=Math.max(s,i.distanceToSquared(bs))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,s=e.normal,a=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ts(new Float32Array(4*i.count),4));let h=this.getAttribute("tangent"),u=[],m=[];for(let ot=0;ot<i.count;ot++)u[ot]=new fe,m[ot]=new fe;let p=new fe,v=new fe,T=new fe,C=new zi,y=new zi,F=new zi,O=new fe,R=new fe;function A(ot,Q,tt){p.fromBufferAttribute(i,ot),v.fromBufferAttribute(i,Q),T.fromBufferAttribute(i,tt),C.fromBufferAttribute(a,ot),y.fromBufferAttribute(a,Q),F.fromBufferAttribute(a,tt),v.sub(p),T.sub(p),y.sub(C),F.sub(C);let H=1/(y.x*F.y-F.x*y.y);isFinite(H)&&(O.copy(v).multiplyScalar(F.y).addScaledVector(T,-y.y).multiplyScalar(H),R.copy(T).multiplyScalar(y.x).addScaledVector(v,-F.x).multiplyScalar(H),u[ot].add(O),u[Q].add(O),u[tt].add(O),m[ot].add(R),m[Q].add(R),m[tt].add(R))}let Z=this.groups;Z.length===0&&(Z=[{start:0,count:t.count}]);for(let ot=0,Q=Z.length;ot<Q;++ot){let tt=Z[ot],H=tt.start,$=tt.count;for(let ct=H,yt=H+$;ct<yt;ct+=3)A(t.getX(ct+0),t.getX(ct+1),t.getX(ct+2))}let J=new fe,nt=new fe,pt=new fe,St=new fe;function at(ot){pt.fromBufferAttribute(s,ot),St.copy(pt);let Q=u[ot];J.copy(Q),J.sub(pt.multiplyScalar(pt.dot(Q))).normalize(),nt.crossVectors(St,Q);let H=nt.dot(m[ot])<0?-1:1;h.setXYZW(ot,J.x,J.y,J.z,H)}for(let ot=0,Q=Z.length;ot<Q;++ot){let tt=Z[ot],H=tt.start,$=tt.count;for(let ct=H,yt=H+$;ct<yt;ct+=3)at(t.getX(ct+0)),at(t.getX(ct+1)),at(t.getX(ct+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ts(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let C=0,y=i.count;C<y;C++)i.setXYZ(C,0,0,0);let s=new fe,a=new fe,h=new fe,u=new fe,m=new fe,p=new fe,v=new fe,T=new fe;if(t)for(let C=0,y=t.count;C<y;C+=3){let F=t.getX(C+0),O=t.getX(C+1),R=t.getX(C+2);s.fromBufferAttribute(e,F),a.fromBufferAttribute(e,O),h.fromBufferAttribute(e,R),v.subVectors(h,a),T.subVectors(s,a),v.cross(T),u.fromBufferAttribute(i,F),m.fromBufferAttribute(i,O),p.fromBufferAttribute(i,R),u.add(v),m.add(v),p.add(v),i.setXYZ(F,u.x,u.y,u.z),i.setXYZ(O,m.x,m.y,m.z),i.setXYZ(R,p.x,p.y,p.z)}else for(let C=0,y=e.count;C<y;C+=3)s.fromBufferAttribute(e,C+0),a.fromBufferAttribute(e,C+1),h.fromBufferAttribute(e,C+2),v.subVectors(h,a),T.subVectors(s,a),v.cross(T),i.setXYZ(C+0,v.x,v.y,v.z),i.setXYZ(C+1,v.x,v.y,v.z),i.setXYZ(C+2,v.x,v.y,v.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)bs.fromBufferAttribute(t,e),bs.normalize(),t.setXYZ(e,bs.x,bs.y,bs.z)}toNonIndexed(){function t(u,m){let p=u.array,v=u.itemSize,T=u.normalized,C=new p.constructor(m.length*v),y=0,F=0;for(let O=0,R=m.length;O<R;O++){u.isInterleavedBufferAttribute?y=m[O]*u.data.stride+u.offset:y=m[O]*v;for(let A=0;A<v;A++)C[F++]=p[y++]}return new Ts(C,v,T)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,s=this.attributes;for(let u in s){let m=s[u],p=t(m,i);e.setAttribute(u,p)}let a=this.morphAttributes;for(let u in a){let m=[],p=a[u];for(let v=0,T=p.length;v<T;v++){let C=p[v],y=t(C,i);m.push(y)}e.morphAttributes[u]=m}e.morphTargetsRelative=this.morphTargetsRelative;let h=this.groups;for(let u=0,m=h.length;u<m;u++){let p=h[u];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){let t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let m=this.parameters;for(let p in m)m[p]!==void 0&&(t[p]=m[p]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let m in i){let p=i[m];t.data.attributes[m]=p.toJSON(t.data)}let s={},a=!1;for(let m in this.morphAttributes){let p=this.morphAttributes[m],v=[];for(let T=0,C=p.length;T<C;T++){let y=p[T];v.push(y.toJSON(t.data))}v.length>0&&(s[m]=v,a=!0)}a&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);let h=this.groups;h.length>0&&(t.data.groups=JSON.parse(JSON.stringify(h)));let u=this.boundingSphere;return u!==null&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone(e));let s=t.attributes;for(let p in s){let v=s[p];this.setAttribute(p,v.clone(e))}let a=t.morphAttributes;for(let p in a){let v=[],T=a[p];for(let C=0,y=T.length;C<y;C++)v.push(T[C].clone(e));this.morphAttributes[p]=v}this.morphTargetsRelative=t.morphTargetsRelative;let h=t.groups;for(let p=0,v=h.length;p<v;p++){let T=h[p];this.addGroup(T.start,T.count,T.materialIndex)}let u=t.boundingBox;u!==null&&(this.boundingBox=u.clone());let m=t.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},Ny=new Zn,Pl=new ec,Op=new tc,By=new fe,Vp=new fe,zp=new fe,Up=new fe,H0=new fe,Wp=new fe,Oy=new fe,Hp=new fe,or=class extends ra{constructor(t=new aa,e=new dd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,h=s.length;a<h;a++){let u=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}getVertexPosition(t,e){let i=this.geometry,s=i.attributes.position,a=i.morphAttributes.position,h=i.morphTargetsRelative;e.fromBufferAttribute(s,t);let u=this.morphTargetInfluences;if(a&&u){Wp.set(0,0,0);for(let m=0,p=a.length;m<p;m++){let v=u[m],T=a[m];v!==0&&(H0.fromBufferAttribute(T,t),h?Wp.addScaledVector(H0,v):Wp.addScaledVector(H0.sub(e),v))}e.add(Wp)}return e}raycast(t,e){let i=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Op.copy(i.boundingSphere),Op.applyMatrix4(a),Pl.copy(t.ray).recast(t.near),!(Op.containsPoint(Pl.origin)===!1&&(Pl.intersectSphere(Op,By)===null||Pl.origin.distanceToSquared(By)>(t.far-t.near)**2))&&(Ny.copy(a).invert(),Pl.copy(t.ray).applyMatrix4(Ny),!(i.boundingBox!==null&&Pl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Pl)))}_computeIntersections(t,e,i){let s,a=this.geometry,h=this.material,u=a.index,m=a.attributes.position,p=a.attributes.uv,v=a.attributes.uv1,T=a.attributes.normal,C=a.groups,y=a.drawRange;if(u!==null)if(Array.isArray(h))for(let F=0,O=C.length;F<O;F++){let R=C[F],A=h[R.materialIndex],Z=Math.max(R.start,y.start),J=Math.min(u.count,Math.min(R.start+R.count,y.start+y.count));for(let nt=Z,pt=J;nt<pt;nt+=3){let St=u.getX(nt),at=u.getX(nt+1),ot=u.getX(nt+2);s=Xp(this,A,t,i,p,v,T,St,at,ot),s&&(s.faceIndex=Math.floor(nt/3),s.face.materialIndex=R.materialIndex,e.push(s))}}else{let F=Math.max(0,y.start),O=Math.min(u.count,y.start+y.count);for(let R=F,A=O;R<A;R+=3){let Z=u.getX(R),J=u.getX(R+1),nt=u.getX(R+2);s=Xp(this,h,t,i,p,v,T,Z,J,nt),s&&(s.faceIndex=Math.floor(R/3),e.push(s))}}else if(m!==void 0)if(Array.isArray(h))for(let F=0,O=C.length;F<O;F++){let R=C[F],A=h[R.materialIndex],Z=Math.max(R.start,y.start),J=Math.min(m.count,Math.min(R.start+R.count,y.start+y.count));for(let nt=Z,pt=J;nt<pt;nt+=3){let St=nt,at=nt+1,ot=nt+2;s=Xp(this,A,t,i,p,v,T,St,at,ot),s&&(s.faceIndex=Math.floor(nt/3),s.face.materialIndex=R.materialIndex,e.push(s))}}else{let F=Math.max(0,y.start),O=Math.min(m.count,y.start+y.count);for(let R=F,A=O;R<A;R+=3){let Z=R,J=R+1,nt=R+2;s=Xp(this,h,t,i,p,v,T,Z,J,nt),s&&(s.faceIndex=Math.floor(R/3),e.push(s))}}}};function hC(n,t,e,i,s,a,h,u){let m;if(t.side===Zs?m=i.intersectTriangle(h,a,s,!0,u):m=i.intersectTriangle(s,a,h,t.side===Qa,u),m===null)return null;Hp.copy(u),Hp.applyMatrix4(n.matrixWorld);let p=e.ray.origin.distanceTo(Hp);return p<e.near||p>e.far?null:{distance:p,point:Hp.clone(),object:n}}function Xp(n,t,e,i,s,a,h,u,m,p){n.getVertexPosition(u,Vp),n.getVertexPosition(m,zp),n.getVertexPosition(p,Up);let v=hC(n,t,e,i,Vp,zp,Up,Oy);if(v){let T=new fe;Xo.getBarycoord(Oy,Vp,zp,Up,T),s&&(v.uv=Xo.getInterpolatedAttribute(s,u,m,p,T,new zi)),a&&(v.uv1=Xo.getInterpolatedAttribute(a,u,m,p,T,new zi)),h&&(v.normal=Xo.getInterpolatedAttribute(h,u,m,p,T,new fe),v.normal.dot(i.direction)>0&&v.normal.multiplyScalar(-1));let C={a:u,b:m,c:p,normal:new fe,materialIndex:0};Xo.getNormal(Vp,zp,Up,C.normal),v.face=C,v.barycoord=T}return v}var ic=class n extends aa{constructor(t=1,e=1,i=1,s=1,a=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:a,depthSegments:h};let u=this;s=Math.floor(s),a=Math.floor(a),h=Math.floor(h);let m=[],p=[],v=[],T=[],C=0,y=0;F("z","y","x",-1,-1,i,e,t,h,a,0),F("z","y","x",1,-1,i,e,-t,h,a,1),F("x","z","y",1,1,t,i,e,s,h,2),F("x","z","y",1,-1,t,i,-e,s,h,3),F("x","y","z",1,-1,t,e,i,s,a,4),F("x","y","z",-1,-1,t,e,-i,s,a,5),this.setIndex(m),this.setAttribute("position",new br(p,3)),this.setAttribute("normal",new br(v,3)),this.setAttribute("uv",new br(T,2));function F(O,R,A,Z,J,nt,pt,St,at,ot,Q){let tt=nt/at,H=pt/ot,$=nt/2,ct=pt/2,yt=St/2,Bt=at+1,kt=ot+1,zt=0,Mt=0,Yt=new fe;for(let Zt=0;Zt<kt;Zt++){let ut=Zt*H-ct;for(let K=0;K<Bt;K++){let X=K*tt-$;Yt[O]=X*Z,Yt[R]=ut*J,Yt[A]=yt,p.push(Yt.x,Yt.y,Yt.z),Yt[O]=0,Yt[R]=0,Yt[A]=St>0?1:-1,v.push(Yt.x,Yt.y,Yt.z),T.push(K/at),T.push(1-Zt/ot),zt+=1}}for(let Zt=0;Zt<ot;Zt++)for(let ut=0;ut<at;ut++){let K=C+ut+Bt*Zt,X=C+ut+Bt*(Zt+1),z=C+(ut+1)+Bt*(Zt+1),it=C+(ut+1)+Bt*Zt;m.push(K,X,it),m.push(X,z,it),Mt+=6}u.addGroup(y,Mt,Q),y+=Mt,C+=zt}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function Wl(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let s=n[e][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=s.clone():Array.isArray(s)?t[e][i]=s.slice():t[e][i]=s}}return t}function Vs(n){let t={};for(let e=0;e<n.length;e++){let i=Wl(n[e]);for(let s in i)t[s]=i[s]}return t}function cC(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function Mx(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:rn.workingColorSpace}var F1={clone:Wl,merge:Vs},dC=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,uC=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,oa=class extends Zo{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=dC,this.fragmentShader=uC,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Wl(t.uniforms),this.uniformsGroups=cC(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let s in this.uniforms){let h=this.uniforms[s].value;h&&h.isTexture?e.uniforms[s]={type:"t",value:h.toJSON(t).uuid}:h&&h.isColor?e.uniforms[s]={type:"c",value:h.getHex()}:h&&h.isVector2?e.uniforms[s]={type:"v2",value:h.toArray()}:h&&h.isVector3?e.uniforms[s]={type:"v3",value:h.toArray()}:h&&h.isVector4?e.uniforms[s]={type:"v4",value:h.toArray()}:h&&h.isMatrix3?e.uniforms[s]={type:"m3",value:h.toArray()}:h&&h.isMatrix4?e.uniforms[s]={type:"m4",value:h.toArray()}:e.uniforms[s]={value:h}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},fd=class extends ra{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Zn,this.projectionMatrix=new Zn,this.projectionMatrixInverse=new Zn,this.coordinateSystem=ba}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Ho=new fe,Vy=new zi,zy=new zi,Os=class extends fd{constructor(t=50,e=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=Qh*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(id*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Qh*2*Math.atan(Math.tan(id*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){Ho.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Ho.x,Ho.y).multiplyScalar(-t/Ho.z),Ho.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ho.x,Ho.y).multiplyScalar(-t/Ho.z)}getViewSize(t,e){return this.getViewBounds(t,Vy,zy),e.subVectors(zy,Vy)}setViewOffset(t,e,i,s,a,h){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(id*.5*this.fov)/this.zoom,i=2*e,s=this.aspect*i,a=-.5*s,h=this.view;if(this.view!==null&&this.view.enabled){let m=h.fullWidth,p=h.fullHeight;a+=h.offsetX*s/m,e-=h.offsetY*i/p,s*=h.width/m,i*=h.height/p}let u=this.filmOffset;u!==0&&(a+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},Zh=-90,Kh=1,nf=class extends ra{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let s=new Os(Zh,Kh,t,e);s.layers=this.layers,this.add(s);let a=new Os(Zh,Kh,t,e);a.layers=this.layers,this.add(a);let h=new Os(Zh,Kh,t,e);h.layers=this.layers,this.add(h);let u=new Os(Zh,Kh,t,e);u.layers=this.layers,this.add(u);let m=new Os(Zh,Kh,t,e);m.layers=this.layers,this.add(m);let p=new Os(Zh,Kh,t,e);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,s,a,h,u,m]=e;for(let p of e)this.remove(p);if(t===ba)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),h.up.set(0,0,1),h.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),m.up.set(0,1,0),m.lookAt(0,0,-1);else if(t===ad)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),h.up.set(0,0,-1),h.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),m.up.set(0,-1,0),m.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let p of e)this.add(p),p.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[a,h,u,m,p,v]=this.children,T=t.getRenderTarget(),C=t.getActiveCubeFace(),y=t.getActiveMipmapLevel(),F=t.xr.enabled;t.xr.enabled=!1;let O=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,s),t.render(e,a),t.setRenderTarget(i,1,s),t.render(e,h),t.setRenderTarget(i,2,s),t.render(e,u),t.setRenderTarget(i,3,s),t.render(e,m),t.setRenderTarget(i,4,s),t.render(e,p),i.texture.generateMipmaps=O,t.setRenderTarget(i,5,s),t.render(e,v),t.setRenderTarget(T,C,y),t.xr.enabled=F,i.texture.needsPMREMUpdate=!0}},md=class extends il{constructor(t,e,i,s,a,h,u,m,p,v){t=t!==void 0?t:[],e=e!==void 0?e:Ol,super(t,e,i,s,a,h,u,m,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},sf=class extends wa{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},s=[i,i,i,i,i,i];this.texture=new md(s,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:sa}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new ic(5,5,5),a=new oa({name:"CubemapFromEquirect",uniforms:Wl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Zs,blending:eo});a.uniforms.tEquirect.value=e;let h=new or(s,a),u=e.minFilter;return e.minFilter===tl&&(e.minFilter=sa),new nf(1,10,this).update(t,h),e.minFilter=u,h.geometry.dispose(),h.material.dispose(),this}clear(t,e,i,s){let a=t.getRenderTarget();for(let h=0;h<6;h++)t.setRenderTarget(this,h),t.clear(e,i,s);t.setRenderTarget(a)}};var gd=class n{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new Xi(t),this.near=e,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},xd=class extends ra{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new qo,this.environmentIntensity=1,this.environmentRotation=new qo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};var X0=new fe,pC=new fe,fC=new Wi,Br=class{constructor(t=new fe(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,s){return this.normal.set(t,e,i),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let s=X0.subVectors(i,e).cross(pC.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(X0),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let a=-(t.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:e.copy(t.start).addScaledVector(i,a)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||fC.getNormalMatrix(t),s=this.coplanarPoint(X0).applyMatrix4(t),a=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(a),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},El=new tc,jp=new fe,nc=class{constructor(t=new Br,e=new Br,i=new Br,s=new Br,a=new Br,h=new Br){this.planes=[t,e,i,s,a,h]}set(t,e,i,s,a,h){let u=this.planes;return u[0].copy(t),u[1].copy(e),u[2].copy(i),u[3].copy(s),u[4].copy(a),u[5].copy(h),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=ba){let i=this.planes,s=t.elements,a=s[0],h=s[1],u=s[2],m=s[3],p=s[4],v=s[5],T=s[6],C=s[7],y=s[8],F=s[9],O=s[10],R=s[11],A=s[12],Z=s[13],J=s[14],nt=s[15];if(i[0].setComponents(m-a,C-p,R-y,nt-A).normalize(),i[1].setComponents(m+a,C+p,R+y,nt+A).normalize(),i[2].setComponents(m+h,C+v,R+F,nt+Z).normalize(),i[3].setComponents(m-h,C-v,R-F,nt-Z).normalize(),i[4].setComponents(m-u,C-T,R-O,nt-J).normalize(),e===ba)i[5].setComponents(m+u,C+T,R+O,nt+J).normalize();else if(e===ad)i[5].setComponents(u,T,O,J).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),El.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),El.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(El)}intersectsSprite(t){return El.center.set(0,0,0),El.radius=.7071067811865476,El.applyMatrix4(t.matrixWorld),this.intersectsSphere(El)}intersectsSphere(t){let e=this.planes,i=t.center,s=-t.radius;for(let a=0;a<6;a++)if(e[a].distanceToPoint(i)<s)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let s=e[i];if(jp.x=s.normal.x>0?t.max.x:t.min.x,jp.y=s.normal.y>0?t.max.y:t.min.y,jp.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(jp)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var to=class extends ra{constructor(){super(),this.isGroup=!0,this.type="Group"}};var vd=class extends il{constructor(t,e,i,s,a,h,u,m,p,v=Il){if(v!==Il&&v!==Rl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&v===Il&&(i=el),i===void 0&&v===Rl&&(i=zl),super(null,s,a,h,u,m,v,i,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=u!==void 0?u:Or,this.minFilter=m!==void 0?m:Or,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}};var _d=class n extends aa{constructor(t=1,e=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:s};let a=t/2,h=e/2,u=Math.floor(i),m=Math.floor(s),p=u+1,v=m+1,T=t/u,C=e/m,y=[],F=[],O=[],R=[];for(let A=0;A<v;A++){let Z=A*C-h;for(let J=0;J<p;J++){let nt=J*T-a;F.push(nt,-Z,0),O.push(0,0,1),R.push(J/u),R.push(1-A/m)}}for(let A=0;A<m;A++)for(let Z=0;Z<u;Z++){let J=Z+p*A,nt=Z+p*(A+1),pt=Z+1+p*(A+1),St=Z+1+p*A;y.push(J,nt,St),y.push(nt,pt,St)}this.setIndex(y),this.setAttribute("position",new br(F,3)),this.setAttribute("normal",new br(O,3)),this.setAttribute("uv",new br(R,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}};var bd=class extends Zo{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Xi(16777215),this.specular=new Xi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Xi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vx,this.normalScale=new zi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qo,this.combine=Mf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}};var rf=class extends Zo{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=b1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},af=class extends Zo{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}};function Yp(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function mC(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}var Nl=class{constructor(t,e,i,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,s=e[i],a=e[i-1];t:{e:{let h;i:{s:if(!(t<s)){for(let u=i+2;;){if(s===void 0){if(t<a)break s;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(a=s,s=e[++i],t<s)break e}h=e.length;break i}if(!(t>=a)){let u=e[1];t<u&&(i=2,a=u);for(let m=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===m)break;if(s=a,a=e[--i-1],t>=a)break e}h=i,i=0;break i}break t}for(;i<h;){let u=i+h>>>1;t<e[u]?h=u:i=u+1}if(s=e[i],a=e[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,s)}return this.interpolate_(i,a,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,s=this.valueSize,a=t*s;for(let h=0;h!==s;++h)e[h]=i[a+h];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},of=class extends Nl{constructor(t,e,i,s){super(t,e,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:G0,endingEnd:G0}}intervalChanged_(t,e,i){let s=this.parameterPositions,a=t-2,h=t+1,u=s[a],m=s[h];if(u===void 0)switch(this.getSettings_().endingStart){case q0:a=t,u=2*e-i;break;case Z0:a=s.length-2,u=e+s[a]-s[a+1];break;default:a=t,u=i}if(m===void 0)switch(this.getSettings_().endingEnd){case q0:h=t,m=2*i-e;break;case Z0:h=1,m=i+s[1]-s[0];break;default:h=t-1,m=e}let p=(i-e)*.5,v=this.valueSize;this._weightPrev=p/(e-u),this._weightNext=p/(m-i),this._offsetPrev=a*v,this._offsetNext=h*v}interpolate_(t,e,i,s){let a=this.resultBuffer,h=this.sampleValues,u=this.valueSize,m=t*u,p=m-u,v=this._offsetPrev,T=this._offsetNext,C=this._weightPrev,y=this._weightNext,F=(i-e)/(s-e),O=F*F,R=O*F,A=-C*R+2*C*O-C*F,Z=(1+C)*R+(-1.5-2*C)*O+(-.5+C)*F+1,J=(-1-y)*R+(1.5+y)*O+.5*F,nt=y*R-y*O;for(let pt=0;pt!==u;++pt)a[pt]=A*h[v+pt]+Z*h[p+pt]+J*h[m+pt]+nt*h[T+pt];return a}},lf=class extends Nl{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t,e,i,s){let a=this.resultBuffer,h=this.sampleValues,u=this.valueSize,m=t*u,p=m-u,v=(i-e)/(s-e),T=1-v;for(let C=0;C!==u;++C)a[C]=h[p+C]*T+h[m+C]*v;return a}},hf=class extends Nl{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t){return this.copySampleValue_(t-1)}},zr=class{constructor(t,e,i,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Yp(e,this.TimeBufferType),this.values=Yp(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:Yp(t.times,Array),values:Yp(t.values,Array)};let s=t.getInterpolation();s!==t.DefaultInterpolation&&(i.interpolation=s)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new hf(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new lf(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new of(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case sd:e=this.InterpolantFactoryMethodDiscrete;break;case Jp:e=this.InterpolantFactoryMethodLinear;break;case Gp:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sd;case this.InterpolantFactoryMethodLinear:return Jp;case this.InterpolantFactoryMethodSmooth:return Gp}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,s=e.length;i!==s;++i)e[i]*=t}return this}trim(t,e){let i=this.times,s=i.length,a=0,h=s-1;for(;a!==s&&i[a]<t;)++a;for(;h!==-1&&i[h]>e;)--h;if(++h,a!==0||h!==s){a>=h&&(h=Math.max(h,1),a=h-1);let u=this.getValueSize();this.times=i.slice(a,h),this.values=this.values.slice(a*u,h*u)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,s=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let h=null;for(let u=0;u!==a;u++){let m=i[u];if(typeof m=="number"&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,m),t=!1;break}if(h!==null&&h>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,m,h),t=!1;break}h=m}if(s!==void 0&&mC(s))for(let u=0,m=s.length;u!==m;++u){let p=s[u];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,p),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Gp,a=t.length-1,h=1;for(let u=1;u<a;++u){let m=!1,p=t[u],v=t[u+1];if(p!==v&&(u!==1||p!==t[0]))if(s)m=!0;else{let T=u*i,C=T-i,y=T+i;for(let F=0;F!==i;++F){let O=e[T+F];if(O!==e[C+F]||O!==e[y+F]){m=!0;break}}}if(m){if(u!==h){t[h]=t[u];let T=u*i,C=h*i;for(let y=0;y!==i;++y)e[C+y]=e[T+y]}++h}}if(a>0){t[h]=t[a];for(let u=a*i,m=h*i,p=0;p!==i;++p)e[m+p]=e[u+p];++h}return h!==t.length?(this.times=t.slice(0,h),this.values=e.slice(0,h*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,s=new i(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}};zr.prototype.TimeBufferType=Float32Array;zr.prototype.ValueBufferType=Float32Array;zr.prototype.DefaultInterpolation=Jp;var Ko=class extends zr{constructor(t,e,i){super(t,e,i)}};Ko.prototype.ValueTypeName="bool";Ko.prototype.ValueBufferType=Array;Ko.prototype.DefaultInterpolation=sd;Ko.prototype.InterpolantFactoryMethodLinear=void 0;Ko.prototype.InterpolantFactoryMethodSmooth=void 0;var cf=class extends zr{};cf.prototype.ValueTypeName="color";var df=class extends zr{};df.prototype.ValueTypeName="number";var uf=class extends Nl{constructor(t,e,i,s){super(t,e,i,s)}interpolate_(t,e,i,s){let a=this.resultBuffer,h=this.sampleValues,u=this.valueSize,m=(i-e)/(s-e),p=t*u;for(let v=p+u;p!==v;p+=4)Vr.slerpFlat(a,0,h,p-u,h,p,m);return a}},yd=class extends zr{InterpolantFactoryMethodLinear(t){return new uf(this.times,this.values,this.getValueSize(),t)}};yd.prototype.ValueTypeName="quaternion";yd.prototype.InterpolantFactoryMethodSmooth=void 0;var $o=class extends zr{constructor(t,e,i){super(t,e,i)}};$o.prototype.ValueTypeName="string";$o.prototype.ValueBufferType=Array;$o.prototype.DefaultInterpolation=sd;$o.prototype.InterpolantFactoryMethodLinear=void 0;$o.prototype.InterpolantFactoryMethodSmooth=void 0;var pf=class extends zr{};pf.prototype.ValueTypeName="vector";var J0={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},ff=class{constructor(t,e,i){let s=this,a=!1,h=0,u=0,m,p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(v){u++,a===!1&&s.onStart!==void 0&&s.onStart(v,h,u),a=!0},this.itemEnd=function(v){h++,s.onProgress!==void 0&&s.onProgress(v,h,u),h===u&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(v){s.onError!==void 0&&s.onError(v)},this.resolveURL=function(v){return m?m(v):v},this.setURLModifier=function(v){return m=v,this},this.addHandler=function(v,T){return p.push(v,T),this},this.removeHandler=function(v){let T=p.indexOf(v);return T!==-1&&p.splice(T,2),this},this.getHandler=function(v){for(let T=0,C=p.length;T<C;T+=2){let y=p[T],F=p[T+1];if(y.global&&(y.lastIndex=0),y.test(v))return F}return null}}},N1=new ff,am=(()=>{class n{constructor(e){this.manager=e!==void 0?e:N1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let s=this;return new Promise(function(a,h){s.load(e,a,i,h)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),$a={},Q0=class extends Error{constructor(t,e){super(t),this.response=e}},wd=class extends am{constructor(t){super(t)}load(t,e,i,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let a=J0.get(t);if(a!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(a),this.manager.itemEnd(t)},0),a;if($a[t]!==void 0){$a[t].push({onLoad:e,onProgress:i,onError:s});return}$a[t]=[],$a[t].push({onLoad:e,onProgress:i,onError:s});let h=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,m=this.responseType;fetch(h).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;let v=$a[t],T=p.body.getReader(),C=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),y=C?parseInt(C):0,F=y!==0,O=0,R=new ReadableStream({start(A){Z();function Z(){T.read().then(({done:J,value:nt})=>{if(J)A.close();else{O+=nt.byteLength;let pt=new ProgressEvent("progress",{lengthComputable:F,loaded:O,total:y});for(let St=0,at=v.length;St<at;St++){let ot=v[St];ot.onProgress&&ot.onProgress(pt)}A.enqueue(nt),Z()}},J=>{A.error(J)})}}});return new Response(R)}else throw new Q0(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(m){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>new DOMParser().parseFromString(v,u));case"json":return p.json();default:if(u===void 0)return p.text();{let T=/charset="?([^;"\s]*)"?/i.exec(u),C=T&&T[1]?T[1].toLowerCase():void 0,y=new TextDecoder(C);return p.arrayBuffer().then(F=>y.decode(F))}}}).then(p=>{J0.add(t,p);let v=$a[t];delete $a[t];for(let T=0,C=v.length;T<C;T++){let y=v[T];y.onLoad&&y.onLoad(p)}}).catch(p=>{let v=$a[t];if(v===void 0)throw this.manager.itemError(t),p;delete $a[t];for(let T=0,C=v.length;T<C;T++){let y=v[T];y.onError&&y.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}};var Sd=class extends ra{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Xi(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}},Md=class extends Sd{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ra.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Xi(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}},j0=new Zn,Uy=new fe,Wy=new fe,tx=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new zi(512,512),this.map=null,this.mapPass=null,this.matrix=new Zn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new nc,this._frameExtents=new zi(1,1),this._viewportCount=1,this._viewports=[new Hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;Uy.setFromMatrixPosition(t.matrixWorld),e.position.copy(Uy),Wy.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Wy),e.updateMatrixWorld(),j0.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(j0),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(j0)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}};var Td=class extends fd{constructor(t=-1,e=1,i=1,s=-1,a=.1,h=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=s,this.near=a,this.far=h,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,s,a,h){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=a,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2,a=i-t,h=i+t,u=s+e,m=s-e;if(this.view!==null&&this.view.enabled){let p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=p*this.view.offsetX,h=a+p*this.view.width,u-=v*this.view.offsetY,m=u-v*this.view.height}this.projectionMatrix.makeOrthographic(a,h,u,m,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},ex=class extends tx{constructor(){super(new Td(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Bl=class extends Sd{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ra.DEFAULT_UP),this.updateMatrix(),this.target=new ra,this.shadow=new ex}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}};var mf=class extends Os{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}};var Tx="\\[\\]\\.:\\/",gC=new RegExp("["+Tx+"]","g"),Cx="[^"+Tx+"]",xC="[^"+Tx.replace("\\.","")+"]",vC=/((?:WC+[\/:])*)/.source.replace("WC",Cx),_C=/(WCOD+)?/.source.replace("WCOD",xC),bC=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cx),yC=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cx),wC=new RegExp("^"+vC+_C+bC+yC+"$"),SC=["material","materials","bones","map"],ix=class{constructor(t,e,i){let s=i||qn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=i.length;s!==a;++s)i[s].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},qn=(()=>{class n{constructor(e,i,s){this.path=i,this.parsedPath=s||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,s){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,s):new n(e,i,s)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gC,"")}static parseTrackName(e){let i=wC.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let s={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},a=s.nodeName&&s.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){let h=s.nodeName.substring(a+1);SC.indexOf(h)!==-1&&(s.nodeName=s.nodeName.substring(0,a),s.objectName=h)}if(s.propertyName===null||s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return s}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let s=e.skeleton.getBoneByName(i);if(s!==void 0)return s}if(e.children){let s=function(h){for(let u=0;u<h.length;u++){let m=h[u];if(m.name===i||m.uuid===i)return m;let p=s(m.children);if(p)return p}return null},a=s(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let s=this.resolvedProperty;for(let a=0,h=s.length;a!==h;++a)e[i++]=s[a]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let s=this.resolvedProperty;for(let a=0,h=s.length;a!==h;++a)s[a]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let s=this.resolvedProperty;for(let a=0,h=s.length;a!==h;++a)s[a]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let s=this.resolvedProperty;for(let a=0,h=s.length;a!==h;++a)s[a]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,s=i.objectName,a=i.propertyName,h=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(s){let v=i.objectIndex;switch(s){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let T=0;T<e.length;T++)if(e[T].name===v){v=T;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[s]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[s]}if(v!==void 0){if(e[v]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[v]}}let u=e[a];if(u===void 0){let v=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+a+" but it wasn't found.",e);return}let m=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?m=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(m=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(h!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[h]!==void 0&&(h=e.morphTargetDictionary[h])}p=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=h}else u.fromArray!==void 0&&u.toArray!==void 0?(p=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(p=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=ix,n})();qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qn.prototype.GetterByBindingType=[qn.prototype._getValue_direct,qn.prototype._getValue_array,qn.prototype._getValue_arrayElement,qn.prototype._getValue_toArray];qn.prototype.SetterByBindingTypeAndVersioning=[[qn.prototype._setValue_direct,qn.prototype._setValue_direct_setNeedsUpdate,qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_array,qn.prototype._setValue_array_setNeedsUpdate,qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_arrayElement,qn.prototype._setValue_arrayElement_setNeedsUpdate,qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_fromArray,qn.prototype._setValue_fromArray_setNeedsUpdate,qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var xB=new Float32Array(1);var sc=class{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=qi(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(qi(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var Cd=class extends ya{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}};function Ax(n,t,e,i){let s=MC(i);switch(e){case dx:return n*t;case px:return n*t;case fx:return n*t*2;case mx:return n*t/s.components*s.byteLength;case If:return n*t/s.components*s.byteLength;case gx:return n*t*2/s.components*s.byteLength;case Lf:return n*t*2/s.components*s.byteLength;case ux:return n*t*3/s.components*s.byteLength;case Ur:return n*t*4/s.components*s.byteLength;case Df:return n*t*4/s.components*s.byteLength;case Ed:case kd:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case Id:case Ld:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Ff:case Bf:return Math.max(n,16)*Math.max(t,8)/4;case Rf:case Nf:return Math.max(n,8)*Math.max(t,8)/2;case Of:case Vf:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case zf:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Uf:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Wf:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case Hf:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case Xf:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case jf:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case Yf:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case Gf:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case qf:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case Zf:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case Kf:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case $f:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case Jf:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case Qf:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case tm:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case Dd:case em:case im:return Math.ceil(n/4)*Math.ceil(t/4)*16;case xx:case nm:return Math.ceil(n/4)*Math.ceil(t/4)*8;case sm:case rm:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function MC(n){switch(n){case Ta:case lx:return{byteLength:1,components:1};case rc:case hx:case ac:return{byteLength:2,components:1};case Ef:case kf:return{byteLength:2,components:4};case el:case Pf:case Ca:return{byteLength:4,components:1};case cx:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=gf);function a2(){let n=null,t=!1,e=null,i=null;function s(a,h){e(a,h),i=n.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(s),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(a){e=a},setContext:function(a){n=a}}}function TC(n){let t=new WeakMap;function e(u,m){let p=u.array,v=u.usage,T=p.byteLength,C=n.createBuffer();n.bindBuffer(m,C),n.bufferData(m,p,v),u.onUploadCallback();let y;if(p instanceof Float32Array)y=n.FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?y=n.HALF_FLOAT:y=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)y=n.SHORT;else if(p instanceof Uint32Array)y=n.UNSIGNED_INT;else if(p instanceof Int32Array)y=n.INT;else if(p instanceof Int8Array)y=n.BYTE;else if(p instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:C,type:y,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:T}}function i(u,m,p){let v=m.array,T=m.updateRanges;if(n.bindBuffer(p,u),T.length===0)n.bufferSubData(p,0,v);else{T.sort((y,F)=>y.start-F.start);let C=0;for(let y=1;y<T.length;y++){let F=T[C],O=T[y];O.start<=F.start+F.count+1?F.count=Math.max(F.count,O.start+O.count-F.start):(++C,T[C]=O)}T.length=C+1;for(let y=0,F=T.length;y<F;y++){let O=T[y];n.bufferSubData(p,O.start*v.BYTES_PER_ELEMENT,v,O.start,O.count)}m.clearUpdateRanges()}m.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),t.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);let m=t.get(u);m&&(n.deleteBuffer(m.buffer),t.delete(u))}function h(u,m){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){let v=t.get(u);(!v||v.version<u.version)&&t.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}let p=t.get(u);if(p===void 0)t.set(u,e(u,m));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,u,m),p.version=u.version}}return{get:s,remove:a,update:h}}var CC=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,AC=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,PC=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,EC=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kC=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,IC=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,LC=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,DC=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,RC=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,FC=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,NC=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,BC=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,OC=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,VC=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,zC=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,UC=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,WC=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,HC=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,XC=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,jC=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,YC=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,GC=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,qC=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,ZC=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,KC=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$C=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,JC=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,QC=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,tA=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,eA=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,iA="gl_FragColor = linearToOutputTexel( gl_FragColor );",nA=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,sA=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,rA=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,aA=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,oA=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,lA=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hA=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,cA=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dA=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,uA=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,pA=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fA=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,mA=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,gA=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xA=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vA=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,_A=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bA=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yA=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wA=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,SA=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,MA=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,TA=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,CA=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,AA=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,PA=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,EA=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kA=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,IA=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,LA=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,DA=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,RA=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,FA=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NA=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,BA=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,OA=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,VA=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,zA=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,UA=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,WA=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,HA=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,XA=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,jA=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,YA=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GA=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qA=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ZA=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,KA=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,$A=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,JA=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,QA=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,tP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,eP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,iP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,nP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,sP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,rP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,aP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,oP=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,lP=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hP=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cP=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,dP=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uP=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,pP=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fP=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,mP=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,gP=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,xP=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,vP=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,_P=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,bP=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,yP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,SP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,MP=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,TP=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,CP=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,PP=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kP=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,LP=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,DP=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,RP=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,FP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,NP=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BP=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OP=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,VP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,zP=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UP=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WP=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HP=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,XP=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jP=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,YP=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GP=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qP=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZP=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,KP=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$P=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JP=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QP=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,t5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,e5=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i5=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,n5=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,s5=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Yi={alphahash_fragment:CC,alphahash_pars_fragment:AC,alphamap_fragment:PC,alphamap_pars_fragment:EC,alphatest_fragment:kC,alphatest_pars_fragment:IC,aomap_fragment:LC,aomap_pars_fragment:DC,batching_pars_vertex:RC,batching_vertex:FC,begin_vertex:NC,beginnormal_vertex:BC,bsdfs:OC,iridescence_fragment:VC,bumpmap_pars_fragment:zC,clipping_planes_fragment:UC,clipping_planes_pars_fragment:WC,clipping_planes_pars_vertex:HC,clipping_planes_vertex:XC,color_fragment:jC,color_pars_fragment:YC,color_pars_vertex:GC,color_vertex:qC,common:ZC,cube_uv_reflection_fragment:KC,defaultnormal_vertex:$C,displacementmap_pars_vertex:JC,displacementmap_vertex:QC,emissivemap_fragment:tA,emissivemap_pars_fragment:eA,colorspace_fragment:iA,colorspace_pars_fragment:nA,envmap_fragment:sA,envmap_common_pars_fragment:rA,envmap_pars_fragment:aA,envmap_pars_vertex:oA,envmap_physical_pars_fragment:vA,envmap_vertex:lA,fog_vertex:hA,fog_pars_vertex:cA,fog_fragment:dA,fog_pars_fragment:uA,gradientmap_pars_fragment:pA,lightmap_pars_fragment:fA,lights_lambert_fragment:mA,lights_lambert_pars_fragment:gA,lights_pars_begin:xA,lights_toon_fragment:_A,lights_toon_pars_fragment:bA,lights_phong_fragment:yA,lights_phong_pars_fragment:wA,lights_physical_fragment:SA,lights_physical_pars_fragment:MA,lights_fragment_begin:TA,lights_fragment_maps:CA,lights_fragment_end:AA,logdepthbuf_fragment:PA,logdepthbuf_pars_fragment:EA,logdepthbuf_pars_vertex:kA,logdepthbuf_vertex:IA,map_fragment:LA,map_pars_fragment:DA,map_particle_fragment:RA,map_particle_pars_fragment:FA,metalnessmap_fragment:NA,metalnessmap_pars_fragment:BA,morphinstance_vertex:OA,morphcolor_vertex:VA,morphnormal_vertex:zA,morphtarget_pars_vertex:UA,morphtarget_vertex:WA,normal_fragment_begin:HA,normal_fragment_maps:XA,normal_pars_fragment:jA,normal_pars_vertex:YA,normal_vertex:GA,normalmap_pars_fragment:qA,clearcoat_normal_fragment_begin:ZA,clearcoat_normal_fragment_maps:KA,clearcoat_pars_fragment:$A,iridescence_pars_fragment:JA,opaque_fragment:QA,packing:tP,premultiplied_alpha_fragment:eP,project_vertex:iP,dithering_fragment:nP,dithering_pars_fragment:sP,roughnessmap_fragment:rP,roughnessmap_pars_fragment:aP,shadowmap_pars_fragment:oP,shadowmap_pars_vertex:lP,shadowmap_vertex:hP,shadowmask_pars_fragment:cP,skinbase_vertex:dP,skinning_pars_vertex:uP,skinning_vertex:pP,skinnormal_vertex:fP,specularmap_fragment:mP,specularmap_pars_fragment:gP,tonemapping_fragment:xP,tonemapping_pars_fragment:vP,transmission_fragment:_P,transmission_pars_fragment:bP,uv_pars_fragment:yP,uv_pars_vertex:wP,uv_vertex:SP,worldpos_vertex:MP,background_vert:TP,background_frag:CP,backgroundCube_vert:AP,backgroundCube_frag:PP,cube_vert:EP,cube_frag:kP,depth_vert:IP,depth_frag:LP,distanceRGBA_vert:DP,distanceRGBA_frag:RP,equirect_vert:FP,equirect_frag:NP,linedashed_vert:BP,linedashed_frag:OP,meshbasic_vert:VP,meshbasic_frag:zP,meshlambert_vert:UP,meshlambert_frag:WP,meshmatcap_vert:HP,meshmatcap_frag:XP,meshnormal_vert:jP,meshnormal_frag:YP,meshphong_vert:GP,meshphong_frag:qP,meshphysical_vert:ZP,meshphysical_frag:KP,meshtoon_vert:$P,meshtoon_frag:JP,points_vert:QP,points_frag:t5,shadow_vert:e5,shadow_frag:i5,sprite_vert:n5,sprite_frag:s5},ni={common:{diffuse:{value:new Xi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wi},alphaMap:{value:null},alphaMapTransform:{value:new Wi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wi}},envmap:{envMap:{value:null},envMapRotation:{value:new Wi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wi},normalScale:{value:new zi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Xi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Xi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wi},alphaTest:{value:0},uvTransform:{value:new Wi}},sprite:{diffuse:{value:new Xi(16777215)},opacity:{value:1},center:{value:new zi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wi},alphaMap:{value:null},alphaMapTransform:{value:new Wi},alphaTest:{value:0}}},Aa={basic:{uniforms:Vs([ni.common,ni.specularmap,ni.envmap,ni.aomap,ni.lightmap,ni.fog]),vertexShader:Yi.meshbasic_vert,fragmentShader:Yi.meshbasic_frag},lambert:{uniforms:Vs([ni.common,ni.specularmap,ni.envmap,ni.aomap,ni.lightmap,ni.emissivemap,ni.bumpmap,ni.normalmap,ni.displacementmap,ni.fog,ni.lights,{emissive:{value:new Xi(0)}}]),vertexShader:Yi.meshlambert_vert,fragmentShader:Yi.meshlambert_frag},phong:{uniforms:Vs([ni.common,ni.specularmap,ni.envmap,ni.aomap,ni.lightmap,ni.emissivemap,ni.bumpmap,ni.normalmap,ni.displacementmap,ni.fog,ni.lights,{emissive:{value:new Xi(0)},specular:{value:new Xi(1118481)},shininess:{value:30}}]),vertexShader:Yi.meshphong_vert,fragmentShader:Yi.meshphong_frag},standard:{uniforms:Vs([ni.common,ni.envmap,ni.aomap,ni.lightmap,ni.emissivemap,ni.bumpmap,ni.normalmap,ni.displacementmap,ni.roughnessmap,ni.metalnessmap,ni.fog,ni.lights,{emissive:{value:new Xi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yi.meshphysical_vert,fragmentShader:Yi.meshphysical_frag},toon:{uniforms:Vs([ni.common,ni.aomap,ni.lightmap,ni.emissivemap,ni.bumpmap,ni.normalmap,ni.displacementmap,ni.gradientmap,ni.fog,ni.lights,{emissive:{value:new Xi(0)}}]),vertexShader:Yi.meshtoon_vert,fragmentShader:Yi.meshtoon_frag},matcap:{uniforms:Vs([ni.common,ni.bumpmap,ni.normalmap,ni.displacementmap,ni.fog,{matcap:{value:null}}]),vertexShader:Yi.meshmatcap_vert,fragmentShader:Yi.meshmatcap_frag},points:{uniforms:Vs([ni.points,ni.fog]),vertexShader:Yi.points_vert,fragmentShader:Yi.points_frag},dashed:{uniforms:Vs([ni.common,ni.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yi.linedashed_vert,fragmentShader:Yi.linedashed_frag},depth:{uniforms:Vs([ni.common,ni.displacementmap]),vertexShader:Yi.depth_vert,fragmentShader:Yi.depth_frag},normal:{uniforms:Vs([ni.common,ni.bumpmap,ni.normalmap,ni.displacementmap,{opacity:{value:1}}]),vertexShader:Yi.meshnormal_vert,fragmentShader:Yi.meshnormal_frag},sprite:{uniforms:Vs([ni.sprite,ni.fog]),vertexShader:Yi.sprite_vert,fragmentShader:Yi.sprite_frag},background:{uniforms:{uvTransform:{value:new Wi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yi.background_vert,fragmentShader:Yi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wi}},vertexShader:Yi.backgroundCube_vert,fragmentShader:Yi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yi.cube_vert,fragmentShader:Yi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yi.equirect_vert,fragmentShader:Yi.equirect_frag},distanceRGBA:{uniforms:Vs([ni.common,ni.displacementmap,{referencePosition:{value:new fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yi.distanceRGBA_vert,fragmentShader:Yi.distanceRGBA_frag},shadow:{uniforms:Vs([ni.lights,ni.fog,{color:{value:new Xi(0)},opacity:{value:1}}]),vertexShader:Yi.shadow_vert,fragmentShader:Yi.shadow_frag}};Aa.physical={uniforms:Vs([Aa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wi},clearcoatNormalScale:{value:new zi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wi},sheen:{value:0},sheenColor:{value:new Xi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wi},transmissionSamplerSize:{value:new zi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wi},attenuationDistance:{value:0},attenuationColor:{value:new Xi(0)},specularColor:{value:new Xi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wi},anisotropyVector:{value:new zi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wi}}]),vertexShader:Yi.meshphysical_vert,fragmentShader:Yi.meshphysical_frag};var om={r:0,b:0,g:0},Hl=new qo,r5=new Zn;function a5(n,t,e,i,s,a,h){let u=new Xi(0),m=a===!0?0:1,p,v,T=null,C=0,y=null;function F(J){let nt=J.isScene===!0?J.background:null;return nt&&nt.isTexture&&(nt=(J.backgroundBlurriness>0?e:t).get(nt)),nt}function O(J){let nt=!1,pt=F(J);pt===null?A(u,m):pt&&pt.isColor&&(A(pt,1),nt=!0);let St=n.xr.getEnvironmentBlendMode();St==="additive"?i.buffers.color.setClear(0,0,0,1,h):St==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,h),(n.autoClear||nt)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function R(J,nt){let pt=F(nt);pt&&(pt.isCubeTexture||pt.mapping===Ad)?(v===void 0&&(v=new or(new ic(1,1,1),new oa({name:"BackgroundCubeMaterial",uniforms:Wl(Aa.backgroundCube.uniforms),vertexShader:Aa.backgroundCube.vertexShader,fragmentShader:Aa.backgroundCube.fragmentShader,side:Zs,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(St,at,ot){this.matrixWorld.copyPosition(ot.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(v)),Hl.copy(nt.backgroundRotation),Hl.x*=-1,Hl.y*=-1,Hl.z*=-1,pt.isCubeTexture&&pt.isRenderTargetTexture===!1&&(Hl.y*=-1,Hl.z*=-1),v.material.uniforms.envMap.value=pt,v.material.uniforms.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=nt.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=nt.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(r5.makeRotationFromEuler(Hl)),v.material.toneMapped=rn.getTransfer(pt.colorSpace)!==gn,(T!==pt||C!==pt.version||y!==n.toneMapping)&&(v.material.needsUpdate=!0,T=pt,C=pt.version,y=n.toneMapping),v.layers.enableAll(),J.unshift(v,v.geometry,v.material,0,0,null)):pt&&pt.isTexture&&(p===void 0&&(p=new or(new _d(2,2),new oa({name:"BackgroundMaterial",uniforms:Wl(Aa.background.uniforms),vertexShader:Aa.background.vertexShader,fragmentShader:Aa.background.fragmentShader,side:Qa,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(p)),p.material.uniforms.t2D.value=pt,p.material.uniforms.backgroundIntensity.value=nt.backgroundIntensity,p.material.toneMapped=rn.getTransfer(pt.colorSpace)!==gn,pt.matrixAutoUpdate===!0&&pt.updateMatrix(),p.material.uniforms.uvTransform.value.copy(pt.matrix),(T!==pt||C!==pt.version||y!==n.toneMapping)&&(p.material.needsUpdate=!0,T=pt,C=pt.version,y=n.toneMapping),p.layers.enableAll(),J.unshift(p,p.geometry,p.material,0,0,null))}function A(J,nt){J.getRGB(om,Mx(n)),i.buffers.color.setClear(om.r,om.g,om.b,nt,h)}function Z(){v!==void 0&&(v.geometry.dispose(),v.material.dispose()),p!==void 0&&(p.geometry.dispose(),p.material.dispose())}return{getClearColor:function(){return u},setClearColor:function(J,nt=1){u.set(J),m=nt,A(u,m)},getClearAlpha:function(){return m},setClearAlpha:function(J){m=J,A(u,m)},render:O,addToRenderList:R,dispose:Z}}function o5(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=C(null),a=s,h=!1;function u(tt,H,$,ct,yt){let Bt=!1,kt=T(ct,$,H);a!==kt&&(a=kt,p(a.object)),Bt=y(tt,ct,$,yt),Bt&&F(tt,ct,$,yt),yt!==null&&t.update(yt,n.ELEMENT_ARRAY_BUFFER),(Bt||h)&&(h=!1,nt(tt,H,$,ct),yt!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(yt).buffer))}function m(){return n.createVertexArray()}function p(tt){return n.bindVertexArray(tt)}function v(tt){return n.deleteVertexArray(tt)}function T(tt,H,$){let ct=$.wireframe===!0,yt=i[tt.id];yt===void 0&&(yt={},i[tt.id]=yt);let Bt=yt[H.id];Bt===void 0&&(Bt={},yt[H.id]=Bt);let kt=Bt[ct];return kt===void 0&&(kt=C(m()),Bt[ct]=kt),kt}function C(tt){let H=[],$=[],ct=[];for(let yt=0;yt<e;yt++)H[yt]=0,$[yt]=0,ct[yt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:$,attributeDivisors:ct,object:tt,attributes:{},index:null}}function y(tt,H,$,ct){let yt=a.attributes,Bt=H.attributes,kt=0,zt=$.getAttributes();for(let Mt in zt)if(zt[Mt].location>=0){let Zt=yt[Mt],ut=Bt[Mt];if(ut===void 0&&(Mt==="instanceMatrix"&&tt.instanceMatrix&&(ut=tt.instanceMatrix),Mt==="instanceColor"&&tt.instanceColor&&(ut=tt.instanceColor)),Zt===void 0||Zt.attribute!==ut||ut&&Zt.data!==ut.data)return!0;kt++}return a.attributesNum!==kt||a.index!==ct}function F(tt,H,$,ct){let yt={},Bt=H.attributes,kt=0,zt=$.getAttributes();for(let Mt in zt)if(zt[Mt].location>=0){let Zt=Bt[Mt];Zt===void 0&&(Mt==="instanceMatrix"&&tt.instanceMatrix&&(Zt=tt.instanceMatrix),Mt==="instanceColor"&&tt.instanceColor&&(Zt=tt.instanceColor));let ut={};ut.attribute=Zt,Zt&&Zt.data&&(ut.data=Zt.data),yt[Mt]=ut,kt++}a.attributes=yt,a.attributesNum=kt,a.index=ct}function O(){let tt=a.newAttributes;for(let H=0,$=tt.length;H<$;H++)tt[H]=0}function R(tt){A(tt,0)}function A(tt,H){let $=a.newAttributes,ct=a.enabledAttributes,yt=a.attributeDivisors;$[tt]=1,ct[tt]===0&&(n.enableVertexAttribArray(tt),ct[tt]=1),yt[tt]!==H&&(n.vertexAttribDivisor(tt,H),yt[tt]=H)}function Z(){let tt=a.newAttributes,H=a.enabledAttributes;for(let $=0,ct=H.length;$<ct;$++)H[$]!==tt[$]&&(n.disableVertexAttribArray($),H[$]=0)}function J(tt,H,$,ct,yt,Bt,kt){kt===!0?n.vertexAttribIPointer(tt,H,$,yt,Bt):n.vertexAttribPointer(tt,H,$,ct,yt,Bt)}function nt(tt,H,$,ct){O();let yt=ct.attributes,Bt=$.getAttributes(),kt=H.defaultAttributeValues;for(let zt in Bt){let Mt=Bt[zt];if(Mt.location>=0){let Yt=yt[zt];if(Yt===void 0&&(zt==="instanceMatrix"&&tt.instanceMatrix&&(Yt=tt.instanceMatrix),zt==="instanceColor"&&tt.instanceColor&&(Yt=tt.instanceColor)),Yt!==void 0){let Zt=Yt.normalized,ut=Yt.itemSize,K=t.get(Yt);if(K===void 0)continue;let X=K.buffer,z=K.type,it=K.bytesPerElement,mt=z===n.INT||z===n.UNSIGNED_INT||Yt.gpuType===Pf;if(Yt.isInterleavedBufferAttribute){let dt=Yt.data,Tt=dt.stride,Dt=Yt.offset;if(dt.isInstancedInterleavedBuffer){for(let oe=0;oe<Mt.locationSize;oe++)A(Mt.location+oe,dt.meshPerAttribute);tt.isInstancedMesh!==!0&&ct._maxInstanceCount===void 0&&(ct._maxInstanceCount=dt.meshPerAttribute*dt.count)}else for(let oe=0;oe<Mt.locationSize;oe++)R(Mt.location+oe);n.bindBuffer(n.ARRAY_BUFFER,X);for(let oe=0;oe<Mt.locationSize;oe++)J(Mt.location+oe,ut/Mt.locationSize,z,Zt,Tt*it,(Dt+ut/Mt.locationSize*oe)*it,mt)}else{if(Yt.isInstancedBufferAttribute){for(let dt=0;dt<Mt.locationSize;dt++)A(Mt.location+dt,Yt.meshPerAttribute);tt.isInstancedMesh!==!0&&ct._maxInstanceCount===void 0&&(ct._maxInstanceCount=Yt.meshPerAttribute*Yt.count)}else for(let dt=0;dt<Mt.locationSize;dt++)R(Mt.location+dt);n.bindBuffer(n.ARRAY_BUFFER,X);for(let dt=0;dt<Mt.locationSize;dt++)J(Mt.location+dt,ut/Mt.locationSize,z,Zt,ut*it,ut/Mt.locationSize*dt*it,mt)}}else if(kt!==void 0){let Zt=kt[zt];if(Zt!==void 0)switch(Zt.length){case 2:n.vertexAttrib2fv(Mt.location,Zt);break;case 3:n.vertexAttrib3fv(Mt.location,Zt);break;case 4:n.vertexAttrib4fv(Mt.location,Zt);break;default:n.vertexAttrib1fv(Mt.location,Zt)}}}}Z()}function pt(){ot();for(let tt in i){let H=i[tt];for(let $ in H){let ct=H[$];for(let yt in ct)v(ct[yt].object),delete ct[yt];delete H[$]}delete i[tt]}}function St(tt){if(i[tt.id]===void 0)return;let H=i[tt.id];for(let $ in H){let ct=H[$];for(let yt in ct)v(ct[yt].object),delete ct[yt];delete H[$]}delete i[tt.id]}function at(tt){for(let H in i){let $=i[H];if($[tt.id]===void 0)continue;let ct=$[tt.id];for(let yt in ct)v(ct[yt].object),delete ct[yt];delete $[tt.id]}}function ot(){Q(),h=!0,a!==s&&(a=s,p(a.object))}function Q(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:u,reset:ot,resetDefaultState:Q,dispose:pt,releaseStatesOfGeometry:St,releaseStatesOfProgram:at,initAttributes:O,enableAttribute:R,disableUnusedAttributes:Z}}function l5(n,t,e){let i;function s(p){i=p}function a(p,v){n.drawArrays(i,p,v),e.update(v,i,1)}function h(p,v,T){T!==0&&(n.drawArraysInstanced(i,p,v,T),e.update(v,i,T))}function u(p,v,T){if(T===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,v,0,T);let y=0;for(let F=0;F<T;F++)y+=v[F];e.update(y,i,1)}function m(p,v,T,C){if(T===0)return;let y=t.get("WEBGL_multi_draw");if(y===null)for(let F=0;F<p.length;F++)h(p[F],v[F],C[F]);else{y.multiDrawArraysInstancedWEBGL(i,p,0,v,0,C,0,T);let F=0;for(let O=0;O<T;O++)F+=v[O]*C[O];e.update(F,i,1)}}this.setMode=s,this.render=a,this.renderInstances=h,this.renderMultiDraw=u,this.renderMultiDrawInstances=m}function h5(n,t,e,i){let s;function a(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){let at=t.get("EXT_texture_filter_anisotropic");s=n.getParameter(at.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function h(at){return!(at!==Ur&&i.convert(at)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(at){let ot=at===ac&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(at!==Ta&&i.convert(at)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&at!==Ca&&!ot)}function m(at){if(at==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";at="mediump"}return at==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=e.precision!==void 0?e.precision:"highp",v=m(p);v!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",v,"instead."),p=v);let T=e.logarithmicDepthBuffer===!0,C=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),F=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),O=n.getParameter(n.MAX_TEXTURE_SIZE),R=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),Z=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),J=n.getParameter(n.MAX_VARYING_VECTORS),nt=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),pt=F>0,St=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:m,textureFormatReadable:h,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:T,reverseDepthBuffer:C,maxTextures:y,maxVertexTextures:F,maxTextureSize:O,maxCubemapSize:R,maxAttributes:A,maxVertexUniforms:Z,maxVaryings:J,maxFragmentUniforms:nt,vertexTextures:pt,maxSamples:St}}function c5(n){let t=this,e=null,i=0,s=!1,a=!1,h=new Br,u=new Wi,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(T,C){let y=T.length!==0||C||i!==0||s;return s=C,i=T.length,y},this.beginShadows=function(){a=!0,v(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(T,C){e=v(T,C,0)},this.setState=function(T,C,y){let F=T.clippingPlanes,O=T.clipIntersection,R=T.clipShadows,A=n.get(T);if(!s||F===null||F.length===0||a&&!R)a?v(null):p();else{let Z=a?0:i,J=Z*4,nt=A.clippingState||null;m.value=nt,nt=v(F,C,J,y);for(let pt=0;pt!==J;++pt)nt[pt]=e[pt];A.clippingState=nt,this.numIntersection=O?this.numPlanes:0,this.numPlanes+=Z}};function p(){m.value!==e&&(m.value=e,m.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function v(T,C,y,F){let O=T!==null?T.length:0,R=null;if(O!==0){if(R=m.value,F!==!0||R===null){let A=y+O*4,Z=C.matrixWorldInverse;u.getNormalMatrix(Z),(R===null||R.length<A)&&(R=new Float32Array(A));for(let J=0,nt=y;J!==O;++J,nt+=4)h.copy(T[J]).applyMatrix4(Z,u),h.normal.toArray(R,nt),R[nt+3]=h.constant}m.value=R,m.needsUpdate=!0}return t.numPlanes=O,t.numIntersection=0,R}}function d5(n){let t=new WeakMap;function e(h,u){return u===Tf?h.mapping=Ol:u===Cf&&(h.mapping=Vl),h}function i(h){if(h&&h.isTexture){let u=h.mapping;if(u===Tf||u===Cf)if(t.has(h)){let m=t.get(h).texture;return e(m,h.mapping)}else{let m=h.image;if(m&&m.height>0){let p=new sf(m.height);return p.fromEquirectangularTexture(n,h),t.set(h,p),h.addEventListener("dispose",s),e(p.texture,h.mapping)}else return null}}return h}function s(h){let u=h.target;u.removeEventListener("dispose",s);let m=t.get(u);m!==void 0&&(t.delete(u),m.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}var hc=4,B1=[.125,.215,.35,.446,.526,.582],Yl=20,Px=new Td,O1=new Xi,Ex=null,kx=0,Ix=0,Lx=!1,jl=(1+Math.sqrt(5))/2,lc=1/jl,V1=[new fe(-jl,lc,0),new fe(jl,lc,0),new fe(-lc,0,jl),new fe(lc,0,jl),new fe(0,jl,-lc),new fe(0,jl,lc),new fe(-1,1,-1),new fe(1,1,-1),new fe(-1,1,1),new fe(1,1,1)],cm=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,s=100){Ex=this._renderer.getRenderTarget(),kx=this._renderer.getActiveCubeFace(),Ix=this._renderer.getActiveMipmapLevel(),Lx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(t,i,s,a),e>0&&this._blur(a,0,0,e),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=W1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=U1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Ex,kx,Ix),this._renderer.xr.enabled=Lx,t.scissorTest=!1,lm(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Ol||t.mapping===Vl?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Ex=this._renderer.getRenderTarget(),kx=this._renderer.getActiveCubeFace(),Ix=this._renderer.getActiveMipmapLevel(),Lx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:sa,minFilter:sa,generateMipmaps:!1,type:ac,format:Ur,colorSpace:Fl,depthBuffer:!1},s=z1(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=z1(t,e,i);let{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=u5(a)),this._blurMaterial=p5(a,t,e)}return s}_compileMaterial(t){let e=new or(this._lodPlanes[0],t);this._renderer.compile(e,Px)}_sceneToCubeUV(t,e,i,s){let u=new Os(90,1,e,i),m=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],v=this._renderer,T=v.autoClear,C=v.toneMapping;v.getClearColor(O1),v.toneMapping=io,v.autoClear=!1;let y=new dd({name:"PMREM.Background",side:Zs,depthWrite:!1,depthTest:!1}),F=new or(new ic,y),O=!1,R=t.background;R?R.isColor&&(y.color.copy(R),t.background=null,O=!0):(y.color.copy(O1),O=!0);for(let A=0;A<6;A++){let Z=A%3;Z===0?(u.up.set(0,m[A],0),u.lookAt(p[A],0,0)):Z===1?(u.up.set(0,0,m[A]),u.lookAt(0,p[A],0)):(u.up.set(0,m[A],0),u.lookAt(0,0,p[A]));let J=this._cubeSize;lm(s,Z*J,A>2?J:0,J,J),v.setRenderTarget(s),O&&v.render(F,u),v.render(t,u)}F.geometry.dispose(),F.material.dispose(),v.toneMapping=C,v.autoClear=T,t.background=R}_textureToCubeUV(t,e){let i=this._renderer,s=t.mapping===Ol||t.mapping===Vl;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=W1()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=U1());let a=s?this._cubemapMaterial:this._equirectMaterial,h=new or(this._lodPlanes[0],a),u=a.uniforms;u.envMap.value=t;let m=this._cubeSize;lm(e,0,0,3*m,2*m),i.setRenderTarget(e),i.render(h,Px)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let s=this._lodPlanes.length;for(let a=1;a<s;a++){let h=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),u=V1[(s-a-1)%V1.length];this._blur(t,a-1,a,h,u)}e.autoClear=i}_blur(t,e,i,s,a){let h=this._pingPongRenderTarget;this._halfBlur(t,h,e,i,s,"latitudinal",a),this._halfBlur(h,t,i,i,s,"longitudinal",a)}_halfBlur(t,e,i,s,a,h,u){let m=this._renderer,p=this._blurMaterial;h!=="latitudinal"&&h!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let v=3,T=new or(this._lodPlanes[s],p),C=p.uniforms,y=this._sizeLods[i]-1,F=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*Yl-1),O=a/F,R=isFinite(a)?1+Math.floor(v*O):Yl;R>Yl&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${R} samples when the maximum is set to ${Yl}`);let A=[],Z=0;for(let at=0;at<Yl;++at){let ot=at/O,Q=Math.exp(-ot*ot/2);A.push(Q),at===0?Z+=Q:at<R&&(Z+=2*Q)}for(let at=0;at<A.length;at++)A[at]=A[at]/Z;C.envMap.value=t.texture,C.samples.value=R,C.weights.value=A,C.latitudinal.value=h==="latitudinal",u&&(C.poleAxis.value=u);let{_lodMax:J}=this;C.dTheta.value=F,C.mipInt.value=J-i;let nt=this._sizeLods[s],pt=3*nt*(s>J-hc?s-J+hc:0),St=4*(this._cubeSize-nt);lm(e,pt,St,3*nt,2*nt),m.setRenderTarget(e),m.render(T,Px)}};function u5(n){let t=[],e=[],i=[],s=n,a=n-hc+1+B1.length;for(let h=0;h<a;h++){let u=Math.pow(2,s);e.push(u);let m=1/u;h>n-hc?m=B1[h-n+hc-1]:h===0&&(m=0),i.push(m);let p=1/(u-2),v=-p,T=1+p,C=[v,v,T,v,T,T,v,v,T,T,v,T],y=6,F=6,O=3,R=2,A=1,Z=new Float32Array(O*F*y),J=new Float32Array(R*F*y),nt=new Float32Array(A*F*y);for(let St=0;St<y;St++){let at=St%3*2/3-1,ot=St>2?0:-1,Q=[at,ot,0,at+2/3,ot,0,at+2/3,ot+1,0,at,ot,0,at+2/3,ot+1,0,at,ot+1,0];Z.set(Q,O*F*St),J.set(C,R*F*St);let tt=[St,St,St,St,St,St];nt.set(tt,A*F*St)}let pt=new aa;pt.setAttribute("position",new Ts(Z,O)),pt.setAttribute("uv",new Ts(J,R)),pt.setAttribute("faceIndex",new Ts(nt,A)),t.push(pt),s>hc&&s--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function z1(n,t,e){let i=new wa(n,t,e);return i.texture.mapping=Ad,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function lm(n,t,e,i,s){n.viewport.set(t,e,i,s),n.scissor.set(t,e,i,s)}function p5(n,t,e){let i=new Float32Array(Yl),s=new fe(0,1,0);return new oa({name:"SphericalGaussianBlur",defines:{n:Yl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:eo,depthTest:!1,depthWrite:!1})}function U1(){return new oa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:eo,depthTest:!1,depthWrite:!1})}function W1(){return new oa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Wx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:eo,depthTest:!1,depthWrite:!1})}function Wx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function f5(n){let t=new WeakMap,e=null;function i(u){if(u&&u.isTexture){let m=u.mapping,p=m===Tf||m===Cf,v=m===Ol||m===Vl;if(p||v){let T=t.get(u),C=T!==void 0?T.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==C)return e===null&&(e=new cm(n)),T=p?e.fromEquirectangular(u,T):e.fromCubemap(u,T),T.texture.pmremVersion=u.pmremVersion,t.set(u,T),T.texture;if(T!==void 0)return T.texture;{let y=u.image;return p&&y&&y.height>0||v&&y&&s(y)?(e===null&&(e=new cm(n)),T=p?e.fromEquirectangular(u):e.fromCubemap(u),T.texture.pmremVersion=u.pmremVersion,t.set(u,T),u.addEventListener("dispose",a),T.texture):null}}}return u}function s(u){let m=0,p=6;for(let v=0;v<p;v++)u[v]!==void 0&&m++;return m===p}function a(u){let m=u.target;m.removeEventListener("dispose",a);let p=t.get(m);p!==void 0&&(t.delete(m),p.dispose())}function h(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:h}}function m5(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return t[i]=s,s}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let s=e(i);return s===null&&Ul("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function g5(n,t,e,i){let s={},a=new WeakMap;function h(T){let C=T.target;C.index!==null&&t.remove(C.index);for(let F in C.attributes)t.remove(C.attributes[F]);C.removeEventListener("dispose",h),delete s[C.id];let y=a.get(C);y&&(t.remove(y),a.delete(C)),i.releaseStatesOfGeometry(C),C.isInstancedBufferGeometry===!0&&delete C._maxInstanceCount,e.memory.geometries--}function u(T,C){return s[C.id]===!0||(C.addEventListener("dispose",h),s[C.id]=!0,e.memory.geometries++),C}function m(T){let C=T.attributes;for(let y in C)t.update(C[y],n.ARRAY_BUFFER)}function p(T){let C=[],y=T.index,F=T.attributes.position,O=0;if(y!==null){let Z=y.array;O=y.version;for(let J=0,nt=Z.length;J<nt;J+=3){let pt=Z[J+0],St=Z[J+1],at=Z[J+2];C.push(pt,St,St,at,at,pt)}}else if(F!==void 0){let Z=F.array;O=F.version;for(let J=0,nt=Z.length/3-1;J<nt;J+=3){let pt=J+0,St=J+1,at=J+2;C.push(pt,St,St,at,at,pt)}}else return;let R=new(Sx(C)?pd:ud)(C,1);R.version=O;let A=a.get(T);A&&t.remove(A),a.set(T,R)}function v(T){let C=a.get(T);if(C){let y=T.index;y!==null&&C.version<y.version&&p(T)}else p(T);return a.get(T)}return{get:u,update:m,getWireframeAttribute:v}}function x5(n,t,e){let i;function s(C){i=C}let a,h;function u(C){a=C.type,h=C.bytesPerElement}function m(C,y){n.drawElements(i,y,a,C*h),e.update(y,i,1)}function p(C,y,F){F!==0&&(n.drawElementsInstanced(i,y,a,C*h,F),e.update(y,i,F))}function v(C,y,F){if(F===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,y,0,a,C,0,F);let R=0;for(let A=0;A<F;A++)R+=y[A];e.update(R,i,1)}function T(C,y,F,O){if(F===0)return;let R=t.get("WEBGL_multi_draw");if(R===null)for(let A=0;A<C.length;A++)p(C[A]/h,y[A],O[A]);else{R.multiDrawElementsInstancedWEBGL(i,y,0,a,C,0,O,0,F);let A=0;for(let Z=0;Z<F;Z++)A+=y[Z]*O[Z];e.update(A,i,1)}}this.setMode=s,this.setIndex=u,this.render=m,this.renderInstances=p,this.renderMultiDraw=v,this.renderMultiDrawInstances=T}function v5(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,h,u){switch(e.calls++,h){case n.TRIANGLES:e.triangles+=u*(a/3);break;case n.LINES:e.lines+=u*(a/2);break;case n.LINE_STRIP:e.lines+=u*(a-1);break;case n.LINE_LOOP:e.lines+=u*a;break;case n.POINTS:e.points+=u*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h);break}}function s(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:s,update:i}}function _5(n,t,e){let i=new WeakMap,s=new Hn;function a(h,u,m){let p=h.morphTargetInfluences,v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,T=v!==void 0?v.length:0,C=i.get(u);if(C===void 0||C.count!==T){let tt=function(){ot.dispose(),i.delete(u),u.removeEventListener("dispose",tt)};var y=tt;C!==void 0&&C.texture.dispose();let F=u.morphAttributes.position!==void 0,O=u.morphAttributes.normal!==void 0,R=u.morphAttributes.color!==void 0,A=u.morphAttributes.position||[],Z=u.morphAttributes.normal||[],J=u.morphAttributes.color||[],nt=0;F===!0&&(nt=1),O===!0&&(nt=2),R===!0&&(nt=3);let pt=u.attributes.position.count*nt,St=1;pt>t.maxTextureSize&&(St=Math.ceil(pt/t.maxTextureSize),pt=t.maxTextureSize);let at=new Float32Array(pt*St*4*T),ot=new hd(at,pt,St,T);ot.type=Ca,ot.needsUpdate=!0;let Q=nt*4;for(let H=0;H<T;H++){let $=A[H],ct=Z[H],yt=J[H],Bt=pt*St*4*H;for(let kt=0;kt<$.count;kt++){let zt=kt*Q;F===!0&&(s.fromBufferAttribute($,kt),at[Bt+zt+0]=s.x,at[Bt+zt+1]=s.y,at[Bt+zt+2]=s.z,at[Bt+zt+3]=0),O===!0&&(s.fromBufferAttribute(ct,kt),at[Bt+zt+4]=s.x,at[Bt+zt+5]=s.y,at[Bt+zt+6]=s.z,at[Bt+zt+7]=0),R===!0&&(s.fromBufferAttribute(yt,kt),at[Bt+zt+8]=s.x,at[Bt+zt+9]=s.y,at[Bt+zt+10]=s.z,at[Bt+zt+11]=yt.itemSize===4?s.w:1)}}C={count:T,texture:ot,size:new zi(pt,St)},i.set(u,C),u.addEventListener("dispose",tt)}if(h.isInstancedMesh===!0&&h.morphTexture!==null)m.getUniforms().setValue(n,"morphTexture",h.morphTexture,e);else{let F=0;for(let R=0;R<p.length;R++)F+=p[R];let O=u.morphTargetsRelative?1:1-F;m.getUniforms().setValue(n,"morphTargetBaseInfluence",O),m.getUniforms().setValue(n,"morphTargetInfluences",p)}m.getUniforms().setValue(n,"morphTargetsTexture",C.texture,e),m.getUniforms().setValue(n,"morphTargetsTextureSize",C.size)}return{update:a}}function b5(n,t,e,i){let s=new WeakMap;function a(m){let p=i.render.frame,v=m.geometry,T=t.get(m,v);if(s.get(T)!==p&&(t.update(T),s.set(T,p)),m.isInstancedMesh&&(m.hasEventListener("dispose",u)===!1&&m.addEventListener("dispose",u),s.get(m)!==p&&(e.update(m.instanceMatrix,n.ARRAY_BUFFER),m.instanceColor!==null&&e.update(m.instanceColor,n.ARRAY_BUFFER),s.set(m,p))),m.isSkinnedMesh){let C=m.skeleton;s.get(C)!==p&&(C.update(),s.set(C,p))}return T}function h(){s=new WeakMap}function u(m){let p=m.target;p.removeEventListener("dispose",u),e.remove(p.instanceMatrix),p.instanceColor!==null&&e.remove(p.instanceColor)}return{update:a,dispose:h}}var o2=new il,H1=new vd(1,1),l2=new hd,h2=new ef,c2=new md,X1=[],j1=[],Y1=new Float32Array(16),G1=new Float32Array(9),q1=new Float32Array(4);function dc(n,t,e){let i=n[0];if(i<=0||i>0)return n;let s=t*e,a=X1[s];if(a===void 0&&(a=new Float32Array(s),X1[s]=a),t!==0){i.toArray(a,0);for(let h=1,u=0;h!==t;++h)u+=e,n[h].toArray(a,u)}return a}function ps(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function fs(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function um(n,t){let e=j1[t];e===void 0&&(e=new Int32Array(t),j1[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function y5(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function w5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ps(e,t))return;n.uniform2fv(this.addr,t),fs(e,t)}}function S5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(ps(e,t))return;n.uniform3fv(this.addr,t),fs(e,t)}}function M5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ps(e,t))return;n.uniform4fv(this.addr,t),fs(e,t)}}function T5(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(ps(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),fs(e,t)}else{if(ps(e,i))return;q1.set(i),n.uniformMatrix2fv(this.addr,!1,q1),fs(e,i)}}function C5(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(ps(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),fs(e,t)}else{if(ps(e,i))return;G1.set(i),n.uniformMatrix3fv(this.addr,!1,G1),fs(e,i)}}function A5(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(ps(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),fs(e,t)}else{if(ps(e,i))return;Y1.set(i),n.uniformMatrix4fv(this.addr,!1,Y1),fs(e,i)}}function P5(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function E5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ps(e,t))return;n.uniform2iv(this.addr,t),fs(e,t)}}function k5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(ps(e,t))return;n.uniform3iv(this.addr,t),fs(e,t)}}function I5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ps(e,t))return;n.uniform4iv(this.addr,t),fs(e,t)}}function L5(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function D5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(ps(e,t))return;n.uniform2uiv(this.addr,t),fs(e,t)}}function R5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(ps(e,t))return;n.uniform3uiv(this.addr,t),fs(e,t)}}function F5(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(ps(e,t))return;n.uniform4uiv(this.addr,t),fs(e,t)}}function N5(n,t,e){let i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let a;this.type===n.SAMPLER_2D_SHADOW?(H1.compareFunction=_x,a=H1):a=o2,e.setTexture2D(t||a,s)}function B5(n,t,e){let i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTexture3D(t||h2,s)}function O5(n,t,e){let i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTextureCube(t||c2,s)}function V5(n,t,e){let i=this.cache,s=e.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),e.setTexture2DArray(t||l2,s)}function z5(n){switch(n){case 5126:return y5;case 35664:return w5;case 35665:return S5;case 35666:return M5;case 35674:return T5;case 35675:return C5;case 35676:return A5;case 5124:case 35670:return P5;case 35667:case 35671:return E5;case 35668:case 35672:return k5;case 35669:case 35673:return I5;case 5125:return L5;case 36294:return D5;case 36295:return R5;case 36296:return F5;case 35678:case 36198:case 36298:case 36306:case 35682:return N5;case 35679:case 36299:case 36307:return B5;case 35680:case 36300:case 36308:case 36293:return O5;case 36289:case 36303:case 36311:case 36292:return V5}}function U5(n,t){n.uniform1fv(this.addr,t)}function W5(n,t){let e=dc(t,this.size,2);n.uniform2fv(this.addr,e)}function H5(n,t){let e=dc(t,this.size,3);n.uniform3fv(this.addr,e)}function X5(n,t){let e=dc(t,this.size,4);n.uniform4fv(this.addr,e)}function j5(n,t){let e=dc(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function Y5(n,t){let e=dc(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function G5(n,t){let e=dc(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function q5(n,t){n.uniform1iv(this.addr,t)}function Z5(n,t){n.uniform2iv(this.addr,t)}function K5(n,t){n.uniform3iv(this.addr,t)}function $5(n,t){n.uniform4iv(this.addr,t)}function J5(n,t){n.uniform1uiv(this.addr,t)}function Q5(n,t){n.uniform2uiv(this.addr,t)}function tE(n,t){n.uniform3uiv(this.addr,t)}function eE(n,t){n.uniform4uiv(this.addr,t)}function iE(n,t,e){let i=this.cache,s=t.length,a=um(e,s);ps(i,a)||(n.uniform1iv(this.addr,a),fs(i,a));for(let h=0;h!==s;++h)e.setTexture2D(t[h]||o2,a[h])}function nE(n,t,e){let i=this.cache,s=t.length,a=um(e,s);ps(i,a)||(n.uniform1iv(this.addr,a),fs(i,a));for(let h=0;h!==s;++h)e.setTexture3D(t[h]||h2,a[h])}function sE(n,t,e){let i=this.cache,s=t.length,a=um(e,s);ps(i,a)||(n.uniform1iv(this.addr,a),fs(i,a));for(let h=0;h!==s;++h)e.setTextureCube(t[h]||c2,a[h])}function rE(n,t,e){let i=this.cache,s=t.length,a=um(e,s);ps(i,a)||(n.uniform1iv(this.addr,a),fs(i,a));for(let h=0;h!==s;++h)e.setTexture2DArray(t[h]||l2,a[h])}function aE(n){switch(n){case 5126:return U5;case 35664:return W5;case 35665:return H5;case 35666:return X5;case 35674:return j5;case 35675:return Y5;case 35676:return G5;case 5124:case 35670:return q5;case 35667:case 35671:return Z5;case 35668:case 35672:return K5;case 35669:case 35673:return $5;case 5125:return J5;case 36294:return Q5;case 36295:return tE;case 36296:return eE;case 35678:case 36198:case 36298:case 36306:case 35682:return iE;case 35679:case 36299:case 36307:return nE;case 35680:case 36300:case 36308:case 36293:return sE;case 36289:case 36303:case 36311:case 36292:return rE}}var Rx=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=z5(e.type)}},Fx=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=aE(e.type)}},Nx=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let s=this.seq;for(let a=0,h=s.length;a!==h;++a){let u=s[a];u.setValue(t,e[u.id],i)}}},Dx=/(\w+)(\])?(\[|\.)?/g;function Z1(n,t){n.seq.push(t),n.map[t.id]=t}function oE(n,t,e){let i=n.name,s=i.length;for(Dx.lastIndex=0;;){let a=Dx.exec(i),h=Dx.lastIndex,u=a[1],m=a[2]==="]",p=a[3];if(m&&(u=u|0),p===void 0||p==="["&&h+2===s){Z1(e,p===void 0?new Rx(u,n,t):new Fx(u,n,t));break}else{let T=e.map[u];T===void 0&&(T=new Nx(u),Z1(e,T)),e=T}}}var cc=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){let a=t.getActiveUniform(e,s),h=t.getUniformLocation(e,a.name);oE(a,h,this)}}setValue(t,e,i,s){let a=this.map[e];a!==void 0&&a.setValue(t,i,s)}setOptional(t,e,i){let s=e[i];s!==void 0&&this.setValue(t,i,s)}static upload(t,e,i,s){for(let a=0,h=e.length;a!==h;++a){let u=e[a],m=i[u.id];m.needsUpdate!==!1&&u.setValue(t,m.value,s)}}static seqWithValue(t,e){let i=[];for(let s=0,a=t.length;s!==a;++s){let h=t[s];h.id in e&&i.push(h)}return i}};function K1(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var lE=37297,hE=0;function cE(n,t){let e=n.split(`
`),i=[],s=Math.max(t-6,0),a=Math.min(t+6,e.length);for(let h=s;h<a;h++){let u=h+1;i.push(`${u===t?">":" "} ${u}: ${e[h]}`)}return i.join(`
`)}var $1=new Wi;function dE(n){rn._getMatrix($1,rn.workingColorSpace,n);let t=`mat3( ${$1.elements.map(e=>e.toFixed(4))} )`;switch(rn.getTransfer(n)){case rd:return[t,"LinearTransferOETF"];case gn:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function J1(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),s=n.getShaderInfoLog(t).trim();if(i&&s==="")return"";let a=/ERROR: 0:(\d+)/.exec(s);if(a){let h=parseInt(a[1]);return e.toUpperCase()+`

`+s+`

`+cE(n.getShaderSource(t),h)}else return s}function uE(n,t){let e=dE(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function pE(n,t){let e;switch(t){case u1:e="Linear";break;case p1:e="Reinhard";break;case f1:e="Cineon";break;case m1:e="ACESFilmic";break;case x1:e="AgX";break;case v1:e="Neutral";break;case g1:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var hm=new fe;function fE(){rn.getLuminanceCoefficients(hm);let n=hm.x.toFixed(4),t=hm.y.toFixed(4),e=hm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function mE(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Rd).join(`
`)}function gE(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function xE(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){let a=n.getActiveAttrib(t,s),h=a.name,u=1;a.type===n.FLOAT_MAT2&&(u=2),a.type===n.FLOAT_MAT3&&(u=3),a.type===n.FLOAT_MAT4&&(u=4),e[h]={type:a.type,location:n.getAttribLocation(t,h),locationSize:u}}return e}function Rd(n){return n!==""}function Q1(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function t2(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var vE=/^[ \t]*#include +<([\w\d./]+)>/gm;function Bx(n){return n.replace(vE,bE)}var _E=new Map;function bE(n,t){let e=Yi[t];if(e===void 0){let i=_E.get(t);if(i!==void 0)e=Yi[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return Bx(e)}var yE=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function e2(n){return n.replace(yE,wE)}function wE(n,t,e,i){let s="";for(let a=parseInt(t);a<parseInt(e);a++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function i2(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function SE(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===sx?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===jy?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Sa&&(t="SHADOWMAP_TYPE_VSM"),t}function ME(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ol:case Vl:t="ENVMAP_TYPE_CUBE";break;case Ad:t="ENVMAP_TYPE_CUBE_UV";break}return t}function TE(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Vl:t="ENVMAP_MODE_REFRACTION";break}return t}function CE(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Mf:t="ENVMAP_BLENDING_MULTIPLY";break;case c1:t="ENVMAP_BLENDING_MIX";break;case d1:t="ENVMAP_BLENDING_ADD";break}return t}function AE(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function PE(n,t,e,i){let s=n.getContext(),a=e.defines,h=e.vertexShader,u=e.fragmentShader,m=SE(e),p=ME(e),v=TE(e),T=CE(e),C=AE(e),y=mE(e),F=gE(a),O=s.createProgram(),R,A,Z=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(R=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,F].filter(Rd).join(`
`),R.length>0&&(R+=`
`),A=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,F].filter(Rd).join(`
`),A.length>0&&(A+=`
`)):(R=[i2(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,F,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+m:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Rd).join(`
`),A=[i2(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,F,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+v:"",e.envMap?"#define "+T:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+m:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==io?"#define TONE_MAPPING":"",e.toneMapping!==io?Yi.tonemapping_pars_fragment:"",e.toneMapping!==io?pE("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Yi.colorspace_pars_fragment,uE("linearToOutputTexel",e.outputColorSpace),fE(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Rd).join(`
`)),h=Bx(h),h=Q1(h,e),h=t2(h,e),u=Bx(u),u=Q1(u,e),u=t2(u,e),h=e2(h),u=e2(u),e.isRawShaderMaterial!==!0&&(Z=`#version 300 es
`,R=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+R,A=["#define varying in",e.glslVersion===bx?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===bx?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);let J=Z+R+h,nt=Z+A+u,pt=K1(s,s.VERTEX_SHADER,J),St=K1(s,s.FRAGMENT_SHADER,nt);s.attachShader(O,pt),s.attachShader(O,St),e.index0AttributeName!==void 0?s.bindAttribLocation(O,0,e.index0AttributeName):e.morphTargets===!0&&s.bindAttribLocation(O,0,"position"),s.linkProgram(O);function at(H){if(n.debug.checkShaderErrors){let $=s.getProgramInfoLog(O).trim(),ct=s.getShaderInfoLog(pt).trim(),yt=s.getShaderInfoLog(St).trim(),Bt=!0,kt=!0;if(s.getProgramParameter(O,s.LINK_STATUS)===!1)if(Bt=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,O,pt,St);else{let zt=J1(s,pt,"vertex"),Mt=J1(s,St,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(O,s.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+$+`
`+zt+`
`+Mt)}else $!==""?console.warn("THREE.WebGLProgram: Program Info Log:",$):(ct===""||yt==="")&&(kt=!1);kt&&(H.diagnostics={runnable:Bt,programLog:$,vertexShader:{log:ct,prefix:R},fragmentShader:{log:yt,prefix:A}})}s.deleteShader(pt),s.deleteShader(St),ot=new cc(s,O),Q=xE(s,O)}let ot;this.getUniforms=function(){return ot===void 0&&at(this),ot};let Q;this.getAttributes=function(){return Q===void 0&&at(this),Q};let tt=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return tt===!1&&(tt=s.getProgramParameter(O,lE)),tt},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(O),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=hE++,this.cacheKey=t,this.usedTimes=1,this.program=O,this.vertexShader=pt,this.fragmentShader=St,this}var EE=0,Ox=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,s=this._getShaderStage(e),a=this._getShaderStage(i),h=this._getShaderCacheForMaterial(t);return h.has(s)===!1&&(h.add(s),s.usedTimes++),h.has(a)===!1&&(h.add(a),a.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new Vx(t),e.set(t,i)),i}},Vx=class{constructor(t){this.id=EE++,this.code=t,this.usedTimes=0}};function kE(n,t,e,i,s,a,h){let u=new cd,m=new Ox,p=new Set,v=[],T=s.logarithmicDepthBuffer,C=s.vertexTextures,y=s.precision,F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function O(Q){return p.add(Q),Q===0?"uv":`uv${Q}`}function R(Q,tt,H,$,ct){let yt=$.fog,Bt=ct.geometry,kt=Q.isMeshStandardMaterial?$.environment:null,zt=(Q.isMeshStandardMaterial?e:t).get(Q.envMap||kt),Mt=zt&&zt.mapping===Ad?zt.image.height:null,Yt=F[Q.type];Q.precision!==null&&(y=s.getMaxPrecision(Q.precision),y!==Q.precision&&console.warn("THREE.WebGLProgram.getParameters:",Q.precision,"not supported, using",y,"instead."));let Zt=Bt.morphAttributes.position||Bt.morphAttributes.normal||Bt.morphAttributes.color,ut=Zt!==void 0?Zt.length:0,K=0;Bt.morphAttributes.position!==void 0&&(K=1),Bt.morphAttributes.normal!==void 0&&(K=2),Bt.morphAttributes.color!==void 0&&(K=3);let X,z,it,mt;if(Yt){let oi=Aa[Yt];X=oi.vertexShader,z=oi.fragmentShader}else X=Q.vertexShader,z=Q.fragmentShader,m.update(Q),it=m.getVertexShaderID(Q),mt=m.getFragmentShaderID(Q);let dt=n.getRenderTarget(),Tt=n.state.buffers.depth.getReversed(),Dt=ct.isInstancedMesh===!0,oe=ct.isBatchedMesh===!0,ue=!!Q.map,pe=!!Q.matcap,we=!!zt,At=!!Q.aoMap,Ut=!!Q.lightMap,Ct=!!Q.bumpMap,Pe=!!Q.normalMap,Ee=!!Q.displacementMap,Ce=!!Q.emissiveMap,ge=!!Q.metalnessMap,xt=!!Q.roughnessMap,et=Q.anisotropy>0,qt=Q.clearcoat>0,ce=Q.dispersion>0,xe=Q.iridescence>0,ne=Q.sheen>0,We=Q.transmission>0,Ne=et&&!!Q.anisotropyMap,ke=qt&&!!Q.clearcoatMap,Je=qt&&!!Q.clearcoatNormalMap,ie=qt&&!!Q.clearcoatRoughnessMap,Re=xe&&!!Q.iridescenceMap,Oe=xe&&!!Q.iridescenceThicknessMap,fi=ne&&!!Q.sheenColorMap,Ye=ne&&!!Q.sheenRoughnessMap,ci=!!Q.specularMap,B=!!Q.specularColorMap,Y=!!Q.specularIntensityMap,q=We&&!!Q.transmissionMap,It=We&&!!Q.thicknessMap,Rt=!!Q.gradientMap,jt=!!Q.alphaMap,Ot=Q.alphaTest>0,re=!!Q.alphaHash,Ve=!!Q.extensions,ui=io;Q.toneMapped&&(dt===null||dt.isXRRenderTarget===!0)&&(ui=n.toneMapping);let yi={shaderID:Yt,shaderType:Q.type,shaderName:Q.name,vertexShader:X,fragmentShader:z,defines:Q.defines,customVertexShaderID:it,customFragmentShaderID:mt,isRawShaderMaterial:Q.isRawShaderMaterial===!0,glslVersion:Q.glslVersion,precision:y,batching:oe,batchingColor:oe&&ct._colorsTexture!==null,instancing:Dt,instancingColor:Dt&&ct.instanceColor!==null,instancingMorph:Dt&&ct.morphTexture!==null,supportsVertexTextures:C,outputColorSpace:dt===null?n.outputColorSpace:dt.isXRRenderTarget===!0?dt.texture.colorSpace:Fl,alphaToCoverage:!!Q.alphaToCoverage,map:ue,matcap:pe,envMap:we,envMapMode:we&&zt.mapping,envMapCubeUVHeight:Mt,aoMap:At,lightMap:Ut,bumpMap:Ct,normalMap:Pe,displacementMap:C&&Ee,emissiveMap:Ce,normalMapObjectSpace:Pe&&Q.normalMapType===w1,normalMapTangentSpace:Pe&&Q.normalMapType===vx,metalnessMap:ge,roughnessMap:xt,anisotropy:et,anisotropyMap:Ne,clearcoat:qt,clearcoatMap:ke,clearcoatNormalMap:Je,clearcoatRoughnessMap:ie,dispersion:ce,iridescence:xe,iridescenceMap:Re,iridescenceThicknessMap:Oe,sheen:ne,sheenColorMap:fi,sheenRoughnessMap:Ye,specularMap:ci,specularColorMap:B,specularIntensityMap:Y,transmission:We,transmissionMap:q,thicknessMap:It,gradientMap:Rt,opaque:Q.transparent===!1&&Q.blending===Ll&&Q.alphaToCoverage===!1,alphaMap:jt,alphaTest:Ot,alphaHash:re,combine:Q.combine,mapUv:ue&&O(Q.map.channel),aoMapUv:At&&O(Q.aoMap.channel),lightMapUv:Ut&&O(Q.lightMap.channel),bumpMapUv:Ct&&O(Q.bumpMap.channel),normalMapUv:Pe&&O(Q.normalMap.channel),displacementMapUv:Ee&&O(Q.displacementMap.channel),emissiveMapUv:Ce&&O(Q.emissiveMap.channel),metalnessMapUv:ge&&O(Q.metalnessMap.channel),roughnessMapUv:xt&&O(Q.roughnessMap.channel),anisotropyMapUv:Ne&&O(Q.anisotropyMap.channel),clearcoatMapUv:ke&&O(Q.clearcoatMap.channel),clearcoatNormalMapUv:Je&&O(Q.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ie&&O(Q.clearcoatRoughnessMap.channel),iridescenceMapUv:Re&&O(Q.iridescenceMap.channel),iridescenceThicknessMapUv:Oe&&O(Q.iridescenceThicknessMap.channel),sheenColorMapUv:fi&&O(Q.sheenColorMap.channel),sheenRoughnessMapUv:Ye&&O(Q.sheenRoughnessMap.channel),specularMapUv:ci&&O(Q.specularMap.channel),specularColorMapUv:B&&O(Q.specularColorMap.channel),specularIntensityMapUv:Y&&O(Q.specularIntensityMap.channel),transmissionMapUv:q&&O(Q.transmissionMap.channel),thicknessMapUv:It&&O(Q.thicknessMap.channel),alphaMapUv:jt&&O(Q.alphaMap.channel),vertexTangents:!!Bt.attributes.tangent&&(Pe||et),vertexColors:Q.vertexColors,vertexAlphas:Q.vertexColors===!0&&!!Bt.attributes.color&&Bt.attributes.color.itemSize===4,pointsUvs:ct.isPoints===!0&&!!Bt.attributes.uv&&(ue||jt),fog:!!yt,useFog:Q.fog===!0,fogExp2:!!yt&&yt.isFogExp2,flatShading:Q.flatShading===!0,sizeAttenuation:Q.sizeAttenuation===!0,logarithmicDepthBuffer:T,reverseDepthBuffer:Tt,skinning:ct.isSkinnedMesh===!0,morphTargets:Bt.morphAttributes.position!==void 0,morphNormals:Bt.morphAttributes.normal!==void 0,morphColors:Bt.morphAttributes.color!==void 0,morphTargetsCount:ut,morphTextureStride:K,numDirLights:tt.directional.length,numPointLights:tt.point.length,numSpotLights:tt.spot.length,numSpotLightMaps:tt.spotLightMap.length,numRectAreaLights:tt.rectArea.length,numHemiLights:tt.hemi.length,numDirLightShadows:tt.directionalShadowMap.length,numPointLightShadows:tt.pointShadowMap.length,numSpotLightShadows:tt.spotShadowMap.length,numSpotLightShadowsWithMaps:tt.numSpotLightShadowsWithMaps,numLightProbes:tt.numLightProbes,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:Q.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:ui,decodeVideoTexture:ue&&Q.map.isVideoTexture===!0&&rn.getTransfer(Q.map.colorSpace)===gn,decodeVideoTextureEmissive:Ce&&Q.emissiveMap.isVideoTexture===!0&&rn.getTransfer(Q.emissiveMap.colorSpace)===gn,premultipliedAlpha:Q.premultipliedAlpha,doubleSided:Q.side===Ma,flipSided:Q.side===Zs,useDepthPacking:Q.depthPacking>=0,depthPacking:Q.depthPacking||0,index0AttributeName:Q.index0AttributeName,extensionClipCullDistance:Ve&&Q.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ve&&Q.extensions.multiDraw===!0||oe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:Q.customProgramCacheKey()};return yi.vertexUv1s=p.has(1),yi.vertexUv2s=p.has(2),yi.vertexUv3s=p.has(3),p.clear(),yi}function A(Q){let tt=[];if(Q.shaderID?tt.push(Q.shaderID):(tt.push(Q.customVertexShaderID),tt.push(Q.customFragmentShaderID)),Q.defines!==void 0)for(let H in Q.defines)tt.push(H),tt.push(Q.defines[H]);return Q.isRawShaderMaterial===!1&&(Z(tt,Q),J(tt,Q),tt.push(n.outputColorSpace)),tt.push(Q.customProgramCacheKey),tt.join()}function Z(Q,tt){Q.push(tt.precision),Q.push(tt.outputColorSpace),Q.push(tt.envMapMode),Q.push(tt.envMapCubeUVHeight),Q.push(tt.mapUv),Q.push(tt.alphaMapUv),Q.push(tt.lightMapUv),Q.push(tt.aoMapUv),Q.push(tt.bumpMapUv),Q.push(tt.normalMapUv),Q.push(tt.displacementMapUv),Q.push(tt.emissiveMapUv),Q.push(tt.metalnessMapUv),Q.push(tt.roughnessMapUv),Q.push(tt.anisotropyMapUv),Q.push(tt.clearcoatMapUv),Q.push(tt.clearcoatNormalMapUv),Q.push(tt.clearcoatRoughnessMapUv),Q.push(tt.iridescenceMapUv),Q.push(tt.iridescenceThicknessMapUv),Q.push(tt.sheenColorMapUv),Q.push(tt.sheenRoughnessMapUv),Q.push(tt.specularMapUv),Q.push(tt.specularColorMapUv),Q.push(tt.specularIntensityMapUv),Q.push(tt.transmissionMapUv),Q.push(tt.thicknessMapUv),Q.push(tt.combine),Q.push(tt.fogExp2),Q.push(tt.sizeAttenuation),Q.push(tt.morphTargetsCount),Q.push(tt.morphAttributeCount),Q.push(tt.numDirLights),Q.push(tt.numPointLights),Q.push(tt.numSpotLights),Q.push(tt.numSpotLightMaps),Q.push(tt.numHemiLights),Q.push(tt.numRectAreaLights),Q.push(tt.numDirLightShadows),Q.push(tt.numPointLightShadows),Q.push(tt.numSpotLightShadows),Q.push(tt.numSpotLightShadowsWithMaps),Q.push(tt.numLightProbes),Q.push(tt.shadowMapType),Q.push(tt.toneMapping),Q.push(tt.numClippingPlanes),Q.push(tt.numClipIntersection),Q.push(tt.depthPacking)}function J(Q,tt){u.disableAll(),tt.supportsVertexTextures&&u.enable(0),tt.instancing&&u.enable(1),tt.instancingColor&&u.enable(2),tt.instancingMorph&&u.enable(3),tt.matcap&&u.enable(4),tt.envMap&&u.enable(5),tt.normalMapObjectSpace&&u.enable(6),tt.normalMapTangentSpace&&u.enable(7),tt.clearcoat&&u.enable(8),tt.iridescence&&u.enable(9),tt.alphaTest&&u.enable(10),tt.vertexColors&&u.enable(11),tt.vertexAlphas&&u.enable(12),tt.vertexUv1s&&u.enable(13),tt.vertexUv2s&&u.enable(14),tt.vertexUv3s&&u.enable(15),tt.vertexTangents&&u.enable(16),tt.anisotropy&&u.enable(17),tt.alphaHash&&u.enable(18),tt.batching&&u.enable(19),tt.dispersion&&u.enable(20),tt.batchingColor&&u.enable(21),Q.push(u.mask),u.disableAll(),tt.fog&&u.enable(0),tt.useFog&&u.enable(1),tt.flatShading&&u.enable(2),tt.logarithmicDepthBuffer&&u.enable(3),tt.reverseDepthBuffer&&u.enable(4),tt.skinning&&u.enable(5),tt.morphTargets&&u.enable(6),tt.morphNormals&&u.enable(7),tt.morphColors&&u.enable(8),tt.premultipliedAlpha&&u.enable(9),tt.shadowMapEnabled&&u.enable(10),tt.doubleSided&&u.enable(11),tt.flipSided&&u.enable(12),tt.useDepthPacking&&u.enable(13),tt.dithering&&u.enable(14),tt.transmission&&u.enable(15),tt.sheen&&u.enable(16),tt.opaque&&u.enable(17),tt.pointsUvs&&u.enable(18),tt.decodeVideoTexture&&u.enable(19),tt.decodeVideoTextureEmissive&&u.enable(20),tt.alphaToCoverage&&u.enable(21),Q.push(u.mask)}function nt(Q){let tt=F[Q.type],H;if(tt){let $=Aa[tt];H=F1.clone($.uniforms)}else H=Q.uniforms;return H}function pt(Q,tt){let H;for(let $=0,ct=v.length;$<ct;$++){let yt=v[$];if(yt.cacheKey===tt){H=yt,++H.usedTimes;break}}return H===void 0&&(H=new PE(n,tt,Q,a),v.push(H)),H}function St(Q){if(--Q.usedTimes===0){let tt=v.indexOf(Q);v[tt]=v[v.length-1],v.pop(),Q.destroy()}}function at(Q){m.remove(Q)}function ot(){m.dispose()}return{getParameters:R,getProgramCacheKey:A,getUniforms:nt,acquireProgram:pt,releaseProgram:St,releaseShaderCache:at,programs:v,dispose:ot}}function IE(){let n=new WeakMap;function t(h){return n.has(h)}function e(h){let u=n.get(h);return u===void 0&&(u={},n.set(h,u)),u}function i(h){n.delete(h)}function s(h,u,m){n.get(h)[u]=m}function a(){n=new WeakMap}return{has:t,get:e,remove:i,update:s,dispose:a}}function LE(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function n2(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function s2(){let n=[],t=0,e=[],i=[],s=[];function a(){t=0,e.length=0,i.length=0,s.length=0}function h(T,C,y,F,O,R){let A=n[t];return A===void 0?(A={id:T.id,object:T,geometry:C,material:y,groupOrder:F,renderOrder:T.renderOrder,z:O,group:R},n[t]=A):(A.id=T.id,A.object=T,A.geometry=C,A.material=y,A.groupOrder=F,A.renderOrder=T.renderOrder,A.z=O,A.group=R),t++,A}function u(T,C,y,F,O,R){let A=h(T,C,y,F,O,R);y.transmission>0?i.push(A):y.transparent===!0?s.push(A):e.push(A)}function m(T,C,y,F,O,R){let A=h(T,C,y,F,O,R);y.transmission>0?i.unshift(A):y.transparent===!0?s.unshift(A):e.unshift(A)}function p(T,C){e.length>1&&e.sort(T||LE),i.length>1&&i.sort(C||n2),s.length>1&&s.sort(C||n2)}function v(){for(let T=t,C=n.length;T<C;T++){let y=n[T];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:e,transmissive:i,transparent:s,init:a,push:u,unshift:m,finish:v,sort:p}}function DE(){let n=new WeakMap;function t(i,s){let a=n.get(i),h;return a===void 0?(h=new s2,n.set(i,[h])):s>=a.length?(h=new s2,a.push(h)):h=a[s],h}function e(){n=new WeakMap}return{get:t,dispose:e}}function RE(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new fe,color:new Xi};break;case"SpotLight":e={position:new fe,direction:new fe,color:new Xi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new fe,color:new Xi,distance:0,decay:0};break;case"HemisphereLight":e={direction:new fe,skyColor:new Xi,groundColor:new Xi};break;case"RectAreaLight":e={color:new Xi,position:new fe,halfWidth:new fe,halfHeight:new fe};break}return n[t.id]=e,e}}}function FE(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zi};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zi};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zi,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var NE=0;function BE(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function OE(n){let t=new RE,e=FE(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new fe);let s=new fe,a=new Zn,h=new Zn;function u(p){let v=0,T=0,C=0;for(let Q=0;Q<9;Q++)i.probe[Q].set(0,0,0);let y=0,F=0,O=0,R=0,A=0,Z=0,J=0,nt=0,pt=0,St=0,at=0;p.sort(BE);for(let Q=0,tt=p.length;Q<tt;Q++){let H=p[Q],$=H.color,ct=H.intensity,yt=H.distance,Bt=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)v+=$.r*ct,T+=$.g*ct,C+=$.b*ct;else if(H.isLightProbe){for(let kt=0;kt<9;kt++)i.probe[kt].addScaledVector(H.sh.coefficients[kt],ct);at++}else if(H.isDirectionalLight){let kt=t.get(H);if(kt.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){let zt=H.shadow,Mt=e.get(H);Mt.shadowIntensity=zt.intensity,Mt.shadowBias=zt.bias,Mt.shadowNormalBias=zt.normalBias,Mt.shadowRadius=zt.radius,Mt.shadowMapSize=zt.mapSize,i.directionalShadow[y]=Mt,i.directionalShadowMap[y]=Bt,i.directionalShadowMatrix[y]=H.shadow.matrix,Z++}i.directional[y]=kt,y++}else if(H.isSpotLight){let kt=t.get(H);kt.position.setFromMatrixPosition(H.matrixWorld),kt.color.copy($).multiplyScalar(ct),kt.distance=yt,kt.coneCos=Math.cos(H.angle),kt.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),kt.decay=H.decay,i.spot[O]=kt;let zt=H.shadow;if(H.map&&(i.spotLightMap[pt]=H.map,pt++,zt.updateMatrices(H),H.castShadow&&St++),i.spotLightMatrix[O]=zt.matrix,H.castShadow){let Mt=e.get(H);Mt.shadowIntensity=zt.intensity,Mt.shadowBias=zt.bias,Mt.shadowNormalBias=zt.normalBias,Mt.shadowRadius=zt.radius,Mt.shadowMapSize=zt.mapSize,i.spotShadow[O]=Mt,i.spotShadowMap[O]=Bt,nt++}O++}else if(H.isRectAreaLight){let kt=t.get(H);kt.color.copy($).multiplyScalar(ct),kt.halfWidth.set(H.width*.5,0,0),kt.halfHeight.set(0,H.height*.5,0),i.rectArea[R]=kt,R++}else if(H.isPointLight){let kt=t.get(H);if(kt.color.copy(H.color).multiplyScalar(H.intensity),kt.distance=H.distance,kt.decay=H.decay,H.castShadow){let zt=H.shadow,Mt=e.get(H);Mt.shadowIntensity=zt.intensity,Mt.shadowBias=zt.bias,Mt.shadowNormalBias=zt.normalBias,Mt.shadowRadius=zt.radius,Mt.shadowMapSize=zt.mapSize,Mt.shadowCameraNear=zt.camera.near,Mt.shadowCameraFar=zt.camera.far,i.pointShadow[F]=Mt,i.pointShadowMap[F]=Bt,i.pointShadowMatrix[F]=H.shadow.matrix,J++}i.point[F]=kt,F++}else if(H.isHemisphereLight){let kt=t.get(H);kt.skyColor.copy(H.color).multiplyScalar(ct),kt.groundColor.copy(H.groundColor).multiplyScalar(ct),i.hemi[A]=kt,A++}}R>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ni.LTC_FLOAT_1,i.rectAreaLTC2=ni.LTC_FLOAT_2):(i.rectAreaLTC1=ni.LTC_HALF_1,i.rectAreaLTC2=ni.LTC_HALF_2)),i.ambient[0]=v,i.ambient[1]=T,i.ambient[2]=C;let ot=i.hash;(ot.directionalLength!==y||ot.pointLength!==F||ot.spotLength!==O||ot.rectAreaLength!==R||ot.hemiLength!==A||ot.numDirectionalShadows!==Z||ot.numPointShadows!==J||ot.numSpotShadows!==nt||ot.numSpotMaps!==pt||ot.numLightProbes!==at)&&(i.directional.length=y,i.spot.length=O,i.rectArea.length=R,i.point.length=F,i.hemi.length=A,i.directionalShadow.length=Z,i.directionalShadowMap.length=Z,i.pointShadow.length=J,i.pointShadowMap.length=J,i.spotShadow.length=nt,i.spotShadowMap.length=nt,i.directionalShadowMatrix.length=Z,i.pointShadowMatrix.length=J,i.spotLightMatrix.length=nt+pt-St,i.spotLightMap.length=pt,i.numSpotLightShadowsWithMaps=St,i.numLightProbes=at,ot.directionalLength=y,ot.pointLength=F,ot.spotLength=O,ot.rectAreaLength=R,ot.hemiLength=A,ot.numDirectionalShadows=Z,ot.numPointShadows=J,ot.numSpotShadows=nt,ot.numSpotMaps=pt,ot.numLightProbes=at,i.version=NE++)}function m(p,v){let T=0,C=0,y=0,F=0,O=0,R=v.matrixWorldInverse;for(let A=0,Z=p.length;A<Z;A++){let J=p[A];if(J.isDirectionalLight){let nt=i.directional[T];nt.direction.setFromMatrixPosition(J.matrixWorld),s.setFromMatrixPosition(J.target.matrixWorld),nt.direction.sub(s),nt.direction.transformDirection(R),T++}else if(J.isSpotLight){let nt=i.spot[y];nt.position.setFromMatrixPosition(J.matrixWorld),nt.position.applyMatrix4(R),nt.direction.setFromMatrixPosition(J.matrixWorld),s.setFromMatrixPosition(J.target.matrixWorld),nt.direction.sub(s),nt.direction.transformDirection(R),y++}else if(J.isRectAreaLight){let nt=i.rectArea[F];nt.position.setFromMatrixPosition(J.matrixWorld),nt.position.applyMatrix4(R),h.identity(),a.copy(J.matrixWorld),a.premultiply(R),h.extractRotation(a),nt.halfWidth.set(J.width*.5,0,0),nt.halfHeight.set(0,J.height*.5,0),nt.halfWidth.applyMatrix4(h),nt.halfHeight.applyMatrix4(h),F++}else if(J.isPointLight){let nt=i.point[C];nt.position.setFromMatrixPosition(J.matrixWorld),nt.position.applyMatrix4(R),C++}else if(J.isHemisphereLight){let nt=i.hemi[O];nt.direction.setFromMatrixPosition(J.matrixWorld),nt.direction.transformDirection(R),O++}}}return{setup:u,setupView:m,state:i}}function r2(n){let t=new OE(n),e=[],i=[];function s(v){p.camera=v,e.length=0,i.length=0}function a(v){e.push(v)}function h(v){i.push(v)}function u(){t.setup(e)}function m(v){t.setupView(e,v)}let p={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:p,setupLights:u,setupLightsView:m,pushLight:a,pushShadow:h}}function VE(n){let t=new WeakMap;function e(s,a=0){let h=t.get(s),u;return h===void 0?(u=new r2(n),t.set(s,[u])):a>=h.length?(u=new r2(n),h.push(u)):u=h[a],u}function i(){t=new WeakMap}return{get:e,dispose:i}}var zE=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,UE=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WE(n,t,e){let i=new nc,s=new zi,a=new zi,h=new Hn,u=new rf({depthPacking:y1}),m=new af,p={},v=e.maxTextureSize,T={[Qa]:Zs,[Zs]:Qa,[Ma]:Ma},C=new oa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new zi},radius:{value:4}},vertexShader:zE,fragmentShader:UE}),y=C.clone();y.defines.HORIZONTAL_PASS=1;let F=new aa;F.setAttribute("position",new Ts(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let O=new or(F,C),R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sx;let A=this.type;this.render=function(St,at,ot){if(R.enabled===!1||R.autoUpdate===!1&&R.needsUpdate===!1||St.length===0)return;let Q=n.getRenderTarget(),tt=n.getActiveCubeFace(),H=n.getActiveMipmapLevel(),$=n.state;$.setBlending(eo),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);let ct=A!==Sa&&this.type===Sa,yt=A===Sa&&this.type!==Sa;for(let Bt=0,kt=St.length;Bt<kt;Bt++){let zt=St[Bt],Mt=zt.shadow;if(Mt===void 0){console.warn("THREE.WebGLShadowMap:",zt,"has no shadow.");continue}if(Mt.autoUpdate===!1&&Mt.needsUpdate===!1)continue;s.copy(Mt.mapSize);let Yt=Mt.getFrameExtents();if(s.multiply(Yt),a.copy(Mt.mapSize),(s.x>v||s.y>v)&&(s.x>v&&(a.x=Math.floor(v/Yt.x),s.x=a.x*Yt.x,Mt.mapSize.x=a.x),s.y>v&&(a.y=Math.floor(v/Yt.y),s.y=a.y*Yt.y,Mt.mapSize.y=a.y)),Mt.map===null||ct===!0||yt===!0){let ut=this.type!==Sa?{minFilter:Or,magFilter:Or}:{};Mt.map!==null&&Mt.map.dispose(),Mt.map=new wa(s.x,s.y,ut),Mt.map.texture.name=zt.name+".shadowMap",Mt.camera.updateProjectionMatrix()}n.setRenderTarget(Mt.map),n.clear();let Zt=Mt.getViewportCount();for(let ut=0;ut<Zt;ut++){let K=Mt.getViewport(ut);h.set(a.x*K.x,a.y*K.y,a.x*K.z,a.y*K.w),$.viewport(h),Mt.updateMatrices(zt,ut),i=Mt.getFrustum(),nt(at,ot,Mt.camera,zt,this.type)}Mt.isPointLightShadow!==!0&&this.type===Sa&&Z(Mt,ot),Mt.needsUpdate=!1}A=this.type,R.needsUpdate=!1,n.setRenderTarget(Q,tt,H)};function Z(St,at){let ot=t.update(O);C.defines.VSM_SAMPLES!==St.blurSamples&&(C.defines.VSM_SAMPLES=St.blurSamples,y.defines.VSM_SAMPLES=St.blurSamples,C.needsUpdate=!0,y.needsUpdate=!0),St.mapPass===null&&(St.mapPass=new wa(s.x,s.y)),C.uniforms.shadow_pass.value=St.map.texture,C.uniforms.resolution.value=St.mapSize,C.uniforms.radius.value=St.radius,n.setRenderTarget(St.mapPass),n.clear(),n.renderBufferDirect(at,null,ot,C,O,null),y.uniforms.shadow_pass.value=St.mapPass.texture,y.uniforms.resolution.value=St.mapSize,y.uniforms.radius.value=St.radius,n.setRenderTarget(St.map),n.clear(),n.renderBufferDirect(at,null,ot,y,O,null)}function J(St,at,ot,Q){let tt=null,H=ot.isPointLight===!0?St.customDistanceMaterial:St.customDepthMaterial;if(H!==void 0)tt=H;else if(tt=ot.isPointLight===!0?m:u,n.localClippingEnabled&&at.clipShadows===!0&&Array.isArray(at.clippingPlanes)&&at.clippingPlanes.length!==0||at.displacementMap&&at.displacementScale!==0||at.alphaMap&&at.alphaTest>0||at.map&&at.alphaTest>0){let $=tt.uuid,ct=at.uuid,yt=p[$];yt===void 0&&(yt={},p[$]=yt);let Bt=yt[ct];Bt===void 0&&(Bt=tt.clone(),yt[ct]=Bt,at.addEventListener("dispose",pt)),tt=Bt}if(tt.visible=at.visible,tt.wireframe=at.wireframe,Q===Sa?tt.side=at.shadowSide!==null?at.shadowSide:at.side:tt.side=at.shadowSide!==null?at.shadowSide:T[at.side],tt.alphaMap=at.alphaMap,tt.alphaTest=at.alphaTest,tt.map=at.map,tt.clipShadows=at.clipShadows,tt.clippingPlanes=at.clippingPlanes,tt.clipIntersection=at.clipIntersection,tt.displacementMap=at.displacementMap,tt.displacementScale=at.displacementScale,tt.displacementBias=at.displacementBias,tt.wireframeLinewidth=at.wireframeLinewidth,tt.linewidth=at.linewidth,ot.isPointLight===!0&&tt.isMeshDistanceMaterial===!0){let $=n.properties.get(tt);$.light=ot}return tt}function nt(St,at,ot,Q,tt){if(St.visible===!1)return;if(St.layers.test(at.layers)&&(St.isMesh||St.isLine||St.isPoints)&&(St.castShadow||St.receiveShadow&&tt===Sa)&&(!St.frustumCulled||i.intersectsObject(St))){St.modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,St.matrixWorld);let ct=t.update(St),yt=St.material;if(Array.isArray(yt)){let Bt=ct.groups;for(let kt=0,zt=Bt.length;kt<zt;kt++){let Mt=Bt[kt],Yt=yt[Mt.materialIndex];if(Yt&&Yt.visible){let Zt=J(St,Yt,Q,tt);St.onBeforeShadow(n,St,at,ot,ct,Zt,Mt),n.renderBufferDirect(ot,null,ct,Zt,St,Mt),St.onAfterShadow(n,St,at,ot,ct,Zt,Mt)}}}else if(yt.visible){let Bt=J(St,yt,Q,tt);St.onBeforeShadow(n,St,at,ot,ct,Bt,null),n.renderBufferDirect(ot,null,ct,Bt,St,null),St.onAfterShadow(n,St,at,ot,ct,Bt,null)}}let $=St.children;for(let ct=0,yt=$.length;ct<yt;ct++)nt($[ct],at,ot,Q,tt)}function pt(St){St.target.removeEventListener("dispose",pt);for(let ot in p){let Q=p[ot],tt=St.target.uuid;tt in Q&&(Q[tt].dispose(),delete Q[tt])}}}var HE={[xf]:vf,[_f]:wf,[bf]:Sf,[Dl]:yf,[vf]:xf,[wf]:_f,[Sf]:bf,[yf]:Dl};function XE(n,t){function e(){let q=!1,It=new Hn,Rt=null,jt=new Hn(0,0,0,0);return{setMask:function(Ot){Rt!==Ot&&!q&&(n.colorMask(Ot,Ot,Ot,Ot),Rt=Ot)},setLocked:function(Ot){q=Ot},setClear:function(Ot,re,Ve,ui,yi){yi===!0&&(Ot*=ui,re*=ui,Ve*=ui),It.set(Ot,re,Ve,ui),jt.equals(It)===!1&&(n.clearColor(Ot,re,Ve,ui),jt.copy(It))},reset:function(){q=!1,Rt=null,jt.set(-1,0,0,0)}}}function i(){let q=!1,It=!1,Rt=null,jt=null,Ot=null;return{setReversed:function(re){if(It!==re){let Ve=t.get("EXT_clip_control");It?Ve.clipControlEXT(Ve.LOWER_LEFT_EXT,Ve.ZERO_TO_ONE_EXT):Ve.clipControlEXT(Ve.LOWER_LEFT_EXT,Ve.NEGATIVE_ONE_TO_ONE_EXT);let ui=Ot;Ot=null,this.setClear(ui)}It=re},getReversed:function(){return It},setTest:function(re){re?dt(n.DEPTH_TEST):Tt(n.DEPTH_TEST)},setMask:function(re){Rt!==re&&!q&&(n.depthMask(re),Rt=re)},setFunc:function(re){if(It&&(re=HE[re]),jt!==re){switch(re){case xf:n.depthFunc(n.NEVER);break;case vf:n.depthFunc(n.ALWAYS);break;case _f:n.depthFunc(n.LESS);break;case Dl:n.depthFunc(n.LEQUAL);break;case bf:n.depthFunc(n.EQUAL);break;case yf:n.depthFunc(n.GEQUAL);break;case wf:n.depthFunc(n.GREATER);break;case Sf:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}jt=re}},setLocked:function(re){q=re},setClear:function(re){Ot!==re&&(It&&(re=1-re),n.clearDepth(re),Ot=re)},reset:function(){q=!1,Rt=null,jt=null,Ot=null,It=!1}}}function s(){let q=!1,It=null,Rt=null,jt=null,Ot=null,re=null,Ve=null,ui=null,yi=null;return{setTest:function(oi){q||(oi?dt(n.STENCIL_TEST):Tt(n.STENCIL_TEST))},setMask:function(oi){It!==oi&&!q&&(n.stencilMask(oi),It=oi)},setFunc:function(oi,Oi,ze){(Rt!==oi||jt!==Oi||Ot!==ze)&&(n.stencilFunc(oi,Oi,ze),Rt=oi,jt=Oi,Ot=ze)},setOp:function(oi,Oi,ze){(re!==oi||Ve!==Oi||ui!==ze)&&(n.stencilOp(oi,Oi,ze),re=oi,Ve=Oi,ui=ze)},setLocked:function(oi){q=oi},setClear:function(oi){yi!==oi&&(n.clearStencil(oi),yi=oi)},reset:function(){q=!1,It=null,Rt=null,jt=null,Ot=null,re=null,Ve=null,ui=null,yi=null}}}let a=new e,h=new i,u=new s,m=new WeakMap,p=new WeakMap,v={},T={},C=new WeakMap,y=[],F=null,O=!1,R=null,A=null,Z=null,J=null,nt=null,pt=null,St=null,at=new Xi(0,0,0),ot=0,Q=!1,tt=null,H=null,$=null,ct=null,yt=null,Bt=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),kt=!1,zt=0,Mt=n.getParameter(n.VERSION);Mt.indexOf("WebGL")!==-1?(zt=parseFloat(/^WebGL (\d)/.exec(Mt)[1]),kt=zt>=1):Mt.indexOf("OpenGL ES")!==-1&&(zt=parseFloat(/^OpenGL ES (\d)/.exec(Mt)[1]),kt=zt>=2);let Yt=null,Zt={},ut=n.getParameter(n.SCISSOR_BOX),K=n.getParameter(n.VIEWPORT),X=new Hn().fromArray(ut),z=new Hn().fromArray(K);function it(q,It,Rt,jt){let Ot=new Uint8Array(4),re=n.createTexture();n.bindTexture(q,re),n.texParameteri(q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ve=0;Ve<Rt;Ve++)q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY?n.texImage3D(It,0,n.RGBA,1,1,jt,0,n.RGBA,n.UNSIGNED_BYTE,Ot):n.texImage2D(It+Ve,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ot);return re}let mt={};mt[n.TEXTURE_2D]=it(n.TEXTURE_2D,n.TEXTURE_2D,1),mt[n.TEXTURE_CUBE_MAP]=it(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),mt[n.TEXTURE_2D_ARRAY]=it(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),mt[n.TEXTURE_3D]=it(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),h.setClear(1),u.setClear(0),dt(n.DEPTH_TEST),h.setFunc(Dl),Ct(!1),Pe(nx),dt(n.CULL_FACE),At(eo);function dt(q){v[q]!==!0&&(n.enable(q),v[q]=!0)}function Tt(q){v[q]!==!1&&(n.disable(q),v[q]=!1)}function Dt(q,It){return T[q]!==It?(n.bindFramebuffer(q,It),T[q]=It,q===n.DRAW_FRAMEBUFFER&&(T[n.FRAMEBUFFER]=It),q===n.FRAMEBUFFER&&(T[n.DRAW_FRAMEBUFFER]=It),!0):!1}function oe(q,It){let Rt=y,jt=!1;if(q){Rt=C.get(It),Rt===void 0&&(Rt=[],C.set(It,Rt));let Ot=q.textures;if(Rt.length!==Ot.length||Rt[0]!==n.COLOR_ATTACHMENT0){for(let re=0,Ve=Ot.length;re<Ve;re++)Rt[re]=n.COLOR_ATTACHMENT0+re;Rt.length=Ot.length,jt=!0}}else Rt[0]!==n.BACK&&(Rt[0]=n.BACK,jt=!0);jt&&n.drawBuffers(Rt)}function ue(q){return F!==q?(n.useProgram(q),F=q,!0):!1}let pe={[Yo]:n.FUNC_ADD,[Gy]:n.FUNC_SUBTRACT,[qy]:n.FUNC_REVERSE_SUBTRACT};pe[Zy]=n.MIN,pe[Ky]=n.MAX;let we={[$y]:n.ZERO,[Jy]:n.ONE,[Qy]:n.SRC_COLOR,[qp]:n.SRC_ALPHA,[r1]:n.SRC_ALPHA_SATURATE,[n1]:n.DST_COLOR,[e1]:n.DST_ALPHA,[t1]:n.ONE_MINUS_SRC_COLOR,[Zp]:n.ONE_MINUS_SRC_ALPHA,[s1]:n.ONE_MINUS_DST_COLOR,[i1]:n.ONE_MINUS_DST_ALPHA,[a1]:n.CONSTANT_COLOR,[o1]:n.ONE_MINUS_CONSTANT_COLOR,[l1]:n.CONSTANT_ALPHA,[h1]:n.ONE_MINUS_CONSTANT_ALPHA};function At(q,It,Rt,jt,Ot,re,Ve,ui,yi,oi){if(q===eo){O===!0&&(Tt(n.BLEND),O=!1);return}if(O===!1&&(dt(n.BLEND),O=!0),q!==Yy){if(q!==R||oi!==Q){if((A!==Yo||nt!==Yo)&&(n.blendEquation(n.FUNC_ADD),A=Yo,nt=Yo),oi)switch(q){case Ll:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case rx:n.blendFunc(n.ONE,n.ONE);break;case ax:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ox:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}else switch(q){case Ll:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case rx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case ax:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ox:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",q);break}Z=null,J=null,pt=null,St=null,at.set(0,0,0),ot=0,R=q,Q=oi}return}Ot=Ot||It,re=re||Rt,Ve=Ve||jt,(It!==A||Ot!==nt)&&(n.blendEquationSeparate(pe[It],pe[Ot]),A=It,nt=Ot),(Rt!==Z||jt!==J||re!==pt||Ve!==St)&&(n.blendFuncSeparate(we[Rt],we[jt],we[re],we[Ve]),Z=Rt,J=jt,pt=re,St=Ve),(ui.equals(at)===!1||yi!==ot)&&(n.blendColor(ui.r,ui.g,ui.b,yi),at.copy(ui),ot=yi),R=q,Q=!1}function Ut(q,It){q.side===Ma?Tt(n.CULL_FACE):dt(n.CULL_FACE);let Rt=q.side===Zs;It&&(Rt=!Rt),Ct(Rt),q.blending===Ll&&q.transparent===!1?At(eo):At(q.blending,q.blendEquation,q.blendSrc,q.blendDst,q.blendEquationAlpha,q.blendSrcAlpha,q.blendDstAlpha,q.blendColor,q.blendAlpha,q.premultipliedAlpha),h.setFunc(q.depthFunc),h.setTest(q.depthTest),h.setMask(q.depthWrite),a.setMask(q.colorWrite);let jt=q.stencilWrite;u.setTest(jt),jt&&(u.setMask(q.stencilWriteMask),u.setFunc(q.stencilFunc,q.stencilRef,q.stencilFuncMask),u.setOp(q.stencilFail,q.stencilZFail,q.stencilZPass)),Ce(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits),q.alphaToCoverage===!0?dt(n.SAMPLE_ALPHA_TO_COVERAGE):Tt(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ct(q){tt!==q&&(q?n.frontFace(n.CW):n.frontFace(n.CCW),tt=q)}function Pe(q){q!==Hy?(dt(n.CULL_FACE),q!==H&&(q===nx?n.cullFace(n.BACK):q===Xy?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Tt(n.CULL_FACE),H=q}function Ee(q){q!==$&&(kt&&n.lineWidth(q),$=q)}function Ce(q,It,Rt){q?(dt(n.POLYGON_OFFSET_FILL),(ct!==It||yt!==Rt)&&(n.polygonOffset(It,Rt),ct=It,yt=Rt)):Tt(n.POLYGON_OFFSET_FILL)}function ge(q){q?dt(n.SCISSOR_TEST):Tt(n.SCISSOR_TEST)}function xt(q){q===void 0&&(q=n.TEXTURE0+Bt-1),Yt!==q&&(n.activeTexture(q),Yt=q)}function et(q,It,Rt){Rt===void 0&&(Yt===null?Rt=n.TEXTURE0+Bt-1:Rt=Yt);let jt=Zt[Rt];jt===void 0&&(jt={type:void 0,texture:void 0},Zt[Rt]=jt),(jt.type!==q||jt.texture!==It)&&(Yt!==Rt&&(n.activeTexture(Rt),Yt=Rt),n.bindTexture(q,It||mt[q]),jt.type=q,jt.texture=It)}function qt(){let q=Zt[Yt];q!==void 0&&q.type!==void 0&&(n.bindTexture(q.type,null),q.type=void 0,q.texture=void 0)}function ce(){try{n.compressedTexImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function xe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ne(){try{n.texSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function We(){try{n.texSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Ne(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ke(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Je(){try{n.texStorage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function ie(){try{n.texStorage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Re(){try{n.texImage2D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function Oe(){try{n.texImage3D.apply(n,arguments)}catch(q){console.error("THREE.WebGLState:",q)}}function fi(q){X.equals(q)===!1&&(n.scissor(q.x,q.y,q.z,q.w),X.copy(q))}function Ye(q){z.equals(q)===!1&&(n.viewport(q.x,q.y,q.z,q.w),z.copy(q))}function ci(q,It){let Rt=p.get(It);Rt===void 0&&(Rt=new WeakMap,p.set(It,Rt));let jt=Rt.get(q);jt===void 0&&(jt=n.getUniformBlockIndex(It,q.name),Rt.set(q,jt))}function B(q,It){let jt=p.get(It).get(q);m.get(It)!==jt&&(n.uniformBlockBinding(It,jt,q.__bindingPointIndex),m.set(It,jt))}function Y(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),h.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),v={},Yt=null,Zt={},T={},C=new WeakMap,y=[],F=null,O=!1,R=null,A=null,Z=null,J=null,nt=null,pt=null,St=null,at=new Xi(0,0,0),ot=0,Q=!1,tt=null,H=null,$=null,ct=null,yt=null,X.set(0,0,n.canvas.width,n.canvas.height),z.set(0,0,n.canvas.width,n.canvas.height),a.reset(),h.reset(),u.reset()}return{buffers:{color:a,depth:h,stencil:u},enable:dt,disable:Tt,bindFramebuffer:Dt,drawBuffers:oe,useProgram:ue,setBlending:At,setMaterial:Ut,setFlipSided:Ct,setCullFace:Pe,setLineWidth:Ee,setPolygonOffset:Ce,setScissorTest:ge,activeTexture:xt,bindTexture:et,unbindTexture:qt,compressedTexImage2D:ce,compressedTexImage3D:xe,texImage2D:Re,texImage3D:Oe,updateUBOMapping:ci,uniformBlockBinding:B,texStorage2D:Je,texStorage3D:ie,texSubImage2D:ne,texSubImage3D:We,compressedTexSubImage2D:Ne,compressedTexSubImage3D:ke,scissor:fi,viewport:Ye,reset:Y}}function jE(n,t,e,i,s,a,h){let u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new zi,v=new WeakMap,T,C=new WeakMap,y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function F(xt,et){return y?new OffscreenCanvas(xt,et):od("canvas")}function O(xt,et,qt){let ce=1,xe=ge(xt);if((xe.width>qt||xe.height>qt)&&(ce=qt/Math.max(xe.width,xe.height)),ce<1)if(typeof HTMLImageElement<"u"&&xt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&xt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&xt instanceof ImageBitmap||typeof VideoFrame<"u"&&xt instanceof VideoFrame){let ne=Math.floor(ce*xe.width),We=Math.floor(ce*xe.height);T===void 0&&(T=F(ne,We));let Ne=et?F(ne,We):T;return Ne.width=ne,Ne.height=We,Ne.getContext("2d").drawImage(xt,0,0,ne,We),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+ne+"x"+We+")."),Ne}else return"data"in xt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),xt;return xt}function R(xt){return xt.generateMipmaps}function A(xt){n.generateMipmap(xt)}function Z(xt){return xt.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:xt.isWebGL3DRenderTarget?n.TEXTURE_3D:xt.isWebGLArrayRenderTarget||xt.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function J(xt,et,qt,ce,xe=!1){if(xt!==null){if(n[xt]!==void 0)return n[xt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+xt+"'")}let ne=et;if(et===n.RED&&(qt===n.FLOAT&&(ne=n.R32F),qt===n.HALF_FLOAT&&(ne=n.R16F),qt===n.UNSIGNED_BYTE&&(ne=n.R8)),et===n.RED_INTEGER&&(qt===n.UNSIGNED_BYTE&&(ne=n.R8UI),qt===n.UNSIGNED_SHORT&&(ne=n.R16UI),qt===n.UNSIGNED_INT&&(ne=n.R32UI),qt===n.BYTE&&(ne=n.R8I),qt===n.SHORT&&(ne=n.R16I),qt===n.INT&&(ne=n.R32I)),et===n.RG&&(qt===n.FLOAT&&(ne=n.RG32F),qt===n.HALF_FLOAT&&(ne=n.RG16F),qt===n.UNSIGNED_BYTE&&(ne=n.RG8)),et===n.RG_INTEGER&&(qt===n.UNSIGNED_BYTE&&(ne=n.RG8UI),qt===n.UNSIGNED_SHORT&&(ne=n.RG16UI),qt===n.UNSIGNED_INT&&(ne=n.RG32UI),qt===n.BYTE&&(ne=n.RG8I),qt===n.SHORT&&(ne=n.RG16I),qt===n.INT&&(ne=n.RG32I)),et===n.RGB_INTEGER&&(qt===n.UNSIGNED_BYTE&&(ne=n.RGB8UI),qt===n.UNSIGNED_SHORT&&(ne=n.RGB16UI),qt===n.UNSIGNED_INT&&(ne=n.RGB32UI),qt===n.BYTE&&(ne=n.RGB8I),qt===n.SHORT&&(ne=n.RGB16I),qt===n.INT&&(ne=n.RGB32I)),et===n.RGBA_INTEGER&&(qt===n.UNSIGNED_BYTE&&(ne=n.RGBA8UI),qt===n.UNSIGNED_SHORT&&(ne=n.RGBA16UI),qt===n.UNSIGNED_INT&&(ne=n.RGBA32UI),qt===n.BYTE&&(ne=n.RGBA8I),qt===n.SHORT&&(ne=n.RGBA16I),qt===n.INT&&(ne=n.RGBA32I)),et===n.RGB&&qt===n.UNSIGNED_INT_5_9_9_9_REV&&(ne=n.RGB9_E5),et===n.RGBA){let We=xe?rd:rn.getTransfer(ce);qt===n.FLOAT&&(ne=n.RGBA32F),qt===n.HALF_FLOAT&&(ne=n.RGBA16F),qt===n.UNSIGNED_BYTE&&(ne=We===gn?n.SRGB8_ALPHA8:n.RGBA8),qt===n.UNSIGNED_SHORT_4_4_4_4&&(ne=n.RGBA4),qt===n.UNSIGNED_SHORT_5_5_5_1&&(ne=n.RGB5_A1)}return(ne===n.R16F||ne===n.R32F||ne===n.RG16F||ne===n.RG32F||ne===n.RGBA16F||ne===n.RGBA32F)&&t.get("EXT_color_buffer_float"),ne}function nt(xt,et){let qt;return xt?et===null||et===el||et===zl?qt=n.DEPTH24_STENCIL8:et===Ca?qt=n.DEPTH32F_STENCIL8:et===rc&&(qt=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):et===null||et===el||et===zl?qt=n.DEPTH_COMPONENT24:et===Ca?qt=n.DEPTH_COMPONENT32F:et===rc&&(qt=n.DEPTH_COMPONENT16),qt}function pt(xt,et){return R(xt)===!0||xt.isFramebufferTexture&&xt.minFilter!==Or&&xt.minFilter!==sa?Math.log2(Math.max(et.width,et.height))+1:xt.mipmaps!==void 0&&xt.mipmaps.length>0?xt.mipmaps.length:xt.isCompressedTexture&&Array.isArray(xt.image)?et.mipmaps.length:1}function St(xt){let et=xt.target;et.removeEventListener("dispose",St),ot(et),et.isVideoTexture&&v.delete(et)}function at(xt){let et=xt.target;et.removeEventListener("dispose",at),tt(et)}function ot(xt){let et=i.get(xt);if(et.__webglInit===void 0)return;let qt=xt.source,ce=C.get(qt);if(ce){let xe=ce[et.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&Q(xt),Object.keys(ce).length===0&&C.delete(qt)}i.remove(xt)}function Q(xt){let et=i.get(xt);n.deleteTexture(et.__webglTexture);let qt=xt.source,ce=C.get(qt);delete ce[et.__cacheKey],h.memory.textures--}function tt(xt){let et=i.get(xt);if(xt.depthTexture&&(xt.depthTexture.dispose(),i.remove(xt.depthTexture)),xt.isWebGLCubeRenderTarget)for(let ce=0;ce<6;ce++){if(Array.isArray(et.__webglFramebuffer[ce]))for(let xe=0;xe<et.__webglFramebuffer[ce].length;xe++)n.deleteFramebuffer(et.__webglFramebuffer[ce][xe]);else n.deleteFramebuffer(et.__webglFramebuffer[ce]);et.__webglDepthbuffer&&n.deleteRenderbuffer(et.__webglDepthbuffer[ce])}else{if(Array.isArray(et.__webglFramebuffer))for(let ce=0;ce<et.__webglFramebuffer.length;ce++)n.deleteFramebuffer(et.__webglFramebuffer[ce]);else n.deleteFramebuffer(et.__webglFramebuffer);if(et.__webglDepthbuffer&&n.deleteRenderbuffer(et.__webglDepthbuffer),et.__webglMultisampledFramebuffer&&n.deleteFramebuffer(et.__webglMultisampledFramebuffer),et.__webglColorRenderbuffer)for(let ce=0;ce<et.__webglColorRenderbuffer.length;ce++)et.__webglColorRenderbuffer[ce]&&n.deleteRenderbuffer(et.__webglColorRenderbuffer[ce]);et.__webglDepthRenderbuffer&&n.deleteRenderbuffer(et.__webglDepthRenderbuffer)}let qt=xt.textures;for(let ce=0,xe=qt.length;ce<xe;ce++){let ne=i.get(qt[ce]);ne.__webglTexture&&(n.deleteTexture(ne.__webglTexture),h.memory.textures--),i.remove(qt[ce])}i.remove(xt)}let H=0;function $(){H=0}function ct(){let xt=H;return xt>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+xt+" texture units while this GPU supports only "+s.maxTextures),H+=1,xt}function yt(xt){let et=[];return et.push(xt.wrapS),et.push(xt.wrapT),et.push(xt.wrapR||0),et.push(xt.magFilter),et.push(xt.minFilter),et.push(xt.anisotropy),et.push(xt.internalFormat),et.push(xt.format),et.push(xt.type),et.push(xt.generateMipmaps),et.push(xt.premultiplyAlpha),et.push(xt.flipY),et.push(xt.unpackAlignment),et.push(xt.colorSpace),et.join()}function Bt(xt,et){let qt=i.get(xt);if(xt.isVideoTexture&&Ee(xt),xt.isRenderTargetTexture===!1&&xt.version>0&&qt.__version!==xt.version){let ce=xt.image;if(ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{z(qt,xt,et);return}}e.bindTexture(n.TEXTURE_2D,qt.__webglTexture,n.TEXTURE0+et)}function kt(xt,et){let qt=i.get(xt);if(xt.version>0&&qt.__version!==xt.version){z(qt,xt,et);return}e.bindTexture(n.TEXTURE_2D_ARRAY,qt.__webglTexture,n.TEXTURE0+et)}function zt(xt,et){let qt=i.get(xt);if(xt.version>0&&qt.__version!==xt.version){z(qt,xt,et);return}e.bindTexture(n.TEXTURE_3D,qt.__webglTexture,n.TEXTURE0+et)}function Mt(xt,et){let qt=i.get(xt);if(xt.version>0&&qt.__version!==xt.version){it(qt,xt,et);return}e.bindTexture(n.TEXTURE_CUBE_MAP,qt.__webglTexture,n.TEXTURE0+et)}let Yt={[Kp]:n.REPEAT,[jo]:n.CLAMP_TO_EDGE,[$p]:n.MIRRORED_REPEAT},Zt={[Or]:n.NEAREST,[_1]:n.NEAREST_MIPMAP_NEAREST,[Pd]:n.NEAREST_MIPMAP_LINEAR,[sa]:n.LINEAR,[Af]:n.LINEAR_MIPMAP_NEAREST,[tl]:n.LINEAR_MIPMAP_LINEAR},ut={[S1]:n.NEVER,[E1]:n.ALWAYS,[M1]:n.LESS,[_x]:n.LEQUAL,[T1]:n.EQUAL,[P1]:n.GEQUAL,[C1]:n.GREATER,[A1]:n.NOTEQUAL};function K(xt,et){if(et.type===Ca&&t.has("OES_texture_float_linear")===!1&&(et.magFilter===sa||et.magFilter===Af||et.magFilter===Pd||et.magFilter===tl||et.minFilter===sa||et.minFilter===Af||et.minFilter===Pd||et.minFilter===tl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(xt,n.TEXTURE_WRAP_S,Yt[et.wrapS]),n.texParameteri(xt,n.TEXTURE_WRAP_T,Yt[et.wrapT]),(xt===n.TEXTURE_3D||xt===n.TEXTURE_2D_ARRAY)&&n.texParameteri(xt,n.TEXTURE_WRAP_R,Yt[et.wrapR]),n.texParameteri(xt,n.TEXTURE_MAG_FILTER,Zt[et.magFilter]),n.texParameteri(xt,n.TEXTURE_MIN_FILTER,Zt[et.minFilter]),et.compareFunction&&(n.texParameteri(xt,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(xt,n.TEXTURE_COMPARE_FUNC,ut[et.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(et.magFilter===Or||et.minFilter!==Pd&&et.minFilter!==tl||et.type===Ca&&t.has("OES_texture_float_linear")===!1)return;if(et.anisotropy>1||i.get(et).__currentAnisotropy){let qt=t.get("EXT_texture_filter_anisotropic");n.texParameterf(xt,qt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(et.anisotropy,s.getMaxAnisotropy())),i.get(et).__currentAnisotropy=et.anisotropy}}}function X(xt,et){let qt=!1;xt.__webglInit===void 0&&(xt.__webglInit=!0,et.addEventListener("dispose",St));let ce=et.source,xe=C.get(ce);xe===void 0&&(xe={},C.set(ce,xe));let ne=yt(et);if(ne!==xt.__cacheKey){xe[ne]===void 0&&(xe[ne]={texture:n.createTexture(),usedTimes:0},h.memory.textures++,qt=!0),xe[ne].usedTimes++;let We=xe[xt.__cacheKey];We!==void 0&&(xe[xt.__cacheKey].usedTimes--,We.usedTimes===0&&Q(et)),xt.__cacheKey=ne,xt.__webglTexture=xe[ne].texture}return qt}function z(xt,et,qt){let ce=n.TEXTURE_2D;(et.isDataArrayTexture||et.isCompressedArrayTexture)&&(ce=n.TEXTURE_2D_ARRAY),et.isData3DTexture&&(ce=n.TEXTURE_3D);let xe=X(xt,et),ne=et.source;e.bindTexture(ce,xt.__webglTexture,n.TEXTURE0+qt);let We=i.get(ne);if(ne.version!==We.__version||xe===!0){e.activeTexture(n.TEXTURE0+qt);let Ne=rn.getPrimaries(rn.workingColorSpace),ke=et.colorSpace===no?null:rn.getPrimaries(et.colorSpace),Je=et.colorSpace===no||Ne===ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,et.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,et.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);let ie=O(et.image,!1,s.maxTextureSize);ie=Ce(et,ie);let Re=a.convert(et.format,et.colorSpace),Oe=a.convert(et.type),fi=J(et.internalFormat,Re,Oe,et.colorSpace,et.isVideoTexture);K(ce,et);let Ye,ci=et.mipmaps,B=et.isVideoTexture!==!0,Y=We.__version===void 0||xe===!0,q=ne.dataReady,It=pt(et,ie);if(et.isDepthTexture)fi=nt(et.format===Rl,et.type),Y&&(B?e.texStorage2D(n.TEXTURE_2D,1,fi,ie.width,ie.height):e.texImage2D(n.TEXTURE_2D,0,fi,ie.width,ie.height,0,Re,Oe,null));else if(et.isDataTexture)if(ci.length>0){B&&Y&&e.texStorage2D(n.TEXTURE_2D,It,fi,ci[0].width,ci[0].height);for(let Rt=0,jt=ci.length;Rt<jt;Rt++)Ye=ci[Rt],B?q&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,Ye.width,Ye.height,Re,Oe,Ye.data):e.texImage2D(n.TEXTURE_2D,Rt,fi,Ye.width,Ye.height,0,Re,Oe,Ye.data);et.generateMipmaps=!1}else B?(Y&&e.texStorage2D(n.TEXTURE_2D,It,fi,ie.width,ie.height),q&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,ie.width,ie.height,Re,Oe,ie.data)):e.texImage2D(n.TEXTURE_2D,0,fi,ie.width,ie.height,0,Re,Oe,ie.data);else if(et.isCompressedTexture)if(et.isCompressedArrayTexture){B&&Y&&e.texStorage3D(n.TEXTURE_2D_ARRAY,It,fi,ci[0].width,ci[0].height,ie.depth);for(let Rt=0,jt=ci.length;Rt<jt;Rt++)if(Ye=ci[Rt],et.format!==Ur)if(Re!==null)if(B){if(q)if(et.layerUpdates.size>0){let Ot=Ax(Ye.width,Ye.height,et.format,et.type);for(let re of et.layerUpdates){let Ve=Ye.data.subarray(re*Ot/Ye.data.BYTES_PER_ELEMENT,(re+1)*Ot/Ye.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,re,Ye.width,Ye.height,1,Re,Ve)}et.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,0,Ye.width,Ye.height,ie.depth,Re,Ye.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Rt,fi,Ye.width,Ye.height,ie.depth,0,Ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else B?q&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,0,Ye.width,Ye.height,ie.depth,Re,Oe,Ye.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Rt,fi,Ye.width,Ye.height,ie.depth,0,Re,Oe,Ye.data)}else{B&&Y&&e.texStorage2D(n.TEXTURE_2D,It,fi,ci[0].width,ci[0].height);for(let Rt=0,jt=ci.length;Rt<jt;Rt++)Ye=ci[Rt],et.format!==Ur?Re!==null?B?q&&e.compressedTexSubImage2D(n.TEXTURE_2D,Rt,0,0,Ye.width,Ye.height,Re,Ye.data):e.compressedTexImage2D(n.TEXTURE_2D,Rt,fi,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):B?q&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,Ye.width,Ye.height,Re,Oe,Ye.data):e.texImage2D(n.TEXTURE_2D,Rt,fi,Ye.width,Ye.height,0,Re,Oe,Ye.data)}else if(et.isDataArrayTexture)if(B){if(Y&&e.texStorage3D(n.TEXTURE_2D_ARRAY,It,fi,ie.width,ie.height,ie.depth),q)if(et.layerUpdates.size>0){let Rt=Ax(ie.width,ie.height,et.format,et.type);for(let jt of et.layerUpdates){let Ot=ie.data.subarray(jt*Rt/ie.data.BYTES_PER_ELEMENT,(jt+1)*Rt/ie.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,jt,ie.width,ie.height,1,Re,Oe,Ot)}et.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ie.width,ie.height,ie.depth,Re,Oe,ie.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,fi,ie.width,ie.height,ie.depth,0,Re,Oe,ie.data);else if(et.isData3DTexture)B?(Y&&e.texStorage3D(n.TEXTURE_3D,It,fi,ie.width,ie.height,ie.depth),q&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ie.width,ie.height,ie.depth,Re,Oe,ie.data)):e.texImage3D(n.TEXTURE_3D,0,fi,ie.width,ie.height,ie.depth,0,Re,Oe,ie.data);else if(et.isFramebufferTexture){if(Y)if(B)e.texStorage2D(n.TEXTURE_2D,It,fi,ie.width,ie.height);else{let Rt=ie.width,jt=ie.height;for(let Ot=0;Ot<It;Ot++)e.texImage2D(n.TEXTURE_2D,Ot,fi,Rt,jt,0,Re,Oe,null),Rt>>=1,jt>>=1}}else if(ci.length>0){if(B&&Y){let Rt=ge(ci[0]);e.texStorage2D(n.TEXTURE_2D,It,fi,Rt.width,Rt.height)}for(let Rt=0,jt=ci.length;Rt<jt;Rt++)Ye=ci[Rt],B?q&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,Re,Oe,Ye):e.texImage2D(n.TEXTURE_2D,Rt,fi,Re,Oe,Ye);et.generateMipmaps=!1}else if(B){if(Y){let Rt=ge(ie);e.texStorage2D(n.TEXTURE_2D,It,fi,Rt.width,Rt.height)}q&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Re,Oe,ie)}else e.texImage2D(n.TEXTURE_2D,0,fi,Re,Oe,ie);R(et)&&A(ce),We.__version=ne.version,et.onUpdate&&et.onUpdate(et)}xt.__version=et.version}function it(xt,et,qt){if(et.image.length!==6)return;let ce=X(xt,et),xe=et.source;e.bindTexture(n.TEXTURE_CUBE_MAP,xt.__webglTexture,n.TEXTURE0+qt);let ne=i.get(xe);if(xe.version!==ne.__version||ce===!0){e.activeTexture(n.TEXTURE0+qt);let We=rn.getPrimaries(rn.workingColorSpace),Ne=et.colorSpace===no?null:rn.getPrimaries(et.colorSpace),ke=et.colorSpace===no||We===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,et.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,et.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ke);let Je=et.isCompressedTexture||et.image[0].isCompressedTexture,ie=et.image[0]&&et.image[0].isDataTexture,Re=[];for(let jt=0;jt<6;jt++)!Je&&!ie?Re[jt]=O(et.image[jt],!0,s.maxCubemapSize):Re[jt]=ie?et.image[jt].image:et.image[jt],Re[jt]=Ce(et,Re[jt]);let Oe=Re[0],fi=a.convert(et.format,et.colorSpace),Ye=a.convert(et.type),ci=J(et.internalFormat,fi,Ye,et.colorSpace),B=et.isVideoTexture!==!0,Y=ne.__version===void 0||ce===!0,q=xe.dataReady,It=pt(et,Oe);K(n.TEXTURE_CUBE_MAP,et);let Rt;if(Je){B&&Y&&e.texStorage2D(n.TEXTURE_CUBE_MAP,It,ci,Oe.width,Oe.height);for(let jt=0;jt<6;jt++){Rt=Re[jt].mipmaps;for(let Ot=0;Ot<Rt.length;Ot++){let re=Rt[Ot];et.format!==Ur?fi!==null?B?q&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Ot,0,0,re.width,re.height,fi,re.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Ot,ci,re.width,re.height,0,re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):B?q&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Ot,0,0,re.width,re.height,fi,Ye,re.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Ot,ci,re.width,re.height,0,fi,Ye,re.data)}}}else{if(Rt=et.mipmaps,B&&Y){Rt.length>0&&It++;let jt=ge(Re[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,It,ci,jt.width,jt.height)}for(let jt=0;jt<6;jt++)if(ie){B?q&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,0,0,Re[jt].width,Re[jt].height,fi,Ye,Re[jt].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,ci,Re[jt].width,Re[jt].height,0,fi,Ye,Re[jt].data);for(let Ot=0;Ot<Rt.length;Ot++){let Ve=Rt[Ot].image[jt].image;B?q&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Ot+1,0,0,Ve.width,Ve.height,fi,Ye,Ve.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Ot+1,ci,Ve.width,Ve.height,0,fi,Ye,Ve.data)}}else{B?q&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,0,0,fi,Ye,Re[jt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,ci,fi,Ye,Re[jt]);for(let Ot=0;Ot<Rt.length;Ot++){let re=Rt[Ot];B?q&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Ot+1,0,0,fi,Ye,re.image[jt]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+jt,Ot+1,ci,fi,Ye,re.image[jt])}}}R(et)&&A(n.TEXTURE_CUBE_MAP),ne.__version=xe.version,et.onUpdate&&et.onUpdate(et)}xt.__version=et.version}function mt(xt,et,qt,ce,xe,ne){let We=a.convert(qt.format,qt.colorSpace),Ne=a.convert(qt.type),ke=J(qt.internalFormat,We,Ne,qt.colorSpace),Je=i.get(et),ie=i.get(qt);if(ie.__renderTarget=et,!Je.__hasExternalTextures){let Re=Math.max(1,et.width>>ne),Oe=Math.max(1,et.height>>ne);xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?e.texImage3D(xe,ne,ke,Re,Oe,et.depth,0,We,Ne,null):e.texImage2D(xe,ne,ke,Re,Oe,0,We,Ne,null)}e.bindFramebuffer(n.FRAMEBUFFER,xt),Pe(et)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ce,xe,ie.__webglTexture,0,Ct(et)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ce,xe,ie.__webglTexture,ne),e.bindFramebuffer(n.FRAMEBUFFER,null)}function dt(xt,et,qt){if(n.bindRenderbuffer(n.RENDERBUFFER,xt),et.depthBuffer){let ce=et.depthTexture,xe=ce&&ce.isDepthTexture?ce.type:null,ne=nt(et.stencilBuffer,xe),We=et.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=Ct(et);Pe(et)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ne,ne,et.width,et.height):qt?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ne,ne,et.width,et.height):n.renderbufferStorage(n.RENDERBUFFER,ne,et.width,et.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,We,n.RENDERBUFFER,xt)}else{let ce=et.textures;for(let xe=0;xe<ce.length;xe++){let ne=ce[xe],We=a.convert(ne.format,ne.colorSpace),Ne=a.convert(ne.type),ke=J(ne.internalFormat,We,Ne,ne.colorSpace),Je=Ct(et);qt&&Pe(et)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,ke,et.width,et.height):Pe(et)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,ke,et.width,et.height):n.renderbufferStorage(n.RENDERBUFFER,ke,et.width,et.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Tt(xt,et){if(et&&et.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,xt),!(et.depthTexture&&et.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let ce=i.get(et.depthTexture);ce.__renderTarget=et,(!ce.__webglTexture||et.depthTexture.image.width!==et.width||et.depthTexture.image.height!==et.height)&&(et.depthTexture.image.width=et.width,et.depthTexture.image.height=et.height,et.depthTexture.needsUpdate=!0),Bt(et.depthTexture,0);let xe=ce.__webglTexture,ne=Ct(et);if(et.depthTexture.format===Il)Pe(et)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0,ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0);else if(et.depthTexture.format===Rl)Pe(et)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0,ne):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function Dt(xt){let et=i.get(xt),qt=xt.isWebGLCubeRenderTarget===!0;if(et.__boundDepthTexture!==xt.depthTexture){let ce=xt.depthTexture;if(et.__depthDisposeCallback&&et.__depthDisposeCallback(),ce){let xe=()=>{delete et.__boundDepthTexture,delete et.__depthDisposeCallback,ce.removeEventListener("dispose",xe)};ce.addEventListener("dispose",xe),et.__depthDisposeCallback=xe}et.__boundDepthTexture=ce}if(xt.depthTexture&&!et.__autoAllocateDepthBuffer){if(qt)throw new Error("target.depthTexture not supported in Cube render targets");Tt(et.__webglFramebuffer,xt)}else if(qt){et.__webglDepthbuffer=[];for(let ce=0;ce<6;ce++)if(e.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer[ce]),et.__webglDepthbuffer[ce]===void 0)et.__webglDepthbuffer[ce]=n.createRenderbuffer(),dt(et.__webglDepthbuffer[ce],xt,!1);else{let xe=xt.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ne=et.__webglDepthbuffer[ce];n.bindRenderbuffer(n.RENDERBUFFER,ne),n.framebufferRenderbuffer(n.FRAMEBUFFER,xe,n.RENDERBUFFER,ne)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),et.__webglDepthbuffer===void 0)et.__webglDepthbuffer=n.createRenderbuffer(),dt(et.__webglDepthbuffer,xt,!1);else{let ce=xt.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=et.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,xe),n.framebufferRenderbuffer(n.FRAMEBUFFER,ce,n.RENDERBUFFER,xe)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function oe(xt,et,qt){let ce=i.get(xt);et!==void 0&&mt(ce.__webglFramebuffer,xt,xt.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),qt!==void 0&&Dt(xt)}function ue(xt){let et=xt.texture,qt=i.get(xt),ce=i.get(et);xt.addEventListener("dispose",at);let xe=xt.textures,ne=xt.isWebGLCubeRenderTarget===!0,We=xe.length>1;if(We||(ce.__webglTexture===void 0&&(ce.__webglTexture=n.createTexture()),ce.__version=et.version,h.memory.textures++),ne){qt.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)if(et.mipmaps&&et.mipmaps.length>0){qt.__webglFramebuffer[Ne]=[];for(let ke=0;ke<et.mipmaps.length;ke++)qt.__webglFramebuffer[Ne][ke]=n.createFramebuffer()}else qt.__webglFramebuffer[Ne]=n.createFramebuffer()}else{if(et.mipmaps&&et.mipmaps.length>0){qt.__webglFramebuffer=[];for(let Ne=0;Ne<et.mipmaps.length;Ne++)qt.__webglFramebuffer[Ne]=n.createFramebuffer()}else qt.__webglFramebuffer=n.createFramebuffer();if(We)for(let Ne=0,ke=xe.length;Ne<ke;Ne++){let Je=i.get(xe[Ne]);Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture(),h.memory.textures++)}if(xt.samples>0&&Pe(xt)===!1){qt.__webglMultisampledFramebuffer=n.createFramebuffer(),qt.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,qt.__webglMultisampledFramebuffer);for(let Ne=0;Ne<xe.length;Ne++){let ke=xe[Ne];qt.__webglColorRenderbuffer[Ne]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,qt.__webglColorRenderbuffer[Ne]);let Je=a.convert(ke.format,ke.colorSpace),ie=a.convert(ke.type),Re=J(ke.internalFormat,Je,ie,ke.colorSpace,xt.isXRRenderTarget===!0),Oe=Ct(xt);n.renderbufferStorageMultisample(n.RENDERBUFFER,Oe,Re,xt.width,xt.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ne,n.RENDERBUFFER,qt.__webglColorRenderbuffer[Ne])}n.bindRenderbuffer(n.RENDERBUFFER,null),xt.depthBuffer&&(qt.__webglDepthRenderbuffer=n.createRenderbuffer(),dt(qt.__webglDepthRenderbuffer,xt,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ne){e.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture),K(n.TEXTURE_CUBE_MAP,et);for(let Ne=0;Ne<6;Ne++)if(et.mipmaps&&et.mipmaps.length>0)for(let ke=0;ke<et.mipmaps.length;ke++)mt(qt.__webglFramebuffer[Ne][ke],xt,et,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ke);else mt(qt.__webglFramebuffer[Ne],xt,et,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0);R(et)&&A(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(We){for(let Ne=0,ke=xe.length;Ne<ke;Ne++){let Je=xe[Ne],ie=i.get(Je);e.bindTexture(n.TEXTURE_2D,ie.__webglTexture),K(n.TEXTURE_2D,Je),mt(qt.__webglFramebuffer,xt,Je,n.COLOR_ATTACHMENT0+Ne,n.TEXTURE_2D,0),R(Je)&&A(n.TEXTURE_2D)}e.unbindTexture()}else{let Ne=n.TEXTURE_2D;if((xt.isWebGL3DRenderTarget||xt.isWebGLArrayRenderTarget)&&(Ne=xt.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Ne,ce.__webglTexture),K(Ne,et),et.mipmaps&&et.mipmaps.length>0)for(let ke=0;ke<et.mipmaps.length;ke++)mt(qt.__webglFramebuffer[ke],xt,et,n.COLOR_ATTACHMENT0,Ne,ke);else mt(qt.__webglFramebuffer,xt,et,n.COLOR_ATTACHMENT0,Ne,0);R(et)&&A(Ne),e.unbindTexture()}xt.depthBuffer&&Dt(xt)}function pe(xt){let et=xt.textures;for(let qt=0,ce=et.length;qt<ce;qt++){let xe=et[qt];if(R(xe)){let ne=Z(xt),We=i.get(xe).__webglTexture;e.bindTexture(ne,We),A(ne),e.unbindTexture()}}}let we=[],At=[];function Ut(xt){if(xt.samples>0){if(Pe(xt)===!1){let et=xt.textures,qt=xt.width,ce=xt.height,xe=n.COLOR_BUFFER_BIT,ne=xt.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,We=i.get(xt),Ne=et.length>1;if(Ne)for(let ke=0;ke<et.length;ke++)e.bindFramebuffer(n.FRAMEBUFFER,We.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ke,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,We.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ke,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,We.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,We.__webglFramebuffer);for(let ke=0;ke<et.length;ke++){if(xt.resolveDepthBuffer&&(xt.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),xt.stencilBuffer&&xt.resolveStencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),Ne){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,We.__webglColorRenderbuffer[ke]);let Je=i.get(et[ke]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Je,0)}n.blitFramebuffer(0,0,qt,ce,0,0,qt,ce,xe,n.NEAREST),m===!0&&(we.length=0,At.length=0,we.push(n.COLOR_ATTACHMENT0+ke),xt.depthBuffer&&xt.resolveDepthBuffer===!1&&(we.push(ne),At.push(ne),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,At)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,we))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ne)for(let ke=0;ke<et.length;ke++){e.bindFramebuffer(n.FRAMEBUFFER,We.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ke,n.RENDERBUFFER,We.__webglColorRenderbuffer[ke]);let Je=i.get(et[ke]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,We.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ke,n.TEXTURE_2D,Je,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,We.__webglMultisampledFramebuffer)}else if(xt.depthBuffer&&xt.resolveDepthBuffer===!1&&m){let et=xt.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[et])}}}function Ct(xt){return Math.min(s.maxSamples,xt.samples)}function Pe(xt){let et=i.get(xt);return xt.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&et.__useRenderToTexture!==!1}function Ee(xt){let et=h.render.frame;v.get(xt)!==et&&(v.set(xt,et),xt.update())}function Ce(xt,et){let qt=xt.colorSpace,ce=xt.format,xe=xt.type;return xt.isCompressedTexture===!0||xt.isVideoTexture===!0||qt!==Fl&&qt!==no&&(rn.getTransfer(qt)===gn?(ce!==Ur||xe!==Ta)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",qt)),et}function ge(xt){return typeof HTMLImageElement<"u"&&xt instanceof HTMLImageElement?(p.width=xt.naturalWidth||xt.width,p.height=xt.naturalHeight||xt.height):typeof VideoFrame<"u"&&xt instanceof VideoFrame?(p.width=xt.displayWidth,p.height=xt.displayHeight):(p.width=xt.width,p.height=xt.height),p}this.allocateTextureUnit=ct,this.resetTextureUnits=$,this.setTexture2D=Bt,this.setTexture2DArray=kt,this.setTexture3D=zt,this.setTextureCube=Mt,this.rebindTextures=oe,this.setupRenderTarget=ue,this.updateRenderTargetMipmap=pe,this.updateMultisampleRenderTarget=Ut,this.setupDepthRenderbuffer=Dt,this.setupFrameBufferTexture=mt,this.useMultisampledRTT=Pe}function YE(n,t){function e(i,s=no){let a,h=rn.getTransfer(s);if(i===Ta)return n.UNSIGNED_BYTE;if(i===Ef)return n.UNSIGNED_SHORT_4_4_4_4;if(i===kf)return n.UNSIGNED_SHORT_5_5_5_1;if(i===cx)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===lx)return n.BYTE;if(i===hx)return n.SHORT;if(i===rc)return n.UNSIGNED_SHORT;if(i===Pf)return n.INT;if(i===el)return n.UNSIGNED_INT;if(i===Ca)return n.FLOAT;if(i===ac)return n.HALF_FLOAT;if(i===dx)return n.ALPHA;if(i===ux)return n.RGB;if(i===Ur)return n.RGBA;if(i===px)return n.LUMINANCE;if(i===fx)return n.LUMINANCE_ALPHA;if(i===Il)return n.DEPTH_COMPONENT;if(i===Rl)return n.DEPTH_STENCIL;if(i===mx)return n.RED;if(i===If)return n.RED_INTEGER;if(i===gx)return n.RG;if(i===Lf)return n.RG_INTEGER;if(i===Df)return n.RGBA_INTEGER;if(i===Ed||i===kd||i===Id||i===Ld)if(h===gn)if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===Ed)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===kd)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Id)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Ld)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===Ed)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===kd)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Id)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Ld)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Rf||i===Ff||i===Nf||i===Bf)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===Rf)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Ff)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Nf)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Bf)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Of||i===Vf||i===zf)if(a=t.get("WEBGL_compressed_texture_etc"),a!==null){if(i===Of||i===Vf)return h===gn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===zf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Uf||i===Wf||i===Hf||i===Xf||i===jf||i===Yf||i===Gf||i===qf||i===Zf||i===Kf||i===$f||i===Jf||i===Qf||i===tm)if(a=t.get("WEBGL_compressed_texture_astc"),a!==null){if(i===Uf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Wf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Hf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Xf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===jf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Yf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Gf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===qf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Zf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Kf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===$f)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Jf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Qf)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===tm)return h===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Dd||i===em||i===im)if(a=t.get("EXT_texture_compression_bptc"),a!==null){if(i===Dd)return h===gn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===em)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===im)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===xx||i===nm||i===sm||i===rm)if(a=t.get("EXT_texture_compression_rgtc"),a!==null){if(i===Dd)return a.COMPRESSED_RED_RGTC1_EXT;if(i===nm)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===sm)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===rm)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===zl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var GE={type:"move"},Fd=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new to,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new to,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new to,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new fe),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let s=null,a=null,h=null,u=this._targetRay,m=this._grip,p=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(p&&t.hand){h=!0;for(let O of t.hand.values()){let R=e.getJointPose(O,i),A=this._getHandJoint(p,O);R!==null&&(A.matrix.fromArray(R.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=R.radius),A.visible=R!==null}let v=p.joints["index-finger-tip"],T=p.joints["thumb-tip"],C=v.position.distanceTo(T.position),y=.02,F=.005;p.inputState.pinching&&C>y+F?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&C<=y-F&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else m!==null&&t.gripSpace&&(a=e.getPose(t.gripSpace,i),a!==null&&(m.matrix.fromArray(a.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,a.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(a.linearVelocity)):m.hasLinearVelocity=!1,a.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(a.angularVelocity)):m.hasAngularVelocity=!1));u!==null&&(s=e.getPose(t.targetRaySpace,i),s===null&&a!==null&&(s=a),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(GE)))}return u!==null&&(u.visible=s!==null),m!==null&&(m.visible=a!==null),p!==null&&(p.visible=h!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new to;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}},qE=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ZE=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,zx=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){let s=new il,a=t.properties.get(s);a.__webglTexture=e.texture,(e.depthNear!==i.depthNear||e.depthFar!==i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=s}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new oa({vertexShader:qE,fragmentShader:ZE,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new or(new _d(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},Ux=class extends ya{constructor(t,e){super();let i=this,s=null,a=1,h=null,u="local-floor",m=1,p=null,v=null,T=null,C=null,y=null,F=null,O=new zx,R=e.getContextAttributes(),A=null,Z=null,J=[],nt=[],pt=new zi,St=null,at=new Os;at.viewport=new Hn;let ot=new Os;ot.viewport=new Hn;let Q=[at,ot],tt=new mf,H=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let it=J[z];return it===void 0&&(it=new Fd,J[z]=it),it.getTargetRaySpace()},this.getControllerGrip=function(z){let it=J[z];return it===void 0&&(it=new Fd,J[z]=it),it.getGripSpace()},this.getHand=function(z){let it=J[z];return it===void 0&&(it=new Fd,J[z]=it),it.getHandSpace()};function ct(z){let it=nt.indexOf(z.inputSource);if(it===-1)return;let mt=J[it];mt!==void 0&&(mt.update(z.inputSource,z.frame,p||h),mt.dispatchEvent({type:z.type,data:z.inputSource}))}function yt(){s.removeEventListener("select",ct),s.removeEventListener("selectstart",ct),s.removeEventListener("selectend",ct),s.removeEventListener("squeeze",ct),s.removeEventListener("squeezestart",ct),s.removeEventListener("squeezeend",ct),s.removeEventListener("end",yt),s.removeEventListener("inputsourceschange",Bt);for(let z=0;z<J.length;z++){let it=nt[z];it!==null&&(nt[z]=null,J[z].disconnect(it))}H=null,$=null,O.reset(),t.setRenderTarget(A),y=null,C=null,T=null,s=null,Z=null,X.stop(),i.isPresenting=!1,t.setPixelRatio(St),t.setSize(pt.width,pt.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){a=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){u=z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||h},this.setReferenceSpace=function(z){p=z},this.getBaseLayer=function(){return C!==null?C:y},this.getBinding=function(){return T},this.getFrame=function(){return F},this.getSession=function(){return s},this.setSession=function(z){return uu(this,null,function*(){if(s=z,s!==null){if(A=t.getRenderTarget(),s.addEventListener("select",ct),s.addEventListener("selectstart",ct),s.addEventListener("selectend",ct),s.addEventListener("squeeze",ct),s.addEventListener("squeezestart",ct),s.addEventListener("squeezeend",ct),s.addEventListener("end",yt),s.addEventListener("inputsourceschange",Bt),R.xrCompatible!==!0&&(yield e.makeXRCompatible()),St=t.getPixelRatio(),t.getSize(pt),s.enabledFeatures!==void 0&&s.enabledFeatures.includes("layers")){let mt=null,dt=null,Tt=null;R.depth&&(Tt=R.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,mt=R.stencil?Rl:Il,dt=R.stencil?zl:el);let Dt={colorFormat:e.RGBA8,depthFormat:Tt,scaleFactor:a};T=new XRWebGLBinding(s,e),C=T.createProjectionLayer(Dt),s.updateRenderState({layers:[C]}),t.setPixelRatio(1),t.setSize(C.textureWidth,C.textureHeight,!1),Z=new wa(C.textureWidth,C.textureHeight,{format:Ur,type:Ta,depthTexture:new vd(C.textureWidth,C.textureHeight,dt,void 0,void 0,void 0,void 0,void 0,void 0,mt),stencilBuffer:R.stencil,colorSpace:t.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:C.ignoreDepthValues===!1})}else{let mt={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(s,e,mt),s.updateRenderState({baseLayer:y}),t.setPixelRatio(1),t.setSize(y.framebufferWidth,y.framebufferHeight,!1),Z=new wa(y.framebufferWidth,y.framebufferHeight,{format:Ur,type:Ta,colorSpace:t.outputColorSpace,stencilBuffer:R.stencil})}Z.isXRRenderTarget=!0,this.setFoveation(m),p=null,h=yield s.requestReferenceSpace(u),X.setContext(s),X.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return O.getDepthTexture()};function Bt(z){for(let it=0;it<z.removed.length;it++){let mt=z.removed[it],dt=nt.indexOf(mt);dt>=0&&(nt[dt]=null,J[dt].disconnect(mt))}for(let it=0;it<z.added.length;it++){let mt=z.added[it],dt=nt.indexOf(mt);if(dt===-1){for(let Dt=0;Dt<J.length;Dt++)if(Dt>=nt.length){nt.push(mt),dt=Dt;break}else if(nt[Dt]===null){nt[Dt]=mt,dt=Dt;break}if(dt===-1)break}let Tt=J[dt];Tt&&Tt.connect(mt)}}let kt=new fe,zt=new fe;function Mt(z,it,mt){kt.setFromMatrixPosition(it.matrixWorld),zt.setFromMatrixPosition(mt.matrixWorld);let dt=kt.distanceTo(zt),Tt=it.projectionMatrix.elements,Dt=mt.projectionMatrix.elements,oe=Tt[14]/(Tt[10]-1),ue=Tt[14]/(Tt[10]+1),pe=(Tt[9]+1)/Tt[5],we=(Tt[9]-1)/Tt[5],At=(Tt[8]-1)/Tt[0],Ut=(Dt[8]+1)/Dt[0],Ct=oe*At,Pe=oe*Ut,Ee=dt/(-At+Ut),Ce=Ee*-At;if(it.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(Ce),z.translateZ(Ee),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert(),Tt[10]===-1)z.projectionMatrix.copy(it.projectionMatrix),z.projectionMatrixInverse.copy(it.projectionMatrixInverse);else{let ge=oe+Ee,xt=ue+Ee,et=Ct-Ce,qt=Pe+(dt-Ce),ce=pe*ue/xt*ge,xe=we*ue/xt*ge;z.projectionMatrix.makePerspective(et,qt,ce,xe,ge,xt),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}}function Yt(z,it){it===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(it.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(s===null)return;let it=z.near,mt=z.far;O.texture!==null&&(O.depthNear>0&&(it=O.depthNear),O.depthFar>0&&(mt=O.depthFar)),tt.near=ot.near=at.near=it,tt.far=ot.far=at.far=mt,(H!==tt.near||$!==tt.far)&&(s.updateRenderState({depthNear:tt.near,depthFar:tt.far}),H=tt.near,$=tt.far),at.layers.mask=z.layers.mask|2,ot.layers.mask=z.layers.mask|4,tt.layers.mask=at.layers.mask|ot.layers.mask;let dt=z.parent,Tt=tt.cameras;Yt(tt,dt);for(let Dt=0;Dt<Tt.length;Dt++)Yt(Tt[Dt],dt);Tt.length===2?Mt(tt,at,ot):tt.projectionMatrix.copy(at.projectionMatrix),Zt(z,tt,dt)};function Zt(z,it,mt){mt===null?z.matrix.copy(it.matrixWorld):(z.matrix.copy(mt.matrixWorld),z.matrix.invert(),z.matrix.multiply(it.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0),z.projectionMatrix.copy(it.projectionMatrix),z.projectionMatrixInverse.copy(it.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=Qh*2*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}this.getCamera=function(){return tt},this.getFoveation=function(){if(!(C===null&&y===null))return m},this.setFoveation=function(z){m=z,C!==null&&(C.fixedFoveation=z),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=z)},this.hasDepthSensing=function(){return O.texture!==null},this.getDepthSensingMesh=function(){return O.getMesh(tt)};let ut=null;function K(z,it){if(v=it.getViewerPose(p||h),F=it,v!==null){let mt=v.views;y!==null&&(t.setRenderTargetFramebuffer(Z,y.framebuffer),t.setRenderTarget(Z));let dt=!1;mt.length!==tt.cameras.length&&(tt.cameras.length=0,dt=!0);for(let Dt=0;Dt<mt.length;Dt++){let oe=mt[Dt],ue=null;if(y!==null)ue=y.getViewport(oe);else{let we=T.getViewSubImage(C,oe);ue=we.viewport,Dt===0&&(t.setRenderTargetTextures(Z,we.colorTexture,C.ignoreDepthValues?void 0:we.depthStencilTexture),t.setRenderTarget(Z))}let pe=Q[Dt];pe===void 0&&(pe=new Os,pe.layers.enable(Dt),pe.viewport=new Hn,Q[Dt]=pe),pe.matrix.fromArray(oe.transform.matrix),pe.matrix.decompose(pe.position,pe.quaternion,pe.scale),pe.projectionMatrix.fromArray(oe.projectionMatrix),pe.projectionMatrixInverse.copy(pe.projectionMatrix).invert(),pe.viewport.set(ue.x,ue.y,ue.width,ue.height),Dt===0&&(tt.matrix.copy(pe.matrix),tt.matrix.decompose(tt.position,tt.quaternion,tt.scale)),dt===!0&&tt.cameras.push(pe)}let Tt=s.enabledFeatures;if(Tt&&Tt.includes("depth-sensing")){let Dt=T.getDepthInformation(mt[0]);Dt&&Dt.isValid&&Dt.texture&&O.init(t,Dt,s.renderState)}}for(let mt=0;mt<J.length;mt++){let dt=nt[mt],Tt=J[mt];dt!==null&&Tt!==void 0&&Tt.update(dt,it,p||h)}ut&&ut(z,it),it.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:it}),F=null}let X=new a2;X.setAnimationLoop(K),this.setAnimationLoop=function(z){ut=z},this.dispose=function(){}}},Xl=new qo,KE=new Zn;function $E(n,t){function e(R,A){R.matrixAutoUpdate===!0&&R.updateMatrix(),A.value.copy(R.matrix)}function i(R,A){A.color.getRGB(R.fogColor.value,Mx(n)),A.isFog?(R.fogNear.value=A.near,R.fogFar.value=A.far):A.isFogExp2&&(R.fogDensity.value=A.density)}function s(R,A,Z,J,nt){A.isMeshBasicMaterial||A.isMeshLambertMaterial?a(R,A):A.isMeshToonMaterial?(a(R,A),T(R,A)):A.isMeshPhongMaterial?(a(R,A),v(R,A)):A.isMeshStandardMaterial?(a(R,A),C(R,A),A.isMeshPhysicalMaterial&&y(R,A,nt)):A.isMeshMatcapMaterial?(a(R,A),F(R,A)):A.isMeshDepthMaterial?a(R,A):A.isMeshDistanceMaterial?(a(R,A),O(R,A)):A.isMeshNormalMaterial?a(R,A):A.isLineBasicMaterial?(h(R,A),A.isLineDashedMaterial&&u(R,A)):A.isPointsMaterial?m(R,A,Z,J):A.isSpriteMaterial?p(R,A):A.isShadowMaterial?(R.color.value.copy(A.color),R.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function a(R,A){R.opacity.value=A.opacity,A.color&&R.diffuse.value.copy(A.color),A.emissive&&R.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(R.map.value=A.map,e(A.map,R.mapTransform)),A.alphaMap&&(R.alphaMap.value=A.alphaMap,e(A.alphaMap,R.alphaMapTransform)),A.bumpMap&&(R.bumpMap.value=A.bumpMap,e(A.bumpMap,R.bumpMapTransform),R.bumpScale.value=A.bumpScale,A.side===Zs&&(R.bumpScale.value*=-1)),A.normalMap&&(R.normalMap.value=A.normalMap,e(A.normalMap,R.normalMapTransform),R.normalScale.value.copy(A.normalScale),A.side===Zs&&R.normalScale.value.negate()),A.displacementMap&&(R.displacementMap.value=A.displacementMap,e(A.displacementMap,R.displacementMapTransform),R.displacementScale.value=A.displacementScale,R.displacementBias.value=A.displacementBias),A.emissiveMap&&(R.emissiveMap.value=A.emissiveMap,e(A.emissiveMap,R.emissiveMapTransform)),A.specularMap&&(R.specularMap.value=A.specularMap,e(A.specularMap,R.specularMapTransform)),A.alphaTest>0&&(R.alphaTest.value=A.alphaTest);let Z=t.get(A),J=Z.envMap,nt=Z.envMapRotation;J&&(R.envMap.value=J,Xl.copy(nt),Xl.x*=-1,Xl.y*=-1,Xl.z*=-1,J.isCubeTexture&&J.isRenderTargetTexture===!1&&(Xl.y*=-1,Xl.z*=-1),R.envMapRotation.value.setFromMatrix4(KE.makeRotationFromEuler(Xl)),R.flipEnvMap.value=J.isCubeTexture&&J.isRenderTargetTexture===!1?-1:1,R.reflectivity.value=A.reflectivity,R.ior.value=A.ior,R.refractionRatio.value=A.refractionRatio),A.lightMap&&(R.lightMap.value=A.lightMap,R.lightMapIntensity.value=A.lightMapIntensity,e(A.lightMap,R.lightMapTransform)),A.aoMap&&(R.aoMap.value=A.aoMap,R.aoMapIntensity.value=A.aoMapIntensity,e(A.aoMap,R.aoMapTransform))}function h(R,A){R.diffuse.value.copy(A.color),R.opacity.value=A.opacity,A.map&&(R.map.value=A.map,e(A.map,R.mapTransform))}function u(R,A){R.dashSize.value=A.dashSize,R.totalSize.value=A.dashSize+A.gapSize,R.scale.value=A.scale}function m(R,A,Z,J){R.diffuse.value.copy(A.color),R.opacity.value=A.opacity,R.size.value=A.size*Z,R.scale.value=J*.5,A.map&&(R.map.value=A.map,e(A.map,R.uvTransform)),A.alphaMap&&(R.alphaMap.value=A.alphaMap,e(A.alphaMap,R.alphaMapTransform)),A.alphaTest>0&&(R.alphaTest.value=A.alphaTest)}function p(R,A){R.diffuse.value.copy(A.color),R.opacity.value=A.opacity,R.rotation.value=A.rotation,A.map&&(R.map.value=A.map,e(A.map,R.mapTransform)),A.alphaMap&&(R.alphaMap.value=A.alphaMap,e(A.alphaMap,R.alphaMapTransform)),A.alphaTest>0&&(R.alphaTest.value=A.alphaTest)}function v(R,A){R.specular.value.copy(A.specular),R.shininess.value=Math.max(A.shininess,1e-4)}function T(R,A){A.gradientMap&&(R.gradientMap.value=A.gradientMap)}function C(R,A){R.metalness.value=A.metalness,A.metalnessMap&&(R.metalnessMap.value=A.metalnessMap,e(A.metalnessMap,R.metalnessMapTransform)),R.roughness.value=A.roughness,A.roughnessMap&&(R.roughnessMap.value=A.roughnessMap,e(A.roughnessMap,R.roughnessMapTransform)),A.envMap&&(R.envMapIntensity.value=A.envMapIntensity)}function y(R,A,Z){R.ior.value=A.ior,A.sheen>0&&(R.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),R.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(R.sheenColorMap.value=A.sheenColorMap,e(A.sheenColorMap,R.sheenColorMapTransform)),A.sheenRoughnessMap&&(R.sheenRoughnessMap.value=A.sheenRoughnessMap,e(A.sheenRoughnessMap,R.sheenRoughnessMapTransform))),A.clearcoat>0&&(R.clearcoat.value=A.clearcoat,R.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(R.clearcoatMap.value=A.clearcoatMap,e(A.clearcoatMap,R.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(R.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,e(A.clearcoatRoughnessMap,R.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(R.clearcoatNormalMap.value=A.clearcoatNormalMap,e(A.clearcoatNormalMap,R.clearcoatNormalMapTransform),R.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===Zs&&R.clearcoatNormalScale.value.negate())),A.dispersion>0&&(R.dispersion.value=A.dispersion),A.iridescence>0&&(R.iridescence.value=A.iridescence,R.iridescenceIOR.value=A.iridescenceIOR,R.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],R.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(R.iridescenceMap.value=A.iridescenceMap,e(A.iridescenceMap,R.iridescenceMapTransform)),A.iridescenceThicknessMap&&(R.iridescenceThicknessMap.value=A.iridescenceThicknessMap,e(A.iridescenceThicknessMap,R.iridescenceThicknessMapTransform))),A.transmission>0&&(R.transmission.value=A.transmission,R.transmissionSamplerMap.value=Z.texture,R.transmissionSamplerSize.value.set(Z.width,Z.height),A.transmissionMap&&(R.transmissionMap.value=A.transmissionMap,e(A.transmissionMap,R.transmissionMapTransform)),R.thickness.value=A.thickness,A.thicknessMap&&(R.thicknessMap.value=A.thicknessMap,e(A.thicknessMap,R.thicknessMapTransform)),R.attenuationDistance.value=A.attenuationDistance,R.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(R.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(R.anisotropyMap.value=A.anisotropyMap,e(A.anisotropyMap,R.anisotropyMapTransform))),R.specularIntensity.value=A.specularIntensity,R.specularColor.value.copy(A.specularColor),A.specularColorMap&&(R.specularColorMap.value=A.specularColorMap,e(A.specularColorMap,R.specularColorMapTransform)),A.specularIntensityMap&&(R.specularIntensityMap.value=A.specularIntensityMap,e(A.specularIntensityMap,R.specularIntensityMapTransform))}function F(R,A){A.matcap&&(R.matcap.value=A.matcap)}function O(R,A){let Z=t.get(A).light;R.referencePosition.value.setFromMatrixPosition(Z.matrixWorld),R.nearDistance.value=Z.shadow.camera.near,R.farDistance.value=Z.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function JE(n,t,e,i){let s={},a={},h=[],u=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function m(Z,J){let nt=J.program;i.uniformBlockBinding(Z,nt)}function p(Z,J){let nt=s[Z.id];nt===void 0&&(F(Z),nt=v(Z),s[Z.id]=nt,Z.addEventListener("dispose",R));let pt=J.program;i.updateUBOMapping(Z,pt);let St=t.render.frame;a[Z.id]!==St&&(C(Z),a[Z.id]=St)}function v(Z){let J=T();Z.__bindingPointIndex=J;let nt=n.createBuffer(),pt=Z.__size,St=Z.usage;return n.bindBuffer(n.UNIFORM_BUFFER,nt),n.bufferData(n.UNIFORM_BUFFER,pt,St),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,J,nt),nt}function T(){for(let Z=0;Z<u;Z++)if(h.indexOf(Z)===-1)return h.push(Z),Z;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function C(Z){let J=s[Z.id],nt=Z.uniforms,pt=Z.__cache;n.bindBuffer(n.UNIFORM_BUFFER,J);for(let St=0,at=nt.length;St<at;St++){let ot=Array.isArray(nt[St])?nt[St]:[nt[St]];for(let Q=0,tt=ot.length;Q<tt;Q++){let H=ot[Q];if(y(H,St,Q,pt)===!0){let $=H.__offset,ct=Array.isArray(H.value)?H.value:[H.value],yt=0;for(let Bt=0;Bt<ct.length;Bt++){let kt=ct[Bt],zt=O(kt);typeof kt=="number"||typeof kt=="boolean"?(H.__data[0]=kt,n.bufferSubData(n.UNIFORM_BUFFER,$+yt,H.__data)):kt.isMatrix3?(H.__data[0]=kt.elements[0],H.__data[1]=kt.elements[1],H.__data[2]=kt.elements[2],H.__data[3]=0,H.__data[4]=kt.elements[3],H.__data[5]=kt.elements[4],H.__data[6]=kt.elements[5],H.__data[7]=0,H.__data[8]=kt.elements[6],H.__data[9]=kt.elements[7],H.__data[10]=kt.elements[8],H.__data[11]=0):(kt.toArray(H.__data,yt),yt+=zt.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,$,H.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(Z,J,nt,pt){let St=Z.value,at=J+"_"+nt;if(pt[at]===void 0)return typeof St=="number"||typeof St=="boolean"?pt[at]=St:pt[at]=St.clone(),!0;{let ot=pt[at];if(typeof St=="number"||typeof St=="boolean"){if(ot!==St)return pt[at]=St,!0}else if(ot.equals(St)===!1)return ot.copy(St),!0}return!1}function F(Z){let J=Z.uniforms,nt=0,pt=16;for(let at=0,ot=J.length;at<ot;at++){let Q=Array.isArray(J[at])?J[at]:[J[at]];for(let tt=0,H=Q.length;tt<H;tt++){let $=Q[tt],ct=Array.isArray($.value)?$.value:[$.value];for(let yt=0,Bt=ct.length;yt<Bt;yt++){let kt=ct[yt],zt=O(kt),Mt=nt%pt,Yt=Mt%zt.boundary,Zt=Mt+Yt;nt+=Yt,Zt!==0&&pt-Zt<zt.storage&&(nt+=pt-Zt),$.__data=new Float32Array(zt.storage/Float32Array.BYTES_PER_ELEMENT),$.__offset=nt,nt+=zt.storage}}}let St=nt%pt;return St>0&&(nt+=pt-St),Z.__size=nt,Z.__cache={},this}function O(Z){let J={boundary:0,storage:0};return typeof Z=="number"||typeof Z=="boolean"?(J.boundary=4,J.storage=4):Z.isVector2?(J.boundary=8,J.storage=8):Z.isVector3||Z.isColor?(J.boundary=16,J.storage=12):Z.isVector4?(J.boundary=16,J.storage=16):Z.isMatrix3?(J.boundary=48,J.storage=48):Z.isMatrix4?(J.boundary=64,J.storage=64):Z.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Z),J}function R(Z){let J=Z.target;J.removeEventListener("dispose",R);let nt=h.indexOf(J.__bindingPointIndex);h.splice(nt,1),n.deleteBuffer(s[J.id]),delete s[J.id],delete a[J.id]}function A(){for(let Z in s)n.deleteBuffer(s[Z]);h=[],s={},a={}}return{bind:m,update:p,dispose:A}}var dm=class{constructor(t={}){let{canvas:e=k1(),context:i=null,depth:s=!0,stencil:a=!1,alpha:h=!1,antialias:u=!1,premultipliedAlpha:m=!0,preserveDrawingBuffer:p=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:T=!1,reverseDepthBuffer:C=!1}=t;this.isWebGLRenderer=!0;let y;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=h;let F=new Uint32Array(4),O=new Int32Array(4),R=null,A=null,Z=[],J=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=qs,this.toneMapping=io,this.toneMappingExposure=1;let nt=this,pt=!1,St=0,at=0,ot=null,Q=-1,tt=null,H=new Hn,$=new Hn,ct=null,yt=new Xi(0),Bt=0,kt=e.width,zt=e.height,Mt=1,Yt=null,Zt=null,ut=new Hn(0,0,kt,zt),K=new Hn(0,0,kt,zt),X=!1,z=new nc,it=!1,mt=!1;this.transmissionResolutionScale=1;let dt=new Zn,Tt=new Zn,Dt=new fe,oe=new Hn,ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},pe=!1;function we(){return ot===null?Mt:1}let At=i;function Ut(c,L){return e.getContext(c,L)}try{let c={alpha:!0,depth:s,stencil:a,antialias:u,premultipliedAlpha:m,preserveDrawingBuffer:p,powerPreference:v,failIfMajorPerformanceCaveat:T};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${gf}`),e.addEventListener("webglcontextlost",jt,!1),e.addEventListener("webglcontextrestored",Ot,!1),e.addEventListener("webglcontextcreationerror",re,!1),At===null){let L="webgl2";if(At=Ut(L,c),At===null)throw Ut(L)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(c){throw console.error("THREE.WebGLRenderer: "+c.message),c}let Ct,Pe,Ee,Ce,ge,xt,et,qt,ce,xe,ne,We,Ne,ke,Je,ie,Re,Oe,fi,Ye,ci,B,Y,q;function It(){Ct=new m5(At),Ct.init(),B=new YE(At,Ct),Pe=new h5(At,Ct,t,B),Ee=new XE(At,Ct),Pe.reverseDepthBuffer&&C&&Ee.buffers.depth.setReversed(!0),Ce=new v5(At),ge=new IE,xt=new jE(At,Ct,Ee,ge,Pe,B,Ce),et=new d5(nt),qt=new f5(nt),ce=new TC(At),Y=new o5(At,ce),xe=new g5(At,ce,Ce,Y),ne=new b5(At,xe,ce,Ce),fi=new _5(At,Pe,xt),ie=new c5(ge),We=new kE(nt,et,qt,Ct,Pe,Y,ie),Ne=new $E(nt,ge),ke=new DE,Je=new VE(Ct),Oe=new a5(nt,et,qt,Ee,ne,y,m),Re=new WE(nt,ne,Pe),q=new JE(At,Ce,Pe,Ee),Ye=new l5(At,Ct,Ce),ci=new x5(At,Ct,Ce),Ce.programs=We.programs,nt.capabilities=Pe,nt.extensions=Ct,nt.properties=ge,nt.renderLists=ke,nt.shadowMap=Re,nt.state=Ee,nt.info=Ce}It();let Rt=new Ux(nt,At);this.xr=Rt,this.getContext=function(){return At},this.getContextAttributes=function(){return At.getContextAttributes()},this.forceContextLoss=function(){let c=Ct.get("WEBGL_lose_context");c&&c.loseContext()},this.forceContextRestore=function(){let c=Ct.get("WEBGL_lose_context");c&&c.restoreContext()},this.getPixelRatio=function(){return Mt},this.setPixelRatio=function(c){c!==void 0&&(Mt=c,this.setSize(kt,zt,!1))},this.getSize=function(c){return c.set(kt,zt)},this.setSize=function(c,L,V=!0){if(Rt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}kt=c,zt=L,e.width=Math.floor(c*Mt),e.height=Math.floor(L*Mt),V===!0&&(e.style.width=c+"px",e.style.height=L+"px"),this.setViewport(0,0,c,L)},this.getDrawingBufferSize=function(c){return c.set(kt*Mt,zt*Mt).floor()},this.setDrawingBufferSize=function(c,L,V){kt=c,zt=L,Mt=V,e.width=Math.floor(c*V),e.height=Math.floor(L*V),this.setViewport(0,0,c,L)},this.getCurrentViewport=function(c){return c.copy(H)},this.getViewport=function(c){return c.copy(ut)},this.setViewport=function(c,L,V,U){c.isVector4?ut.set(c.x,c.y,c.z,c.w):ut.set(c,L,V,U),Ee.viewport(H.copy(ut).multiplyScalar(Mt).round())},this.getScissor=function(c){return c.copy(K)},this.setScissor=function(c,L,V,U){c.isVector4?K.set(c.x,c.y,c.z,c.w):K.set(c,L,V,U),Ee.scissor($.copy(K).multiplyScalar(Mt).round())},this.getScissorTest=function(){return X},this.setScissorTest=function(c){Ee.setScissorTest(X=c)},this.setOpaqueSort=function(c){Yt=c},this.setTransparentSort=function(c){Zt=c},this.getClearColor=function(c){return c.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(c=!0,L=!0,V=!0){let U=0;if(c){let E=!1;if(ot!==null){let G=ot.texture.format;E=G===Df||G===Lf||G===If}if(E){let G=ot.texture.type,j=G===Ta||G===el||G===rc||G===zl||G===Ef||G===kf,wt=Oe.getClearColor(),gt=Oe.getClearAlpha(),_t=wt.r,Qt=wt.g,se=wt.b;j?(F[0]=_t,F[1]=Qt,F[2]=se,F[3]=gt,At.clearBufferuiv(At.COLOR,0,F)):(O[0]=_t,O[1]=Qt,O[2]=se,O[3]=gt,At.clearBufferiv(At.COLOR,0,O))}else U|=At.COLOR_BUFFER_BIT}L&&(U|=At.DEPTH_BUFFER_BIT),V&&(U|=At.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),At.clear(U)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",jt,!1),e.removeEventListener("webglcontextrestored",Ot,!1),e.removeEventListener("webglcontextcreationerror",re,!1),Oe.dispose(),ke.dispose(),Je.dispose(),ge.dispose(),et.dispose(),qt.dispose(),ne.dispose(),Y.dispose(),q.dispose(),We.dispose(),Rt.dispose(),Rt.removeEventListener("sessionstart",un),Rt.removeEventListener("sessionend",on),Xe.stop()};function jt(c){c.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),pt=!0}function Ot(){console.log("THREE.WebGLRenderer: Context Restored."),pt=!1;let c=Ce.autoReset,L=Re.enabled,V=Re.autoUpdate,U=Re.needsUpdate,E=Re.type;It(),Ce.autoReset=c,Re.enabled=L,Re.autoUpdate=V,Re.needsUpdate=U,Re.type=E}function re(c){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",c.statusMessage)}function Ve(c){let L=c.target;L.removeEventListener("dispose",Ve),ui(L)}function ui(c){yi(c),ge.remove(c)}function yi(c){let L=ge.get(c).programs;L!==void 0&&(L.forEach(function(V){We.releaseProgram(V)}),c.isShaderMaterial&&We.releaseShaderCache(c))}this.renderBufferDirect=function(c,L,V,U,E,G){L===null&&(L=ue);let j=E.isMesh&&E.matrixWorld.determinant()<0,wt=I(c,L,V,U,E);Ee.setMaterial(U,j);let gt=V.index,_t=1;if(U.wireframe===!0){if(gt=xe.getWireframeAttribute(V),gt===void 0)return;_t=2}let Qt=V.drawRange,se=V.attributes.position,Vt=Qt.start*_t,Wt=(Qt.start+Qt.count)*_t;G!==null&&(Vt=Math.max(Vt,G.start*_t),Wt=Math.min(Wt,(G.start+G.count)*_t)),gt!==null?(Vt=Math.max(Vt,0),Wt=Math.min(Wt,gt.count)):se!=null&&(Vt=Math.max(Vt,0),Wt=Math.min(Wt,se.count));let Nt=Wt-Vt;if(Nt<0||Nt===1/0)return;Y.setup(E,U,wt,V,gt);let Ft,vt=Ye;if(gt!==null&&(Ft=ce.get(gt),vt=ci,vt.setIndex(Ft)),E.isMesh)U.wireframe===!0?(Ee.setLineWidth(U.wireframeLinewidth*we()),vt.setMode(At.LINES)):vt.setMode(At.TRIANGLES);else if(E.isLine){let Ht=U.linewidth;Ht===void 0&&(Ht=1),Ee.setLineWidth(Ht*we()),E.isLineSegments?vt.setMode(At.LINES):E.isLineLoop?vt.setMode(At.LINE_LOOP):vt.setMode(At.LINE_STRIP)}else E.isPoints?vt.setMode(At.POINTS):E.isSprite&&vt.setMode(At.TRIANGLES);if(E.isBatchedMesh)if(E._multiDrawInstances!==null)vt.renderMultiDrawInstances(E._multiDrawStarts,E._multiDrawCounts,E._multiDrawCount,E._multiDrawInstances);else if(Ct.get("WEBGL_multi_draw"))vt.renderMultiDraw(E._multiDrawStarts,E._multiDrawCounts,E._multiDrawCount);else{let Ht=E._multiDrawStarts,me=E._multiDrawCounts,Pt=E._multiDrawCount,Qe=gt?ce.get(gt).bytesPerElement:1,Ai=ge.get(U).currentProgram.getUniforms();for(let hi=0;hi<Pt;hi++)Ai.setValue(At,"_gl_DrawID",hi),vt.render(Ht[hi]/Qe,me[hi])}else if(E.isInstancedMesh)vt.renderInstances(Vt,Nt,E.count);else if(V.isInstancedBufferGeometry){let Ht=V._maxInstanceCount!==void 0?V._maxInstanceCount:1/0,me=Math.min(V.instanceCount,Ht);vt.renderInstances(Vt,Nt,me)}else vt.render(Vt,Nt)};function oi(c,L,V){c.transparent===!0&&c.side===Ma&&c.forceSinglePass===!1?(c.side=Zs,c.needsUpdate=!0,d(c,L,V),c.side=Qa,c.needsUpdate=!0,d(c,L,V),c.side=Ma):d(c,L,V)}this.compile=function(c,L,V=null){V===null&&(V=c),A=Je.get(V),A.init(L),J.push(A),V.traverseVisible(function(E){E.isLight&&E.layers.test(L.layers)&&(A.pushLight(E),E.castShadow&&A.pushShadow(E))}),c!==V&&c.traverseVisible(function(E){E.isLight&&E.layers.test(L.layers)&&(A.pushLight(E),E.castShadow&&A.pushShadow(E))}),A.setupLights();let U=new Set;return c.traverse(function(E){if(!(E.isMesh||E.isPoints||E.isLine||E.isSprite))return;let G=E.material;if(G)if(Array.isArray(G))for(let j=0;j<G.length;j++){let wt=G[j];oi(wt,V,E),U.add(wt)}else oi(G,V,E),U.add(G)}),J.pop(),A=null,U},this.compileAsync=function(c,L,V=null){let U=this.compile(c,L,V);return new Promise(E=>{function G(){if(U.forEach(function(j){ge.get(j).currentProgram.isReady()&&U.delete(j)}),U.size===0){E(c);return}setTimeout(G,10)}Ct.get("KHR_parallel_shader_compile")!==null?G():setTimeout(G,10)})};let Oi=null;function ze(c){Oi&&Oi(c)}function un(){Xe.stop()}function on(){Xe.start()}let Xe=new a2;Xe.setAnimationLoop(ze),typeof self<"u"&&Xe.setContext(self),this.setAnimationLoop=function(c){Oi=c,Rt.setAnimationLoop(c),c===null?Xe.stop():Xe.start()},Rt.addEventListener("sessionstart",un),Rt.addEventListener("sessionend",on),this.render=function(c,L){if(L!==void 0&&L.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(pt===!0)return;if(c.matrixWorldAutoUpdate===!0&&c.updateMatrixWorld(),L.parent===null&&L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),Rt.enabled===!0&&Rt.isPresenting===!0&&(Rt.cameraAutoUpdate===!0&&Rt.updateCamera(L),L=Rt.getCamera()),c.isScene===!0&&c.onBeforeRender(nt,c,L,ot),A=Je.get(c,J.length),A.init(L),J.push(A),Tt.multiplyMatrices(L.projectionMatrix,L.matrixWorldInverse),z.setFromProjectionMatrix(Tt),mt=this.localClippingEnabled,it=ie.init(this.clippingPlanes,mt),R=ke.get(c,Z.length),R.init(),Z.push(R),Rt.enabled===!0&&Rt.isPresenting===!0){let G=nt.xr.getDepthSensingMesh();G!==null&&xi(G,L,-1/0,nt.sortObjects)}xi(c,L,0,nt.sortObjects),R.finish(),nt.sortObjects===!0&&R.sort(Yt,Zt),pe=Rt.enabled===!1||Rt.isPresenting===!1||Rt.hasDepthSensing()===!1,pe&&Oe.addToRenderList(R,c),this.info.render.frame++,it===!0&&ie.beginShadows();let V=A.state.shadowsArray;Re.render(V,c,L),it===!0&&ie.endShadows(),this.info.autoReset===!0&&this.info.reset();let U=R.opaque,E=R.transmissive;if(A.setupLights(),L.isArrayCamera){let G=L.cameras;if(E.length>0)for(let j=0,wt=G.length;j<wt;j++){let gt=G[j];f(U,E,c,gt)}pe&&Oe.render(c);for(let j=0,wt=G.length;j<wt;j++){let gt=G[j];r(R,c,gt,gt.viewport)}}else E.length>0&&f(U,E,c,L),pe&&Oe.render(c),r(R,c,L);ot!==null&&at===0&&(xt.updateMultisampleRenderTarget(ot),xt.updateRenderTargetMipmap(ot)),c.isScene===!0&&c.onAfterRender(nt,c,L),Y.resetDefaultState(),Q=-1,tt=null,J.pop(),J.length>0?(A=J[J.length-1],it===!0&&ie.setGlobalState(nt.clippingPlanes,A.state.camera)):A=null,Z.pop(),Z.length>0?R=Z[Z.length-1]:R=null};function xi(c,L,V,U){if(c.visible===!1)return;if(c.layers.test(L.layers)){if(c.isGroup)V=c.renderOrder;else if(c.isLOD)c.autoUpdate===!0&&c.update(L);else if(c.isLight)A.pushLight(c),c.castShadow&&A.pushShadow(c);else if(c.isSprite){if(!c.frustumCulled||z.intersectsSprite(c)){U&&oe.setFromMatrixPosition(c.matrixWorld).applyMatrix4(Tt);let j=ne.update(c),wt=c.material;wt.visible&&R.push(c,j,wt,V,oe.z,null)}}else if((c.isMesh||c.isLine||c.isPoints)&&(!c.frustumCulled||z.intersectsObject(c))){let j=ne.update(c),wt=c.material;if(U&&(c.boundingSphere!==void 0?(c.boundingSphere===null&&c.computeBoundingSphere(),oe.copy(c.boundingSphere.center)):(j.boundingSphere===null&&j.computeBoundingSphere(),oe.copy(j.boundingSphere.center)),oe.applyMatrix4(c.matrixWorld).applyMatrix4(Tt)),Array.isArray(wt)){let gt=j.groups;for(let _t=0,Qt=gt.length;_t<Qt;_t++){let se=gt[_t],Vt=wt[se.materialIndex];Vt&&Vt.visible&&R.push(c,j,Vt,V,oe.z,se)}}else wt.visible&&R.push(c,j,wt,V,oe.z,null)}}let G=c.children;for(let j=0,wt=G.length;j<wt;j++)xi(G[j],L,V,U)}function r(c,L,V,U){let E=c.opaque,G=c.transmissive,j=c.transparent;A.setupLightsView(V),it===!0&&ie.setGlobalState(nt.clippingPlanes,V),U&&Ee.viewport(H.copy(U)),E.length>0&&l(E,L,V),G.length>0&&l(G,L,V),j.length>0&&l(j,L,V),Ee.buffers.depth.setTest(!0),Ee.buffers.depth.setMask(!0),Ee.buffers.color.setMask(!0),Ee.setPolygonOffset(!1)}function f(c,L,V,U){if((V.isScene===!0?V.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[U.id]===void 0&&(A.state.transmissionRenderTarget[U.id]=new wa(1,1,{generateMipmaps:!0,type:Ct.has("EXT_color_buffer_half_float")||Ct.has("EXT_color_buffer_float")?ac:Ta,minFilter:tl,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:rn.workingColorSpace}));let G=A.state.transmissionRenderTarget[U.id],j=U.viewport||H;G.setSize(j.z*nt.transmissionResolutionScale,j.w*nt.transmissionResolutionScale);let wt=nt.getRenderTarget();nt.setRenderTarget(G),nt.getClearColor(yt),Bt=nt.getClearAlpha(),Bt<1&&nt.setClearColor(16777215,.5),nt.clear(),pe&&Oe.render(V);let gt=nt.toneMapping;nt.toneMapping=io;let _t=U.viewport;if(U.viewport!==void 0&&(U.viewport=void 0),A.setupLightsView(U),it===!0&&ie.setGlobalState(nt.clippingPlanes,U),l(c,V,U),xt.updateMultisampleRenderTarget(G),xt.updateRenderTargetMipmap(G),Ct.has("WEBGL_multisampled_render_to_texture")===!1){let Qt=!1;for(let se=0,Vt=L.length;se<Vt;se++){let Wt=L[se],Nt=Wt.object,Ft=Wt.geometry,vt=Wt.material,Ht=Wt.group;if(vt.side===Ma&&Nt.layers.test(U.layers)){let me=vt.side;vt.side=Zs,vt.needsUpdate=!0,o(Nt,V,U,Ft,vt,Ht),vt.side=me,vt.needsUpdate=!0,Qt=!0}}Qt===!0&&(xt.updateMultisampleRenderTarget(G),xt.updateRenderTargetMipmap(G))}nt.setRenderTarget(wt),nt.setClearColor(yt,Bt),_t!==void 0&&(U.viewport=_t),nt.toneMapping=gt}function l(c,L,V){let U=L.isScene===!0?L.overrideMaterial:null;for(let E=0,G=c.length;E<G;E++){let j=c[E],wt=j.object,gt=j.geometry,_t=U===null?j.material:U,Qt=j.group;wt.layers.test(V.layers)&&o(wt,L,V,gt,_t,Qt)}}function o(c,L,V,U,E,G){c.onBeforeRender(nt,L,V,U,E,G),c.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,c.matrixWorld),c.normalMatrix.getNormalMatrix(c.modelViewMatrix),E.onBeforeRender(nt,L,V,U,c,G),E.transparent===!0&&E.side===Ma&&E.forceSinglePass===!1?(E.side=Zs,E.needsUpdate=!0,nt.renderBufferDirect(V,L,U,E,c,G),E.side=Qa,E.needsUpdate=!0,nt.renderBufferDirect(V,L,U,E,c,G),E.side=Ma):nt.renderBufferDirect(V,L,U,E,c,G),c.onAfterRender(nt,L,V,U,E,G)}function d(c,L,V){L.isScene!==!0&&(L=ue);let U=ge.get(c),E=A.state.lights,G=A.state.shadowsArray,j=E.state.version,wt=We.getParameters(c,E.state,G,L,V),gt=We.getProgramCacheKey(wt),_t=U.programs;U.environment=c.isMeshStandardMaterial?L.environment:null,U.fog=L.fog,U.envMap=(c.isMeshStandardMaterial?qt:et).get(c.envMap||U.environment),U.envMapRotation=U.environment!==null&&c.envMap===null?L.environmentRotation:c.envMapRotation,_t===void 0&&(c.addEventListener("dispose",Ve),_t=new Map,U.programs=_t);let Qt=_t.get(gt);if(Qt!==void 0){if(U.currentProgram===Qt&&U.lightsStateVersion===j)return _(c,wt),Qt}else wt.uniforms=We.getUniforms(c),c.onBeforeCompile(wt,nt),Qt=We.acquireProgram(wt,gt),_t.set(gt,Qt),U.uniforms=wt.uniforms;let se=U.uniforms;return(!c.isShaderMaterial&&!c.isRawShaderMaterial||c.clipping===!0)&&(se.clippingPlanes=ie.uniform),_(c,wt),U.needsLights=M(c),U.lightsStateVersion=j,U.needsLights&&(se.ambientLightColor.value=E.state.ambient,se.lightProbe.value=E.state.probe,se.directionalLights.value=E.state.directional,se.directionalLightShadows.value=E.state.directionalShadow,se.spotLights.value=E.state.spot,se.spotLightShadows.value=E.state.spotShadow,se.rectAreaLights.value=E.state.rectArea,se.ltc_1.value=E.state.rectAreaLTC1,se.ltc_2.value=E.state.rectAreaLTC2,se.pointLights.value=E.state.point,se.pointLightShadows.value=E.state.pointShadow,se.hemisphereLights.value=E.state.hemi,se.directionalShadowMap.value=E.state.directionalShadowMap,se.directionalShadowMatrix.value=E.state.directionalShadowMatrix,se.spotShadowMap.value=E.state.spotShadowMap,se.spotLightMatrix.value=E.state.spotLightMatrix,se.spotLightMap.value=E.state.spotLightMap,se.pointShadowMap.value=E.state.pointShadowMap,se.pointShadowMatrix.value=E.state.pointShadowMatrix),U.currentProgram=Qt,U.uniformsList=null,Qt}function x(c){if(c.uniformsList===null){let L=c.currentProgram.getUniforms();c.uniformsList=cc.seqWithValue(L.seq,c.uniforms)}return c.uniformsList}function _(c,L){let V=ge.get(c);V.outputColorSpace=L.outputColorSpace,V.batching=L.batching,V.batchingColor=L.batchingColor,V.instancing=L.instancing,V.instancingColor=L.instancingColor,V.instancingMorph=L.instancingMorph,V.skinning=L.skinning,V.morphTargets=L.morphTargets,V.morphNormals=L.morphNormals,V.morphColors=L.morphColors,V.morphTargetsCount=L.morphTargetsCount,V.numClippingPlanes=L.numClippingPlanes,V.numIntersection=L.numClipIntersection,V.vertexAlphas=L.vertexAlphas,V.vertexTangents=L.vertexTangents,V.toneMapping=L.toneMapping}function I(c,L,V,U,E){L.isScene!==!0&&(L=ue),xt.resetTextureUnits();let G=L.fog,j=U.isMeshStandardMaterial?L.environment:null,wt=ot===null?nt.outputColorSpace:ot.isXRRenderTarget===!0?ot.texture.colorSpace:Fl,gt=(U.isMeshStandardMaterial?qt:et).get(U.envMap||j),_t=U.vertexColors===!0&&!!V.attributes.color&&V.attributes.color.itemSize===4,Qt=!!V.attributes.tangent&&(!!U.normalMap||U.anisotropy>0),se=!!V.morphAttributes.position,Vt=!!V.morphAttributes.normal,Wt=!!V.morphAttributes.color,Nt=io;U.toneMapped&&(ot===null||ot.isXRRenderTarget===!0)&&(Nt=nt.toneMapping);let Ft=V.morphAttributes.position||V.morphAttributes.normal||V.morphAttributes.color,vt=Ft!==void 0?Ft.length:0,Ht=ge.get(U),me=A.state.lights;if(it===!0&&(mt===!0||c!==tt)){let bi=c===tt&&U.id===Q;ie.setState(U,c,bi)}let Pt=!1;U.version===Ht.__version?(Ht.needsLights&&Ht.lightsStateVersion!==me.state.version||Ht.outputColorSpace!==wt||E.isBatchedMesh&&Ht.batching===!1||!E.isBatchedMesh&&Ht.batching===!0||E.isBatchedMesh&&Ht.batchingColor===!0&&E.colorTexture===null||E.isBatchedMesh&&Ht.batchingColor===!1&&E.colorTexture!==null||E.isInstancedMesh&&Ht.instancing===!1||!E.isInstancedMesh&&Ht.instancing===!0||E.isSkinnedMesh&&Ht.skinning===!1||!E.isSkinnedMesh&&Ht.skinning===!0||E.isInstancedMesh&&Ht.instancingColor===!0&&E.instanceColor===null||E.isInstancedMesh&&Ht.instancingColor===!1&&E.instanceColor!==null||E.isInstancedMesh&&Ht.instancingMorph===!0&&E.morphTexture===null||E.isInstancedMesh&&Ht.instancingMorph===!1&&E.morphTexture!==null||Ht.envMap!==gt||U.fog===!0&&Ht.fog!==G||Ht.numClippingPlanes!==void 0&&(Ht.numClippingPlanes!==ie.numPlanes||Ht.numIntersection!==ie.numIntersection)||Ht.vertexAlphas!==_t||Ht.vertexTangents!==Qt||Ht.morphTargets!==se||Ht.morphNormals!==Vt||Ht.morphColors!==Wt||Ht.toneMapping!==Nt||Ht.morphTargetsCount!==vt)&&(Pt=!0):(Pt=!0,Ht.__version=U.version);let Qe=Ht.currentProgram;Pt===!0&&(Qe=d(U,L,E));let Ai=!1,hi=!1,Pi=!1,ti=Qe.getUniforms(),wi=Ht.uniforms;if(Ee.useProgram(Qe.program)&&(Ai=!0,hi=!0,Pi=!0),U.id!==Q&&(Q=U.id,hi=!0),Ai||tt!==c){Ee.buffers.depth.getReversed()?(dt.copy(c.projectionMatrix),L1(dt),D1(dt),ti.setValue(At,"projectionMatrix",dt)):ti.setValue(At,"projectionMatrix",c.projectionMatrix),ti.setValue(At,"viewMatrix",c.matrixWorldInverse);let de=ti.map.cameraPosition;de!==void 0&&de.setValue(At,Dt.setFromMatrixPosition(c.matrixWorld)),Pe.logarithmicDepthBuffer&&ti.setValue(At,"logDepthBufFC",2/(Math.log(c.far+1)/Math.LN2)),(U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial)&&ti.setValue(At,"isOrthographic",c.isOrthographicCamera===!0),tt!==c&&(tt=c,hi=!0,Pi=!0)}if(E.isSkinnedMesh){ti.setOptional(At,E,"bindMatrix"),ti.setOptional(At,E,"bindMatrixInverse");let bi=E.skeleton;bi&&(bi.boneTexture===null&&bi.computeBoneTexture(),ti.setValue(At,"boneTexture",bi.boneTexture,xt))}E.isBatchedMesh&&(ti.setOptional(At,E,"batchingTexture"),ti.setValue(At,"batchingTexture",E._matricesTexture,xt),ti.setOptional(At,E,"batchingIdTexture"),ti.setValue(At,"batchingIdTexture",E._indirectTexture,xt),ti.setOptional(At,E,"batchingColorTexture"),E._colorsTexture!==null&&ti.setValue(At,"batchingColorTexture",E._colorsTexture,xt));let mi=V.morphAttributes;if((mi.position!==void 0||mi.normal!==void 0||mi.color!==void 0)&&fi.update(E,V,Qe),(hi||Ht.receiveShadow!==E.receiveShadow)&&(Ht.receiveShadow=E.receiveShadow,ti.setValue(At,"receiveShadow",E.receiveShadow)),U.isMeshGouraudMaterial&&U.envMap!==null&&(wi.envMap.value=gt,wi.flipEnvMap.value=gt.isCubeTexture&&gt.isRenderTargetTexture===!1?-1:1),U.isMeshStandardMaterial&&U.envMap===null&&L.environment!==null&&(wi.envMapIntensity.value=L.environmentIntensity),hi&&(ti.setValue(At,"toneMappingExposure",nt.toneMappingExposure),Ht.needsLights&&N(wi,Pi),G&&U.fog===!0&&Ne.refreshFogUniforms(wi,G),Ne.refreshMaterialUniforms(wi,U,Mt,zt,A.state.transmissionRenderTarget[c.id]),cc.upload(At,x(Ht),wi,xt)),U.isShaderMaterial&&U.uniformsNeedUpdate===!0&&(cc.upload(At,x(Ht),wi,xt),U.uniformsNeedUpdate=!1),U.isSpriteMaterial&&ti.setValue(At,"center",E.center),ti.setValue(At,"modelViewMatrix",E.modelViewMatrix),ti.setValue(At,"normalMatrix",E.normalMatrix),ti.setValue(At,"modelMatrix",E.matrixWorld),U.isShaderMaterial||U.isRawShaderMaterial){let bi=U.uniformsGroups;for(let de=0,An=bi.length;de<An;de++){let xn=bi[de];q.update(xn,Qe),q.bind(xn,Qe)}}return Qe}function N(c,L){c.ambientLightColor.needsUpdate=L,c.lightProbe.needsUpdate=L,c.directionalLights.needsUpdate=L,c.directionalLightShadows.needsUpdate=L,c.pointLights.needsUpdate=L,c.pointLightShadows.needsUpdate=L,c.spotLights.needsUpdate=L,c.spotLightShadows.needsUpdate=L,c.rectAreaLights.needsUpdate=L,c.hemisphereLights.needsUpdate=L}function M(c){return c.isMeshLambertMaterial||c.isMeshToonMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.isShadowMaterial||c.isShaderMaterial&&c.lights===!0}this.getActiveCubeFace=function(){return St},this.getActiveMipmapLevel=function(){return at},this.getRenderTarget=function(){return ot},this.setRenderTargetTextures=function(c,L,V){ge.get(c.texture).__webglTexture=L,ge.get(c.depthTexture).__webglTexture=V;let U=ge.get(c);U.__hasExternalTextures=!0,U.__autoAllocateDepthBuffer=V===void 0,U.__autoAllocateDepthBuffer||Ct.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),U.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(c,L){let V=ge.get(c);V.__webglFramebuffer=L,V.__useDefaultFramebuffer=L===void 0};let w=At.createFramebuffer();this.setRenderTarget=function(c,L=0,V=0){ot=c,St=L,at=V;let U=!0,E=null,G=!1,j=!1;if(c){let gt=ge.get(c);if(gt.__useDefaultFramebuffer!==void 0)Ee.bindFramebuffer(At.FRAMEBUFFER,null),U=!1;else if(gt.__webglFramebuffer===void 0)xt.setupRenderTarget(c);else if(gt.__hasExternalTextures)xt.rebindTextures(c,ge.get(c.texture).__webglTexture,ge.get(c.depthTexture).__webglTexture);else if(c.depthBuffer){let se=c.depthTexture;if(gt.__boundDepthTexture!==se){if(se!==null&&ge.has(se)&&(c.width!==se.image.width||c.height!==se.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");xt.setupDepthRenderbuffer(c)}}let _t=c.texture;(_t.isData3DTexture||_t.isDataArrayTexture||_t.isCompressedArrayTexture)&&(j=!0);let Qt=ge.get(c).__webglFramebuffer;c.isWebGLCubeRenderTarget?(Array.isArray(Qt[L])?E=Qt[L][V]:E=Qt[L],G=!0):c.samples>0&&xt.useMultisampledRTT(c)===!1?E=ge.get(c).__webglMultisampledFramebuffer:Array.isArray(Qt)?E=Qt[V]:E=Qt,H.copy(c.viewport),$.copy(c.scissor),ct=c.scissorTest}else H.copy(ut).multiplyScalar(Mt).floor(),$.copy(K).multiplyScalar(Mt).floor(),ct=X;if(V!==0&&(E=w),Ee.bindFramebuffer(At.FRAMEBUFFER,E)&&U&&Ee.drawBuffers(c,E),Ee.viewport(H),Ee.scissor($),Ee.setScissorTest(ct),G){let gt=ge.get(c.texture);At.framebufferTexture2D(At.FRAMEBUFFER,At.COLOR_ATTACHMENT0,At.TEXTURE_CUBE_MAP_POSITIVE_X+L,gt.__webglTexture,V)}else if(j){let gt=ge.get(c.texture),_t=L;At.framebufferTextureLayer(At.FRAMEBUFFER,At.COLOR_ATTACHMENT0,gt.__webglTexture,V,_t)}else if(c!==null&&V!==0){let gt=ge.get(c.texture);At.framebufferTexture2D(At.FRAMEBUFFER,At.COLOR_ATTACHMENT0,At.TEXTURE_2D,gt.__webglTexture,V)}Q=-1},this.readRenderTargetPixels=function(c,L,V,U,E,G,j){if(!(c&&c.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let wt=ge.get(c).__webglFramebuffer;if(c.isWebGLCubeRenderTarget&&j!==void 0&&(wt=wt[j]),wt){Ee.bindFramebuffer(At.FRAMEBUFFER,wt);try{let gt=c.texture,_t=gt.format,Qt=gt.type;if(!Pe.textureFormatReadable(_t)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pe.textureTypeReadable(Qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}L>=0&&L<=c.width-U&&V>=0&&V<=c.height-E&&At.readPixels(L,V,U,E,B.convert(_t),B.convert(Qt),G)}finally{let gt=ot!==null?ge.get(ot).__webglFramebuffer:null;Ee.bindFramebuffer(At.FRAMEBUFFER,gt)}}},this.readRenderTargetPixelsAsync=function(c,L,V,U,E,G,j){return uu(this,null,function*(){if(!(c&&c.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let wt=ge.get(c).__webglFramebuffer;if(c.isWebGLCubeRenderTarget&&j!==void 0&&(wt=wt[j]),wt){let gt=c.texture,_t=gt.format,Qt=gt.type;if(!Pe.textureFormatReadable(_t))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pe.textureTypeReadable(Qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(L>=0&&L<=c.width-U&&V>=0&&V<=c.height-E){Ee.bindFramebuffer(At.FRAMEBUFFER,wt);let se=At.createBuffer();At.bindBuffer(At.PIXEL_PACK_BUFFER,se),At.bufferData(At.PIXEL_PACK_BUFFER,G.byteLength,At.STREAM_READ),At.readPixels(L,V,U,E,B.convert(_t),B.convert(Qt),0);let Vt=ot!==null?ge.get(ot).__webglFramebuffer:null;Ee.bindFramebuffer(At.FRAMEBUFFER,Vt);let Wt=At.fenceSync(At.SYNC_GPU_COMMANDS_COMPLETE,0);return At.flush(),yield I1(At,Wt,4),At.bindBuffer(At.PIXEL_PACK_BUFFER,se),At.getBufferSubData(At.PIXEL_PACK_BUFFER,0,G),At.deleteBuffer(se),At.deleteSync(Wt),G}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(c,L=null,V=0){c.isTexture!==!0&&(Ul("WebGLRenderer: copyFramebufferToTexture function signature has changed."),L=arguments[0]||null,c=arguments[1]);let U=Math.pow(2,-V),E=Math.floor(c.image.width*U),G=Math.floor(c.image.height*U),j=L!==null?L.x:0,wt=L!==null?L.y:0;xt.setTexture2D(c,0),At.copyTexSubImage2D(At.TEXTURE_2D,V,0,0,j,wt,E,G),Ee.unbindTexture()};let b=At.createFramebuffer(),P=At.createFramebuffer();this.copyTextureToTexture=function(c,L,V=null,U=null,E=0,G=null){c.isTexture!==!0&&(Ul("WebGLRenderer: copyTextureToTexture function signature has changed."),U=arguments[0]||null,c=arguments[1],L=arguments[2],G=arguments[3]||0,V=null),G===null&&(E!==0?(Ul("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),G=E,E=0):G=0);let j,wt,gt,_t,Qt,se,Vt,Wt,Nt,Ft=c.isCompressedTexture?c.mipmaps[G]:c.image;if(V!==null)j=V.max.x-V.min.x,wt=V.max.y-V.min.y,gt=V.isBox3?V.max.z-V.min.z:1,_t=V.min.x,Qt=V.min.y,se=V.isBox3?V.min.z:0;else{let mi=Math.pow(2,-E);j=Math.floor(Ft.width*mi),wt=Math.floor(Ft.height*mi),c.isDataArrayTexture?gt=Ft.depth:c.isData3DTexture?gt=Math.floor(Ft.depth*mi):gt=1,_t=0,Qt=0,se=0}U!==null?(Vt=U.x,Wt=U.y,Nt=U.z):(Vt=0,Wt=0,Nt=0);let vt=B.convert(L.format),Ht=B.convert(L.type),me;L.isData3DTexture?(xt.setTexture3D(L,0),me=At.TEXTURE_3D):L.isDataArrayTexture||L.isCompressedArrayTexture?(xt.setTexture2DArray(L,0),me=At.TEXTURE_2D_ARRAY):(xt.setTexture2D(L,0),me=At.TEXTURE_2D),At.pixelStorei(At.UNPACK_FLIP_Y_WEBGL,L.flipY),At.pixelStorei(At.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),At.pixelStorei(At.UNPACK_ALIGNMENT,L.unpackAlignment);let Pt=At.getParameter(At.UNPACK_ROW_LENGTH),Qe=At.getParameter(At.UNPACK_IMAGE_HEIGHT),Ai=At.getParameter(At.UNPACK_SKIP_PIXELS),hi=At.getParameter(At.UNPACK_SKIP_ROWS),Pi=At.getParameter(At.UNPACK_SKIP_IMAGES);At.pixelStorei(At.UNPACK_ROW_LENGTH,Ft.width),At.pixelStorei(At.UNPACK_IMAGE_HEIGHT,Ft.height),At.pixelStorei(At.UNPACK_SKIP_PIXELS,_t),At.pixelStorei(At.UNPACK_SKIP_ROWS,Qt),At.pixelStorei(At.UNPACK_SKIP_IMAGES,se);let ti=c.isDataArrayTexture||c.isData3DTexture,wi=L.isDataArrayTexture||L.isData3DTexture;if(c.isDepthTexture){let mi=ge.get(c),bi=ge.get(L),de=ge.get(mi.__renderTarget),An=ge.get(bi.__renderTarget);Ee.bindFramebuffer(At.READ_FRAMEBUFFER,de.__webglFramebuffer),Ee.bindFramebuffer(At.DRAW_FRAMEBUFFER,An.__webglFramebuffer);for(let xn=0;xn<gt;xn++)ti&&(At.framebufferTextureLayer(At.READ_FRAMEBUFFER,At.COLOR_ATTACHMENT0,ge.get(c).__webglTexture,E,se+xn),At.framebufferTextureLayer(At.DRAW_FRAMEBUFFER,At.COLOR_ATTACHMENT0,ge.get(L).__webglTexture,G,Nt+xn)),At.blitFramebuffer(_t,Qt,j,wt,Vt,Wt,j,wt,At.DEPTH_BUFFER_BIT,At.NEAREST);Ee.bindFramebuffer(At.READ_FRAMEBUFFER,null),Ee.bindFramebuffer(At.DRAW_FRAMEBUFFER,null)}else if(E!==0||c.isRenderTargetTexture||ge.has(c)){let mi=ge.get(c),bi=ge.get(L);Ee.bindFramebuffer(At.READ_FRAMEBUFFER,b),Ee.bindFramebuffer(At.DRAW_FRAMEBUFFER,P);for(let de=0;de<gt;de++)ti?At.framebufferTextureLayer(At.READ_FRAMEBUFFER,At.COLOR_ATTACHMENT0,mi.__webglTexture,E,se+de):At.framebufferTexture2D(At.READ_FRAMEBUFFER,At.COLOR_ATTACHMENT0,At.TEXTURE_2D,mi.__webglTexture,E),wi?At.framebufferTextureLayer(At.DRAW_FRAMEBUFFER,At.COLOR_ATTACHMENT0,bi.__webglTexture,G,Nt+de):At.framebufferTexture2D(At.DRAW_FRAMEBUFFER,At.COLOR_ATTACHMENT0,At.TEXTURE_2D,bi.__webglTexture,G),E!==0?At.blitFramebuffer(_t,Qt,j,wt,Vt,Wt,j,wt,At.COLOR_BUFFER_BIT,At.NEAREST):wi?At.copyTexSubImage3D(me,G,Vt,Wt,Nt+de,_t,Qt,j,wt):At.copyTexSubImage2D(me,G,Vt,Wt,_t,Qt,j,wt);Ee.bindFramebuffer(At.READ_FRAMEBUFFER,null),Ee.bindFramebuffer(At.DRAW_FRAMEBUFFER,null)}else wi?c.isDataTexture||c.isData3DTexture?At.texSubImage3D(me,G,Vt,Wt,Nt,j,wt,gt,vt,Ht,Ft.data):L.isCompressedArrayTexture?At.compressedTexSubImage3D(me,G,Vt,Wt,Nt,j,wt,gt,vt,Ft.data):At.texSubImage3D(me,G,Vt,Wt,Nt,j,wt,gt,vt,Ht,Ft):c.isDataTexture?At.texSubImage2D(At.TEXTURE_2D,G,Vt,Wt,j,wt,vt,Ht,Ft.data):c.isCompressedTexture?At.compressedTexSubImage2D(At.TEXTURE_2D,G,Vt,Wt,Ft.width,Ft.height,vt,Ft.data):At.texSubImage2D(At.TEXTURE_2D,G,Vt,Wt,j,wt,vt,Ht,Ft);At.pixelStorei(At.UNPACK_ROW_LENGTH,Pt),At.pixelStorei(At.UNPACK_IMAGE_HEIGHT,Qe),At.pixelStorei(At.UNPACK_SKIP_PIXELS,Ai),At.pixelStorei(At.UNPACK_SKIP_ROWS,hi),At.pixelStorei(At.UNPACK_SKIP_IMAGES,Pi),G===0&&L.generateMipmaps&&At.generateMipmap(me),Ee.unbindTexture()},this.copyTextureToTexture3D=function(c,L,V=null,U=null,E=0){return c.isTexture!==!0&&(Ul("WebGLRenderer: copyTextureToTexture3D function signature has changed."),V=arguments[0]||null,U=arguments[1]||null,c=arguments[2],L=arguments[3],E=arguments[4]||0),Ul('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(c,L,V,U,E)},this.initRenderTarget=function(c){ge.get(c).__webglFramebuffer===void 0&&xt.setupRenderTarget(c)},this.initTexture=function(c){c.isCubeTexture?xt.setTextureCube(c,0):c.isData3DTexture?xt.setTexture3D(c,0):c.isDataArrayTexture||c.isCompressedArrayTexture?xt.setTexture2DArray(c,0):xt.setTexture2D(c,0),Ee.unbindTexture()},this.resetState=function(){St=0,at=0,ot=null,Ee.reset(),Y.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ba}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorspace=rn._getDrawingBufferColorSpace(t),e.unpackColorSpace=rn._getUnpackColorSpace()}};var d2={type:"change"},Xx={type:"start"},p2={type:"end"},pm=new ec,u2=new Br,tk=Math.cos(70*wx.DEG2RAD),ms=new fe,lr=2*Math.PI,wn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Hx=1e-6,fm=class extends Cd{constructor(t,e=null){super(t,e),this.state=wn.NONE,this.enabled=!0,this.target=new fe,this.cursor=new fe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Jo.ROTATE,MIDDLE:Jo.DOLLY,RIGHT:Jo.PAN},this.touches={ONE:Qo.ROTATE,TWO:Qo.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new fe,this._lastQuaternion=new Vr,this._lastTargetPosition=new fe,this._quat=new Vr().setFromUnitVectors(t.up,new fe(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new sc,this._sphericalDelta=new sc,this._scale=1,this._panOffset=new fe,this._rotateStart=new zi,this._rotateEnd=new zi,this._rotateDelta=new zi,this._panStart=new zi,this._panEnd=new zi,this._panDelta=new zi,this._dollyStart=new zi,this._dollyEnd=new zi,this._dollyDelta=new zi,this._dollyDirection=new fe,this._mouse=new zi,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=ik.bind(this),this._onPointerDown=ek.bind(this),this._onPointerUp=nk.bind(this),this._onContextMenu=ck.bind(this),this._onMouseWheel=ak.bind(this),this._onKeyDown=ok.bind(this),this._onTouchStart=lk.bind(this),this._onTouchMove=hk.bind(this),this._onMouseDown=sk.bind(this),this._onMouseMove=rk.bind(this),this._interceptControlDown=dk.bind(this),this._interceptControlUp=uk.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(d2),this.update(),this.state=wn.NONE}update(t=null){let e=this.object.position;ms.copy(e).sub(this.target),ms.applyQuaternion(this._quat),this._spherical.setFromVector3(ms),this.autoRotate&&this.state===wn.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,s=this.maxAzimuthAngle;isFinite(i)&&isFinite(s)&&(i<-Math.PI?i+=lr:i>Math.PI&&(i-=lr),s<-Math.PI?s+=lr:s>Math.PI&&(s-=lr),i<=s?this._spherical.theta=Math.max(i,Math.min(s,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+s)/2?Math.max(i,this._spherical.theta):Math.min(s,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let a=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let h=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),a=h!=this._spherical.radius}if(ms.setFromSpherical(this._spherical),ms.applyQuaternion(this._quatInverse),e.copy(this.target).add(ms),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let h=null;if(this.object.isPerspectiveCamera){let u=ms.length();h=this._clampDistance(u*this._scale);let m=u-h;this.object.position.addScaledVector(this._dollyDirection,m),this.object.updateMatrixWorld(),a=!!m}else if(this.object.isOrthographicCamera){let u=new fe(this._mouse.x,this._mouse.y,0);u.unproject(this.object);let m=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),a=m!==this.object.zoom;let p=new fe(this._mouse.x,this._mouse.y,0);p.unproject(this.object),this.object.position.sub(p).add(u),this.object.updateMatrixWorld(),h=ms.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;h!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(h).add(this.object.position):(pm.origin.copy(this.object.position),pm.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(pm.direction))<tk?this.object.lookAt(this.target):(u2.setFromNormalAndCoplanarPoint(this.object.up,this.target),pm.intersectPlane(u2,this.target))))}else if(this.object.isOrthographicCamera){let h=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),h!==this.object.zoom&&(this.object.updateProjectionMatrix(),a=!0)}return this._scale=1,this._performCursorZoom=!1,a||this._lastPosition.distanceToSquared(this.object.position)>Hx||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Hx||this._lastTargetPosition.distanceToSquared(this.target)>Hx?(this.dispatchEvent(d2),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?lr/60*this.autoRotateSpeed*t:lr/60/60*this.autoRotateSpeed}_getZoomScale(t){let e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){ms.setFromMatrixColumn(e,0),ms.multiplyScalar(-t),this._panOffset.add(ms)}_panUp(t,e){this.screenSpacePanning===!0?ms.setFromMatrixColumn(e,1):(ms.setFromMatrixColumn(e,0),ms.crossVectors(this.object.up,ms)),ms.multiplyScalar(t),this._panOffset.add(ms)}_pan(t,e){let i=this.domElement;if(this.object.isPerspectiveCamera){let s=this.object.position;ms.copy(s).sub(this.target);let a=ms.length();a*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*a/i.clientHeight,this.object.matrix),this._panUp(2*e*a/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),s=t-i.left,a=e-i.top,h=i.width,u=i.height;this._mouse.x=s/h*2-1,this._mouse.y=-(a/u)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(lr*this._rotateDelta.x/e.clientHeight),this._rotateUp(lr*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(lr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-lr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(lr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-lr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._rotateStart.set(i,s)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._panStart.set(i,s)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,s=t.pageY-e.y,a=Math.sqrt(i*i+s*s);this._dollyStart.set(0,a)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{let i=this._getSecondPointerPosition(t),s=.5*(t.pageX+i.x),a=.5*(t.pageY+i.y);this._rotateEnd.set(s,a)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(lr*this._rotateDelta.x/e.clientHeight),this._rotateUp(lr*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),s=.5*(t.pageY+e.y);this._panEnd.set(i,s)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),i=t.pageX-e.x,s=t.pageY-e.y,a=Math.sqrt(i*i+s*s);this._dollyEnd.set(0,a),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let h=(t.pageX+e.x)*.5,u=(t.pageY+e.y)*.5;this._updateZoomParameters(h,u)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new zi,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function ek(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function ik(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function nk(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(p2),this.state=wn.NONE;break;case 1:let t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function sk(n){let t;switch(n.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Jo.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=wn.DOLLY;break;case Jo.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=wn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=wn.ROTATE}break;case Jo.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=wn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=wn.PAN}break;default:this.state=wn.NONE}this.state!==wn.NONE&&this.dispatchEvent(Xx)}function rk(n){switch(this.state){case wn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case wn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case wn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function ak(n){this.enabled===!1||this.enableZoom===!1||this.state!==wn.NONE||(n.preventDefault(),this.dispatchEvent(Xx),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(p2))}function ok(n){this.enabled!==!1&&this._handleKeyDown(n)}function lk(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Qo.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=wn.TOUCH_ROTATE;break;case Qo.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=wn.TOUCH_PAN;break;default:this.state=wn.NONE}break;case 2:switch(this.touches.TWO){case Qo.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=wn.TOUCH_DOLLY_PAN;break;case Qo.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=wn.TOUCH_DOLLY_ROTATE;break;default:this.state=wn.NONE}break;default:this.state=wn.NONE}this.state!==wn.NONE&&this.dispatchEvent(Xx)}function hk(n){switch(this._trackPointer(n),this.state){case wn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case wn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case wn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case wn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=wn.NONE}}function ck(n){this.enabled!==!1&&n.preventDefault()}function dk(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function uk(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var mm=class extends am{constructor(t){super(t)}load(t,e,i,s){let a=this,h=new wd(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,function(u){try{e(a.parse(u))}catch(m){s?s(m):console.error(m),a.manager.itemError(t)}},i,s)}parse(t){function e(p){let v=new DataView(p),T=32/8*3+32/8*3*3+16/8,C=v.getUint32(80,!0);if(80+32/8+C*T===v.byteLength)return!0;let F=[115,111,108,105,100];for(let O=0;O<5;O++)if(i(F,v,O))return!1;return!0}function i(p,v,T){for(let C=0,y=p.length;C<y;C++)if(p[C]!==v.getUint8(T+C))return!1;return!0}function s(p){let v=new DataView(p),T=v.getUint32(80,!0),C,y,F,O=!1,R,A,Z,J,nt;for(let H=0;H<70;H++)v.getUint32(H,!1)==1129270351&&v.getUint8(H+4)==82&&v.getUint8(H+5)==61&&(O=!0,R=new Float32Array(T*3*3),A=v.getUint8(H+6)/255,Z=v.getUint8(H+7)/255,J=v.getUint8(H+8)/255,nt=v.getUint8(H+9)/255);let pt=84,St=12*4+2,at=new aa,ot=new Float32Array(T*3*3),Q=new Float32Array(T*3*3),tt=new Xi;for(let H=0;H<T;H++){let $=pt+H*St,ct=v.getFloat32($,!0),yt=v.getFloat32($+4,!0),Bt=v.getFloat32($+8,!0);if(O){let kt=v.getUint16($+48,!0);(kt&32768)===0?(C=(kt&31)/31,y=(kt>>5&31)/31,F=(kt>>10&31)/31):(C=A,y=Z,F=J)}for(let kt=1;kt<=3;kt++){let zt=$+kt*12,Mt=H*3*3+(kt-1)*3;ot[Mt]=v.getFloat32(zt,!0),ot[Mt+1]=v.getFloat32(zt+4,!0),ot[Mt+2]=v.getFloat32(zt+8,!0),Q[Mt]=ct,Q[Mt+1]=yt,Q[Mt+2]=Bt,O&&(tt.setRGB(C,y,F,qs),R[Mt]=tt.r,R[Mt+1]=tt.g,R[Mt+2]=tt.b)}}return at.setAttribute("position",new Ts(ot,3)),at.setAttribute("normal",new Ts(Q,3)),O&&(at.setAttribute("color",new Ts(R,3)),at.hasColors=!0,at.alpha=nt),at}function a(p){let v=new aa,T=/solid([\s\S]*?)endsolid/g,C=/facet([\s\S]*?)endfacet/g,y=/solid\s(.+)/,F=0,O=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,R=new RegExp("vertex"+O+O+O,"g"),A=new RegExp("normal"+O+O+O,"g"),Z=[],J=[],nt=[],pt=new fe,St,at=0,ot=0,Q=0;for(;(St=T.exec(p))!==null;){ot=Q;let tt=St[0],H=(St=y.exec(tt))!==null?St[1]:"";for(nt.push(H);(St=C.exec(tt))!==null;){let yt=0,Bt=0,kt=St[0];for(;(St=A.exec(kt))!==null;)pt.x=parseFloat(St[1]),pt.y=parseFloat(St[2]),pt.z=parseFloat(St[3]),Bt++;for(;(St=R.exec(kt))!==null;)Z.push(parseFloat(St[1]),parseFloat(St[2]),parseFloat(St[3])),J.push(pt.x,pt.y,pt.z),yt++,Q++;Bt!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+F),yt!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+F),F++}let $=ot,ct=Q-ot;v.userData.groupNames=nt,v.addGroup($,ct,at),at++}return v.setAttribute("position",new br(Z,3)),v.setAttribute("normal",new br(J,3)),v}function h(p){return typeof p!="string"?new TextDecoder().decode(p):p}function u(p){if(typeof p=="string"){let v=new Uint8Array(p.length);for(let T=0;T<p.length;T++)v[T]=p.charCodeAt(T)&255;return v.buffer||v}else return p}let m=u(t);return e(m)?s(m):a(h(t))}};var f2="0xff131313",m2="0xffff0000",g2="0xff007700",x2="0xff0000aa",v2="0xffffffff",_2="0xff8800aa",b2="0xffff66aa",y2="0xffffca28",w2="0xffda660b",S2="0xff47ffff";var M2=4473924;var Nd=16777215;var gm=class n{selectedColorSubject=new ir("#da660b");selectedModelSubject=new ir("");selectedColor$=this.selectedColorSubject.asObservable();selectedModel$=this.selectedModelSubject.asObservable();constructor(){}colorSet=[{name:"black",code:f2},{name:"red",code:m2},{name:"green",code:g2},{name:"blue",code:x2},{name:"white",code:v2},{name:"purple",code:_2},{name:"pink",code:b2},{name:"yellow",code:y2},{name:"orange",code:w2},{name:"lightBlue",code:S2}];modelList=[{filename:"stl/3dbenchy.stl",thumb:"images/thumbnails/3dbenchy.jpg"},{filename:"stl/beard-skull.stl",thumb:"images/thumbnails/beard-skull.jpeg"},{filename:"stl/xyz-cube.stl",thumb:"images/thumbnails/xyz-cube.png"}];get colors(){return this.colorSet}get models(){return this.modelList}selectColor(t){this.selectedColorSubject.next(t)}selectModel(t){this.selectedModelSubject.next(t)}resetModelAndColor(){this.selectedModelSubject.next(""),this.selectedColorSubject.next("#da660b")}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Hi({token:n,factory:n.\u0275fac,providedIn:"root"})};var fk=["productView"],mk=(n,t)=>t.filename;function gk(n,t){if(n&1){let e=cn();Xt(0,"img",12),ii("click",function(){let s=Ti(e).$implicit,a=$e();return Ci(a.selectModel(s.filename))}),Jt()}if(n&2){let e=t.$implicit,i=$e();Bn("selected",e.filename===i.selectedModel()),qe("src",e.thumb,dl)}}function xk(n,t){if(n&1){let e=cn();Xt(0,"div",13),ii("click",function(){let s=Ti(e).$implicit,a=$e();return Ci(a.selectedModel()?a.selectColor(s.code):null)}),Jt()}if(n&2){let e=t.$implicit,i=$e();Wn("background-color",e),Bn("selected",i.isActiveColor(e))("disabled",!i.selectedModel())}}var xm=class n{constructor(t){this.stlViewerService=t}destroy$=new pi;productViewRef=gu("productView");scene;renderer;pivot;camera;mesh;file=Li(void 0);selectedModel=Li(void 0);selectedColor=Li(void 0);colors=[];modelList=[];ngOnInit(){this.colors=this.stlViewerService.colors,this.modelList=this.stlViewerService.models,pu([this.stlViewerService.selectedColor$,this.stlViewerService.selectedModel$]).pipe(Gi(this.destroy$)).subscribe({next:([t,e])=>{console.log("Selected color:",t,"Selected model:",e),this.selectedColor.set(t),this.selectedModel.set(e),this.init3dView()},error:t=>console.error("Could not process model/color selection",t)})}ngAfterViewInit(){this.init3D()}ngOnDestroy(){this.stlViewerService.resetModelAndColor(),this.destroy$.next(),this.destroy$.complete(),this.renderer.dispose(),this.scene.clear()}init3D(){if(console.log("Initializing 3D view..."),this.createCamera(),this.createInitialScene(),this.addLightsToScene(),this.updateObjectPivotPoint(),this.loadStlFile(),this.setRendererConfig(),this.addOrbitControls(),!this.selectedModel()||this.selectedModel()===""){console.warn("No model selected, skipping 3D view initialization");return}else this.draw3DView()}draw3DView(){let t=this.productViewRef()?.nativeElement;t&&this.renderer?.domElement?t.contains(this.renderer.domElement)||t.appendChild(this.renderer.domElement):console.warn("#productView not found or renderer not ready")}createInitialScene(){this.scene=new xd,this.scene.background=new Xi(68498280656),this.scene.fog=new gd(4280821800,4,20)}createCamera(){this.camera=new Os(45,5/4,.1,100),this.camera.position.set(1.5,1,1.5)}addLightsToScene(){let t=new Md(Nd,M2,1);t.position.set(30,30,30),this.scene.add(t);let e=new Bl(Nd,2);e.position.set(0,20,10),e.castShadow=!0,e.shadow.camera.top=2,e.shadow.camera.bottom=-2,e.shadow.camera.left=-2,e.shadow.camera.right=2,this.scene.add(e);let i=new Bl(Nd,1);i.position.set(20,-30,-30);let s=new Bl(Nd,1);s.position.set(30,0,30),this.scene.add(i),this.scene.add(s)}updateObjectPivotPoint(){this.pivot=new to,this.scene.add(this.pivot)}loadStlFile(){let t=this.selectedModel(),e=this.selectedColor();if(!t||!e){console.warn("Missing model or color selection");return}let i=new bd({color:parseInt(e.replace("#",""),16)});new mm().load(t,a=>{this.mesh=new or(a,i),this.mesh.castShadow=!0,this.mesh.rotateX(-Math.PI/2),this.mesh.scale.set(.05,.05,.05),this.pivot.add(this.mesh)},a=>{console.log(`${a.loaded/a.total*100}% loaded`)},a=>{console.error("Error loading STL file",a)})}setRendererConfig(){this.renderer=new dm({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(500,400),this.renderer.shadowMap.enabled=!0,this.renderer.domElement.style.borderRadius="10px",this.renderer.setAnimationLoop(this.renderStatic.bind(this))}addOrbitControls(){let t=new fm(this.camera,this.renderer.domElement);t.target.set(0,.5,0),t.update()}renderStatic=()=>{this.pivot&&(this.pivot.rotation.y=0),this.renderer.render(this.scene,this.camera)};init3dView(){let t=document.querySelector("#productView");if(t?.hasChildNodes){let e=t.firstElementChild;e&&t.removeChild(e)}this.renderer&&(this.renderer.setAnimationLoop(null),this.renderer.dispose()),this.scene&&this.scene.clear(),this.init3D()}selectModel(t){this.stlViewerService.selectModel(t)}isActiveColor(t){return this.selectedColor()==t.code}selectColor(t){this.stlViewerService.selectColor(t)}resetDialog=()=>{this.stlViewerService.resetModelAndColor()};static \u0275fac=function(e){return new(e||n)(Fi(gm))};static \u0275cmp=li({type:n,selectors:[["stlviewer-dialog"]],viewQuery:function(e,i){e&1&&_u(i.productViewRef,fk,5),e&2&&bu()},decls:16,vars:4,consts:[["productView",""],["title","STL Viewer","type","stlviewer",1,"pane"],[1,"text-center"],[1,"fst-italic"],[1,"text-center","fst-italic"],[1,"model-thumbnails","d-flex","flex-wrap","justify-content-center"],[3,"src","selected"],["id","productView",1,"mt-4","mx-4"],[1,"color-picker","d-flex","flex-wrap","justify-content-center","my-3"],["class","color-circle",3,"backgroundColor","selected","disabled","click",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-center"],["label","\u{1F9F9} Reset options",3,"action"],[3,"click","src"],[1,"color-circle",3,"click"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",1)(1,"p",2),Ae(2," Select a model from the list below. "),Ue(3,"br"),Xt(4,"span",3),Ae(5,"Use your mouse to rotate, zoom, and pan the object."),Jt()(),Ue(6,"p",4),Xt(7,"div",5),fr(8,gk,1,3,"img",6,mk),Jt(),Ue(10,"div",7,0),Xt(12,"div",8),ji(13,xk,1,6,"div",9),Jt(),Xt(14,"div",10),Ue(15,"cv-button",11),Jt()()),e&2&&(_e(8),mr(i.modelList),_e(5),qe("ngForOf",i.colors),_e(2),Bn("disabled",!i.selectedModel()),qe("action",i.resetDialog))},dependencies:[nn,On,Su,rr],styles:[".model-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:8px;margin:4px;cursor:pointer;border:2px solid transparent}.model-thumbnails[_ngcontent-%COMP%]   img.selected[_ngcontent-%COMP%]{border-color:var(--cv-blue)}.color-picker[_ngcontent-%COMP%]{gap:8px;margin-top:12px}.color-circle[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:2px solid #ccc;cursor:pointer}.selected[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{border-color:var(--cv-blue)}.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}#productView[_ngcontent-%COMP%]{box-shadow:0 0 5px var(--cv-grey);border-radius:10px}"]})};var vm=class n{constructor(t,e){this.launcherService=t;this.renderer=e}closeDialog(){this.launcherService.closeDialog(1)}serveCV=()=>{let t=this.renderer.createElement("a");t.setAttribute("target","_blank"),t.setAttribute("href","/docs/rv_cv.pdf"),t.click(),t.remove()};static \u0275fac=function(e){return new(e||n)(Fi(Vn),Fi(ul))};static \u0275cmp=li({type:n,selectors:[["about-me-dialog"]],decls:16,vars:1,consts:[["title","About Me","type","about-me",1,"pane"],[1,"d-flex","flex-column","align-items-center","p-3"],[1,"blurb"],["id","avatar","src","/images/avatar.jpg"],["id","titleBlurb"],[1,"blurb2"],[1,"intro"],[1,"intro",2,"font-style","italic"],["label","\u{1F4BE} Download CV",3,"action"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"div",1)(2,"div",2),Ue(3,"img",3),Xt(4,"h1"),Ae(5,"Rob Vandelinder"),Jt(),Xt(6,"p",4),Ae(7,"Turning ideas into reality"),Jt()(),Xt(8,"div",5)(9,"p",6)(10,"span"),Ae(11,"Welcome to my portfolio!"),Jt(),Ae(12," I\u2019m a passionate Full Stack Developer specializing in creating robust web and mobile applications along with innovative user experiences. This site is a showcase of my skills, projects, and the journey I\u2019ve taken as a developer. "),Jt(),Xt(13,"p",7),Ae(14," Start exploring to see how I can contribute to your team! "),Jt()(),Ue(15,"cv-button",8),Jt()()),e&2&&(_e(15),qe("action",i.serveCV))},dependencies:[nn,rr],styles:[".blurb[_ngcontent-%COMP%]{padding:16px 32px 8px;transition:all .2s ease-in-out;max-width:1200px}h1[_ngcontent-%COMP%]{margin:32px 0 0;color:var(--cv-blue);font-family:var(--serif);font-weight:700;font-size:3.5rem;text-align:center}#titleBlurb[_ngcontent-%COMP%]{margin-top:0;color:var(--cv-black);font-family:var(--title-blurb-font);font-size:1.5rem;font-style:italic;text-align:center}#avatar[_ngcontent-%COMP%]{height:var(--avatar-size);border-radius:50%;margin-left:50%;transform:translate(-50%);-ms-transform:translateX(-50%)}.blurb2[_ngcontent-%COMP%]{padding:24px 32px 8px;margin:32px;max-width:1200px;transition:.25s ease}.intro[_ngcontent-%COMP%]{color:var(--cv-black);font-size:1.25rem;text-align:center}span[_ngcontent-%COMP%]{font-weight:700}avatar-header[_ngcontent-%COMP%]{max-width:600px}"]})};var _m=class n{constructor(t){this.launcherService=t}closeDialog(){this.launcherService.closeDialog(7)}static \u0275fac=function(e){return new(e||n)(Fi(Vn))};static \u0275cmp=li({type:n,selectors:[["help-dialog"]],decls:12,vars:0,consts:[["title","Help","type","help",1,"pane"],["id","size-wrapper"],[1,"display-6","text-center"],[1,"mt-3","text-center"],["id","list-wrapper"],[1,"mt-3"],[1,"mt-2"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"div",1)(2,"div",2),Ae(3,"Help"),Jt(),Xt(4,"p",3),Ae(5," This app is designed to be intuitive and user-friendly. If you have any questions or need assistance, please refer to the following sections: "),Jt(),Xt(6,"div",4)(7,"ul",5)(8,"li"),Ae(9," Navigate easily through the portfolio app using a familiar desktop-style dock. "),Jt(),Xt(10,"li",6),Ae(11,' Launch "apps" with a click, minimize windows to keep your workspace clean, and return to the home screen to close all open dialogs at once. '),Jt()()()()())},dependencies:[nn],styles:["#list-wrapper[_ngcontent-%COMP%]{max-width:80%;transform:translate(-50%);left:50%;position:relative;font-style:italic}#size-wrapper[_ngcontent-%COMP%]{max-width:500px}"]})};var bm=class n{constructor(t){this.launcherService=t}closeDialog(){this.launcherService.closeDialog(0)}static \u0275fac=function(e){return new(e||n)(Fi(Vn))};static \u0275cmp=li({type:n,selectors:[["about-app-dialog"]],decls:6,vars:0,consts:[["title","About","type","about",1,"pane"],["id","size-wrapper"],[1,"display-6","text-center"],[1,"mt-3","text-center"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"div",1)(2,"div",2),Ae(3,"About this App"),Jt(),Xt(4,"p",3),Ae(5," This custom-built app showcases both my technical skills and creative design abilities. Explore interactive project demos, access direct downloads of my resume and skills summary, and experience the functionality I bring to full-stack development. "),Jt()()())},dependencies:[nn],styles:["#size-wrapper[_ngcontent-%COMP%]{max-width:400px}"]})};function bk(n,t){n&1&&(Xt(0,"span"),Ae(1,"Allow location permissions for weather data!"),Jt())}function yk(n,t){n&1&&(Xt(0,"h5",2),Ae(1,"Loading weather data..."),Jt())}function wk(n,t){if(n&1&&(Xt(0,"h2",2),Ae(1,"Current Conditions"),Jt(),Ue(2,"img",3),Xt(3,"p",4),Ae(4),Jt(),Xt(5,"p",5),Ae(6),yu(7,"number"),yu(8,"number"),Jt(),Xt(9,"p",6),Ae(10),yu(11,"number"),Jt(),Ue(12,"cv-button",7)),n&2){let e,i,s,a,h=$e();_e(2),vu("src",(e=h.forecastData())==null||e.current==null||e.current.condition==null?null:e.current.condition.icon,dl),_e(2),Ss(" Currently ",(i=h.forecastData())==null||i.current==null||i.current.condition==null?null:i.current.condition.text," "),_e(2),Jm(" It is ",wu(7,7,(s=h.forecastData())==null||s.current==null?null:s.current.temp_c,"1.0-0"),"c, but feels like ",wu(8,10,(s=h.forecastData())==null||s.current==null?null:s.current.feelslike_c,"1.0-0"),"c "),_e(4),Jm(" The wind is blowing ",(a=h.forecastData())==null||a.current==null?null:a.current.wind_dir," at ",wu(11,13,(a=h.forecastData())==null||a.current==null?null:a.current.wind_kph,"1.0-0")," kph "),_e(2),qe("action",h.refreshWeather)}}var ym=class n{constructor(t,e,i){this.launcherService=t;this.locationService=e;this.weatherService=i}destroy$=new pi;forecastData=Li(void 0);locationAllowed=Li(!1);isLoading=Iv(()=>!this.forecastData()&&this.hasRequestedWeather);hasRequestedWeather=!1;ngOnInit(){this.locationService.locationAllowed$.pipe(Gi(this.destroy$)).subscribe({next:t=>this.locationAllowed.set(t),error:t=>console.error("[WeatherDialogComponent] Location error:",t)}),this.weatherService.forecastData$.pipe(Gi(this.destroy$)).subscribe({next:t=>{this.forecastData.set(t)},error:t=>console.error("[WeatherDialogComponent] Forecast error:",t.message)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshWeather=()=>{this.forecastData.set(void 0),this.weatherService.fetchWeatherData()};closeDialog(){this.launcherService.closeDialog(19)}static \u0275fac=function(e){return new(e||n)(Fi(Vn),Fi(Cu),Fi(Au))};static \u0275cmp=li({type:n,selectors:[["weather-dialog"]],decls:5,vars:1,consts:[["title","Weather","type","weather",1,"pane"],["id","size-wrapper",1,"d-flex","flex-column","align-items-center"],[1,"text-center"],["id","conditions-icon",3,"src"],["id","current-conditions",1,"text-center","fw-bold"],["id","current-temperature",1,"text-center"],["id","current-wind",1,"text-center"],["label","\u{1F503} Refresh",3,"action"]],template:function(e,i){e&1&&(Xt(0,"dialog-window",0)(1,"div",1),ji(2,bk,2,0,"span")(3,yk,2,0,"h5",2)(4,wk,13,16),Jt()()),e&2&&(_e(2),Qi(i.locationAllowed()?i.forecastData()===void 0?3:4:2))},dependencies:[nn,Fv,rr],styles:["#conditions-icon[_ngcontent-%COMP%]{height:128px}#current-conditions[_ngcontent-%COMP%]{font-size:1.5rem}#feels-like[_ngcontent-%COMP%], #current-temperature[_ngcontent-%COMP%]{font-size:1.25rem}#size-wrapper[_ngcontent-%COMP%]{min-width:500px}"]})};var Sk=["determinateSpinner"];function Mk(n,t){if(n&1&&(mu(),Xt(0,"svg",11),Ue(1,"circle",12),Jt()),n&2){let e=$e();Jn("viewBox",e._viewBox()),_e(),Wn("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Jn("r",e._circleRadius())}}var Tk=new Fn("mat-progress-spinner-default-options",{providedIn:"root",factory:Ck});function Ck(){return{diameter:T2}}var T2=100,Ak=10,C2=(()=>{class n{_elementRef=be(Dn);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=be(wo,{optional:!0}),i=be(Tk);this._noopAnimations=e==="NoopAnimations"&&!!i&&!i._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",i&&(i.color&&(this.color=this._defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=T2;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-Ak)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=li({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,s){if(i&1&&Ps(Sk,5),i&2){let a;as(a=os())&&(s._determinateCircle=a.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,s){i&2&&(Jn("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",s.mode==="determinate"?s.value:null)("mode",s.mode),fh("mat-"+s.color),Wn("width",s.diameter,"px")("height",s.diameter,"px")("--mdc-circular-progress-size",s.diameter+"px")("--mdc-circular-progress-active-indicator-width",s.diameter+"px"),Bn("_mat-animation-noopable",s._noopAnimations)("mdc-circular-progress--indeterminate",s.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",pa],diameter:[2,"diameter","diameter",pa],strokeWidth:[2,"strokeWidth","strokeWidth",pa]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,s){if(i&1&&(ji(0,Mk,2,8,"ng-template",null,0,Qm),Xt(2,"div",2,1),mu(),Xt(4,"svg",3),Ue(5,"circle",4),Jt()(),Km(),Xt(6,"div",5)(7,"div",6)(8,"div",7),xu(9,8),Jt(),Xt(10,"div",9),xu(11,8),Jt(),Xt(12,"div",10),xu(13,8),Jt()()()),i&2){let a=gh(1);_e(4),Jn("viewBox",s._viewBox()),_e(),Wn("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeDashOffset(),"px")("stroke-width",s._circleStrokeWidth(),"%"),Jn("r",s._circleRadius()),_e(4),qe("ngTemplateOutlet",a),_e(2),qe("ngTemplateOutlet",a),_e(2),qe("ngTemplateOutlet",a)}},dependencies:[Rv],styles:[`.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return n})();var A2=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Tn({type:n});static \u0275inj=Mn({imports:[Ys]})}return n})();var Ek=["alarmAudio"],Gl=n=>({active:n});function kk(n,t){if(n&1){let e=cn();Xt(0,"div",8),Ue(1,"mat-progress-spinner",9),Xt(2,"div",10)(3,"span",11),Ae(4),Jt()()(),Xt(5,"div",12)(6,"button",13),ii("click",function(){Ti(e);let s=$e();return Ci(s.togglePauseOrStart())}),Ae(7),Jt(),Xt(8,"button",14),ii("click",function(){Ti(e);let s=$e();return Ci(s.resetTimer())}),Ae(9," Reset "),Jt()()}if(n&2){let e=$e();_e(),qe("value",e.progressPercent),_e(3),us(e.timeRemaining),_e(2),qe("disabled",e.timerCompleted||e.isReset),_e(),Ss(" ",e.isPaused?"Resume":e.isRunning?"Pause":"Start"," "),_e(),qe("ngClass",Qn(6,Gl,e.timerCompleted))("disabled",e.isReset||e.isRunning)}}function Ik(n,t){if(n&1){let e=cn();Xt(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18),Ae(4,"\u23F0 Timer Complete!"),Jt(),Xt(5,"button",19),ii("click",function(){Ti(e);let s=$e();return Ci(s.showToast=!1)}),Jt()()()()}}var wm=class n{alarmAudioRef=gu("alarmAudio");showToast=!1;selectedTimerIndex=Li(void 0);timer;isPaused=!1;isRunning=!1;isReset=!0;timerCompleted=!1;maxDuration=Li(0);timerMap={0:3e4,1:6e4,2:3e5,3:9e5,4:18e5,5:36e5};time=Li(0);handleTimerComplete(){this.timerCompleted=!0,this.showToast=!0,setTimeout(()=>{this.showToast=!1},2500);let t=this.alarmAudioRef()?.nativeElement;t&&(t.currentTime=0,t.play().catch(e=>{console.warn("Audio failed to play:",e.message)}))}selectTimer(t){this.selectedTimerIndex.set(t),this.time.set(this.timerMap[t]),this.maxDuration.set(this.timerMap[t]),this.isReset=!1}activeTimer(t){return this.selectedTimerIndex()===t}get timeRemaining(){let t=Math.floor(this.time()/1e3/60<<0),e=Math.floor(this.time()/1e3%60);return e<10?`${t}:0${e}`:`${t}:${e}`}startTimer(){this.isRunning||(this.isPaused=!1,this.isRunning=!0,this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>{let e=this.time()-1e3;this.time.set(e),e<=0&&(clearInterval(this.timer),this.isRunning=!1,this.handleTimerComplete())},1e3))}pauseTimer(){this.isRunning&&(this.isPaused=!0,this.isRunning=!1,clearInterval(this.timer))}togglePause(){this.isPaused?this.startTimer():this.pauseTimer()}stopTimer(){clearTimeout(this.timer),this.isRunning=!1,this.isPaused=!1}resetTimer(){clearInterval(this.timer),this.isRunning=!1,this.isPaused=!1,this.selectedTimerIndex.set(void 0),this.time.set(0),this.isReset=!0,this.timerCompleted=!1}get maxTime(){return this.maxDuration()}get progressPercent(){return this.time()/this.maxDuration()*100}togglePauseOrStart(){this.isRunning?this.togglePause():this.startTimer()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=li({type:n,selectors:[["timer-dialog"]],viewQuery:function(e,i){e&1&&_u(i.alarmAudioRef,Ek,5),e&2&&bu()},decls:28,vars:26,consts:[["alarmAudio",""],["title","Timer","type","timer",1,"pane"],["id","size-wrapper"],[1,"d-flex","flex-row"],[1,"flex-fill"],[1,"btn","timer-btn",3,"click","disabled","ngClass"],["class","toast-container position-fixed top-0 p-3",4,"ngIf"],["src","sounds/desk-bell.mp3","type","audio/mpeg"],["id","spinner-wrapper",1,"d-flex","justify-content-center"],["diameter","300","id","spinner",3,"value"],["id","timer-text-wrapper",1,"position-absolute"],["id","timer-text",1,"my-3","display-6","fw-bold"],[1,"d-flex","flex-column","align-items-center","mt-4"],[1,"btn","control-btn",3,"click","disabled"],[1,"btn","control-btn","mt-2",3,"click","ngClass","disabled"],[1,"toast-container","position-fixed","top-0","p-3"],["role","alert",1,"toast","show","align-items-center","text-white","border-0"],[1,"d-flex"],[1,"toast-body"],["type","button",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"]],template:function(e,i){if(e&1){let s=cn();Xt(0,"dialog-window",1)(1,"div",2)(2,"div",3),Ue(3,"div",4),Xt(4,"button",5),ii("click",function(){return Ti(s),Ci(i.selectTimer(0))}),Ae(5," 30 sec "),Jt(),Ue(6,"div",4),Xt(7,"button",5),ii("click",function(){return Ti(s),Ci(i.selectTimer(1))}),Ae(8," 1 min "),Jt(),Ue(9,"div",4),Xt(10,"button",5),ii("click",function(){return Ti(s),Ci(i.selectTimer(2))}),Ae(11," 5 min "),Jt(),Ue(12,"div",4),Xt(13,"button",5),ii("click",function(){return Ti(s),Ci(i.selectTimer(3))}),Ae(14," 15 min "),Jt(),Ue(15,"div",4),Xt(16,"button",5),ii("click",function(){return Ti(s),Ci(i.selectTimer(4))}),Ae(17," 30 min "),Jt(),Ue(18,"div",4),Xt(19,"button",5),ii("click",function(){return Ti(s),Ci(i.selectTimer(5))}),Ae(20," 60 min "),Jt(),Ue(21,"div",4),Jt(),ji(22,kk,10,8),Jt()(),ji(23,Ik,6,0,"div",6),Xt(24,"audio",null,0),Ue(26,"source",7),Ae(27,` Your browser does not support the audio element.
`),Jt()}e&2&&(_e(4),qe("disabled",i.isRunning||!i.isReset)("ngClass",Qn(14,Gl,i.activeTimer(0))),_e(3),qe("disabled",i.isRunning||!i.isReset)("ngClass",Qn(16,Gl,i.activeTimer(1))),_e(3),qe("disabled",i.isRunning||!i.isReset)("ngClass",Qn(18,Gl,i.activeTimer(2))),_e(3),qe("disabled",i.isRunning||!i.isReset)("ngClass",Qn(20,Gl,i.activeTimer(3))),_e(3),qe("disabled",i.isRunning||!i.isReset)("ngClass",Qn(22,Gl,i.activeTimer(4))),_e(3),qe("disabled",i.isRunning||!i.isReset)("ngClass",Qn(24,Gl,i.activeTimer(5))),_e(3),Qi(i.isReset?-1:22),_e(),qe("ngIf",i.showToast))},dependencies:[nn,On,fa,ma,A2,C2],styles:["#size-wrapper[_ngcontent-%COMP%]{width:600px}.timer-btn[_ngcontent-%COMP%], .control-btn[_ngcontent-%COMP%]{border:1px solid var(--cv-blue);color:var(--cv-blue)}.timer-btn[_ngcontent-%COMP%]:hover, .control-btn[_ngcontent-%COMP%]:hover{background-color:var(--cv-blue);color:#fff}.timer-btn[_ngcontent-%COMP%]:active{color:#fff}.active[_ngcontent-%COMP%]{border:1px solid var(--cv-blue);background-color:var(--cv-blue);color:#fff}#progress-bar[_ngcontent-%COMP%]{background-color:#e0e0e0;color:var(--cv-blue)!important;height:16px}.toast-container[_ngcontent-%COMP%]{margin-top:16px;transform:translate(-50%)}.toast[_ngcontent-%COMP%]{background-color:var(--cv-blue)}#timer-text-wrapper[_ngcontent-%COMP%]{margin-top:108px;color:var(--cv-blue);text-shadow:0px 0px 3px var(--cv-white),0px 0px 16px #fff}#timer-text[_ngcontent-%COMP%]{width:100%;font-size:5rem}#spinner-wrapper[_ngcontent-%COMP%]{margin-top:32px}"]})};function Lk(n,t){if(n&1){let e=cn();Xt(0,"about-app-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("about"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("about"))}}function Dk(n,t){if(n&1){let e=cn();Xt(0,"help-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("help"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("help"))}}function Rk(n,t){if(n&1){let e=cn();Xt(0,"settings-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("settings"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("settings"))}}function Fk(n,t){if(n&1){let e=cn();Xt(0,"search-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("search"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("search"))}}function Nk(n,t){if(n&1){let e=cn();Xt(0,"todos-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("todo"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("todo"))}}function Bk(n,t){if(n&1){let e=cn();Xt(0,"notes-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("notes"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("notes"))}}function Ok(n,t){if(n&1){let e=cn();Xt(0,"stlviewer-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("stlviewer"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("stlviewer"))}}function Vk(n,t){if(n&1){let e=cn();Xt(0,"weather-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("weather"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("weather"))}}function zk(n,t){if(n&1){let e=cn();Xt(0,"about-me-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("aboutMe"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("aboutMe"))}}function Uk(n,t){if(n&1){let e=cn();Xt(0,"skills-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("skills"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("skills"))}}function Wk(n,t){if(n&1){let e=cn();Xt(0,"projects-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("projects"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("projects"))}}function Hk(n,t){if(n&1){let e=cn();Xt(0,"education-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("education"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("education"))}}function Xk(n,t){if(n&1){let e=cn();Xt(0,"timer-dialog",2),ii("mousedown",function(){Ti(e);let s=$e();return Ci(s.bringToFront("timer"))}),Jt()}if(n&2){let e=$e();Wn("z-index",e.getZIndex("timer"))}}var P2=class n{constructor(t,e,i,s){this.launcherService=t;this.locationService=e;this.weatherService=i;this.settingsService=s}destroy$=new pi;useDarkMode=Li(void 0);openApps=Li(void 0);highestZIndex=100;windowZIndices=new Map([["home",100],["about",101],["help",102],["skills",103],["projects",104],["education",105],["search",106],["todo",107],["notes",108],["stlviewer",109],["settings",110],["aboutMe",112],["weather",113],["timer",114]]);ngOnInit(){this.openApps.set(this.launcherService.initialAppState),this.launcherService.openApps$.pipe(Gi(this.destroy$)).subscribe({next:t=>this.openApps.set(t),error:t=>console.log(t.message)}),this.locationService.location$.pipe(Gi(this.destroy$),Er(t=>t===void 0)).subscribe(()=>{this.locationService.processUserLocation()}),this.settingsService.enableWeather$.pipe(Gi(this.destroy$)).subscribe({next:t=>{t&&this.weatherService.forecastData$.pipe(Gi(this.destroy$)).subscribe({next:e=>{e||this.weatherService.fetchWeatherData()},error:e=>console.error("[WeatherDialogComponent] Forecast error:",e.message)})},error:t=>console.log(t.message)})}ngAfterViewInit(){VANTA.CLOUDS({el:"#bg",mouseControls:!1,touchControls:!1,gyroControls:!1,minHeight:200,minWidth:200})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getDialogState(t){return this.openApps()[t]}bringToFront(t){this.highestZIndex++,this.windowZIndices.set(t,this.highestZIndex)}getZIndex(t){return this.windowZIndices.get(t)??1}static \u0275fac=function(e){return new(e||n)(Fi(Vn),Fi(Cu),Fi(Au),Fi(Tu))};static \u0275cmp=li({type:n,selectors:[["app-home"]],decls:14,vars:13,consts:[["id","bg",1,"h-100","w-100","d-flex","flex-column","justify-content-center","align-items-center"],[3,"z-index"],[3,"mousedown"]],template:function(e,i){e&1&&(Xt(0,"section",0),ji(1,Lk,1,2,"about-app-dialog",1)(2,Dk,1,2,"help-dialog",1)(3,Rk,1,2,"settings-dialog",1)(4,Fk,1,2,"search-dialog",1)(5,Nk,1,2,"todos-dialog",1)(6,Bk,1,2,"notes-dialog",1)(7,Ok,1,2,"stlviewer-dialog",1)(8,Vk,1,2,"weather-dialog",1)(9,zk,1,2,"about-me-dialog",1)(10,Uk,1,2,"skills-dialog",1)(11,Wk,1,2,"projects-dialog",1)(12,Hk,1,2,"education-dialog",1)(13,Xk,1,2,"timer-dialog",1),Jt()),e&2&&(_e(),Qi(i.getDialogState("showAboutAppDialog")?1:-1),_e(),Qi(i.getDialogState("showHelpDialog")?2:-1),_e(),Qi(i.getDialogState("showSettingsDialog")?3:-1),_e(),Qi(i.getDialogState("showSearchApp")?4:-1),_e(),Qi(i.getDialogState("showTodoApp")?5:-1),_e(),Qi(i.getDialogState("showNotesApp")?6:-1),_e(),Qi(i.getDialogState("show3dViewerApp")?7:-1),_e(),Qi(i.getDialogState("showWeatherApp")?8:-1),_e(),Qi(i.getDialogState("showAboutMeDialog")?9:-1),_e(),Qi(i.getDialogState("showSkillsDialog")?10:-1),_e(),Qi(i.getDialogState("showProjectsDialog")?11:-1),_e(),Qi(i.getDialogState("showEducationDialog")?12:-1),_e(),Qi(i.getDialogState("showTimerDialog")?13:-1))},dependencies:[Ov,up,fp,mp,gp,vp,Sp,Pp,xm,vm,_m,bm,ym,wm],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0}.flex-fill[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%)}img[_ngcontent-%COMP%]{width:100vw;height:98vh;object-fit:cover}.hideImg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:0}#bg-img[_ngcontent-%COMP%]{height:100%;max-width:100vw}"]})};export{P2 as HomeComponent};
